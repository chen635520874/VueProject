/**
 * @license
 * Lo-Dash 1.2.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash -o ./dist/lodash.compat.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * Available under MIT license <http://lodash.com/license>
 */

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.

//     Backbone may be freely distributed under the MIT license.

/*
 RequireJS text 0.27.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/**
 * @license onOffBtnRequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/*! jQuery UI - v1.9.0 - 2012-10-15
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.datepicker.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */

/* Copyright (c) 2010-2012 Marcus Westin */

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/*!
 * mustache.js -
  Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/**
 * @license Highcharts JS v2.3.5 (2012-12-19)
 *
 * (c) 2009-2012 Torstein Hønsi
 *
 * License: www.highcharts.com/license
 */

/*!
 * jQuery blockUI plugin
 * Version 2.36 (16-NOV-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */

/*! Copyright 2012, Ben Lin (http://dreamerslab.com/)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 1.0.14
 *
 * Requires: jQuery 1.2.3 ~ 1.9.0
 */

/**
 * @summary     DataTables
 * @description Paginate, search and sort HTML tables
 * @version     1.9.4
 * @file        jquery.dataTables.js
 * @author      Allan Jardine (www.sprymedia.co.uk)
 * @contact     www.sprymedia.co.uk/contact
 *
 * @copyright Copyright 2008-2012 Allan Jardine, all rights reserved.
 *
 * This source file is free software, under either the GPL v2 license or a
 * BSD style license, available at:
 *   http://datatables.net/license_gpl2
 *   http://datatables.net/license_bsd
 * 
 * This source file is distributed in the hope that it will be useful, but 
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 * 
 * For details please refer to: http://www.datatables.net
 */

/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */

/*!
 * jQuery UI Core 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Mouse 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Slider 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Widget 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*
colpick Color Picker
Copyright 2013 Jose Vargas. Licensed under GPL license. Based on Stefan Petre's Color Picker www.eyecon.ro, dual licensed under the MIT and GPL licenses

For usage and examples: colpick.com/plugin
 */

/**
 * @preserve jQuery DateTimePicker plugin v2.2.9
 * @homepage http://xdsoft.net/jqplugins/datetimepicker/
 * (c) 2014, Chupurnov Valeriy.
 */

/*
 * Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 *
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */

/*
 * Copyright (C) 2004 Baron Schwartz <baron at sequent dot org>
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the
 * Free Software Foundation, version 2.1.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more
 * details.
 */

/*
 Version: core-1.0
 The MIT License: Copyright (c) 2012 LiosK.
*/

/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/

/*

© 2011 by Jerry Sievert

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

// Copyright (c) 2005  Tom Wu

function UUID(){}function hex2b64(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=b64map.charAt(n>>6)+b64map.charAt(n&63);t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=b64map.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=b64map.charAt(n>>2)+b64map.charAt((n&3)<<4));while((r.length&3)>0)r+=b64padchar;return r}function b64tohex(e){var t="",n,r=0,i;for(n=0;n<e.length;++n){if(e.charAt(n)==b64padchar)break;v=b64map.indexOf(e.charAt(n));if(v<0)continue;r==0?(t+=int2char(v>>2),i=v&3,r=1):r==1?(t+=int2char(i<<2|v>>4),i=v&15,r=2):r==2?(t+=int2char(i),t+=int2char(v>>2),i=v&3,r=3):(t+=int2char(i<<2|v>>4),t+=int2char(v&15),r=0)}return r==1&&(t+=int2char(i<<2)),t}function b64toBA(e){var t=b64tohex(e),n,r=new Array;for(n=0;2*n<t.length;++n)r[n]=parseInt(t.substring(2*n,2*n+2),16);return r}function BigInteger(e,t,n){e!=null&&("number"==typeof e?this.fromNumber(e,t,n):t==null&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,n,r,i,s){while(--s>=0){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=o&67108863}return i}function am2(e,t,n,r,i,s){var o=t&32767,u=t>>15;while(--s>=0){var a=this[e]&32767,f=this[e++]>>15,l=u*a+f*o;a=o*a+((l&32767)<<15)+n[r]+(i&1073741823),i=(a>>>30)+(l>>>15)+u*f+(i>>>30),n[r++]=a&1073741823}return i}function am3(e,t,n,r,i,s){var o=t&16383,u=t>>14;while(--s>=0){var a=this[e]&16383,f=this[e++]>>14,l=u*a+f*o;a=o*a+((l&16383)<<14)+n[r]+i,i=(a>>28)+(l>>14)+u*f,n[r++]=a&268435455}return i}function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var n=BI_RC[e.charCodeAt(t)];return n==null?-1:n}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else{if(t!=4){this.fromRadix(e,t);return}n=2}this.t=0,this.s=0;var r=e.length,i=!1,s=0;while(--r>=0){var o=n==8?e[r]&255:intAt(e,r);if(o<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var n=(1<<t)-1,r,i=!1,s="",o=this.t,u=this.DB-o*this.DB%t;if(o-->0){u<this.DB&&(r=this[o]>>u)>0&&(i=!0,s=int2char(r));while(o>=0)u<t?(r=(this[o]&(1<<u)-1)<<t-u,r|=this[--o]>>(u+=this.DB-t)):(r=this[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(s+=int2char(r))}return i?s:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;t=n-e.t;if(t!=0)return this.s<0?-t:t;while(--n>=0)if((t=this[n]-e[n])!=0)return t;return 0}function nbits(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u)t[u+s+1]=this[u]>>r|o,o=(this[u]&i)<<n;for(u=s-1;u>=0;--u)t[u]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function bnpSubTo(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function bnpMultiplyTo(e,t){var n=this.abs(),r=e.abs(),i=n.t;t.t=i+r.t;while(--i>=0)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,n){var r=e.abs();if(r.t<=0)return;var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=nbi());var s=nbi(),o=this.s,u=e.s,a=this.DB-nbits(r[r.t-1]);a>0?(r.lShiftTo(a,s),i.lShiftTo(a,n)):(r.copyTo(s),i.copyTo(n));var f=s.t,l=s[f-1];if(l==0)return;var c=l*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),h=this.FV/c,p=(1<<this.F1)/c,d=1<<this.F2,v=n.t,m=v-f,g=t==null?nbi():t;s.dlShiftTo(m,g),n.compareTo(g)>=0&&(n[n.t++]=1,n.subTo(g,n)),BigInteger.ONE.dlShiftTo(f,g),g.subTo(s,s);while(s.t<f)s[s.t++]=0;while(--m>=0){var y=n[--v]==l?this.DM:Math.floor(n[v]*h+(n[v-1]+d)*p);if((n[v]+=s.am(0,y,n,m,0,f))<y){s.dlShiftTo(m,g),n.subTo(g,n);while(n[v]<--y)n.subTo(g,n)}}t!=null&&(n.drShiftTo(f,t),o!=u&&BigInteger.ZERO.subTo(t,t)),n.t=f,n.clamp(),a>0&&n.rShiftTo(a,n),o<0&&BigInteger.ZERO.subTo(n,n)}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){while(e.t<=this.mt2)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e[t]&32767,r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e[n]>=e.DV)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var n=nbi(),r=nbi(),i=t.convert(this),s=nbits(e)-1;i.copyTo(n);while(--s>=0){t.sqrTo(n,r);if((e&1<<s)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}}return t.revert(n)}function bnModPowInt(e,t){var n;return e<256||t.isEven()?n=new Classic(t):n=new Montgomery(t),this.exp(e,n)}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;n=0;for(t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}function rng_seed_int(e){rng_pool[rng_pptr++]^=e&255,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}function rng_get_byte(){if(rng_state==null){rng_seed_time(),rng_state=prng_newstate(),rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function parseBigInt(e,t){return new BigInteger(e,t)}function linebrk(e,t){var n="",r=0;while(r+t<e.length)n+=e.substring(r,r+t)+"\n",r+=t;return n+e.substring(r,e.length)}function byte2Hex(e){return e<16?"0"+e.toString(16):e.toString(16)}function pkcs1pad2(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;var n=new Array,r=e.length-1;while(r>=0&&t>0){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=i&63|128,n[--t]=i>>6|192):(n[--t]=i&63|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;var s=new SecureRandom,o=new Array;while(t>2){o[0]=0;while(o[0]==0)s.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new BigInteger(n)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(e,t){e!=null&&t!=null&&e.length>0&&t.length>0?(this.n=parseBigInt(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){var t=pkcs1pad2(e,this.n.bitLength()+7>>3);if(t==null)return null;var n=this.doPublic(t);if(n==null)return null;var r=n.toString(16);return(r.length&1)==0?r:"0"+r}(function(e){function B(n){function wt(e){return e&&typeof e=="object"&&!qt(e)&&nt.call(e,"__wrapped__")?e:new Pt(e)}function Ct(e){var t=e.length,n=t>=a;if(n){var r={},i=-1;while(++i<t){var s=u+e[i];(r[s]||(r[s]=[])).push(e[i])}}return function(t){if(n){var i=u+t;return r[i]&&Qn(r[i],t)>-1}return Qn(e,t)>-1}}function kt(e){return e.charCodeAt(0)}function Lt(e,t){var n=e.index,r=t.index;e=e.criteria,t=t.criteria;if(e!==t){if(e>t||typeof e=="undefined")return 1;if(e<t||typeof t=="undefined")return-1}return n<r?-1:1}function At(e,t,n,r){function a(){var r=arguments,f=s?this:t;i||(e=t[o]),n.length&&(r=r.length?(r=mt.call(r),u?r.concat(n):n.concat(r)):n);if(this instanceof a){Ht.prototype=e.prototype,f=new Ht,Ht.prototype=null;var l=e.apply(f,r);return ln(l)?l:f}return e.apply(f,r)}var i=fn(e),s=!n,o=t;if(s){var u=r;n=t}else if(!i){if(!r)throw new V;t=e}return a}function Ot(){var e={shadowedProps:S,arrays:"isArray(iterable)",bottom:"",init:"iterable",loop:"",top:"",useHas:!0,useKeys:!!Ut};for(var t,n=0;t=arguments[n];n++)for(var r in t)e[r]=t[r];var i=e.args;e.firstArg=/^[^,]+/.exec(i)[0];var s=q("hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectTypes","return function("+i+") {\n"+St(e)+"\n}");return s(nt,It,qt,mn,Ut,wt,P)}function Mt(e){return"\\"+H[e]}function _t(e){return Wt[e]}function Dt(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function Pt(e){this.__wrapped__=e}function Ht(){}function Bt(e){var t=!1;if(!e||ot.call(e)!=O||!Et.argsClass&&It(e))return t;var n=e.constructor;return(fn(n)?n instanceof n:Et.nodeClass||!Dt(e))?Et.ownLast?(Gt(e,function(e,n,r){return t=nt.call(r,n),!1}),t===!0):(Gt(e,function(e,n){t=n}),t===!1||nt.call(e,t)):t}function jt(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,s=n-t||0,o=i(s<0?0:s);while(++r<s)o[r]=e[t+r];return o}function Ft(e){return Xt[e]}function It(e){return ot.call(e)==T}function $t(e,n,r,i,s,o){var u=e;typeof n=="function"&&(i=r,r=n,n=!1);if(typeof r=="function"){r=typeof i=="undefined"?r:wt.createCallback(r,i,1),u=r(u);if(typeof u!="undefined")return u;u=e}var a=ln(u);if(a){var f=ot.call(u);if(!D[f]||!Et.nodeClass&&Dt(u))return u;var l=qt(u)}if(!a||!n)return a?l?jt(u):Vt({},u):u;var c=bt[f];switch(f){case C:case k:return new c(+u);case A:case _:return new c(u);case M:return c(u.source,d.exec(u))}s||(s=[]),o||(o=[]);var h=s.length;while(h--)if(s[h]==e)return o[h];return u=l?c(u.length):{},l&&(nt.call(e,"index")&&(u.index=e.index),nt.call(e,"input")&&(u.input=e.input)),s.push(e),o.push(u),(l?An:Yt)(e,function(e,i){u[i]=$t(e,n,r,t,s,o)}),u}function Jt(e,t,n){return $t(e,!0,t,n)}function Qt(e,t,n){var r;return t=wt.createCallback(t,n),Yt(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Zt(e){var t=[];return Gt(e,function(e,n){fn(e)&&t.push(n)}),t.sort()}function en(e,t){return e?nt.call(e,t):!1}function tn(e){var t=-1,n=Ut(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function nn(e){return e===!0||e===!1||ot.call(e)==C}function rn(e){return e?typeof e=="object"&&ot.call(e)==k:!1}function sn(e){return e?e.nodeType===1:!1}function on(e){var t=!0;if(!e)return t;var n=ot.call(e),r=e.length;return n==N||n==_||(Et.argsClass?n==T:It(e))||n==O&&typeof r=="number"&&fn(e.splice)?!r:(Yt(e,function(){return t=!1}),t)}function un(e,t,n,r,i,s){var u=n===o;if(typeof n=="function"&&!u){n=wt.createCallback(n,r,2);var a=n(e,t);if(typeof a!="undefined")return!!a}if(e===t)return e!==0||1/e==1/t;var f=typeof e,l=typeof t;if(e===e&&(!e||f!="function"&&f!="object")&&(!t||l!="function"&&l!="object"))return!1;if(e==null||t==null)return e===t;var c=ot.call(e),h=ot.call(t);c==T&&(c=O),h==T&&(h=O);if(c!=h)return!1;switch(c){case C:case k:return+e==+t;case A:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case M:case _:return e==X(t)}var p=c==N;if(!p){if(nt.call(e,"__wrapped__ ")||nt.call(t,"__wrapped__"))return un(e.__wrapped__||e,t.__wrapped__||t,n,r,i,s);if(c!=O||!Et.nodeClass&&(Dt(e)||Dt(t)))return!1;var d=!Et.argsObject&&It(e)?z:e.constructor,v=!Et.argsObject&&It(t)?z:t.constructor;if(d!=v&&!(fn(d)&&d instanceof d&&fn(v)&&v instanceof v))return!1}i||(i=[]),s||(s=[]);var m=i.length;while(m--)if(i[m]==e)return s[m]==t;var g=0;a=!0,i.push(e),s.push(t);if(p){m=e.length,g=t.length,a=g==e.length;if(!a&&!u)return a;while(g--){var y=m,b=t[g];if(u){while(y--)if(a=un(e[y],b,n,r,i,s))break}else if(!(a=un(e[g],b,n,r,i,s)))break}return a}return Gt(t,function(t,o,u){if(nt.call(u,o))return g++,a=nt.call(e,o)&&un(e[o],t,n,r,i,s)}),a&&!u&&Gt(e,function(e,t,n){if(nt.call(n,t))return a=--g>-1}),a}function an(e){return ft(e)&&!lt(parseFloat(e))}function fn(e){return typeof e=="function"}function ln(e){return e?P[typeof e]:!1}function cn(e){return pn(e)&&e!=+e}function hn(e){return e===null}function pn(e){return typeof e=="number"||ot.call(e)==A}function vn(e){return e?P[typeof e]&&ot.call(e)==M:!1}function mn(e){return typeof e=="string"||ot.call(e)==_}function gn(e){return typeof e=="undefined"}function yn(e,t,n){var r=arguments,i=0,s=2;if(!ln(e))return e;if(n===o)var u=r[3],a=r[4],f=r[5];else a=[],f=[],typeof n!="number"&&(s=r.length),s>3&&typeof r[s-2]=="function"?u=wt.createCallback(r[--s-1],r[s--],2):s>2&&typeof r[s-1]=="function"&&(u=r[--s]);while(++i<s)(qt(r[i])?An:Yt)(r[i],function(t,n){var r,i,s=t,l=e[n];if(t&&((i=qt(t))||dn(t))){var c=a.length;while(c--)if(r=a[c]==t){l=f[c];break}if(!r){var h;if(u){s=u(l,t);if(h=typeof s!="undefined")l=s}h||(l=i?qt(l)?l:[]:dn(l)?l:{}),a.push(t),f.push(l),h||(l=yn(l,t,o,u,a,f))}}else u&&(s=u(l,t),typeof s=="undefined"&&(s=t)),typeof s!="undefined"&&(l=s);e[n]=l});return e}function bn(e,t,n){var r=typeof t=="function",i={};if(r)t=wt.createCallback(t,n);else var s=Z.apply($,mt.call(arguments,1));return Gt(e,function(e,n,o){if(r?!t(e,n,o):Qn(s,n)<0)i[n]=e}),i}function wn(e){var t=-1,n=Ut(e),r=n.length,s=i(r);while(++t<r){var o=n[t];s[t]=[o,e[o]]}return s}function En(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=Z.apply($,mt.call(arguments,1)),o=ln(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=wt.createCallback(t,n),Gt(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Sn(e){var t=-1,n=Ut(e),r=n.length,s=i(r);while(++t<r)s[t]=e[n[t]];return s}function xn(e){var t=-1,n=Z.apply($,mt.call(arguments,1)),r=n.length,s=i(r);Et.unindexedChars&&mn(e)&&(e=e.split(""));while(++t<r)s[t]=e[n[t]];return s}function Tn(e,t,n){var r=-1,i=e?e.length:0,s=!1;return n=(n<0?ht(0,i+n):n)||0,typeof i=="number"?s=(mn(e)?e.indexOf(t,n):Qn(e,t,n))>-1:zt(e,function(e){if(++r>=n)return!(s=e===t)}),s}function Nn(e,t,n){var r={};return t=wt.createCallback(t,n),An(e,function(e,n,i){n=X(t(e,n,i)),nt.call(r,n)?r[n]++:r[n]=1}),r}function Cn(e,t,n){var r=!0;t=wt.createCallback(t,n);if(qt(e)){var i=-1,s=e.length;while(++i<s)if(!(r=!!t(e[i],i,e)))break}else zt(e,function(e,n,i){return r=!!t(e,n,i)});return r}function kn(e,t,n){var r=[];t=wt.createCallback(t,n);if(qt(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}}else zt(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Ln(e,t,n){t=wt.createCallback(t,n);if(!qt(e)){var o;return zt(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}var r=-1,i=e.length;while(++r<i){var s=e[r];if(t(s,r,e))return s}}function An(e,t,n){if(t&&typeof n=="undefined"&&qt(e)){var r=-1,i=e.length;while(++r<i)if(t(e[r],r,e)===!1)break}else zt(e,t,n);return e}function On(e,t,n){var r={};return t=wt.createCallback(t,n),An(e,function(e,n,i){n=X(t(e,n,i)),(nt.call(r,n)?r[n]:r[n]=[]).push(e)}),r}function Mn(e,t){var n=mt.call(arguments,2),r=-1,s=typeof t=="function",o=e?e.length:0,u=i(typeof o=="number"?o:0);return An(e,function(e){u[++r]=(s?t:e[t]).apply(e,n)}),u}function _n(e,t,n){var r=-1,s=e?e.length:0,o=i(typeof s=="number"?s:0);t=wt.createCallback(t,n);if(qt(e))while(++r<s)o[r]=t(e[r],r,e);else zt(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function Dn(e,t,n){var r=-Infinity,i=r;if(!t&&qt(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u>i&&(i=u)}}else t=!t&&mn(e)?kt:wt.createCallback(t,n),zt(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function Pn(e,t,n){var r=Infinity,i=r;if(!t&&qt(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u<i&&(i=u)}}else t=!t&&mn(e)?kt:wt.createCallback(t,n),zt(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function Bn(e,t,n,r){var i=arguments.length<3;t=wt.createCallback(t,r,4);if(qt(e)){var s=-1,o=e.length;i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else zt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function jn(e,t,n,r){var i=e,s=e?e.length:0,o=arguments.length<3;if(typeof s!="number"){var u=Ut(e);s=u.length}else Et.unindexedChars&&mn(e)&&(i=e.split(""));return t=wt.createCallback(t,r,4),An(e,function(e,r,a){r=u?u[--s]:--s,n=o?(o=!1,i[r]):t(n,i[r],r,a)}),n}function Fn(e,t,n){return t=wt.createCallback(t,n),kn(e,function(e,n,r){return!t(e,n,r)})}function In(e){var t=-1,n=e?e.length:0,r=i(typeof n=="number"?n:0);return An(e,function(e){var n=et(vt()*(++t+1));r[t]=r[n],r[n]=e}),r}function qn(e){var t=e?e.length:0;return typeof t=="number"?t:Ut(e).length}function Rn(e,t,n){var r;t=wt.createCallback(t,n);if(qt(e)){var i=-1,s=e.length;while(++i<s)if(r=t(e[i],i,e))break}else zt(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function Un(e,t,n){var r=-1,s=e?e.length:0,o=i(typeof s=="number"?s:0);t=wt.createCallback(t,n),An(e,function(e,n,i){o[++r]={criteria:t(e,n,i),index:r,value:e}}),s=o.length,o.sort(Lt);while(s--)o[s]=o[s].value;return o}function zn(e){return e&&typeof e.length=="number"?Et.unindexedChars&&mn(e)?e.split(""):jt(e):Sn(e)}function Xn(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function Vn(e){var t=-1,n=e?e.length:0,r=Z.apply($,mt.call(arguments,1)),i=Ct(r),s=[];while(++t<n){var o=e[t];i(o)||s.push(o)}return s}function $n(e,t,n){var r=-1,i=e?e.length:0;t=wt.createCallback(t,n);while(++r<i)if(t(e[r],r,e))return r;return-1}function Jn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=-1;t=wt.createCallback(t,n);while(++s<i&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[0]}return jt(e,0,pt(ht(0,r),i))}}function Kn(e,t,n,r){var i=-1,s=e?e.length:0,o=[];typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1),n!=null&&(n=wt.createCallback(n,r));while(++i<s){var u=e[i];n&&(u=n(u,i,e)),qt(u)?rt.apply(o,t?u:Kn(u)):o.push(u)}return o}function Qn(e,t,n){var r=-1,i=e?e.length:0;if(typeof n=="number")r=(n<0?ht(0,i+n):n||0)-1;else if(n)return r=rr(e,t),e[r]===t?r:-1;while(++r<i)if(e[r]===t)return r;return-1}function Gn(e,t,n){if(!e)return[];var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=wt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return jt(e,0,pt(ht(0,i-r),i))}function Yn(e){var t=arguments,n=t.length,r={0:{}},i=-1,s=e?e.length:0,o=s>=a,f=[],l=f;e:while(++i<s){var c=e[i];if(o)var h=u+c,p=r[0][h]?!(l=r[0][h]):l=r[0][h]=[];if(p||Qn(l,c)<0){o&&l.push(c);var d=n;while(--d)if(!(r[d]||(r[d]=Ct(t[d])))(c))continue e;f.push(c)}}return f}function Zn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=wt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[i-1]}return jt(e,ht(0,i-r))}}function er(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?ht(0,r+n):pt(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function tr(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,s=ht(0,G((t-e)/n)),o=i(s);while(++r<s)o[r]=e,e+=n;return o}function nr(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=wt.createCallback(t,n);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:ht(0,t);return jt(e,r)}function rr(e,t,n,r){var i=0,s=e?e.length:i;n=n?wt.createCallback(n,r,1):Cr,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function ir(e){return qt(e)||(arguments[0]=e?mt.call(e):$),sr(Z.apply($,arguments))}function sr(e,t,n,r){var i=-1,s=e?e.length:0,o=[],f=o;typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1);var l=!t&&s>=a;if(l)var c={};n!=null&&(f=[],n=wt.createCallback(n,r));while(++i<s){var h=e[i],p=n?n(h,i,e):h;if(l)var d=u+p,v=c[d]?!(f=c[d]):f=c[d]=[];if(t?!i||f[f.length-1]!==p:v||Qn(f,p)<0)(n||l)&&f.push(p),o.push(h)}return o}function or(e){var t=-1,n=e?e.length:0,r=n?Dn(Hn(e,"length")):0,s=i(r);while(++t<n){var o=-1,u=e[t];while(++o<r)(s[o]||(s[o]=i(n)))[t]=u[o]}return s}function ur(e){return Vn(e,mt.call(arguments,1))}function ar(e){var t=-1,n=e?Dn(Hn(arguments,"length")):0,r=i(n);while(++t<n)r[t]=Hn(arguments,t);return r}function fr(e,t){var n=-1,r=e?e.length:0,i={};while(++n<r){var s=e[n];t?i[s]=t[n]:i[s[0]]=s[1]}return i}function lr(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function cr(e,t){return Et.fastBind||ut&&arguments.length>2?ut.call.apply(ut,arguments):At(e,t,mt.call(arguments,2))}function hr(e){var t=arguments.length>1?Z.apply($,mt.call(arguments,1)):Zt(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=cr(e[i],e)}return e}function pr(e,t){return At(e,t,mt.call(arguments,2),o)}function dr(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function vr(e,t,n){if(e==null)return Cr;var r=typeof e;if(r!="function"){if(r!="object")return function(t){return t[e]};var i=Ut(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=un(t[i[n]],e[i[n]],o)))break;return r}}return typeof t!="undefined"?n===1?function(n){return e.call(t,n)}:n===2?function(n,r){return e.call(t,n,r)}:n===4?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}:e}function mr(e,t,n){function f(){i=u=null,a&&(s=e.apply(o,r))}var r,i,s,o,u,a=!0;if(n===!0){var l=!0;a=!1}else n&&P[typeof n]&&(l=n.leading,a="trailing"in n?n.trailing:a);return function(){return r=arguments,o=this,Y(u),!i&&l?(i=!0,s=e.apply(o,r)):u=st(f,t),s}}function gr(e){var n=mt.call(arguments,1);return st(function(){e.apply(t,n)},1)}function yr(e,n){var r=mt.call(arguments,2);return st(function(){e.apply(t,r)},n)}function br(e,t){var n={};return function(){var r=u+(t?t.apply(this,arguments):arguments[0]);return nt.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function wr(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Er(e){return At(e,mt.call(arguments,1))}function Sr(e){return At(e,mt.call(arguments,1),null,o)}function xr(e,t,n){function l(){o=null,f&&(u=new I,i=e.apply(s,r))}var r,i,s,o,u=0,a=!0,f=!0;return n===!1?a=!1:n&&P[typeof n]&&(a="leading"in n?n.leading:a,f="trailing"in n?n.trailing:f),function(){var n=new I;!o&&!a&&(u=n);var f=t-(n-u);return r=arguments,s=this,f<=0?(Y(o),o=null,u=n,i=e.apply(s,r)):o||(o=st(l,f)),i}}function Tr(e,t){return function(){var n=[e];return rt.apply(n,arguments),t.apply(this,n)}}function Nr(e){return e==null?"":X(e).replace(b,_t)}function Cr(e){return e}function kr(e){An(Zt(e),function(t){var n=wt[t]=e[t];wt.prototype[t]=function(){var e=this.__wrapped__,t=[e];rt.apply(t,arguments);var r=n.apply(wt,t);return e&&typeof e=="object"&&e==r?this:new Pt(r)}})}function Lr(){return n._=K,this}function Or(e,t){return e==null&&t==null&&(t=1),e=+e||0,t==null&&(t=e,e=0),e+et(vt()*((+t||0)-e+1))}function Mr(e,n){var r=e?e[n]:t;return fn(r)?e[n]():r}function _r(e,n,r){var i=wt.templateSettings;e||(e=""),r=Kt({},r,i);var s=Kt({},r.imports,i.imports),o=Ut(s),u=Sn(s),a,h=0,d=r.interpolate||y,m="__p += '",g=W((r.escape||y).source+"|"+d.source+"|"+(d===v?p:y).source+"|"+(r.evaluate||y).source+"|$","g");e.replace(g,function(t,n,r,i,s,o){return r||(r=i),m+=e.slice(h,o).replace(w,Mt),n&&(m+="' +\n__e("+n+") +\n'"),s&&(a=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=o+t.length,t}),m+="';\n";var b=r.variable,E=b;E||(b="obj",m="with ("+b+") {\n"+m+"\n}\n"),m=(a?m.replace(f,""):m).replace(l,"$1").replace(c,"$1;"),m="function("+b+") {\n"+(E?"":b+" || ("+b+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var S="\n/*\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+x++ +"]")+"\n*/";try{var T=q(o,"return "+m+S).apply(t,u)}catch(N){throw N.source=m,N}return n?T(n):(T.source=m,T)}function Dr(e,t,n){e=(e=+e)>-1?e:0;var r=-1,s=i(e);t=wt.createCallback(t,n,1);while(++r<e)s[r]=t(r);return s}function Pr(e){return e==null?"":X(e).replace(h,Ft)}function Hr(e){var t=++s;return X(e==null?"":e)+t}function Br(e,t){return t(e),e}function jr(){return X(this.__wrapped__)}function Fr(){return this.__wrapped__}n=n?j.defaults(e.Object(),n,j.pick(e,E)):e;var i=n.Array,F=n.Boolean,I=n.Date,q=n.Function,R=n.Math,U=n.Number,z=n.Object,W=n.RegExp,X=n.String,V=n.TypeError,$=i(),J=z(),K=n._,Q=W("^"+X(J.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),G=R.ceil,Y=n.clearTimeout,Z=$.concat,et=R.floor,tt=Q.test(tt=z.getPrototypeOf)&&tt,nt=J.hasOwnProperty,rt=$.push,it=n.setImmediate,st=n.setTimeout,ot=J.toString,ut=Q.test(ut=ot.bind)&&ut,at=Q.test(at=i.isArray)&&at,ft=n.isFinite,lt=n.isNaN,ct=Q.test(ct=z.keys)&&ct,ht=R.max,pt=R.min,dt=n.parseInt,vt=R.random,mt=$.slice,gt=Q.test(n.attachEvent),yt=ut&&!/\n|true/.test(ut+gt),bt={};bt[N]=i,bt[C]=F,bt[k]=I,bt[O]=z,bt[A]=U,bt[M]=W,bt[_]=X;var Et=wt.support={};(function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments);Et.argsObject=arguments.constructor==z&&!(arguments instanceof i),Et.argsClass=It(arguments),Et.enumPrototypes=e.propertyIsEnumerable("prototype"),Et.fastBind=ut&&!yt,Et.ownLast=n[0]!="x",Et.nonEnumArgs=r!=0,Et.nonEnumShadows=!/valueOf/.test(n),Et.spliceObjects=($.splice.call(t,0,1),!t[0]),Et.unindexedChars="x"[0]+z("x")[0]!="xx";try{Et.nodeClass=ot.call(document)!=O||!!({toString:0}+"")}catch(s){Et.nodeClass=!0}})(1),wt.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:v,variable:"",imports:{_:wt}};var St=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";\n";e.arrays?(t+="var length = iterable.length; index = -1;\nif ("+e.arrays+") {  ",Et.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+"\n  }\n}\nelse {  "):Et.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+"\n    }\n  } else {  "),Et.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  ");if(e.useHas&&e.useKeys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? keys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",Et.enumPrototypes&&(t+="if (!(skipProto && index == 'prototype')) {\n  "),t+=e.loop,Et.enumPrototypes&&(t+="}\n"),t+="  }  ";else{t+="\n  for (index in iterable) {";if(Et.enumPrototypes||e.useHas)t+="\n    if (",Et.enumPrototypes&&(t+="!(skipProto && index == 'prototype')"),Et.enumPrototypes&&e.useHas&&(t+=" && "),e.useHas&&(t+="hasOwnProperty.call(iterable, index)"),t+=") {    ";t+=e.loop+";    ";if(Et.enumPrototypes||e.useHas)t+="\n    }";t+="\n  }    ";if(Et.nonEnumShadows){t+="\n\n  var ctor = iterable.constructor;\n      ";for(var n=0;n<7;n++)t+="\n  index = '"+e.shadowedProps[n]+"';\n  if (",e.shadowedProps[n]=="constructor"&&(t+="!(ctor && ctor.prototype === iterable) && "),t+="hasOwnProperty.call(iterable, index)) {\n    "+e.loop+"\n  }      "}}if(e.arrays||Et.nonEnumArgs)t+="\n}";return t+=e.bottom+";\nreturn result",t},xt={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},Tt={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},Nt={top:"if (!objectTypes[typeof iterable]) return result;\n"+Tt.top,arrays:!1};Pt.prototype=wt.prototype,Et.argsClass||(It=function(e){return e?nt.call(e,"callee"):!1});var qt=at||function(e){return e?typeof e=="object"&&ot.call(e)==N:!1},Rt=Ot({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)",arrays:!1}),Ut=ct?function(e){return ln(e)?Et.enumPrototypes&&typeof e=="function"||Et.nonEnumArgs&&e.length&&It(e)?Rt(e):ct(e):[]}:Rt,zt=Ot(Tt),Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xt=tn(Wt),Vt=Ot(xt,{top:xt.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = lodash.createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Kt=Ot(xt),Gt=Ot(Tt,Nt,{useHas:!1}),Yt=Ot(Tt,Nt);fn(/x/)&&(fn=function(e){return typeof e=="function"&&ot.call(e)==L});var dn=tt?function(e){if(!e||ot.call(e)!=O||!Et.argsClass&&It(e))return!1;var t=e.valueOf,n=typeof t=="function"&&(n=tt(t))&&tt(n);return n?e==n||tt(e)==n:Bt(e)}:Bt,Hn=_n,Wn=kn;yt&&r&&typeof it=="function"&&(gr=cr(it,n));var Ar=dt(m+"08")==8?dt:function(e,t){return dt(mn(e)?e.replace(g,""):e,t||0)};return wt.after=lr,wt.assign=Vt,wt.at=xn,wt.bind=cr,wt.bindAll=hr,wt.bindKey=pr,wt.compact=Xn,wt.compose=dr,wt.countBy=Nn,wt.createCallback=vr,wt.debounce=mr,wt.defaults=Kt,wt.defer=gr,wt.delay=yr,wt.difference=Vn,wt.filter=kn,wt.flatten=Kn,wt.forEach=An,wt.forIn=Gt,wt.forOwn=Yt,wt.functions=Zt,wt.groupBy=On,wt.initial=Gn,wt.intersection=Yn,wt.invert=tn,wt.invoke=Mn,wt.keys=Ut,wt.map=_n,wt.max=Dn,wt.memoize=br,wt.merge=yn,wt.min=Pn,wt.omit=bn,wt.once=wr,wt.pairs=wn,wt.partial=Er,wt.partialRight=Sr,wt.pick=En,wt.pluck=Hn,wt.range=tr,wt.reject=Fn,wt.rest=nr,wt.shuffle=In,wt.sortBy=Un,wt.tap=Br,wt.throttle=xr,wt.times=Dr,wt.toArray=zn,wt.union=ir,wt.uniq=sr,wt.unzip=or,wt.values=Sn,wt.where=Wn,wt.without=ur,wt.wrap=Tr,wt.zip=ar,wt.zipObject=fr,wt.collect=_n,wt.drop=nr,wt.each=An,wt.extend=Vt,wt.methods=Zt,wt.object=fr,wt.select=kn,wt.tail=nr,wt.unique=sr,kr(wt),wt.clone=$t,wt.cloneDeep=Jt,wt.contains=Tn,wt.escape=Nr,wt.every=Cn,wt.find=Ln,wt.findIndex=$n,wt.findKey=Qt,wt.has=en,wt.identity=Cr,wt.indexOf=Qn,wt.isArguments=It,wt.isArray=qt,wt.isBoolean=nn,wt.isDate=rn,wt.isElement=sn,wt.isEmpty=on,wt.isEqual=un,wt.isFinite=an,wt.isFunction=fn,wt.isNaN=cn,wt.isNull=hn,wt.isNumber=pn,wt.isObject=ln,wt.isPlainObject=dn,wt.isRegExp=vn,wt.isString=mn,wt.isUndefined=gn,wt.lastIndexOf=er,wt.mixin=kr,wt.noConflict=Lr,wt.parseInt=Ar,wt.random=Or,wt.reduce=Bn,wt.reduceRight=jn,wt.result=Mr,wt.runInContext=B,wt.size=qn,wt.some=Rn,wt.sortedIndex=rr,wt.template=_r,wt.unescape=Pr,wt.uniqueId=Hr,wt.all=Cn,wt.any=Rn,wt.detect=Ln,wt.foldl=Bn,wt.foldr=jn,wt.include=Tn,wt.inject=Bn,Yt(wt,function(e,t){wt.prototype[t]||(wt.prototype[t]=function(){var t=[this.__wrapped__];return rt.apply(t,arguments),e.apply(wt,t)})}),wt.first=Jn,wt.last=Zn,wt.take=Jn,wt.head=Jn,Yt(wt,function(e,t){wt.prototype[t]||(wt.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return t==null||n&&typeof t!="function"?r:new Pt(r)})}),wt.VERSION="1.2.1",wt.prototype.toString=jr,wt.prototype.value=Fr,wt.prototype.valueOf=Fr,zt(["join","pop","shift"],function(e){var t=$[e];wt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),zt(["push","reverse","sort","unshift"],function(e){var t=$[e];wt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),zt(["concat","slice","splice"],function(e){var t=$[e];wt.prototype[e]=function(){return new Pt(t.apply(this.__wrapped__,arguments))}}),Et.spliceObjects||zt(["pop","shift","splice"],function(e){var t=$[e],n=e=="splice";wt.prototype[e]=function(){var e=this.__wrapped__,r=t.apply(e,arguments);return e.length===0&&delete e[0],n?new Pt(r):r}}),wt}var t,n=typeof exports=="object"&&exports,r=typeof module=="object"&&module&&module.exports==n&&module,i=typeof global=="object"&&global;if(i.global===i||i.window===i)e=i;var s=0,o={},u=+(new Date)+"",a=200,f=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,c=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/&(?:amp|lt|gt|quot|#39);/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,d=/\w*$/,v=/<%=([\s\S]+?)%>/g,m=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",g=RegExp("^["+m+"]*0+(?=.$)"),y=/($^)/,b=/[&<>"']/g,w=/['\n\r\t\u2028\u2029\\]/g,E=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],S=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=0,T="[object Arguments]",N="[object Array]",C="[object Boolean]",k="[object Date]",L="[object Function]",A="[object Number]",O="[object Object]",M="[object RegExp]",_="[object String]",D={};D[L]=!1,D[T]=D[N]=D[C]=D[k]=D[A]=D[O]=D[M]=D[_]=!0;var P={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},H={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},j=B();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=j,define("underscore",[],function(){return j})):n&&!n.nodeType?r?(r.exports=j)._=j:n._=j:e._=j})(this);var math=this.math={};math.avg=math.average=function(e,t){if(e&&e.length>0){t=t||0;var n=math.sumForMoney(e)/e.length;return parseFloat(n.toFixed(t))}return"--"},math.avgForMoney=function(e){if(e&&e.length>0){var t=math.sumForMoney(e)/e.length;return parseFloat(t.toFixed(2))}return"--"},math.sumForMoney=function(e,t){if(_.isArray(e)&&typeof e[0]=="number")var n=e;else var t=t||"value",n=_(e).pluck(t);var r=0;for(var i=0,s=n.length;i<s;i++)r+=n[i]-0;return parseFloat(r.toFixed(2))},math.median=function(e,t){if(!e||e.length==0)return"--";var e=e.slice(0),n=(e.length+1)/2,r=math.sort(e),i=r.length%2?r[n-1]:(r[n-1.5]+r[n-.5])/2;return t?parseFloat(i.toFixed(t)):Math.round(i)},math.pow=function(e,t){if(_.isNumber(e))return Math.pow(e,t);if(_.isArray(e))return _.map(e,function(e){return _.pow(e,t)})},math.scale=function(e,t){var t=t||1,n=_.max(e);return _.map(e,function(e){return e*(t/n)})},math.percent=function(e,t,n){var r=math.sum(e,null,1),t=t||2;return _.map(e,function(e){var i;return r!=0?i=parseFloat((e/r).toFixed(t)):i=0,n&&(i=math.toPercent(i,n)),i})},math.toPercent=function(e,t){return t=t||0,(Math.round(e*Math.pow(10,t+2))/Math.pow(10,t)).toFixed(t)+"%"},math.twoArraysDivide=function(e,t,n){var r=[],n=n||0;for(var i=0;i<e.length;i++)e[i]===0||t[i]===0?r[i]=0:r[i]=parseFloat((e[i]/t[i]).toFixed(n));return r},math.slope=function(e,t){return(t[1]-e[1])/(t[0]-e[0])},math.sort=function(e){return _.sortBy(e)},math.stdDeviation=math.sigma=function(e){return Math.sqrt(_(e).variance())},math.sum=function(e,t,n){if(_.isArray(e)&&typeof e[0]=="number")var r=e;else var t=t||"value",r=_(e).pluck(t);var i=0;for(var s=0,o=r.length;s<o;s++)i+=r[s]-0;return n?i:Math.round(i)},math.transpose=function(e){var t=[];return _(e).each(function(e,n){_(e).each(function(e,r){t[r]||(t[r]=[]),t[r][n]=e})}),t},math.variance=function(e){var t=_(e).mean(),n=function(e){return _(e-t).pow(2)};return _(e).chain().map(n).mean().value()},math.zscore=function(e,t){if(_.isArray(e)&&typeof e[0]=="number")var n=e;else var t=t||"value",n=_(e).pluck(t);var r=n.length,i=_(n).mean(),s=_(n).stdDeviation(),o=function(e){return(e-i)/s};return _(n).map(o)},math.movingAvg=function(e,t){var n,r,i=[];for(r=t-1;r<=e.length;r++)n=e.slice(r-t,r),n.length===t&&i.push(_.mean(n));return i},_.mixin(math),function(){var e=this,t=e.Backbone,n=Array.prototype,r=n.slice,i=n.splice,s;typeof exports!="undefined"?s=exports:s=e.Backbone={},s.VERSION="0.9.2";var o=e._;!o&&typeof require!="undefined"&&(o=require("underscore")),s.$=e.jQuery||e.Zepto||e.ender,s.noConflict=function(){return e.Backbone=t,this},s.emulateHTTP=!1,s.emulateJSON=!1;var u=/\s+/,a=s.Events={on:function(e,t,n){var r,i,s;if(!t)return this;e=e.split(u),r=this._callbacks||(this._callbacks={});while(i=e.shift())s=r[i]||(r[i]=[]),s.push(t,n);return this},off:function(e,t,n){var r,i,s,a;if(!(i=this._callbacks))return this;if(!(e||t||n))return delete this._callbacks,this;e=e?e.split(u):o.keys(i);while(r=e.shift()){if(!(s=i[r])||!t&&!n){delete i[r];continue}for(a=s.length-2;a>=0;a-=2)t&&s[a]!==t||n&&s[a+1]!==n||s.splice(a,2)}return this},trigger:function(e){var t,n,r,i,s,o,a,f;if(!(n=this._callbacks))return this;f=[],e=e.split(u);for(i=1,s=arguments.length;i<s;i++)f[i-1]=arguments[i];while(t=e.shift()){if(a=n.all)a=a.slice();if(r=n[t])r=r.slice();if(r)for(i=0,s=r.length;i<s;i+=2)r[i].apply(r[i+1]||this,f);if(a){o=[t].concat(f);for(i=0,s=a.length;i<s;i+=2)a[i].apply(a[i+1]||this,o)}}return this}};a.bind=a.on,a.unbind=a.off;var f=s.Model=function(e,t){var n;e||(e={}),t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(e=this.parse(e));if(n=o.result(this,"defaults"))e=o.extend({},n,e);this.attributes={},this._escapedAttributes={},this.cid=o.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=o.clone(this.attributes),this.initialize.apply(this,arguments)};o.extend(f.prototype,a,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return o.clone(this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=o.escape(n==null?"":""+n)},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s;o.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n||(n={});if(!r)return this;r instanceof f&&(r=r.attributes);if(n.unset)for(i in r)r[i]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var u=n.changes={},a=this.attributes,l=this._escapedAttributes,c=this._previousAttributes||{};for(i in r){s=r[i];if(!o.isEqual(a[i],s)||n.unset&&o.has(a,i))delete l[i],(n.silent?this._silent:u)[i]=!0;n.unset?delete a[i]:a[i]=s,!o.isEqual(c[i],s)||o.has(a,i)!==o.has(c,i)?(this.changed[i]=s,n.silent||(this._pending[i]=!0)):(delete this.changed[i],delete this._pending[i])}return n.silent||this.change(n),this},unset:function(e,t){return t=o.extend({},t,{unset:!0}),this.set(e,null,t)},clear:function(e){return e=o.extend({},e,{unset:!0}),this.set(o.clone(this.attributes),e)},fetch:function(e){e=e?o.clone(e):{};var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r,s),e))return!1;n&&n(t,r,e)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s;o.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?o.clone(n):{};if(n.wait){if(!this._validate(r,n))return!1;i=o.clone(this.attributes)}var u=o.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?u:n))return!1;if(!r&&!this.isValid())return!1;var a=this,f=n.success;n.success=function(e,t,i){s=!0;var u=a.parse(e,i);n.wait&&(u=o.extend(r||{},u));if(!a.set(u,n))return!1;f&&f(a,e,n)};var l=this.sync(this.isNew()?"create":"update",this,n);return!s&&n.wait&&(this.clear(u),this.set(i,u)),l},destroy:function(e){e=e?o.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e)};if(this.isNew())return e.success(),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||k();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var r=o.extend({},e.changes,this._silent);this._silent={};for(var n in r)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;while(!o.isEmpty(this._pending)){this._pending={},this.trigger("change",this,e);for(var n in this.changed){if(this._pending[n]||this._silent[n])continue;delete this.changed[n]}this._previousAttributes=o.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return e==null?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(o.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return o.clone(this._previousAttributes)},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error&&t.error(this,n,t),this.trigger("error",this,n,t),!1):!0}});var l=s.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&(t.parse&&(e=this.parse(e)),this.reset(e,{silent:!0,parse:t.parse}))};o.extend(l.prototype,a,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return s.sync.apply(this,arguments)},add:function(e,t){var n,r,s,u,a,f,l={},c={},h=[];t||(t={}),e=o.isArray(e)?e.slice():[e];for(n=0,s=e.length;n<s;n++){if(!(u=e[n]=this._prepareModel(e[n],t)))throw new Error("Can't add an invalid model to a collection");a=u.cid,f=u.id;if(l[a]||this._byCid[a]||f!=null&&(c[f]||this._byId[f])){h.push(n);continue}l[a]=c[f]=u}n=h.length;while(n--)h[n]=e.splice(h[n],1)[0];for(n=0,s=e.length;n<s;n++)(u=e[n]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=s,r=t.at!=null?t.at:this.models.length,i.apply(this.models,[r,0].concat(e));if(t.merge)for(n=0,s=h.length;n<s;n++)(u=this._byId[h[n].id])&&u.set(h[n],t);this.comparator&&t.at==null&&this.sort({silent:!0});if(t.silent)return this;for(n=0,s=this.models.length;n<s;n++){if(!l[(u=this.models[n]).cid])continue;t.index=n,u.trigger("add",u,this,t)}return this},remove:function(e,t){var n,r,i,s;t||(t={}),e=o.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){s=this.getByCid(e[n])||this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byCid[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return o.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return o.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),(!e||!e.silent)&&this.trigger("reset",this,e),this},pluck:function(e){return o.invoke(this.models,"get",e)},reset:function(e,t){for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return this._reset(),e&&this.add(e,o.extend({silent:!0},t)),(!t||!t.silent)&&this.trigger("reset",this,t),this},fetch:function(e){e=e?o.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){t[e.add?"add":"reset"](t.parse(r,s),e),n&&n(t,r,e)},this.sync("read",this,e)},create:function(e,t){var n=this;t=t?o.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},chain:function(){return o(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(n.attributes,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var c=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortedIndex","toArray","size","first","head","take","initial","rest","tail","last","without","indexOf","shuffle","lastIndexOf","isEmpty"];o.each(c,function(e){l.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),o[e].apply(o,t)}});var h=["groupBy","countBy","sortBy"];o.each(h,function(e){l.prototype[e]=function(t,n){var r=o.isFunction(t)?t:function(e){return e.get(t)};return o[e](this.models,r,n)}});var p=s.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},d=/:\w+/g,v=/\*\w+/g,m=/[-[\]{}()+?.,\\^$|#\s]/g;o.extend(p.prototype,a,{initialize:function(){},route:function(e,t,n){return o.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),s.history.route(e,o.bind(function(r){var i=this._extractParameters(e,r);n&&n.apply(this,i),this.trigger.apply(this,["route:"+t].concat(i)),s.history.trigger("route",this,t,i)},this)),this},navigate:function(e,t){s.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(m,"\\$&").replace(d,"([^/]+)").replace(v,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var g=s.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},y=/^[#\/]/,b=/^\/+|\/+$/g,w=/msie [\w.]+/,E=/\/$/;g.started=!1,o.extend(g.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(E,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return decodeURIComponent(e.replace(y,""))},start:function(e){if(g.started)throw new Error("Backbone.history has already been started");g.started=!0,this.options=o.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=w.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(b,"/"),r&&this._wantsHashChange&&(this.iframe=s.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?s.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?s.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,u=i.pathname.replace(/[^/]$/,"$&/")===this.root&&!i.search;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&i.hash&&(this.fragment=this.getHash().replace(y,""),this.history.replaceState({},document.title,this.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){s.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),g.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=o.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!g.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=(e.indexOf(this.root)!==0?this.root:"")+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),s.history=new g;var S=s.View=function(e){this.cid=o.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName"];o.extend(S.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},dispose:function(){return this.undelegateEvents(),this.model&&this.model.off(null,null,this),this.collection&&this.collection.off(null,null,this),this},remove:function(){return this.dispose(),this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&s.$(r).attr(t),n!=null&&s.$(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof s.$?e:s.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=o.result(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];o.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(x),i=r[1],s=r[2];n=o.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.bind(i,n):this.$el.delegate(s,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=o.extend({},this.options,e));for(var t=0,n=T.length;t<n;t++){var r=T[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(!this.el){var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e["class"]=o.result(this,"className")),this.setElement(this.make(o.result(this,"tagName"),e),!1)}else this.setElement(this.el,!1)}});var N={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};s.sync=function(e,t,n){var r=N[e];n||(n={});var i={type:r,dataType:"json"};n.url||(i.url=o.result(t,"url")||k()),!n.data&&t&&(e==="create"||e==="update")&&(i.contentType="application/json",i.data=JSON.stringify(t)),s.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),s.emulateHTTP&&(r==="PUT"||r==="DELETE")&&(s.emulateJSON&&(i.data._method=r),i.type="POST",i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),i.type!=="GET"&&!s.emulateJSON&&(i.processData=!1);var u=n.success;n.success=function(e,r,i){u&&u(e,r,i),t.trigger("sync",t,e,n)};var a=n.error;return n.error=function(e,r,i){a&&a(t,e,n),t.trigger("error",t,e,n)},s.ajax(o.extend(i,n))},s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var C=function(e,t){function i(){this.constructor=r}var n=this,r;return e&&o.has(e,"constructor")?r=e.constructor:r=function(){n.apply(this,arguments)},i.prototype=n.prototype,r.prototype=new i,e&&o.extend(r.prototype,e),o.extend(r,n,t),r.__super__=n.prototype,r};f.extend=l.extend=p.extend=S.extend=C;var k=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["underscore"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("libs/base64",{keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i="",s,o,u,a="",f=0;do n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this.keyStr.charAt(s)+this.keyStr.charAt(o)+this.keyStr.charAt(u)+this.keyStr.charAt(a),n=r=i="",s=o=u=a="";while(f<e.length);return t},decode:function(e){var t="",n,r,i="",s,o,u,a="",f=0,l=/[^A-Za-z0-9\+\/\=]/g;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do s=this.keyStr.indexOf(e.charAt(f++)),o=this.keyStr.indexOf(e.charAt(f++)),u=this.keyStr.indexOf(e.charAt(f++)),a=this.keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i)),n=r=i="",s=o=u=a="";while(f<e.length);return t}}),define("utils/urlUtil",["libs/base64"],function(e){return{parse2Obj:function(e){e=this.decode(e);var t={};if(e){var n=e.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");t[i[0]]=decodeURI(i[1])}}return t},parse2Str:function(e){var t=[];for(attr in e)t.push(attr+"="+e[attr]);var n=t.join("&");return n=encodeURI(n),this.encode(n)},changeHash:function(e,t){location.hash=e+t},changeHashByParams:function(e,t){e=e||location.hash.match(/#page\/[^\/]*\//),t=t||Params,location.hash=e+this.parse2Str(t)},encode:function(t){return e.encode(t)},decode:function(t){return e.decode(t)}}}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||void 0),u=[];define("text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),n=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),i,s,o="";try{i=new java.lang.StringBuffer,(s=n.readLine())&&s.length()&&s.charAt(0)===65279&&(s=s.substring(1));for(i.append(s);(s=n.readLine())!==null;)i.append(r),i.append(s);o=String(i.toString())}finally{n.close()}t(o)}),a={version:"0.27.0",strip:function(e){if(e){var e=e.replace(t,""),r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),e=e.substring(n+1,e.length),n=e.indexOf("!");return n!==-1&&(t=e.substring(n+1,e.length),t=t==="strip",e=e.substring(0,n)),{moduleName:r,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s;return i?(e=i[2],i=i[3],i=i.split(":"),s=i[1],i=i[0],(!e||e===t)&&(!i||i===n)&&(!s&&!i||s===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&i.inlineText&&(u[e]=n),r(n)},load:function(e,t,n,u){var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})},write:function(e,t,n){if(t in u){var r=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,i){var t=a.parseName(t),s=t.moduleName+"."+t.ext,o=n.toUrl(t.moduleName+"."+t.ext)+".js";a.load(s,n,function(){var t=function(e){return r(o,e)};t.asModule=function(e,t){return r.asModule(e,o,t)},a.write(e,s,t,i)},i)}}})}(),define("text!templates/public/datePicker.html",[],function(){return'<a class="time" id="choseDate">\r	<span>\r	<%\r		if(!!style && style == \'summary\'){\r	%>\r			<p><%=Public.DatePicker.dateChooser%><b id="displayDateTip" style="font-weight:normal"></b><br>\r				<font class="calendar" id="dateValue"><%=Public.DatePicker.pleaseSelectDate%></font>\r			</p>\r	<%	}else{ %>\r			<font class="calendar" id="dateValue" style="width:182px"><%=Public.DatePicker.pleaseSelectDate%></font>\r	<%	}%>\r	</span>\r	\r</a>\r<div class="timetxt hide panone" id="datePanel" style="width: 278px; left: 0; ">\r	<div id="dateBanner" class="timetop"> \r		<a data="0" style="margin-left: 0px"><%=GameCommon.today%></a>|\r		<a data="-1"><%=Public.DatePicker.yesterday%></a>|\r		<a data="-7" class="on_choose"><%=Public.DatePicker.nearly7Days%></a>|\r		<a data="-30"><%=Public.DatePicker.nearly30Days%></a> | \r<!-- 			<select	id="selectMonth"> -->\r<!-- 				<option value="-1" disabled="true">月份</option> -->\r<!-- 			</select> |  -->\r		<a data="99"><%=GameCommon.all%></a> \r	</div>\r	<p class="TimeDef">\r		<%=Public.DatePicker.custom%><input type="text" id="startTime" name="startTime" class="Timeinput" /><%=GameCommon.to%> <input type="text" id="endTime"	name="endTime" class="Timeinput mrnone" />\r	</p>\r	<div class="opeDiv after">\r		<small id="datamessage"	style="display: none; margin-left: 30px;" class="l"></small>\r		<a class="timecolse r Confirm" id="confirmBtn"><%=GameCommon.confirm%></a>\r		<a class="r Cancel" id="cancelBtn"><%=GameCommon.cancel%></a>\r	</div>\r</div>\r'}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&r(e[i],t[i],n)}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config();return{version:"2.0.1",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("nls/gameI18N",[],function(){var e={};return e[currentLocale]=!0,e}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]=e.isPlainObject(a)?e.widget.extend({},n[u],a):a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(e,t){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){n?(t=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element);var r=this;e.each(n,function(n,i){function s(){if(r.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof i=="string"?r[i]:i).apply(r,arguments)}typeof i!="string"&&(s.guid=i.guid=i.guid||s.guid||e.guid++);var o=n.match(/^(\w+)\s*(.*)$/),u=o[1]+r.eventNamespace,a=o[2];a?r.widget().delegate(a,u,s):t.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.0"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar" width="100%" border="0" cellspacing="0" cellpadding="0"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.0",window["DP_jQuery_"+dpuuid]=$}(jQuery),$.datepicker.regional.zh_cn={closeText:"关闭",prevText:"上月",nextText:"下月",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},$.datepicker.setDefaults($.datepicker.regional[currentLocale]),define("jquery.datepicker",function(){}),define("views/public/DatePicker",["backbone","utils/urlUtil","text!templates/public/datePicker.html","i18n!nls/gameI18N","jquery.datepicker"],function(e,t,n,r){var i=e.View.extend({events:{"click #choseDate":"toggleDatePanel","click #startTime,#endTime":"showDatePicker","click #cancelBtn":"hideDatePanel","click #confirmBtn":"saveChoosedDate","click #dateBanner>a":"chooseBannerDate"},initialize:function(){this.style=this.options.style,this.timeFormat="YYYY-MM-DD",this.starttime=this.yymmdd2yyyy(Params.startTime),Date.compare(Params.productRegistTime,this.starttime)==1&&(this.starttime=Params.productRegistTime),this.endtime=this.yymmdd2yyyy(Params.endTime),this.render(),this.$datePanel=$("#datePanel"),this.$startTimeInput=$("#startTime"),this.$endTimeInput=$("#endTime"),this.datepickerOptions={minDate:new Date(Params.productRegistTime),maxDate:new Date,dateFormat:"yy-mm-dd"}},render:function(){this.$el.html(_.template(n,{style:this.style,Public:r.Public,GameCommon:r.GameCommon})),$("#startTime,#endTime").datepicker({minDate:new Date(Params.productRegistTime),maxDate:new Date,dateFormat:"yy-mm-dd"}),this.showDateToHtml(Params.displayDateTip)},toggleDatePanel:function(){this.$datePanel.slideToggle()},hideDatePanel:function(){this.$datePanel.slideUp()},showDatePicker:function(e){$(e.currentTarget).datepicker()},saveChoosedDate:function(e){var n=this.$startTimeInput.val(),i=this.$endTimeInput.val();if(!n||!i){this.hideDatePanel();return}if(Date.compare(n,i)==1){$("#datamessage").html(r.Player.CustomRetention.dateIsWrong).show();return}this.starttime=n,this.endtime=i,this.showDateToHtml(e),this.saveTimeToParams(e),t.changeHashByParams(),this.hideDatePanel()},chooseBannerDate:function(e){var t=$(e.currentTarget).attr("data"),n=t;t==99?this.starttime=Params.productRegistTime:t==-7||t==-30?Date.compare((new Date).add({days:parseInt(t)}).toFormat(this.timeFormat),Params.productRegistTime)<=0?this.starttime=Params.productRegistTime:this.starttime=(new Date).add({days:parseInt(t)}).toFormat(this.timeFormat):this.starttime=(new Date).add({days:parseInt(t)}).toFormat(this.timeFormat),t==-1||t==0?this.endtime=this.starttime:this.endtime=(new Date).toFormat(this.timeFormat),this.$startTimeInput.val(this.starttime),this.$endTimeInput.val(this.endtime),this.saveChoosedDate(n)},showDateToHtml:function(e){this.starttime&&this.endtime&&(this.starttime!=this.endtime?$("#dateValue").html(this.starttime+" ~ "+this.endtime):$("#dateValue").html(this.starttime)),$("#displayDateTip").html("");var t=r.Public.DatePicker.nearly7Days;e=="0"?t=r.GameCommon.today:e=="-1"?t=r.Public.DatePicker.yesterday:e=="-7"||e==undefined?t=r.Public.DatePicker.nearly7Days:e=="-30"?t=r.Public.DatePicker.nearly30Days:e=="99"?t=r.GameCommon.all:t=r.Public.DatePicker.customDate,$("#displayDateTip").html(" : "+t)},saveTimeToParams:function(e){Params.startTime=parseInt(this.formatDate(this.starttime)),Params.endTime=parseInt(this.formatDate(this.endtime)),e&&(Params.displayDateTip=e)},saveTimeToServer:function(){var e="/servlet/TenddataSaveServlet",t={starttime:this.starttime,endtime:this.endtime,timecc:Math.random()};$.getJSON(e,t)},formatDate:function(e){return(""+e).replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3")},yymmdd2yyyy:function(e){return(""+e).replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")}});return i}),define("text!templates/public/select.html",[],function(){return'<a class="time" id="selectBtn"> <span> <font\r		class="Filterbut"><%=i18n.Public.Select.filter%></font>\r</span>\r</a>\r<div class="timetxt hide" id="selectPanel" style="width: 490px; right: 0">\r	<div id="selectContent">\r	</div>\r	<div class="opeDiv after">\r		<a class="Sievecolse r Confirm" id="confirmBtn"><%=i18n.GameCommon.confirm%></a>\r		<a class="Sievecolse r Cancel" id="cancelBtn"><%=i18n.GameCommon.cancel%></a>\r	</div>\r</div>'}),define("utils/SelectMappingUtil",{getSelectIds:function(e){var t={partner:"partnerID",gameserver:"gameserverID"},n=t[e];return Params[n]?Params[n].split(","):[]},getTypeByItem:function(e){var t={partner:"partnerID",gameserver:"gameserverID"};return t[e]},getUrlByItem:function(e){var t={partner:"fetchSelectPartner",gameserver:"fetchSelectGameserver"};return t[e]},getTypes:function(){return["partner","gameserver"]}}),function(){function e(){try{return i in n&&n[i]}catch(e){return!1}}var t={},n=window,r=n.document,i="localStorage",s="__storejs__",o;t.disabled=!1,t.set=function(e,t){},t.get=function(e){},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){var i=t.get(e);r==null&&(r=n,n=null),typeof i=="undefined"&&(i=n||{}),r(i),t.set(e,i)},t.getAll=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(e())o=n[i],t.set=function(e,n){return n===undefined?t.remove(e):(o.setItem(e,t.serialize(n)),n)},t.get=function(e){return t.deserialize(o.getItem(e))},t.remove=function(e){o.removeItem(e)},t.clear=function(){o.clear()},t.getAll=function(){var e={};for(var n=0;n<o.length;++n){var r=o.key(n);e[r]=t.get(r)}return e};else if(r.documentElement.addBehavior){var u,a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write('<script>document.w=window</script><iframe src="/favicon.ico"></iframe>'),a.close(),u=a.w.frames[0].document,o=u.createElement("div")}catch(f){o=r.createElement("div"),u=r.body}function l(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o),u.appendChild(o),o.addBehavior("#default#userData"),o.load(i);var r=e.apply(t,n);return u.removeChild(o),r}}var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function h(e){return e.replace(c,"___")}t.set=l(function(e,n,r){return n=h(n),r===undefined?t.remove(n):(e.setAttribute(n,t.serialize(r)),e.save(i),r)}),t.get=l(function(e,n){return n=h(n),t.deserialize(e.getAttribute(n))}),t.remove=l(function(e,t){t=h(t),e.removeAttribute(t),e.save(i)}),t.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=0,r;r=t[n];n++)e.removeAttribute(r.name);e.save(i)}),t.getAll=l(function(e){var n=e.XMLDocument.documentElement.attributes,r={};for(var i=0,s;s=n[i];++i){var o=h(s.name);r[s.name]=t.deserialize(e.getAttribute(o))}return r})}try{t.set(s,s),t.get(s)!=s&&(t.disabled=!0),t.remove(s)}catch(f){t.disabled=!0}t.enabled=!t.disabled,typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define("libs/store.min",t):this.store=t}(),define("utils/TabActionCache",["libs/store.min"],function(e){return{set:function(t,n,r){var i=User.username,s=e.get("action");if(s){var o=s[i]||{tab:{}},u=o.tab;if(t in u)u[t][r]=n;else{var a={};a[r]=n,u[t]=a}s[i]=o,e.set("action",s)}else{var s={},u={},a={};a[r]=n,u[t]=a,s[i]={tab:u},e.set("action",s)}},get:function(t){var n=User.username,r=e.get("action");if(r){var i=r[n];if(i&&i.tab)return tabDatas=i.tab,tabDatas[t]}}}}),function(e){typeof define=="function"&&define.amd?define("jquery.cookie",["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)===undefined?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define("utils/ajax-utils",["jquery","jquery.cookie"],function(e){return{ajax:function(t){var n=t.type||"post",r;n=="post"?r={url:t.url,data:JSON.stringify(t.$entity||t.data),type:"post",contentType:"application/json",dataType:"json",cache:!1,headers:{visitInfo:e.cookie("visit")},success:function(e,n,r){t.$callback?t.$callback(n,r,e):t.success(e,n,r)}}:n=="get"&&(r={url:t.url,data:t.data,type:"get",dataType:"json",cache:!1,success:function(e,n,r){t.$callback?t.$callback(n,r,e):t.success(e,n,r)}}),e.ajax(r)}}}),define("models/BaseModel",["underscore","utils/ajax-utils"],function(e,t){return{init:function(n){var r={};return e.each(n,function(e){e&&(r[e.name]=function(n){var r=e.type||"post";n.url="/game"+e.url,n.type=r,t.ajax(n)})}),r}}}),define("models/select/Select",["models/BaseModel"],function(e){var t=[{name:"fetchSelect",url:"/v1/select/fetchSelect"},{name:"fetchSelectPartner",url:"/v1/select/fetchSelectPartner"},{name:"fetchSelectGameserver",url:"/v1/select/fetchSelectGameserver"}];return e.init(t)});var Mustache;(function(e){typeof module!="undefined"&&module.exports?module.exports=e:typeof define=="function"?define("mustache",e):Mustache=e})(function(){function u(e,t){return RegExp.prototype.test.call(e,t)}function a(e){return!u(r,e)}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function p(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.parent=t,this.clearCache()}function v(){this.clearCache()}function m(e){var t=e[3],n=t,r;while((r=e[4])&&r.length)e=r[r.length-1],n=e[3];return[t,n]}function g(e){function n(e,n,r){if(!t[e]){var i=g(n);t[e]=function(e,t){return i(e,t,r)}}return t[e]}var t={};return function(t,r,i){var s="",o,u;for(var a=0,f=e.length;a<f;++a){o=e[a];switch(o[0]){case"#":u=i.slice.apply(i,m(o)),s+=t._section(o[1],r,u,n(a,o[4],i));break;case"^":s+=t._inverted(o[1],r,n(a,o[4],i));break;case">":s+=t._partial(o[1],r);break;case"&":s+=t._name(o[1],r);break;case"name":s+=t._escaped(o[1],r);break;case"text":s+=o[1]}}return s}}function y(e){var t=[],n=t,r=[],i,s;for(var o=0;o<e.length;++o){i=e[o];switch(i[0]){case"#":case"^":i[4]=[],r.push(i),n.push(i),n=i[4];break;case"/":if(r.length===0)throw new Error("Unopened section: "+i[1]);s=r.pop();if(s[1]!==i[1])throw new Error("Unclosed section: "+s[1]);r.length>0?n=r[r.length-1][4]:n=t;break;default:n.push(i)}}s=r.pop();if(s)throw new Error("Unclosed section: "+s[1]);return t}function b(e){var t,n;for(var r=0;r<e.length;++r)t=e[r],n&&n[0]==="text"&&t[0]==="text"?(n[1]+=t[1],n[3]=t[3],e.splice(r--,1)):n=t}function w(e){if(e.length!==2)throw new Error("Invalid tags: "+e.join(" "));return[new RegExp(l(e[0])+"\\s*"),new RegExp("\\s*"+l(e[1]))]}var e={};e.name="mustache.js",e.version="0.7.0",e.tags=["{{","}}"],e.Scanner=p,e.Context=d,e.Writer=v;var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.escape=h,p.prototype.eos=function(){return this.tail===""},p.prototype.scan=function(e){var t=this.tail.match(e);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},d.make=function(e){return e instanceof d?e:new d(e)},d.prototype.clearCache=function(){this._cache={}},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e===".")t=this.view;else{var n=this;while(n){if(e.indexOf(".")>0){var r=e.split("."),i=0;t=n.view;while(t&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}}this._cache[e]=t}return typeof t=="function"&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this._cache={},this._partialCache={}},v.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},v.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},v.prototype.compileTokens=function(e,t){var n=g(e),r=this;return function(e,i){if(i)if(typeof i=="function")r._loadPartial=i;else for(var s in i)r.compilePartial(s,i[s]);return n(r,d.make(e),t)}},v.prototype.render=function(e,t,n){return this.compile(e)(t,n)},v.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(f(i)){var s="";for(var o=0,u=i.length;o<u;++o)s+=r(this,t.push(i[o]));return s}return i?r(this,t.push(i)):"";case"function":var a=this,l=function(e){return a.render(e,t)};return i.call(t.view,n,l)||"";default:if(i)return r(this,t)}return""},v.prototype._inverted=function(e,t,n){var r=t.lookup(e);return!r||f(r)&&r.length===0?n(this,t):""},v.prototype._partial=function(e,t){!(e in this._partialCache)&&this._loadPartial&&this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},v.prototype._name=function(e,t){var n=t.lookup(e);return typeof n=="function"&&(n=n.call(t.view)),n==null?"":String(n)},v.prototype._escaped=function(t,n){return e.escape(this._name(t,n))},e.parse=function(r,u){function g(){if(v&&!m)while(d.length)h.splice(d.pop(),1);else d=[];v=!1,m=!1}u=u||e.tags;var f=w(u),c=new p(r),h=[],d=[],v=!1,m=!1,E,S,x,T;while(!c.eos()){E=c.pos,x=c.scanUntil(f[0]);if(x)for(var N=0,C=x.length;N<C;++N)T=x.charAt(N),a(T)?d.push(h.length):m=!0,h.push(["text",T,E,E+1]),E+=1,T==="\n"&&g();E=c.pos;if(!c.scan(f[0]))break;v=!0,S=c.scan(o)||"name",c.scan(t);if(S==="=")x=c.scanUntil(i),c.scan(i),c.scanUntil(f[1]);else if(S==="{"){var k=new RegExp("\\s*"+l("}"+u[1]));x=c.scanUntil(k),c.scan(s),c.scanUntil(f[1]),S="&"}else x=c.scanUntil(f[1]);if(!c.scan(f[1]))throw new Error("Unclosed tag at "+c.pos);h.push([S,x,E,c.pos]);if(S==="name"||S==="{"||S==="&")m=!0;S==="="&&(u=x.split(n),f=w(u))}return b(h),y(h)};var E=new v;return e.clearCache=function(){return E.clearCache()},e.compile=function(e,t){return E.compile(e,t)},e.compilePartial=function(e,t,n){return E.compilePartial(e,t,n)},e.compileTokens=function(e,t){return E.compileTokens(e,t)},e.render=function(e,t,n){return E.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i!="function")return s;i(s)},e}()),define("text!templates/public/selectComponent.html",[],function(){return'<div class="brdediv">\r	<font class="l" style="width:50px;"><%=i18nSelect[type]%></font> \r	<a id="onOffBtn" datatype="<%=type%>" href="javascript:void(0);" class="<%=status%>"></a> \r	<span id="nofilter" style="display: <%=display==\'block\' ? \'none\' : \'block\'%>;"><%=i18nSelect.noFilter%></span>\r	<span id="selectCountSpan" style="display: <%=display%>;"><%=i18nSelect.hasCheck%><em id="selectCount"><%=selectNum%></em><%=i18nSelect.item%></span>\r	<div class="clear"></div>\r	<div class="content-channel" style="display: <%=display%>;">\r		<div class="search-channel">\r			<input type="text" class="input-search"></input><img src="images/icon-search.png" />\r			<div class="choose-channel">\r				<a id="chooseAll" href="javascript:void(0);"><%=i18nSelect.checkAll%></a><a id="notChoose" href="javascript:void(0);"><%=i18nSelect.checkInverse%></a>\r			</div>\r		</div>\r		<div id="<%=type%>" class="Sievexx">\r		</div>\r	</div>\r	<div class="clear"></div>\r</div>'}),define("text!templates/public/selectLiA.html",[],function(){return"{{#list}}\r<li\r	style='display: block; float: left; width: 85px; margin: 0 5px 5px 0; padding: 2px 10px; text-overflow: ellipsis; overflow: hidden;'>\r	<a title='{{value}}' data='{{item}}' class='{{selectStyle}}'>{{value}}</a>\r</li>\r{{/list}}"}),define("views/public/SelectComponent",["backbone","mustache","utils/SelectMappingUtil","utils/TabActionCache","text!templates/public/selectComponent.html","text!templates/public/selectLiA.html","models/select/Select","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({events:{"click #onOffBtn":"toggleCurComponent","click li>a":"toggleChoose","click #chooseAll":"chooseAll","click #notChoose":"notChoose","keyup .input-search":"dynamicSearch"},initialize:function(e){this.params=e,this.$el.attr("id","select_"+this.params.type),this.render()},render:function(){return this.renderFrame(),this.renderData(),this},renderFrame:function(){var e=n.getSelectIds(this.params.type).length,t={i18nSelect:u.Public.Select,selectNum:e,type:this.params.type,status:e>0?"button-on":"button-off",display:e>0?"block":"none"};this.$el.html(_.template(i,t))},renderData:function(){var e=this;o[this.params.url]({data:Params,success:function(r){var i={list:r};i.selectStyle=function(){var t=n.getSelectIds(e.params.type);return t.length?_.indexOf(t,this.item)!=-1?"border":"":""},e.$el.find(".Sievexx").html(t.render(s,i));if(e.params.callback){var o={params:e.params,result:r};e.params.callback(o)}}})},toggleCurComponent:function(e){var t=$(e.currentTarget),n=t.attr("class");n==="button-off"?(t.removeClass("button-off"),t.addClass("button-on"),t.siblings(".content-channel").show(),t.siblings("#selectCountSpan").show(),t.siblings("#nofilter").hide()):n==="button-on"&&(t.removeClass("button-on"),t.addClass("button-off"),t.siblings(".content-channel").hide(),t.siblings("#selectCountSpan").hide(),t.siblings("#nofilter").show())},toggleChoose:function(e){var t=$(e.currentTarget).parent().parent().parent().siblings("#selectCountSpan").children("#selectCount"),n=t.html()||0;$(e.currentTarget).toggleClass("border");var r=$(e.currentTarget).attr("class");r?t.html(parseInt(n)+1):t.html(parseInt(n)-1)},chooseAll:function(e){var t=$(e.currentTarget).parent().parent().next("#.Sievexx").find("li");t.each(function(e){$(this).find("a").addClass("border")}),$(e.currentTarget).parent().parent().parent().siblings("#selectCountSpan").children("#selectCount").html(t.length)},notChoose:function(e){var t=$(e.currentTarget).parent().parent().next(".Sievexx").find("li");t.each(function(e){$(this).find("a").removeClass("border")}),$(e.currentTarget).parent().parent().parent().siblings("#selectCountSpan").children("#selectCount").html(0)},dynamicSearch:function(e){var t=$(e.currentTarget).val();$(e.currentTarget).parent().next(".Sievexx").find("li").each(function(){$(this).text().search(new RegExp(t,"i"))<0?$(this).fadeOut():$(this).show()})}});return a}),define("views/public/SelectView",["backbone","text!templates/public/select.html","utils/urlUtil","utils/SelectMappingUtil","utils/TabActionCache","models/select/Select","views/public/SelectComponent","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({events:{"click #selectBtn":"toggleSelectPanel","click #selectPanel #confirmBtn":"confirm","click #selectPanel #cancelBtn":"cancel"},initialize:function(){this.items=this.options.items||r.getTypes(),$(this.el).html(_.template(t,{i18n:u})),this.$selectContent=$("#selectContent"),this.render(),this.$selectPanel=$("#selectPanel")},render:function(){$("#selectVersion").html("");var e=this;_.each(this.items,function(t){var n=new o({type:t,url:r.getUrlByItem(t),callback:e.componentCallback});e.$selectContent.append(n.el)});var t=0;_.each(this.items,function(e){return t+=r.getSelectIds(e).length,t}),t!=0?$("#showSelectedPartners").show():$("#showSelectedPartners").hide()},toggleSelectPanel:function(){this.$selectPanel.slideToggle()},confirm:function(){this.$selectPanel.slideUp();var e=this;_.each(this.items,function(t){var n=$("#"+t).parent().siblings("#onOffBtn").attr("class"),i=$("#"+t+' li>a[class="border"]');if(n==="button-on"){if(i){var s=[];_.each(i,function(e){s.push($(e).attr("data"))}),Params[r.getTypeByItem(t)]=s.join(",")}}else i&&_.each(i,function(e){$(e).removeClass("border")}),Params[r.getTypeByItem(t)]="";e.setSelectContentStyle(t)}),n.changeHashByParams()},cancel:function(){this.$selectPanel.slideUp();var e=this;_.each(this.items,function(t){$("#"+t+" li>a").each(function(){var e=$(this).attr("data");_.indexOf(r.getSelectIds(t),e)==-1?$(this).removeClass("border"):$(this).addClass("border")}),e.setSelectContentStyle(t)})},componentCallback:function(e){var t=r.getSelectIds(e.params.type);if(t.length){var n=$("<div>");n.append(u.Public.Select[e.params.type]),_.each(e.result,function(e){_.indexOf(t,e.item)!=-1?n.append("<font>"+e.value+"</font>"):""}),$("#selectVersion").append(n)}},setSelectContentStyle:function(e){var t=r.getSelectIds(e).length,n=$("#"+e).parent();n.siblings("#selectCountSpan").children("#selectCount").html(t),t?(n.show(),n.siblings("#selectCountSpan").show(),n.siblings("#nofilter").hide(),n.siblings("#onOffBtn").attr("class","button-on")):(n.hide(),n.siblings("#selectCountSpan").hide(),n.siblings("#nofilter").show(),n.siblings("#onOffBtn").attr("class","button-off"))}});return a}),define("models/player/NewPlayer",["models/BaseModel"],function(e){var t=[{name:"fetchInstallList",url:"/v1/newPlayer/installList"},{name:"fetchNewPlayerList",url:"/v1/newPlayer/newPlayerList"},{name:"fetchConversionList",url:"/v1/newPlayer/conversionList"},{name:"fetchLocationList",url:"/v1/newPlayer/locationList"},{name:"fetchChannelList",url:"/v1/newPlayer/channelList"},{name:"fetchGenderList",url:"/v1/newPlayer/genderList"},{name:"fetchAgeList",url:"/v1/newPlayer/ageList"},{name:"fetchAccountTypeList",url:"/v1/newPlayer/accountTypeList"},{name:"fetchInstallNewPlayerList",url:"/v1/newPlayer/fetchInstallNewPlayerList"},{name:"fetchSubaccount",url:"/v1/newPlayer/subaccount"}];return e.init(t)}),define("models/player/Retention",["models/BaseModel"],function(e){var t=[{name:"fetchDay1Day7Day30Retention",url:"/v1/retention/retentionList"},{name:"fetchRetentionUserAnalys",url:"/v1/retention/retentionUserAnalys"},{name:"fetchYesterdayPerHourUserNumList",url:"/v1/retention/yesterdayPerHourUserNumList"},{name:"fetchTodayPerHourUserNumList",url:"/v1/retention/todayPerHourUserNumList"},{name:"fetchRecentPlayerList",url:"/v1/retention/recentPlayerList"},{name:"fetchACUList",url:"/v1/retention/acuList"},{name:"fetchPCUList",url:"/v1/retention/pcuList"}];return e.init(t)}),define("models/player/ActivePlayer",["models/BaseModel"],function(e){var t=[{name:"fetchDauList",url:"/v1/activity/dauList"},{name:"fetchWauList",url:"/v1/activity/wauList"},{name:"fetchMauList",url:"/v1/activity/mauList"},{name:"fetchDauDivideMauList",url:"/v1/activity/dauDivideMauList"},{name:"fetchGroupedPlayerList",url:"/v1/activity/groupedPlayer"},{name:"newAndOldDauList",url:"/v1/activity/newAndOldDauList"}];return e.init(t)}),define("models/revenue/IncomeData",["models/BaseModel"],function(e){var t=[{name:"incomeNumList",url:"/v1/incomeData/incomeNumList"},{name:"chargeTimesList",url:"/v1/incomeData/chargeTimesList"},{name:"chargePlayerNumList",url:"/v1/incomeData/chargePlayerNumList"},{name:"levelIncomeNumDistribution",url:"/v1/incomeData/levelIncomeNumDistribution"},{name:"levelChargePlayerNumDistribution",url:"/v1/incomeData/levelChargePlayerNumDistribution"},{name:"locationIncomeDistribution",url:"/v1/incomeData/locationIncomeDistribution"},{name:"globalLocationIncomeDistribution",url:"/v1/incomeData/globalLocationIncomeDistribution"},{name:"partnerIncomeDistribution",url:"/v1/incomeData/partnerIncomeDistribution"},{name:"ageGroupIncomeDistribution",url:"/v1/incomeData/ageGroupIncomeDistribution"},{name:"sexIncomeDistribution",url:"/v1/incomeData/sexIncomeDistribution"},{name:"fetchChargePlayerNumsBetweenDays",url:"/v1/incomeData/chargePlayerNum"},{name:"fetchIncomeNumsBetweenDays",url:"/v1/incomeData/incomeNum"},{name:"fetchNewAndOldChargePlayers",url:"/v1/incomeData/newAndOldChargePlayers"}];return e.init(t)}),define("models/revenue/PayPermeate",["models/BaseModel"],function(e){var t=[{name:"dayPayRateList",url:"/v1/payPermeate/dayPayRateList"},{name:"weekPayRateList",url:"/v1/payPermeate/weekPayRateList"},{name:"monthPayRateList",url:"/v1/payPermeate/monthPayRateList"},{name:"dayARPUList",url:"/v1/payPermeate/dayARPUList"},{name:"monthARPUList",url:"/v1/payPermeate/monthARPUList"},{name:"dayARPPUList",url:"/v1/payPermeate/dayARPPUList"},{name:"monthARPPUList",url:"/v1/payPermeate/monthARPPUList"},{name:"fetchDailyRateOfPay",url:"/v1/payPermeate/fetchDailyRateOfPay"},{name:"fetchDailyARPU",url:"/v1/payPermeate/fetchDailyARPU"},{name:"fetchDailyARPPU",url:"/v1/payPermeate/fetchDailyARPPU"}];return e.init(t)}),define("models/concurrent/ConcurrentUser",["models/BaseModel"],function(e){var t=[{name:"fetchLastMinsUserNum",url:"/v1/concurrent/lastMinsUserNum"},{name:"fetchMaxUserNum",url:"/v1/concurrent/maxUserNum"},{name:"fetchYesterdayPerHourUserNumList",url:"/v1/concurrent/yesterdayPerHourUserNumList"},{name:"fetchTodayPerHourUserNumList",url:"/v1/concurrent/todayPerHourUserNumList"},{name:"fetchRecentPlayerList",url:"/v1/concurrent/recentPlayerList"},{name:"fetchACUList",url:"/v1/concurrent/acuList"},{name:"fetchPCUList",url:"/v1/concurrent/pcuList"},,{name:"fetchACUPCU",url:"/v1/concurrent/acupcu"}];return e.init(t)}),define("models/player/Behavior",["models/BaseModel"],function(e){var t=[{name:"fetchAvgGameTimesList",url:"/v1/behavior/avgGameTimesList"},{name:"fetchGameFrequencyList",url:"/v1/behavior/gameFrequencyList"},{name:"fetchGameDurationTimeList",url:"/v1/behavior/avgGameDurationList"},{name:"fetchGameTimesList",url:"/v1/behavior/gameTimesList"},{name:"fetchIntervalList",url:"/v1/behavior/intervalList"}];return e.init(t)}),define("models/Constant",{NEW_PLAYER:"newPlayer",ACTIVE_PLAYER:"activePlayer",CHARGE_PLAYER:"chargePlayer",ALL_PLAYER:"allPlayer",FIRST_DAY_LEVEL:"firstDayLevel",FIRST_DAY_LOGIN_TIMES:"firstDayLoginTimes",FIRST_DAY_TIME_CONSUME:"firstDayTimeConsume",IS_FIRST_DAY_CHARGE:"isFirstDayCharge",SEX:"sex",AGE:"age",LOCATION:"location",GLOBALLOCATION:"country",LEVEL:"level",PARTNER:"partner",TIME:"time",ACCOUNT_TYPE:"accout",CARRIER:"carrier",MOBILE:"mobile",PIXEL:"pixel",NETWORK:"network",MOBILE_OS:"mobileos",LIFETIME:"lifetime",CHINAID:"558",TABLE_DATA_KEY:"tableDataKey",TABLE_HEAD:"thead",TABLE_BODY:"tbody",EXCEL_NAME:"excelName",DAYS_07:"7",DAYS_14:"14",DAYS_30:"30",DAYS_60:"60",DAYS_90:"90",SEGMENT_TYPE_USER:"user",SEGMENT_TYPE_DEVICE:"device"}),function(){function xt(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function Tt(){var e=0,t=arguments,n=t.length,r={};for(;e<n;e++)r[t[e++]]=t[e];return r}function Nt(e,t){return parseInt(e,t||10)}function Ct(e){return typeof e=="string"}function kt(e){return typeof e=="object"}function Lt(e){return Object.prototype.toString.call(e)==="[object Array]"}function At(e){return typeof e=="number"}function Ot(e){return r.log(e)/r.LN10}function Mt(e){return r.pow(10,e)}function _t(e,t){var n=e.length;while(n--)if(e[n]===t){e.splice(n,1);break}}function Dt(t){return t!==e&&t!==null}function Pt(e,t,n){var r,i="setAttribute",s;if(Ct(t))Dt(n)?e[i](t,n):e&&e.getAttribute&&(s=e.getAttribute(t));else if(Dt(t)&&kt(t))for(r in t)e[i](r,t[r]);return s}function Ht(e){return Lt(e)?e:[e]}function Bt(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(typeof n!="undefined"&&n!==null)return n}}function jt(t,n){m&&n&&n.opacity!==e&&(n.filter="alpha(opacity="+n.opacity*100+")"),xt(t.style,n)}function Ft(e,n,r,i,s){var o=t.createElement(e);return n&&xt(o,n),s&&jt(o,{padding:0,border:W,margin:0}),r&&jt(o,r),i&&i.appendChild(o),o}function It(e,t){var n=function(){};return n.prototype=new e,xt(n.prototype,t),n}function qt(e){return e=(e||0).toString(),e.indexOf(".")>-1?e.split(".")[1].length:0}function Rt(e,t,n,r){var i=O.lang,s=e,o=t===-1?qt(e):isNaN(t=f(t))?2:t,u=n===undefined?i.decimalPoint:n,a=r===undefined?i.thousandsSep:r,l=s<0?"-":"",c=String(Nt(s=f(+s||0).toFixed(o))),h=c.length>3?c.length%3:0;return l+(h?c.substr(0,h)+a:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?u+f(s-c).toFixed(o).slice(2):"")}function Ut(e,t){return(new Array((t||2)+1-String(e).length)).join(0)+e}function zt(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.apply(this,e)}}function Wt(e,t,n,r){var i,s;n=Bt(n,1),i=e/n,t||(t=[1,2,2.5,5,10],r&&r.allowDecimals===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(s=0;s<t.length;s++){e=t[s];if(i<=(t[s]+(t[s+1]||t[s]))/2)break}return e*=n,e}function Xt(e,t){var n=t||[[G,[1,2,5,10,20,25,50,100,200,500]],[Y,[1,2,5,10,15,30]],[Z,[1,2,5,10,15,30]],[et,[1,2,3,4,6,8,12]],[tt,[1,2]],[nt,[1,2]],[rt,[1,2,3,4,6]],[it,null]],r=n[n.length-1],i=P[r[0]],s=r[1],o,u;for(u=0;u<n.length;u++){r=n[u],i=P[r[0]],s=r[1];if(n[u+1]){var a=(i*s[s.length-1]+P[n[u+1][0]])/2;if(e<=a)break}}return i===P[it]&&e<5*i&&(s=[1,2,5]),i===P[it]&&e<5*i&&(s=[1,2,5]),o=Wt(e/i,s),{unitRange:i,count:o,unitName:r[0]}}function Vt(e,t,n,r){var i=[],o,u={},a=O.global.useUTC,f,l=new Date(t),c=e.unitRange,h=e.count;if(Dt(t)){c>=P[Y]&&(l.setMilliseconds(0),l.setSeconds(c>=P[Z]?0:h*s(l.getSeconds()/h))),c>=P[Z]&&l[gt](c>=P[et]?0:h*s(l[ct]()/h)),c>=P[et]&&l[yt](c>=P[tt]?0:h*s(l[ht]()/h)),c>=P[tt]&&l[bt](c>=P[rt]?1:h*s(l[dt]()/h)),c>=P[rt]&&(l[wt](c>=P[it]?0:h*s(l[vt]()/h)),f=l[mt]()),c>=P[it]&&(f-=f%h,l[Et](f)),c===P[nt]&&l[bt](l[dt]()-l[pt]()+Bt(r,1)),o=1,f=l[mt]();var p=l.getTime(),d=l[vt](),v=l[dt](),m=a?0:(864e5+l.getTimezoneOffset()*60*1e3)%864e5;while(p<n)i.push(p),c===P[it]?p=lt(f+o*h,0):c===P[rt]?p=lt(f,d+o*h):!!a||c!==P[tt]&&c!==P[nt]?(p+=c*h,c<=P[et]&&p%P[tt]===m&&(u[p]=tt)):p=lt(f,d,v+o*h*(c===P[tt]?1:7)),o++;i.push(p)}return i.info=xt(e,{higherRanks:u,totalRange:c*h}),i}function $t(){this.color=0,this.symbol=0}function Jt(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].ss_i=i;e.sort(function(e,n){return r=t(e,n),r===0?e.ss_i-n.ss_i:r});for(i=0;i<n;i++)delete e[i].ss_i}function Kt(e){var t=e.length,n=e[0];while(t--)e[t]<n&&(n=e[t]);return n}function Qt(e){var t=e.length,n=e[0];while(t--)e[t]>n&&(n=e[t]);return n}function Gt(e,t){var n;for(n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function Yt(e){A||(A=Ft(j)),e&&A.appendChild(e),A.innerHTML=""}function Zt(e,t){var r="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw r;n.console&&console.log(r)}function en(e){return parseFloat(e.toPrecision(14))}function tn(e,t){_=Bt(e,t.animation)}function Sn(){var e=O.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";lt=e?Date.UTC:function(e,t,n,r,i,s){return(new Date(e,t,Bt(n,1),Bt(r,0),Bt(i,0),Bt(s,0))).getTime()},ct=t+"Minutes",ht=t+"Hours",pt=t+"Day",dt=t+"Date",vt=t+"Month",mt=t+"FullYear",gt=n+"Minutes",yt=n+"Hours",bt=n+"Date",wt=n+"Month",Et=n+"FullYear"}function xn(e){return O=hn(O,e),Sn(),O}function Tn(){return O}function Cn(){}function Dn(e,t,n){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,n||this.addLabel()}function Pn(e,t){return this.axis=e,t&&(this.options=t,this.id=t.id),this}function Hn(e,t,n,r,i,s){var o=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.stack=i,this.percent=s==="percent",this.alignOptions={align:t.align||(o?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(o?"middle":n?"bottom":"top"),y:Bt(t.y,o?4:n?14:-6),x:Bt(t.x,o?n?-6:6:0)},this.textAlign=t.textAlign||(o?n?"right":"left":"center")}function Bn(){this.init.apply(this,arguments)}function jn(e,t){var n=t.borderWidth,r=t.style,i=Nt(r.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape,null,null,t.useHTML,null,"tooltip").attr({padding:i,fill:t.backgroundColor,"stroke-width":n,r:t.borderRadius,zIndex:8}).css(r).css({padding:0}).hide().add(),T||this.label.shadow(t.shadow),this.shared=t.shared}function Fn(e,t){var n=T?"":t.chart.zoomType;this.zoomX=/x/.test(n),this.zoomY=/y/.test(n),this.options=t,this.chart=e,this.init(e,t.tooltip)}function In(e){this.init(e)}function qn(){this.init.apply(this,arguments)}var e,t=document,n=window,r=Math,i=r.round,s=r.floor,o=r.ceil,u=r.max,a=r.min,f=r.abs,l=r.cos,c=r.sin,h=r.PI,p=h*2/360,d=navigator.userAgent,v=n.opera,m=/msie/i.test(d)&&!v,g=t.documentMode===8,y=/AppleWebKit/.test(d),b=/Firefox/.test(d),w=/(Mobile|Android|Windows Phone)/.test(d),E="http://www.w3.org/2000/svg",S=!!t.createElementNS&&!!t.createElementNS(E,"svg").createSVGRect,x=b&&parseInt(d.split("Firefox/")[1],10)<4,T=!S&&!m&&!!t.createElement("canvas").getContext,N,C=t.documentElement.ontouchstart!==e,k={},L=0,A,O,M,_,D,P,H=function(){},B=[],j="div",F="absolute",I="relative",q="hidden",R="highcharts-",U="visible",z="px",W="none",X="M",V="L",$="rgba(192,192,192,"+(S?1e-4:.002)+")",J="",K="hover",Q="select",G="millisecond",Y="second",Z="minute",et="hour",tt="day",nt="week",rt="month",it="year",st="fill",ot="linearGradient",ut="stops",at="stroke",ft="stroke-width",lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St={};n.Highcharts={},M=function(e,t,n){if(!Dt(t)||isNaN(t))return"Invalid date";e=Bt(e,"%Y-%m-%d %H:%M:%S");var r=new Date(t),s,o=r[ht](),u=r[pt](),a=r[dt](),f=r[vt](),l=r[mt](),c=O.lang,h=c.weekdays,p={a:h[u].substr(0,3),A:h[u],d:Ut(a),e:a,b:c.shortMonths[f],B:c.months[f],m:Ut(f+1),y:l.toString().substr(2,2),Y:l,H:Ut(o),I:Ut(o%12||12),l:o%12||12,M:Ut(r[ct]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:Ut(r.getSeconds()),L:Ut(i(t%1e3),3)};for(s in p)while(e.indexOf("%"+s)!==-1)e=e.replace("%"+s,p[s]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},$t.prototype={wrapColor:function(e){this.color>=e&&(this.color=0)},wrapSymbol:function(e){this.symbol>=e&&(this.symbol=0)}},P=Tt(G,1,Y,1e3,Z,6e4,et,36e5,tt,864e5,nt,6048e5,rt,26784e5,it,31556952e3),D={init:function(e,t,n){t=t||"";var r=e.shift,i=t.indexOf("C")>-1,s=i?7:3,o,u,a,f=t.split(" "),l=[].concat(n),c,h,p=function(e){a=e.length;while(a--)e[a]===X&&e.splice(a+1,0,e[a+1],e[a+2],e[a+1],e[a+2])};i&&(p(f),p(l)),e.isArea&&(c=f.splice(f.length-6,6),h=l.splice(l.length-6,6));if(r<=l.length/s)while(r--)l=[].concat(l).splice(0,s).concat(l);e.shift=0;if(f.length){o=l.length;while(f.length<o)u=[].concat(f).splice(f.length-s,s),i&&(u[s-6]=u[s-2],u[s-5]=u[s-1]),f=f.concat(u)}return c&&(f=f.concat(c),l=l.concat(h)),[f,l]},step:function(e,t,n,r){var i=[],s=e.length,o;if(n===1)i=r;else if(s===t.length&&n<1)while(s--)o=parseFloat(e[s]),i[s]=isNaN(o)?e[s]:n*parseFloat(t[s]-o)+o;else i=t;return i}},function(r){n.HighchartsAdapter=n.HighchartsAdapter||r&&{init:function(t){var n=r.fx,i=n.step,s,o=r.Tween,u=o&&o.propHooks;r.extend(r.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}}),r.each(["cur","_default","width","height"],function(t,r){var s=i,a,f;r==="cur"?s=n.prototype:r==="_default"&&o&&(s=u[r],r="set"),a=s[r],a&&(s[r]=function(n){return n=t?n:this,f=n.elem,f.attr?f.attr(n.prop,r==="cur"?e:n.now):a.apply(this,arguments)})}),s=function(e){var n=e.elem,r;e.started||(r=t.init(n,n.d,n.toD),e.start=r[0],e.end=r[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},o?u.d={set:s}:i.d=s,this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var n=0,r=e.length;for(;n<r;n++)if(t.call(e[n],e[n],n,e)===!1)return n}},getScript:r.getScript,inArray:r.inArray,adapterRun:function(e,t){if(t==="width"||t==="height"){var n=r(e).attr("id"),i=r("#"+n).actual(t);return i}return r(e)[t]()},grep:r.grep,map:function(e,t){var n=[],r=0,i=e.length;for(;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},merge:function(){var e=arguments;return r.extend(!0,null,e[0],e[1],e[2],e[3])},offset:function(e){return r(e).offset()},addEvent:function(e,t,n){r(e).bind(t,n)},removeEvent:function(e,n,i){var s=t.removeEventListener?"removeEventListener":"detachEvent";t[s]&&!e[s]&&(e[s]=function(){}),r(e).unbind(n,i)},fireEvent:function(e,t,n,i){var s=r.Event(t),o="detached"+t,u;!m&&n&&(delete n.layerX,delete n.layerY),xt(s,n),e[t]&&(e[o]=e[t],e[t]=null),r.each(["preventDefault","stopPropagation"],function(e,t){var n=s[t];s[t]=function(){try{n.call(s)}catch(e){t==="preventDefault"&&(u=!0)}}}),r(e).trigger(s),e[o]&&(e[t]=e[o],e[o]=null),i&&!s.isDefaultPrevented()&&!u&&i(s)},washMouseEvent:function(t){var n=t.originalEvent||t;return n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n},animate:function(e,t,n){var i=r(e);t.d&&(e.toD=t.d,t.d=1),i.stop(),i.animate(t,n)},stop:function(e){r(e).stop()}}}(n.jQuery);var nn=n.HighchartsAdapter,rn=nn||{};nn&&nn.init.call(nn,D);var sn=rn.adapterRun,on=rn.getScript,un=rn.inArray,an=rn.each,fn=rn.grep,ln=rn.offset,cn=rn.map,hn=rn.merge,pn=rn.addEvent,dn=rn.removeEvent,vn=rn.fireEvent,mn=rn.washMouseEvent,gn=rn.animate,yn=rn.stop,bn={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};O={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/2.3.5/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/2.3.5/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:hn(bn,{enabled:!1,formatter:function(){return this.y},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:F,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#3E576F",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#3E576F",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:F,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:I,top:"1em"},style:{position:F,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,shared:T,snap:w?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var wn=O.plotOptions,En=wn.line;Sn();var Nn=function(e){function r(e){n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(e),n?t=[Nt(n[1]),Nt(n[2]),Nt(n[3]),parseFloat(n[4],10)]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e),n&&(t=[Nt(n[1],16),Nt(n[2],16),Nt(n[3],16),1]))}function i(n){var r;return t&&!isNaN(t[0])?n==="rgb"?r="rgb("+t[0]+","+t[1]+","+t[2]+")":n==="a"?r=t[3]:r="rgba("+t.join(",")+")":r=e,r}function s(e){if(At(e)&&e!==0){var n;for(n=0;n<3;n++)t[n]+=Nt(e*255),t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255)}return this}function o(e){return t[3]=e,this}var t=[],n;return r(e),{get:i,brighten:s,setOpacity:o}};Cn.prototype={init:function(e,n){var r=this;r.element=n==="span"?Ft(n):t.createElementNS(E,n),r.renderer=e,r.attrSetters={}},animate:function(e,t,n){var r=Bt(t,_,!0);yn(this),r?(r=hn(r),n&&(r.complete=n),gn(this,e,r)):(this.attr(e),n&&n())},attr:function(n,r){var i=this,s,o,a,f,l,c=i.element,h=c.nodeName.toLowerCase(),p=i.renderer,d,v,m=i.attrSetters,g=i.shadows,b,w,S=i;Ct(n)&&Dt(r)&&(s=n,n={},n[s]=r);if(Ct(n))s=n,h==="circle"?s={x:"cx",y:"cy"}[s]||s:s==="strokeWidth"&&(s="stroke-width"),S=Pt(c,s)||i[s]||0,s!=="d"&&s!=="visibility"&&(S=parseFloat(S));else for(s in n){d=!1,o=n[s],a=m[s]&&m[s].call(i,o,s);if(a!==!1){a!==e&&(o=a);if(s==="d")o&&o.join&&(o=o.join(" ")),/(NaN| {2}|^$)/.test(o)&&(o="M 0 0");else if(s==="x"&&h==="text"){for(f=0;f<c.childNodes.length;f++)l=c.childNodes[f],Pt(l,"x")===Pt(c,"x")&&Pt(l,"x",o);i.rotation&&Pt(c,"transform","rotate("+i.rotation+" "+o+" "+Nt(n.y||Pt(c,"y"))+")")}else if(s==="fill")o=p.color(o,c,s);else if(h!=="circle"||s!=="x"&&s!=="y")if(h==="rect"&&s==="r")Pt(c,{rx:o,ry:o}),d=!0;else if(s==="translateX"||s==="translateY"||s==="rotation"||s==="verticalAlign")w=!0,d=!0;else if(s==="stroke")o=p.color(o,c,s);else if(s==="dashstyle"){s="stroke-dasharray",o=o&&o.toLowerCase();if(o==="solid")o=W;else if(o){o=o.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),f=o.length;while(f--)o[f]=Nt(o[f])*n["stroke-width"];o=o.join(",")}}else s==="isTracker"?i[s]=o:s==="width"?o=Nt(o):s==="align"?(s="text-anchor",o={left:"start",center:"middle",right:"end"}[o]):s==="title"&&(v=c.getElementsByTagName("title")[0],v||(v=t.createElementNS(E,"title"),c.appendChild(v)),v.textContent=o);else s={x:"cx",y:"cy"}[s]||s;s==="strokeWidth"&&(s="stroke-width"),s==="stroke-width"&&o===0&&(y||p.forExport)&&(o=1e-6),i.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(s)&&(b||(i.symbolAttr(n),b=!0),d=!0);if(g&&/^(width|height|visibility|x|y|d|transform)$/.test(s)){f=g.length;while(f--)Pt(g[f],s,s==="height"?u(o-(g[f].cutHeight||0),0):o)}(s==="width"||s==="height")&&h==="rect"&&o<0&&(o=0),i[s]=o,w&&i.updateTransform(),s==="text"?(o!==i.textStr&&delete i.bBox,i.textStr=o,i.added&&p.buildText(i)):d||Pt(c,s,o)}}return S},symbolAttr:function(e){var t=this;an(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(n){t[n]=Bt(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":W)},crisp:function(e,t,n,r,o){var u=this,a,f={},l={},c;e=e||u.strokeWidth||u.attr&&u.attr("stroke-width")||0,c=i(e)%2/2,l.x=s(t||u.x||0)+c,l.y=s(n||u.y||0)+c,l.width=s((r||u.width||0)-2*c),l.height=s((o||u.height||0)-2*c),l.strokeWidth=e;for(a in l)u[a]!==l[a]&&(u[a]=f[a]=l[a]);return f},css:function(e){var t=this,n=t.element,r=e&&e.width&&n.nodeName.toLowerCase()==="text",i,s="",o=function(e,t){return"-"+t.toLowerCase()};e&&e.color&&(e.fill=e.color),e=xt(t.styles,e),t.styles=e,T&&r&&delete e.width;if(m&&!S)r&&delete e.width,jt(t.element,e);else{for(i in e)s+=i.replace(/([A-Z])/g,o)+":"+e[i]+";";t.attr({style:s})}return r&&t.added&&t.renderer.buildText(t),t},on:function(e,t){return C&&e==="click"&&(this.element.ontouchstart=function(e){e.preventDefault(),t()}),this.element["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},htmlCss:function(e){var t=this,n=t.element,r=e&&n.tagName==="SPAN"&&e.width;return r&&(delete e.width,t.textWidth=r,t.updateTransform()),t.styles=xt(t.styles,e),jt(t.element,e),t},htmlGetBBox:function(){var e=this,t=e.element,n=e.bBox;return n||(t.nodeName==="text"&&(t.style.position=F),n=e.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),n},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=!0;return}var e=this,t=e.renderer,n=e.element,r=e.translateX||0,i=e.translateY||0,s=e.x||0,o=e.y||0,u=e.textAlign||"left",a={left:0,center:.5,right:1}[u],f=u&&u!=="left",h=e.shadows;if(r||i)jt(n,{marginLeft:r,marginTop:i}),h&&an(h,function(e){jt(e,{marginLeft:r+1,marginTop:i+1})});e.inverted&&an(n.childNodes,function(e){t.invertChild(e,n)});if(n.tagName==="SPAN"){var d,g,w=e.rotation,E,S=0,x=1,T=0,N,C=Nt(e.textWidth),k=e.xCorr||0,L=e.yCorr||0,A=[w,u,n.innerHTML,e.textWidth].join(","),O={},M;A!==e.cTT&&(Dt(w)&&(t.isSVG?(M=m?"-ms-transform":y?"-webkit-transform":b?"MozTransform":v?"-o-transform":"",O[M]=O.transform="rotate("+w+"deg)"):(S=w*p,x=l(S),T=c(S),O.filter=w?["progid:DXImageTransform.Microsoft.Matrix(M11=",x,", M12=",-T,", M21=",T,", M22=",x,", sizingMethod='auto expand')"].join(""):W),jt(n,O)),d=Bt(e.elemWidth,n.offsetWidth),g=Bt(e.elemHeight,n.offsetHeight),d>C&&/[ \-]/.test(n.textContent||n.innerText)&&(jt(n,{width:C+z,display:"block",whiteSpace:"normal"}),d=C),E=t.fontMetrics(n.style.fontSize).b,k=x<0&&-d,L=T<0&&-g,N=x*T<0,k+=T*E*(N?1-a:a),L-=x*E*(w?N?a:1-a:1),f&&(k-=d*a*(x<0?-1:1),w&&(L-=g*a*(T<0?-1:1)),jt(n,{textAlign:u})),e.xCorr=k,e.yCorr=L),jt(n,{left:s+k+z,top:o+L+z}),y&&(g=n.offsetHeight),e.cTT=A}},updateTransform:function(){var e=this,t=e.translateX||0,n=e.translateY||0,r=e.inverted,i=e.rotation,s=[];r&&(t+=e.attr("width"),n+=e.attr("height")),(t||n)&&s.push("translate("+t+","+n+")"),r?s.push("rotate(90) scale(-1,1)"):i&&s.push("rotate("+i+" "+(e.x||0)+" "+(e.y||0)+")"),s.length&&Pt(e.element,"transform",s.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var r=this;e?(r.alignOptions=e,r.alignByTranslate=t,n||r.renderer.alignedObjects.push(r)):(e=r.alignOptions,t=r.alignByTranslate),n=Bt(n,r.renderer);var s=e.align,o=e.verticalAlign,u=(n.x||0)+(e.x||0),a=(n.y||0)+(e.y||0),f={};if(s==="right"||s==="center")u+=(n.width-(e.width||0))/{right:1,center:2}[s];f[t?"translateX":"x"]=i(u);if(o==="bottom"||o==="middle")a+=(n.height-(e.height||0))/({bottom:1,middle:2}[o]||1);return f[t?"translateY":"y"]=i(a),r[r.placed?"animate":"attr"](f),r.placed=!0,r.alignAttr=f,r},getBBox:function(){var e=this,t=e.bBox,n=e.renderer,r,i,s=e.rotation,o=e.element,u=e.styles,a=s*p;if(!t){if(o.namespaceURI===E||n.forExport){try{t=o.getBBox?xt({},o.getBBox()):{width:o.offsetWidth,height:o.offsetHeight}}catch(h){}if(!t||t.width<0)t={width:0,height:0}}else t=e.htmlGetBBox();n.isSVG&&(r=t.width,i=t.height,m&&u&&u.fontSize==="11px"&&i===22.700000762939453&&(t.height=i=14),s&&(t.width=f(i*c(a))+f(r*l(a)),t.height=f(i*l(a))+f(r*c(a)))),e.bBox=t}return t},show:function(){return this.attr({visibility:U})},hide:function(){return this.attr({visibility:q})},add:function(e){var t=this.renderer,n=e||t,r=n.element||t.box,i=r.childNodes,s=this.element,o=Pt(s,"zIndex"),u,a,f,l;e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,this.textStr!==undefined&&t.buildText(this),o&&(n.handleZ=!0,o=Nt(o));if(n.handleZ)for(f=0;f<i.length;f++){u=i[f],a=Pt(u,"zIndex");if(u!==s&&(Nt(a)>o||!Dt(o)&&Dt(a))){r.insertBefore(s,u),l=!0;break}}return l||r.appendChild(s),this.added=!0,vn(this,"add"),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.shadows,r,i;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=null,yn(e),e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(i=0;i<e.stops.length;i++)e.stops[i]=e.stops[i].destroy();e.stops=null}e.safeRemoveChild(t),n&&an(n,function(t){e.safeRemoveChild(t)}),_t(e.renderer.alignedObjects,e);for(r in e)delete e[r];return null},empty:function(){var e=this.element,t=e.childNodes,n=t.length;while(n--)e.removeChild(t[n])},shadow:function(e,t,n){var r=[],i,s,o=this.element,a,f,l,c;if(e){f=Bt(e.width,3),l=(e.opacity||.15)/f,c=this.parentInverted?"(-1,-1)":"("+Bt(e.offsetX,1)+", "+Bt(e.offsetY,1)+")";for(i=1;i<=f;i++)s=o.cloneNode(0),a=f*2+1-2*i,Pt(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":l*i,"stroke-width":a,transform:"translate"+c,fill:W}),n&&(Pt(s,"height",u(Pt(s,"height")-a,0)),s.cutHeight=a),t?t.element.appendChild(s):o.parentNode.insertBefore(s,o),r.push(s);this.shadows=r}return this}};var kn=function(){this.init.apply(this,arguments)};kn.prototype={Element:Cn,init:function(e,r,i,s){var u=this,a=location,f;f=u.createElement("svg").attr({xmlns:E,version:"1.1"}),e.appendChild(f.element),u.isSVG=!0,u.box=f.element,u.boxWrapper=f,u.alignedObjects=[],u.url=(b||y)&&t.getElementsByTagName("base").length?a.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",u.defs=this.createElement("defs").add(),u.forExport=s,u.gradients={},u.setSize(r,i,!1);var l,c;b&&e.getBoundingClientRect&&(u.subPixelFix=l=function(){jt(e,{left:0,top:0}),c=e.getBoundingClientRect(),jt(e,{left:o(c.left)-c.left+z,top:o(c.top)-c.top+z})},l(),pn(n,"resize",l))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),Gt(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&dn(n,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){function g(t){return m[t]=r.getBBox?r.getBBox().height:e.renderer.fontMetrics(r.style.fontSize).h,i(m[t]-(m[t-1]||0))}var r=e.element,s=Bt(e.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),o=r.childNodes,u=/style="([^"]+)"/,a=/href="([^"]+)"/,f=Pt(r,"x"),l=e.styles,c=l&&l.width&&Nt(l.width),h=l&&l.lineHeight,p,d="getComputedStyle",v=o.length,m=[];while(v--)r.removeChild(o[v]);c&&!e.added&&this.box.appendChild(r),s[s.length-1]===""&&s.pop(),an(s,function(i,s){var o,l=0,v;i=i.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),o=i.split("|||"),an(o,function(i){if(i!==""||o.length===1){var m={},y=t.createElementNS(E,"tspan"),b;u.test(i)&&(b=i.match(u)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),Pt(y,"style",b)),a.test(i)&&(Pt(y,"onclick",'location.href="'+i.match(a)[1]+'"'),jt(y,{cursor:"pointer"})),i=(i.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),y.appendChild(t.createTextNode(i)),l?m.dx=3:m.x=f;if(!l){if(s){!S&&e.renderer.forExport&&jt(y,{display:"block"}),v=n[d]&&Nt(n[d](p,null).getPropertyValue("line-height"));if(!v||isNaN(v))v=h||p.offsetHeight||g(s)||18;Pt(y,"dy",v)}p=y}Pt(y,m),r.appendChild(y),l++;if(c){var w=i.replace(/([^\^])-/g,"$1- ").split(" "),x,T,N=[];while(w.length||N.length)delete e.bBox,T=e.getBBox().width,x=T>c,!x||w.length===1?(w=N,N=[],w.length&&(y=t.createElementNS(E,"tspan"),Pt(y,{dy:h||16,x:f}),b&&Pt(y,"style",b),r.appendChild(y),T>c&&(c=T))):(y.removeChild(y.firstChild),N.unshift(w.pop())),w.length&&y.appendChild(t.createTextNode(w.join(" ").replace(/- /g,"-")))}}})})},button:function(e,t,n,r,i,s,o){var u=this.label(e,t,n),a=0,f,l,c,h,p,d="style",v={x1:0,y1:0,x2:0,y2:1};return i=hn(Tt(ft,1,at,"#999",st,Tt(ot,v,ut,[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,d,Tt("color","black")),i),c=i[d],delete i[d],s=hn(i,Tt(at,"#68A",st,Tt(ot,v,ut,[[0,"#FFF"],[1,"#ACF"]])),s),h=s[d],delete s[d],o=hn(i,Tt(at,"#68A",st,Tt(ot,v,ut,[[0,"#9BD"],[1,"#CDF"]])),o),p=o[d],delete o[d],pn(u.element,"mouseenter",function(){u.attr(s).css(h)}),pn(u.element,"mouseleave",function(){f=[i,s,o][a],l=[c,h,p][a],u.attr(f).css(l)}),u.setState=function(e){a=e,e?e===2&&u.attr(o).css(p):u.attr(i).css(c)},u.on("click",function(){r.call(u)}).attr(i).css(xt({cursor:"default"},c))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=i(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=i(e[2])+t%2/2),e},path:function(e){var t={fill:W};return Lt(e)?t.d=e:kt(e)&&xt(t,e),this.createElement("path").attr(t)},circle:function(e,t,n){var r=kt(e)?e:{x:e,y:t,r:n};return this.createElement("circle").attr(r)},arc:function(e,t,n,r,i,s){return kt(e)&&(t=e.y,n=e.r,r=e.innerR,i=e.start,s=e.end,e=e.x),this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:r||0,start:i||0,end:s||0})},rect:function(e,t,n,r,i,s){i=kt(e)?e.r:i;var o=this.createElement("rect").attr({rx:i,ry:i,fill:W});return o.attr(kt(e)?e:o.crisp(s,e,t,u(n,0),u(r,0)))},setSize:function(e,t,n){var r=this,i=r.alignedObjects,s=i.length;r.width=e,r.height=t,r.boxWrapper[Bt(n,!0)?"animate":"attr"]({width:e,height:t});while(s--)i[s].align()},g:function(e){var t=this.createElement("g");return Dt(e)?t.attr({"class":R+e}):t},image:function(e,t,n,r,i){var s={preserveAspectRatio:W},o;return arguments.length>1&&xt(s,{x:t,y:n,width:r,height:i}),o=this.createElement("image").attr(s),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):o.element.setAttribute("hc-svg-href",e),o},symbol:function(e,t,n,r,s,o){var u,a=this.symbols[e],f=a&&a(i(t),i(n),r,s,o),l,c=/^url\((.*?)\)$/,h,p,d;return f?(u=this.path(f),xt(u,{symbolName:e,x:t,y:n,width:r,height:s}),o&&xt(u,o)):c.test(e)&&(d=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(i((r-t[0])/2),i((s-t[1])/2)))},h=e.match(c)[1],p=k[h],u=this.image(h).attr({x:t,y:n}),p?d(u,p):(u.attr({width:0,height:0}),l=Ft("img",{onload:function(){d(u,k[h]=[this.width,this.height])},src:h}))),u},symbols:{circle:function(e,t,n,r){var i=.166*n;return[X,e+n/2,t,"C",e+n+i,t,e+n+i,t+r,e+n/2,t+r,"C",e-i,t+r,e-i,t,e+n/2,t,"Z"]},square:function(e,t,n,r){return[X,e,t,V,e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return[X,e+n/2,t,V,e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return[X,e,t,V,e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return[X,e+n/2,t,V,e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,o=i.r||n||r,u=i.end-1e-6,a=i.innerR,f=i.open,p=l(s),d=c(s),v=l(u),m=c(u),g=i.end-s<h?0:1;return[X,e+o*p,t+o*d,"A",o,o,0,g,1,e+o*v,t+o*m,f?X:V,e+a*v,t+a*m,"A",a,a,0,g,0,e+a*p,t+a*d,f?"":"Z"]}},clipRect:function(e,t,n,r){var i,s=R+L++,o=this.createElement("clipPath").attr({id:s}).add(this.defs);return i=this.rect(e,t,n,r,0).add(o),i.id=s,i.clipPath=o,i},color:function(e,t,n){var r=this,i,s=/^rgba/,o,u,a,f,l,c,h,p,d,v,m=[];e&&e.linearGradient?o="linearGradient":e&&e.radialGradient&&(o="radialGradient");if(o){u=e[o],a=r.gradients,l=e.stops,p=t.radialReference,Lt(u)&&(e[o]=u={x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientUnits:"userSpaceOnUse"}),o==="radialGradient"&&p&&!Dt(u.gradientUnits)&&xt(u,{cx:p[0]-p[2]/2+u.cx*p[2],cy:p[1]-p[2]/2+u.cy*p[2],r:u.r*p[2],gradientUnits:"userSpaceOnUse"});for(d in u)d!=="id"&&m.push(d,u[d]);for(d in l)m.push(l[d]);return m=m.join(","),a[m]?v=a[m].id:(u.id=v=R+L++,a[m]=f=r.createElement(o).attr(u).add(r.defs),f.stops=[],an(l,function(e){var t;s.test(e[1])?(i=Nn(e[1]),c=i.get("rgb"),h=i.get("a")):(c=e[1],h=1),t=r.createElement("stop").attr({offset:e[0],"stop-color":c,"stop-opacity":h}).add(f),f.stops.push(t)})),"url("+r.url+"#"+v+")"}return s.test(e)?(i=Nn(e),Pt(t,n+"-opacity",i.get("a")),i.get("rgb")):(t.removeAttribute(n+"-opacity"),e)},text:function(e,t,n,r){var s=this,o=O.chart.style,u=T||!S&&s.forExport,a;return r&&!s.forExport?s.html(e,t,n):(t=i(Bt(t,0)),n=i(Bt(n,0)),a=s.createElement("text").attr({x:t,y:n,text:e}).css({fontFamily:o.fontFamily,fontSize:o.fontSize}),u&&a.css({position:F}),a.x=t,a.y=n,a)},html:function(e,t,n){var r=O.chart.style,s=this.createElement("span"),o=s.attrSetters,u=s.element,a=s.renderer;return o.text=function(e){return e!==u.innerHTML&&delete this.bBox,u.innerHTML=e,!1},o.x=o.y=o.align=function(e,t){return t==="align"&&(t="textAlign"),s[t]=e,s.htmlUpdateTransform(),!1},s.attr({text:e,x:i(t),y:i(n)}).css({position:F,whiteSpace:"nowrap",fontFamily:r.fontFamily,fontSize:r.fontSize}),s.css=s.htmlCss,a.isSVG&&(s.add=function(e){var t,n=a.box.parentNode,r,i=[];if(e){t=e.div;if(!t){r=e;while(r)i.push(r),r=r.parentGroup;an(i.reverse(),function(e){var r;t=e.div=e.div||Ft(j,{className:Pt(e.element,"class")},{position:F,left:(e.translateX||0)+z,top:(e.translateY||0)+z},t||n),r=t.style,xt(e.attrSetters,{translateX:function(e){r.left=e+z},translateY:function(e){r.top=e+z},visibility:function(e,t){r[t]=e}})})}}else t=n;return t.appendChild(u),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s},fontMetrics:function(e){e=Nt(e||11);var t=e<24?e+4:i(e*1.2),n=i(t*.8);return{h:t,b:n}},label:function(t,n,r,s,o,u,a,f,l){function k(){var e,t=p.element.style;v=(y===undefined||b===undefined||h.styles.textAlign)&&p.getBBox(),h.width=(y||v.width||0)+2*g,h.height=(b||v.height||0)+2*g,T=g+c.fontMetrics(t&&t.fontSize).b,C&&(d||(e=f?-T:0,h.box=d=s?c.symbol(s,-m*g,e,h.width,h.height):c.rect(-m*g,e,h.width,h.height,0,x[ft]),d.add(h)),d.attr(hn({width:h.width,height:h.height},x)),x=null)}function L(){var e=h.styles,t=e&&e.textAlign,n=g*(1-m),r;r=f?0:T,Dt(y)&&(t==="center"||t==="right")&&(n+={center:.5,right:1}[t]*(y-v.width)),(n!==p.x||r!==p.y)&&p.attr({x:n,y:r}),p.x=n,p.y=r}function A(e,t){d?d.attr(e,t):x[e]=t}function O(){p.add(h),h.attr({text:t,x:n,y:r}),d&&Dt(o)&&h.attr({anchorX:o,anchorY:u})}var c=this,h=c.g(l),p=c.text("",0,0,a).attr({zIndex:1}),d,v,m=0,g=3,y,b,w,E,S=0,x={},T,N=h.attrSetters,C;pn(h,"add",O),N.width=function(e){return y=e,!1},N.height=function(e){return b=e,!1},N.padding=function(e){return Dt(e)&&e!==g&&(g=e,L()),!1},N.align=function(e){return m={left:0,center:.5,right:1}[e],!1},N.text=function(e,t){return p.attr(t,e),k(),L(),!1},N[ft]=function(e,t){return C=!0,S=e%2/2,A(t,e),!1},N.stroke=N.fill=N.r=function(e,t){return t==="fill"&&(C=!0),A(t,e),!1},N.anchorX=function(e,t){return o=e,A(t,e+S-w),!1},N.anchorY=function(e,t){return u=e,A(t,e-E),!1},N.x=function(e){return h.x=e,e-=m*((y||v.width)+g),w=i(e),h.attr("translateX",w),!1},N.y=function(e){return E=h.y=i(e),h.attr("translateY",e),!1};var M=h.css;return xt(h,{css:function(t){if(t){var n={};t=hn({},t),an(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(r){t[r]!==e&&(n[r]=t[r],delete t[r])}),p.css(n)}return M.call(h,t)},getBBox:function(){return{width:v.width+2*g,height:v.height+2*g,x:v.x-g,y:v.y-g}},shadow:function(e){return d&&d.shadow(e),h},destroy:function(){dn(h,"add",O),dn(h.element,"mouseenter"),dn(h.element,"mouseleave"),p&&(p=p.destroy()),d&&(d=d.destroy()),Cn.prototype.destroy.call(h),h=c=k=L=A=O=null}})}},N=kn;var Ln;if(!S&&!T){var An={init:function(e,t){var n=this,r=["<",t,' filled="f" stroked="f"'],i=["position: ",F,";"];(t==="shape"||t===j)&&i.push("left:0;top:0;width:1px;height:1px;"),g&&i.push("visibility: ",t===j?q:U),r.push(' style="',i.join(""),'"/>'),t&&(r=t===j||t==="span"||t==="img"?r.join(""):e.prepVML(r),n.element=Ft(r)),n.renderer=e,n.attrSetters={}},add:function(e){var t=this,n=t.renderer,r=t.element,i=n.box,s=e&&e.inverted,o=e?e.element||e:i;return s&&n.invertChild(r,o),o.appendChild(r),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),vn(t,"add"),t},updateTransform:Cn.prototype.htmlUpdateTransform,attr:function(t,n){var r=this,s,o,a,f,h=r.element||{},d=h.style,v=h.nodeName,m=r.renderer,y=r.symbolName,b,w=r.shadows,E,S=r.attrSetters,x=r;Ct(t)&&Dt(n)&&(s=t,t={},t[s]=n);if(Ct(t))s=t,s==="strokeWidth"||s==="stroke-width"?x=r.strokeweight:x=r[s];else for(s in t){o=t[s],E=!1,f=S[s]&&S[s].call(r,o,s);if(f!==!1&&o!==null){f!==e&&(o=f);if(y&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(s))b||(r.symbolAttr(t),b=!0),E=!0;else if(s==="d"){o=o||[],r.d=o.join(" "),a=o.length;var T=[];while(a--)At(o[a])?T[a]=i(o[a]*10)-5:o[a]==="Z"?T[a]="x":T[a]=o[a];o=T.join(" ")||"x",h.path=o;if(w){a=w.length;while(a--)w[a].path=w[a].cutOff?this.cutOffPath(o,w[a].cutOff):o}E=!0}else if(s==="visibility"){if(w){a=w.length;while(a--)w[a].style[s]=o}v==="DIV"&&(o=o===q?"-999em":0,s="top"),d[s]=o,E=!0}else if(s==="zIndex")o&&(d[s]=o),E=!0;else if(s==="width"||s==="height")o=u(0,o),this[s]=o,r.updateClipping?(r[s]=o,r.updateClipping()):d[s]=o,E=!0;else if(s==="x"||s==="y")r[s]=o,d[{x:"left",y:"top"}[s]]=o;else if(s==="class")h.className=o;else if(s==="stroke")o=m.color(o,h,s),s="strokecolor";else if(s==="stroke-width"||s==="strokeWidth")h.stroked=o?!0:!1,s="strokeweight",r[s]=o,At(o)&&(o+=z);else if(s==="dashstyle"){var N=h.getElementsByTagName("stroke")[0]||Ft(m.prepVML(["<stroke/>"]),null,null,h);N[s]=o||"solid",r.dashstyle=o,E=!0}else s==="fill"?v==="SPAN"?d.color=o:v!=="IMG"&&(h.filled=o!==W?!0:!1,o=m.color(o,h,s,r),s="fillcolor"):v==="shape"&&s==="rotation"?(r[s]=o,h.style.left=-i(c(o*p)+1)+z,h.style.top=i(l(o*p))+z):s==="translateX"||s==="translateY"||s==="rotation"?(r[s]=o,r.updateTransform(),E=!0):s==="text"&&(this.bBox=null,h.innerHTML=o,E=!0);E||(g?h[s]=o:Pt(h,s,o))}}return x},clip:function(e){var t=this,n,r=t.element,i=r.parentNode,s;return e?(n=e.members,_t(n,t),n.push(t),t.destroyClip=function(){_t(n,t)},i&&i.className==="highcharts-tracker"&&!g&&jt(r,{visibility:q}),s=e.getCSS(t)):(t.destroyClip&&t.destroyClip(),s={clip:g?"inherit":"rect(auto)"}),t.css(s)},css:Cn.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&Yt(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),Cn.prototype.destroy.apply(this)},empty:function(){var e=this.element,t=e.childNodes,n=t.length,r;while(n--)r=t[n],r.parentNode.removeChild(r)},on:function(e,t){return this.element["on"+e]=function(){var e=n.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var n;e=e.split(/[ ,]/),n=e.length;if(n===9||n===11)e[n-4]=e[n-2]=Nt(e[n-2])-10*t;return e.join(" ")},shadow:function(e,t,n){var r=[],i,s=this.element,o=this.renderer,u,a=s.style,f,l=s.path,c,h,p,d;l&&typeof l.value!="string"&&(l="x"),h=l;if(e){p=Bt(e.width,3),d=(e.opacity||.15)/p;for(i=1;i<=3;i++)c=p*2+1-2*i,n&&(h=this.cutOffPath(l.value,c+.5)),f=['<shape isShadow="true" strokeweight="',c,'" filled="false" path="',h,'" coordsize="10 10" style="',s.style.cssText,'" />'],u=Ft(o.prepVML(f),null,{left:Nt(a.left)+Bt(e.offsetX,1),top:Nt(a.top)+Bt(e.offsetY,1)}),n&&(u.cutOff=c+1),f=['<stroke color="',e.color||"black",'" opacity="',d*i,'"/>'],Ft(o.prepVML(f),null,null,u),t?t.element.appendChild(u):s.parentNode.insertBefore(u,s),r.push(u);this.shadows=r}return this}};An=It(Cn,An);var On={Element:An,isIE8:d.indexOf("MSIE 8.0")>-1,init:function(e,n,r){var i=this,s,o;i.alignedObjects=[],s=i.createElement(j),o=s.element,o.style.position=I,e.appendChild(s.element),i.box=o,i.boxWrapper=s,i.setSize(n,r,!1),t.namespaces.hcv||(t.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),t.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,n,r){var s=this.createElement(),o=kt(e);return xt(s,{members:[],left:o?e.x:e,top:o?e.y:t,width:o?e.width:n,height:o?e.height:r,getCSS:function(e){var t=e.inverted,n=this,r=n.top,s=n.left,o=s+n.width,u=r+n.height,a={clip:"rect("+i(t?s:r)+"px,"+i(t?u:o)+"px,"+i(t?o:u)+"px,"+i(t?r:s)+"px)"};return!t&&g&&e.element.nodeName!=="IMG"&&xt(a,{width:o+z,height:u+z}),a},updateClipping:function(){an(s.members,function(e){e.css(s.getCSS(e))})}})},color:function(e,t,n,i){var s=this,o,u=/^rgba/,a,f,l=W;e&&e.linearGradient?f="gradient":e&&e.radialGradient&&(f="pattern");if(f){var c,p,d=e.linearGradient||e.radialGradient,v,m,g,y,b,w,E,S,x="",T=e.stops,N,C,k=[],L=function(){a=['<fill colors="'+k.join(",")+'" opacity="',w,'" o:opacity2="',b,'" type="',f,'" ',x,'focus="100%" method="any" />'],Ft(s.prepVML(a),null,null,t)};N=T[0],C=T[T.length-1],N[0]>0&&T.unshift([0,N[1]]),C[0]<1&&T.push([1,C[1]]),an(T,function(e,t){u.test(e[1])?(o=Nn(e[1]),c=o.get("rgb"),p=o.get("a")):(c=e[1],p=1),k.push(e[0]*100+"% "+c),t?(w=p,E=c):(b=p,S=c)});if(n==="fill")if(f==="gradient")v=d.x1||d[0]||0,m=d.y1||d[1]||0,g=d.x2||d[2]||0,y=d.y2||d[3]||0,x='angle="'+(90-r.atan((y-m)/(g-v))*180/h)+'"',L();else{var A=d.r,M=A*2,_=A*2,D=d.cx,P=d.cy,H=t.radialReference,B,j=function(){H&&(B=i.getBBox(),D+=(H[0]-B.x)/B.width-.5,P+=(H[1]-B.y)/B.height-.5,M*=H[2]/B.width,_*=H[2]/B.height),x='src="'+O.global.VMLRadialGradientURL+'" '+'size="'+M+","+_+'" '+'origin="0.5,0.5" '+'position="'+D+","+P+'" '+'color2="'+S+'" ',L()};i.added?j():pn(i,"add",j),l=E}else l=c}else if(u.test(e)&&t.tagName!=="IMG")o=Nn(e),a=["<",n,' opacity="',o.get("a"),'"/>'],Ft(this.prepVML(a),null,null,t),l=o.get("rgb");else{var F=t.getElementsByTagName(n);F.length&&(F[0].opacity=1),l=e}return l},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return e=e.join(""),n?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e.indexOf('style="')===-1?e=e.replace("/>",' style="'+t+'" />'):e=e.replace('style="','style="'+t)):e=e.replace("<","<hcv:"),e},text:kn.prototype.html,path:function(e){var t={coordsize:"10 10"};return Lt(e)?t.d=e:kt(e)&&xt(t,e),this.createElement("shape").attr(t)},circle:function(e,t,n){return this.symbol("circle").attr({x:e-n,y:t-n,width:2*n,height:2*n})},g:function(e){var t,n;return e&&(n={className:R+e,"class":R+e}),t=this.createElement(j).attr(n),t},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return arguments.length>1&&s.attr({x:t,y:n,width:r,height:i}),s},rect:function(e,t,n,r,i,s){kt(e)&&(t=e.y,n=e.width,r=e.height,s=e.strokeWidth,e=e.x);var o=this.symbol("rect");return o.r=i,o.attr(o.crisp(s,e,t,u(n,0),u(r,0)))},invertChild:function(e,t){var n=t.style;jt(e,{flip:"x",left:Nt(n.width)-1,top:Nt(n.height)-1,rotation:-90})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r,a=l(s),f=c(s),p=l(o),d=c(o),v=i.innerR,m=.08/u,g=v&&.1/v||0,y;return o-s===0?["x"]:(2*h-o+s<m?p=-m:o-s<g&&(p=l(s+g)),y=["wa",e-u,t-u,e+u,t+u,e+u*a,t+u*f,e+u*p,t+u*d],i.open&&!v&&y.push("e",X,e,t),y.push("at",e-v,t-v,e+v,t+v,e+v*p,t+v*d,e+v*a,t+v*f,"x","e"),y)},circle:function(e,t,n,r){return["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){var s=e+n,o=t+r,u,f;return!Dt(i)||!i.r?u=kn.prototype.symbols.square.apply(0,arguments):(f=a(i.r,n,r),u=[X,e+f,t,V,s-f,t,"wa",s-2*f,t,s,t+2*f,s-f,t,s,t+f,V,s,o-f,"wa",s-2*f,o-2*f,s,o,s,o-f,s-f,o,V,e+f,o,"wa",e,o-2*f,e+2*f,o,e+f,o,e,o-f,V,e,t+f,"wa",e,t,e+2*f,t+2*f,e,t+f,e+f,t,"x","e"]),u}}};Ln=function(){this.init.apply(this,arguments)},Ln.prototype=hn(kn.prototype,On),N=Ln}var Mn,_n;T&&(Mn=function(){E="http://www.w3.org/1999/xhtml"},Mn.prototype.symbols={},_n=function(){function t(){var t=e.length,n;for(n=0;n<t;n++)e[n]();e=[]}var e=[];return{push:function(n,r){e.length===0&&on(r,t),e.push(n)}}}()),N=Ln||Mn||kn,Dn.prototype={addLabel:function(){var e=this,t=e.axis,n=t.options,r=t.chart,s=t.horiz,o=t.categories,a=e.pos,f=n.labels,l,c=t.tickPositions,h=o&&s&&o.length&&!f.step&&!f.staggerLines&&!f.rotation&&r.plotWidth/c.length||!s&&r.plotWidth/2,p=a===c[0],d=a===c[c.length-1],v,m,g=o&&Dt(o[a])?o[a]:a,y=e.label,b=c.info,w;t.isDatetimeAxis&&b&&(w=n.dateTimeLabelFormats[b.higherRanks[a]||b.unitName]),e.isFirst=p,e.isLast=d,l=t.labelFormatter.call({axis:t,chart:r,isFirst:p,isLast:d,dateTimeLabelFormat:w,value:t.isLog?en(Mt(g)):g}),v=h&&{width:u(1,i(h-2*(f.padding||10)))+z},v=xt(v,f.style),Dt(y)?y&&y.attr({text:l}).css(v):(m={align:f.align},At(f.rotation)&&(m.rotation=f.rotation),e.label=Dt(l)&&f.enabled?r.renderer.text(l,0,0,f.useHTML).attr(m).css(v).add(t.labelGroup):null)},getLabelSize:function(){var e=this.label,t=this.axis;return e?(this.labelBBox=e.getBBox())[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.labelBBox,t=this.axis,n=t.options,r=n.labels,i=e.width,s=i*{left:0,center:.5,right:1}[r.align]-r.x;return[-s,i-s]},handleOverflow:function(e,t){var n=!0,r=this.axis,i=r.chart,s=this.isFirst,o=this.isLast,u=t.x,a=r.reversed,f=r.tickPositions;if(s||o){var l=this.getLabelSides(),c=l[0],h=l[1],p=i.plotLeft,d=p+r.len,v=r.ticks[f[e+(s?1:-1)]],m=v&&v.label.xy&&v.label.xy.x+v.getLabelSides()[s?0:1];s&&!a||o&&a?u+c<p&&(u=p-c,v&&u+h>m&&(n=!1)):u+h>d&&(u=d-h,v&&u+c<m&&(n=!1)),t.x=u}return n},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,n,r,i,s,o,u){var a=this.axis,f=a.transA,l=a.reversed,c=a.staggerLines;return e=e+i.x-(s&&r?s*f*(l?-1:1):0),t=t+i.y-(s&&!r?s*f*(l?1:-1):0),Dt(i.y)||(t+=Nt(n.styles.lineHeight)*.9-n.getBBox().height/2),c&&(t+=o/(u||1)%c*16),{x:e,y:t}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine([X,e,t,V,e+(i?0:-n),t+(i?n:0)],r)},render:function(t,n){var r=this,i=r.axis,s=i.options,o=i.chart,u=o.renderer,a=i.horiz,f=r.type,l=r.label,c=r.pos,h=s.labels,p=r.gridLine,d=f?f+"Grid":"grid",v=f?f+"Tick":"tick",m=s[d+"LineWidth"],g=s[d+"LineColor"],y=s[d+"LineDashStyle"],b=s[v+"Length"],w=s[v+"Width"]||0,E=s[v+"Color"],S=s[v+"Position"],x,T=r.mark,N,C=h.step,k,L=!0,A=i.tickmarkOffset,O=r.getPosition(a,c,A,n),M=O.x,_=O.y,D=i.staggerLines;m&&(x=i.getPlotLinePath(c+A,m,n),p===e&&(k={stroke:g,"stroke-width":m},y&&(k.dashstyle=y),f||(k.zIndex=1),r.gridLine=p=m?u.path(x).attr(k).add(i.gridGroup):null),!n&&p&&x&&p[r.isNew?"attr":"animate"]({d:x})),w&&b&&(S==="inside"&&(b=-b),i.opposite&&(b=-b),N=r.getMarkPath(M,_,b,w,a,u),T?T.animate({d:N}):r.mark=u.path(N).attr({stroke:E,"stroke-width":w}).add(i.axisGroup)),l&&!isNaN(M)&&(l.xy=O=r.getLabelPosition(M,_,l,a,h,A,t,C),r.isFirst&&!Bt(s.showFirstLabel,1)||r.isLast&&!Bt(s.showLastLabel,1)?L=!1:!D&&a&&h.overflow==="justify"&&!r.handleOverflow(t,O)&&(L=!1),C&&t%C&&(L=!1),L?(l[r.isNew?"attr":"animate"](O),r.isNew=!1):l.attr("y",-9999))},destroy:function(){Gt(this,this.axis)}},Pn.prototype={render:function(){var e=this,t=e.axis,n=t.horiz,r=(t.pointRange||0)/2,i=e.options,s=i.label,o=e.label,f=i.width,l=i.to,c=i.from,h=Dt(c)&&Dt(l),p=i.value,d=i.dashStyle,v=e.svgElem,m=[],g,y,b,w,E,S,x=i.color,T=i.zIndex,N=i.events,C,k=t.chart.renderer;t.isLog&&(c=Ot(c),l=Ot(l),p=Ot(p));if(f)m=t.getPlotLinePath(p,f),C={stroke:x,"stroke-width":f},d&&(C.dashstyle=d);else{if(!h)return;c=u(c,t.min-r),l=a(l,t.max+r),m=t.getPlotBandPath(c,l,i),C={fill:x},i.borderWidth&&(C.stroke=i.borderColor,C["stroke-width"]=i.borderWidth)}Dt(T)&&(C.zIndex=T);if(v)m?v.animate({d:m},null,v.onGetPath):(v.hide(),v.onGetPath=function(){v.show()});else if(m&&m.length){e.svgElem=v=k.path(m).attr(C).add();if(N){g=function(t){v.on(t,function(n){N[t].apply(e,[n])})};for(y in N)g(y)}}return s&&Dt(s.text)&&m&&m.length&&t.width>0&&t.height>0?(s=hn({align:n&&h&&"center",x:n?!h&&4:10,verticalAlign:!n&&h&&"middle",y:n?h?16:10:h?6:-4,rotation:n&&!h&&90},s),o||(e.label=o=k.text(s.text,0,0).attr({align:s.textAlign||s.align,rotation:s.rotation,zIndex:T}).css(s.style).add()),b=[m[1],m[4],Bt(m[6],m[1])],w=[m[2],m[5],Bt(m[7],m[2])],E=Kt(b),S=Kt(w),o.align(s,!1,{x:E,y:S,width:Qt(b)-E,height:Qt(w)-S}),o.show()):o&&o.hide(),e},destroy:function(){var e=this,t=e.axis;_t(t.plotLinesAndBands,e),Gt(e,this.axis)}},Hn.prototype={destroy:function(){Gt(this,this.axis)},setTotal:function(e){this.total=e,this.cum=e},render:function(e){var t=this.options.formatter.call(this);this.label?this.label.attr({text:t,visibility:q}):this.label=this.axis.chart.renderer.text(t,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:q}).add(e)},setOffset:function(e,t){var n=this,r=n.axis,i=r.chart,s=i.inverted,o=this.isNegative,u=r.translate(this.percent?100:this.total,0,0,0,1),a=r.translate(0),l=f(u-a),c=i.xAxis[0].translate(this.x)+e,h=i.plotHeight,p={x:s?o?u:u-l:c,y:s?h-c-t:o?h-u-l:h-u,width:s?l:t,height:s?t:l},d=this.label,v;d&&(d.align(this.alignOptions,null,p),v=d.alignAttr,d.attr({visibility:this.options.crop===!1||i.isInsidePlot(v.x,v.y)?S?"inherit":U:q}))}},Bn.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:bn,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:bn.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(t,n){var r=n.isX,i=this;i.horiz=t.inverted?!r:r,i.isXAxis=r,i.xOrY=r?"x":"y",i.opposite=n.opposite,i.side=i.horiz?i.opposite?0:2:i.opposite?1:3,i.setOptions(n);var s=this.options,o=s.type,u=o==="datetime";i.labelFormatter=s.labels.formatter||i.defaultLabelFormatter,i.staggerLines=i.horiz&&s.labels.staggerLines,i.userOptions=n,i.minPixelPadding=0,i.chart=t,i.reversed=s.reversed,i.categories=s.categories,i.isLog=o==="logarithmic",i.isLinked=Dt(s.linkedTo),i.isDatetimeAxis=u,i.tickmarkOffset=s.categories&&s.tickmarkPlacement==="between"?.5:0,i.ticks={},i.minorTicks={},i.plotLinesAndBands=[],i.alternateBands={},i.len=0,i.minRange=i.userMinRange=s.minRange||s.maxZoom,i.range=s.range,i.offset=s.offset||0,i.stacks={},i.max=null,i.min=null;var a,f=i.options.events;t.axes.push(i),t[r?"xAxis":"yAxis"].push(i),i.series=[],t.inverted&&r&&i.reversed===e&&(i.reversed=!0),i.removePlotBand=i.removePlotBandOrLine,i.removePlotLine=i.removePlotBandOrLine,i.addPlotBand=i.addPlotBandOrLine,i.addPlotLine=i.addPlotBandOrLine;for(a in f)pn(i,a,f[a]);i.isLog&&(i.val2lin=Ot,i.lin2val=Mt)},setOptions:function(e){this.options=hn(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],hn(O[this.isXAxis?"xAxis":"yAxis"],e))},defaultLabelFormatter:function(){var t=this.axis,n=this.value,r=t.categories,i=this.dateTimeLabelFormat,s=O.lang.numericSymbols,o=s&&s.length,u,a,f=t.isLog?n:t.tickInterval;if(r)a=n;else if(i)a=M(i,n);else if(o&&f>=1e3)while(o--&&a===e)u=Math.pow(1e3,o+1),f>=u&&s[o]!==null&&(a=Rt(n/u,-1)+s[o]);return a===e&&(n>=1e3?a=Rt(n,0):a=Rt(n,-1)),a},getSeriesExtremes:function(){var t=this,n=t.chart,r=t.stacks,i=[],s=[],o;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=null,an(t.series,function(f){if(f.visible||!n.options.chart.ignoreHiddenSeries){var l=f.options,c,h,p,d,v,m,g,y,b,w,E=l.threshold,S,x=[],T=0;t.hasVisibleSeries=!0,t.isLog&&E<=0&&(E=l.threshold=null);if(t.isXAxis)g=f.xData,g.length&&(t.dataMin=a(Bt(t.dataMin,g[0]),Kt(g)),t.dataMax=u(Bt(t.dataMax,g[0]),Qt(g)));else{var N,C,k,L=f.cropped,A=f.xAxis.getExtremes(),O,M=!!f.modifyValue;c=l.stacking,t.usePercentage=c==="percent",c&&(v=l.stack,d=f.type+Bt(v,""),m="-"+d,f.stackKey=d,h=i[d]||[],i[d]=h,p=s[m]||[],s[m]=p),t.usePercentage&&(t.dataMin=0,t.dataMax=99),g=f.processedXData,y=f.processedYData,S=y.length;for(o=0;o<S;o++){b=g[o],w=y[o],c&&(N=w<E,C=N?p:h,k=N?m:d,Dt(C[b])?(C[b]=en(C[b]+w),w=[w,C[b]]):C[b]=w,r[k]||(r[k]={}),r[k][b]||(r[k][b]=new Hn(t,t.options.stackLabels,N,b,v,c)),r[k][b].setTotal(C[b]));if(w!==null&&w!==e){M&&(w=f.modifyValue(w));if(L||(g[o+1]||b)>=A.min&&(g[o-1]||b)<=A.max){O=w.length;if(O)while(O--)w[O]!==null&&(x[T++]=w[O]);else x[T++]=w}}}!t.usePercentage&&x.length&&(t.dataMin=a(Bt(t.dataMin,x[0]),Kt(x)),t.dataMax=u(Bt(t.dataMax,x[0]),Qt(x))),Dt(E)&&(t.dataMin>=E?(t.dataMin=E,t.ignoreMinPadding=!0):t.dataMax<E&&(t.dataMax=E,t.ignoreMaxPadding=!0))}}})},translate:function(e,t,n,r,i,s){var o=this,u=o.len,a=1,f=0,l=r?o.oldTransA:o.transA,c=r?o.oldMin:o.min,h,p=o.options.ordinal||o.isLog&&i;return l||(l=o.transA),n&&(a*=-1,f=u),o.reversed&&(a*=-1,f-=a*u),t?(o.reversed&&(e=u-e),h=e/l+c,p&&(h=o.lin2val(h))):(p&&(e=o.val2lin(e)),h=a*(e-c)*l+f+a*o.minPixelPadding+(s?l*o.pointRange/2:0)),h},getPlotLinePath:function(e,t,n){var r=this,s=r.chart,o=r.left,u=r.top,a,f,l,c,h=r.translate(e,null,null,n),p=n&&s.oldChartHeight||s.chartHeight,d=n&&s.oldChartWidth||s.chartWidth,v,m=r.transB;a=l=i(h+m),f=c=i(p-h-m);if(isNaN(h))v=!0;else if(r.horiz){f=u,c=p-r.bottom;if(a<o||a>o+r.width)v=!0}else{a=o,l=d-r.right;if(f<u||f>u+r.height)v=!0}return v?null:s.renderer.crispLine([X,a,f,V,l,c],t||0)},getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),r=this.getPlotLinePath(e);return r&&n?r.push(n[4],n[5],n[1],n[2]):r=null,r},getLinearTickPositions:function(e,t,n){var r,i,u=en(s(t/e)*e),a=en(o(n/e)*e),f=[];r=u;while(r<=a){f.push(r),r=en(r+e);if(r===i)break;i=r}return f},getLogTickPositions:function(e,t,n,o){var u=this,a=u.options,f=u.len,l=[];o||(u._minorAutoInterval=null);if(e>=.5)e=i(e),l=u.getLinearTickPositions(e,t,n);else if(e>=.08){var c=s(t),h,p,d,v,m,g,y;e>.3?h=[1,2,4]:e>.15?h=[1,2,4,6,8]:h=[1,2,3,4,5,6,7,8,9];for(p=c;p<n+1&&!y;p++){v=h.length;for(d=0;d<v&&!y;d++)m=Ot(Mt(p)*h[d]),m>t&&l.push(g),g>n&&(y=!0),g=m}}else{var b=Mt(t),w=Mt(n),E=a[o?"minorTickInterval":"tickInterval"],S=E==="auto"?null:E,x=a.tickPixelInterval/(o?5:1),T=o?f/u.tickPositions.length:f;e=Bt(S,u._minorAutoInterval,(w-b)*x/(T||1)),e=Wt(e,null,r.pow(10,s(r.log(e)/r.LN10))),l=cn(u.getLinearTickPositions(e,b,w),Ot),o||(u._minorAutoInterval=e/5)}return o||(u.tickInterval=e),l},getMinorTickPositions:function(){var e=this,t=e.options,n=e.tickPositions,r=e.minorTickInterval,i=[],s,o,u;if(e.isLog){u=n.length;for(o=1;o<u;o++)i=i.concat(e.getLogTickPositions(r,n[o-1],n[o],!0))}else if(e.isDatetimeAxis&&t.minorTickInterval==="auto")i=i.concat(Vt(Xt(r),e.min,e.max,t.startOfWeek));else for(s=e.min+(n[0]-e.min)%r;s<=e.max;s+=r)i.push(s);return i},adjustForMinRange:function(){var t=this,n=t.options,r=t.min,i=t.max,s,o=t.dataMax-t.dataMin>=t.minRange,u,f,l,c,h,p,d;t.isXAxis&&t.minRange===e&&!t.isLog&&(Dt(n.min)||Dt(n.max)?t.minRange=null:(an(t.series,function(t){c=t.xData,h=t.xIncrement?1:c.length-1;for(f=h;f>0;f--){l=c[f]-c[f-1];if(u===e||l<u)u=l}}),t.minRange=a(u*5,t.dataMax-t.dataMin)));if(i-r<t.minRange){var v=t.minRange;s=(v-i+r)/2,p=[r-s,Bt(n.min,r-s)],o&&(p[2]=t.dataMin),r=Qt(p),d=[r+v,Bt(n.max,r+v)],o&&(d[2]=t.dataMax),i=Kt(d),i-r<v&&(p[0]=i-v,p[1]=Bt(n.min,i-v),r=Qt(p))}t.min=r,t.max=i},setAxisTranslation:function(){var e=this,t=e.max-e.min,n=0,r,i=0,s=0,o=e.linkedParent,f=e.transA;e.isXAxis&&(o?(i=o.minPointOffset,s=o.pointRangePadding):an(e.series,function(e){var t=e.pointRange,o=e.options.pointPlacement,f=e.closestPointRange;n=u(n,t),i=u(i,o?0:t/2),s=u(s,o==="on"?0:t),!e.noSharedTooltip&&Dt(f)&&(r=Dt(r)?a(r,f):f)}),e.minPointOffset=i,e.pointRangePadding=s,e.pointRange=n,e.closestPointRange=r),e.oldTransA=f,e.translationSlope=e.transA=f=e.len/(t+s||1),e.transB=e.horiz?e.left:e.bottom,e.minPixelPadding=f*i},setTickPositions:function(e){var t=this,n=t.chart,i=t.options,o=t.isLog,f=t.isDatetimeAxis,l=t.isXAxis,c=t.isLinked,h=t.options.tickPositioner,p,d=i.maxPadding,v=i.minPadding,m,g,y=i.tickInterval,b=i.minTickInterval,w=i.tickPixelInterval,E,S=t.categories;c?(t.linkedParent=n[l?"xAxis":"yAxis"][i.linkedTo],g=t.linkedParent.getExtremes(),t.min=Bt(g.min,g.dataMin),t.max=Bt(g.max,g.dataMax),i.type!==t.linkedParent.options.type&&Zt(11,1)):(t.min=Bt(t.userMin,i.min,t.dataMin),t.max=Bt(t.userMax,i.max,t.dataMax)),o&&(!e&&a(t.min,Bt(t.dataMin,t.min))<=0&&Zt(10,1),t.min=en(Ot(t.min)),t.max=en(Ot(t.max))),t.range&&(t.userMin=t.min=u(t.min,t.max-t.range),t.userMax=t.max,e&&(t.range=null)),t.adjustForMinRange(),!S&&!t.usePercentage&&!c&&Dt(t.min)&&Dt(t.max)&&(m=t.max-t.min,m&&(!Dt(i.min)&&!Dt(t.userMin)&&v&&(t.dataMin<0||!t.ignoreMinPadding)&&(t.min-=m*v),!Dt(i.max)&&!Dt(t.userMax)&&d&&(t.dataMax>0||!t.ignoreMaxPadding)&&(t.max+=m*d))),t.min===t.max||t.min===undefined||t.max===undefined?t.tickInterval=1:c&&!y&&w===t.linkedParent.options.tickPixelInterval?t.tickInterval=t.linkedParent.tickInterval:t.tickInterval=Bt(y,S?1:(t.max-t.min)*w/(t.len||1)),l&&!e&&an(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(e),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),!y&&t.tickInterval<b&&(t.tickInterval=b),!f&&!o&&(p=r.pow(10,s(r.log(t.tickInterval)/r.LN10)),y||(t.tickInterval=Wt(t.tickInterval,null,p,i))),t.minorTickInterval=i.minorTickInterval==="auto"&&t.tickInterval?t.tickInterval/5:i.minorTickInterval,t.tickPositions=E=i.tickPositions||h&&h.apply(t,[t.min,t.max]),E||(f?E=(t.getNonLinearTimeTicks||Vt)(Xt(t.tickInterval,i.units),t.min,t.max,i.startOfWeek,t.ordinalPositions,t.closestPointRange,!0):o?E=t.getLogTickPositions(t.tickInterval,t.min,t.max):E=t.getLinearTickPositions(t.tickInterval,t.min,t.max),t.tickPositions=E);if(!c){var x=E[0],T=E[E.length-1],N=t.minPointOffset||0,C;i.startOnTick?t.min=x:t.min-N>x&&E.shift(),i.endOnTick?t.max=T:t.max+N<T&&E.pop(),E.length===1&&(C=1e-9,t.min-=C,t.max+=C)}},setMaxTicks:function(){var e=this.chart,t=e.maxTicks,n=this.tickPositions,r=this.xOrY;t||(t={x:0,y:0}),!this.isLinked&&!this.isDatetimeAxis&&n.length>t[r]&&this.options.alignTicks!==!1&&(t[r]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this,t=e.chart,n=e.xOrY,r=e.tickPositions,i=t.maxTicks;if(i&&i[n]&&!e.isDatetimeAxis&&!e.categories&&!e.isLinked&&e.options.alignTicks!==!1){var s=e.tickAmount,o=r.length,u;e.tickAmount=u=i[n];if(o<u){while(r.length<u)r.push(en(r[r.length-1]+e.tickInterval));e.transA*=(o-1)/(u-1),e.max=r[r.length-1]}Dt(s)&&u!==s&&(e.isDirty=!0)}},setScale:function(){var e=this,t=e.stacks,n,r,i,s;e.oldMin=e.min,e.oldMax=e.max,e.oldAxisLength=e.len,e.setAxisSize(),s=e.len!==e.oldAxisLength,an(e.series,function(e){if(e.isDirtyData||e.isDirty||e.xAxis.isDirty)i=!0});if(s||i||e.isLinked||e.userMin!==e.oldUserMin||e.userMax!==e.oldUserMax)e.getSeriesExtremes(),e.setTickPositions(),e.oldUserMin=e.userMin,e.oldUserMax=e.userMax,e.isDirty||(e.isDirty=s||e.min!==e.oldMin||e.max!==e.oldMax);if(!e.isXAxis)for(n in t)for(r in t[n])t[n][r].cum=t[n][r].total;e.setMaxTicks()},setExtremes:function(e,t,n,r,i){var s=this,o=s.chart;n=Bt(n,!0),i=xt(i,{min:e,max:t}),vn(s,"setExtremes",i,function(){s.userMin=e,s.userMax=t,s.isDirtyExtremes=!0,n&&o.redraw(r)})},zoom:function(t,n){return this.setExtremes(t,n,!1,e,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this,t=e.chart,n=e.options,r=n.offsetLeft||0,i=n.offsetRight||0;e.left=Bt(n.left,t.plotLeft+r),e.top=Bt(n.top,t.plotTop),e.width=Bt(n.width,t.plotWidth-r+i),e.height=Bt(n.height,t.plotHeight),e.bottom=t.chartHeight-e.height-e.top,e.right=t.chartWidth-e.width-e.left,e.len=u(e.horiz?e.width:e.height,0)},getExtremes:function(){var e=this,t=e.isLog;return{min:t?en(Mt(e.min)):e.min,max:t?en(Mt(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,n=t.isLog,r=n?Mt(t.min):t.min,i=n?Mt(t.max):t.max;return r>e||e===null?e=r:i<e&&(e=i),t.translate(e,0,1,0,1)},addPlotBandOrLine:function(e){var t=(new Pn(this,e)).render();return this.plotLinesAndBands.push(t),t},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,a=e.side,f,l,c=0,h,p=0,d=r.title,v=r.labels,m=0,g=t.axisOffset,y=[-1,1,1,-1][a],b;e.hasData=f=e.hasVisibleSeries||Dt(e.min)&&Dt(e.max)&&!!i,e.showAxis=l=f||Bt(r.showEmpty,!0),e.axisGroup||(e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).add(),e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||2}).add(),e.labelGroup=n.g("axis-labels").attr({zIndex:v.zIndex||7}).add());if(f||e.isLinked)an(i,function(t){s[t]?s[t].addLabel():s[t]=new Dn(e,t)}),an(i,function(e){if(a===0||a===2||{1:"left",3:"right"}[a]===v.align)m=u(s[e].getLabelSize(),m)}),e.staggerLines&&(m+=(e.staggerLines-1)*16);else for(b in s)s[b].destroy(),delete s[b];d&&d.text&&(e.axisTitle||(e.axisTitle=n.text(d.text,0,0,d.useHTML).attr({zIndex:7,rotation:d.rotation||0,align:d.textAlign||{low:"left",middle:"center",high:"right"}[d.align]}).css(d.style).add(e.axisGroup),e.axisTitle.isNew=!0),l&&(c=e.axisTitle.getBBox()[o?"height":"width"],p=Bt(d.margin,o?5:10),h=d.offset),e.axisTitle[l?"show":"hide"]()),e.offset=y*Bt(r.offset,g[a]),e.axisTitleMargin=Bt(h,m+p+(a!==2&&m&&y*r.labels[o?"y":"x"])),g[a]=u(g[a],e.axisTitleMargin+c+y*e.offset)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r,o=t.chartHeight-this.bottom-(n?this.height:0)+r;return this.lineTop=o,t.renderer.crispLine([X,i?this.left:s,i?o:this.top,V,i?t.chartWidth-this.right:s,i?o:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,n=this.top,r=this.len,i=this.options.title,s=e?t:n,o=this.opposite,u=this.offset,a=Nt(i.style.fontSize||12),f={low:s+(e?0:r),middle:s+r/2,high:s+(e?r:0)}[i.align],l=(e?n+this.height:t)+(e?1:-1)*(o?-1:1)*this.axisTitleMargin+(this.side===2?a:0);return{x:e?f:l+(o?this.width:0)+u+(i.x||0),y:e?l-(o?this.height:0)+u:f+(i.y||0)}},render:function(){var t=this,n=t.chart,r=n.renderer,i=t.options,s=t.isLog,o=t.isLinked,u=t.tickPositions,a=t.axisTitle,f=t.stacks,l=t.ticks,c=t.minorTicks,h=t.alternateBands,p=i.stackLabels,d=i.alternateGridColor,v=t.tickmarkOffset,m=i.lineWidth,g,y=n.hasRendered,b=y&&Dt(t.oldMin)&&!isNaN(t.oldMin),w=t.hasData,E=t.showAxis,S,x;if(w||o)t.minorTickInterval&&!t.categories&&an(t.getMinorTickPositions(),function(e){c[e]||(c[e]=new Dn(t,e,"minor")),b&&c[e].isNew&&c[e].render(null,!0),c[e].isActive=!0,c[e].render()}),u.length&&an(u.slice(1).concat([u[0]]),function(e,n){n=n===u.length-1?0:n+1;if(!o||e>=t.min&&e<=t.max)l[e]||(l[e]=new Dn(t,e)),b&&l[e].isNew&&l[e].render(n,!0),l[e].isActive=!0,l[e].render(n)}),d&&an(u,function(n,r){r%2===0&&n<t.max&&(h[n]||(h[n]=new Pn(t)),S=n+v,x=u[r+1]!==e?u[r+1]+v:t.max,h[n].options={from:s?Mt(S):S,to:s?Mt(x):x,color:d},h[n].render(),h[n].isActive=!0)}),t._addedPlotLB||(an((i.plotLines||[]).concat(i.plotBands||[]),function(e){t.addPlotBandOrLine(e)}),t._addedPlotLB=!0);an([l,c,h],function(e){var t;for(t in e)e[t].isActive?e[t].isActive=!1:(e[t].destroy(),delete e[t])}),m&&(g=t.getLinePath(m),t.axisLine?t.axisLine.animate({d:g}):t.axisLine=r.path(g).attr({stroke:i.lineColor,"stroke-width":m,zIndex:7}).add(t.axisGroup),t.axisLine[E?"show":"hide"]()),a&&E&&(a[a.isNew?"attr":"animate"](t.getTitlePosition()),a.isNew=!1);if(p&&p.enabled){var T,N,C,k=t.stackTotalGroup;k||(t.stackTotalGroup=k=r.g("stack-labels").attr({visibility:U,zIndex:6}).add()),k.translate(n.plotLeft,n.plotTop);for(T in f){N=f[T];for(C in N)N[C].render(k)}}t.isDirty=!1},removePlotBandOrLine:function(e){var t=this.plotLinesAndBands,n=t.length;while(n--)t[n].id===e&&t[n].destroy()},setTitle:function(e,t){var n=this.chart,r=this.options,i=this.axisTitle;r.title=hn(r.title,e),this.axisTitle=i&&i.destroy(),this.isDirty=!0,Bt(t,!0)&&n.redraw()},redraw:function(){var e=this,t=e.chart;t.tracker.resetTracker&&t.tracker.resetTracker(!0),e.render(),an(e.plotLinesAndBands,function(e){e.render()}),an(e.series,function(e){e.isDirty=!0})},setCategories:function(e,t){var n=this,r=n.chart;n.categories=n.userOptions.categories=e,an(n.series,function(e){e.translate(),e.setTooltipPoints(!0)}),n.isDirty=!0,Bt(t,!0)&&r.redraw()},destroy:function(){var e=this,t=e.stacks,n;dn(e);for(n in t)Gt(t[n]),t[n]=null;an([e.ticks,e.minorTicks,e.alternateBands,e.plotLinesAndBands],function(e){Gt(e)}),an(["stackTotalGroup","axisLine","axisGroup","gridGroup","labelGroup","axisTitle"],function(t){e[t]&&(e[t]=e[t].destroy())})}},jn.prototype={destroy:function(){an(this.crosshairs,function(e){e&&e.destroy()}),this.label&&(this.label=this.label.destroy())},move:function(e,t,n,r){var i=this,s=i.now,o=i.options.animation!==!1&&!i.isHidden;xt(s,{x:o?(2*s.x+e)/3:e,y:o?(s.y+t)/2:t,anchorX:o?(2*s.anchorX+n)/3:n,anchorY:o?(s.anchorY+r)/2:r}),i.label.attr(s),o&&(f(e-s.x)>1||f(t-s.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){i&&i.move(e,t,n,r)},32))},hide:function(){if(!this.isHidden){var e=this.chart.hoverPoints;this.label.hide(),e&&an(e,function(e){e.setState()}),this.chart.hoverPoints=null,this.isHidden=!0}},hideCrosshairs:function(){an(this.crosshairs,function(e){e&&e.hide()})},getAnchor:function(e,t){var n,r=this.chart,s=r.inverted,o=0,u=0,a;return e=Ht(e),n=e[0].tooltipPos,n||(an(e,function(e){a=e.series.yAxis,o+=e.plotX,u+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!s&&a?a.top-r.plotTop:0)}),o/=e.length,u/=e.length,n=[s?r.plotWidth-u:o,this.shared&&!s&&e.length>1&&t?t.chartY-r.plotTop:s?r.plotHeight-o:u]),cn(n,i)},getPosition:function(e,t,n){var r=this.chart,i=r.plotLeft,s=r.plotTop,o=r.plotWidth,a=r.plotHeight,f=Bt(this.options.distance,12),l=n.plotX,c=n.plotY,h=l+i+(r.inverted?f:-e-f),p=c-t+s+15,d;return h<7&&(h=i+u(l,0)+f),h+e>i+o&&(h-=h+e-(i+o),p=c-t+s-f,d=!0),p<s+5&&(p=s+5,d&&c>=p&&c<=p+t&&(p=c+s+f)),p+t>s+a&&(p=u(s,s+a-t-f)),{x:h,y:p}},refresh:function(e,t){function u(){var e=this,t=e.points||Ht(e),n=t[0].series,r;return r=[n.tooltipHeaderFormatter(t[0].key)],an(t,function(e){n=e.series,r.push(n.tooltipFormatter&&n.tooltipFormatter(e)||e.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),r.push(o.footerFormat||""),r.join("")}var n=this,r=n.chart,s=n.label,o=n.options,a,f,l,c,h={},p,d=[],v=o.formatter||u,m=r.hoverPoints,g,y,b=o.crosshairs,w=n.shared,E;c=n.getAnchor(e,t),a=c[0],f=c[1],w&&(!e.series||!e.series.noSharedTooltip)?(r.hoverPoints=e,m&&an(m,function(e){e.setState()}),an(e,function(e){e.setState(K),d.push(e.getLabelConfig())}),h={x:e[0].category,y:e[0].y},h.points=d,e=e[0]):h=e.getLabelConfig(),p=v.call(h),E=e.series,l=w||!E.isCartesian||E.tooltipOutsidePlot||r.isInsidePlot(a,f),p===!1||!l?this.hide():(n.isHidden&&s.show(),s.attr({text:p}),y=o.borderColor||e.color||E.color||"#606060",s.attr({stroke:y}),g=(o.positioner||n.getPosition).call(n,s.width,s.height,{plotX:a,plotY:f}),n.move(i(g.x),i(g.y),a+r.plotLeft,f+r.plotTop),n.isHidden=!1);if(b){b=Ht(b);var S,x=b.length,T,N;while(x--)N=e.series[x?"yAxis":"xAxis"],b[x]&&N&&(S=N.getPlotLinePath(x?Bt(e.stackY,e.y):e.x,1),n.crosshairs[x]?n.crosshairs[x].attr({d:S,visibility:U}):(T={"stroke-width":b[x].width||1,stroke:b[x].color||"#C0C0C0",zIndex:b[x].zIndex||2},b[x].dashStyle&&(T.dashstyle=b[x].dashStyle),n.crosshairs[x]=r.renderer.path(S).attr(T).add()))}vn(r,"tooltipRefresh",{text:p,x:a+r.plotLeft,y:f+r.plotTop,borderColor:y})}},Fn.prototype={normalizeMouseEvent:function(t){var r,s,o,u;return t=t||n.event,t.target||(t.target=t.srcElement),t=mn(t),u=t.touches?t.touches.item(0):t,this.chartPosition=r=ln(this.chart.container),u.pageX===e?(s=t.x,o=t.y):(s=u.pageX-r.left,o=u.pageY-r.top),xt(t,{chartX:i(s),chartY:i(o)})},getMouseCoordinates:function(e){var t={xAxis:[],yAxis:[]},n=this.chart;return an(n.axes,function(r){var i=r.isXAxis,s=n.inverted?!i:i;t[i?"xAxis":"yAxis"].push({axis:r,value:r.translate((s?e.chartX-n.plotLeft:r.top+r.len-e.chartY)-r.minPixelPadding,!0)})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},onmousemove:function(e){var t=this,n=t.chart,r=n.series,i=n.tooltip,s,o,u=n.hoverPoint,l=n.hoverSeries,c,h,p=n.chartWidth,d=t.getIndex(e);if(i&&t.options.tooltip.shared&&(!l||!l.noSharedTooltip)){o=[],c=r.length;for(h=0;h<c;h++)r[h].visible&&r[h].options.enableMouseTracking!==!1&&!r[h].noSharedTooltip&&r[h].tooltipPoints&&r[h].tooltipPoints.length&&(s=r[h].tooltipPoints[d],s._dist=f(d-s[r[h].xAxis.tooltipPosName||"plotX"]),p=a(p,s._dist),o.push(s));c=o.length;while(c--)o[c]._dist>p&&o.splice(c,1);o.length&&o[0].plotX!==t.hoverX&&(i.refresh(o,e),t.hoverX=o[0].plotX)}l&&l.tracker&&(s=l.tooltipPoints[d],s&&s!==u&&s.onMouseOver())},resetTracker:function(t){var n=this,r=n.chart,i=r.hoverSeries,s=r.hoverPoint,o=r.tooltip,u=o&&o.shared?r.hoverPoints:s;t=t&&o&&u,t&&Ht(u)[0].plotX===e&&(t=!1),t?o.refresh(u):(s&&s.onMouseOut(),i&&i.onMouseOut(),o&&(o.hide(),o.hideCrosshairs()),n.hoverX=null)},setDOMEvents:function(){function c(){if(n.selectionMarker){var e={xAxis:[],yAxis:[]},o=n.selectionMarker.getBBox(),f=o.x-r.plotLeft,l=o.y-r.plotTop,h;s&&(an(r.axes,function(t){if(t.options.zoomEnabled!==!1){var n=t.isXAxis,i=r.inverted?!n:n,s=t.translate(i?f:r.plotHeight-l-o.height,!0,0,0,1),c=t.translate((i?f+o.width:r.plotHeight-l)-2*t.minPixelPadding,!0,0,0,1);!isNaN(s)&&!isNaN(c)&&(e[n?"xAxis":"yAxis"].push({axis:t,min:a(s,c),max:u(s,c)}),h=!0)}}),h&&vn(r,"selection",e,function(e){r.zoom(e)})),n.selectionMarker=n.selectionMarker.destroy()}r&&(jt(i,{cursor:"auto"}),r.cancelClick=s,r.mouseIsDown=s=!1),dn(t,"mouseup",c),C&&dn(t,"touchend",c)}var e=!0,n=this,r=n.chart,i=r.container,s,o=n.zoomX&&!r.inverted||n.zoomY&&r.inverted,l=n.zoomY&&!r.inverted||n.zoomX&&r.inverted;n.hideTooltipOnMouseMove=function(e){e=mn(e),n.chartPosition&&r.hoverSeries&&r.hoverSeries.isCartesian&&!r.isInsidePlot(e.pageX-n.chartPosition.left-r.plotLeft,e.pageY-n.chartPosition.top-r.plotTop)&&n.resetTracker()},n.hideTooltipOnMouseLeave=function(){n.resetTracker(),n.chartPosition=null},i.onmousedown=function(e){e=n.normalizeMouseEvent(e),e.type.indexOf("touch")===-1&&e.preventDefault&&e.preventDefault(),r.mouseIsDown=!0,r.cancelClick=!1,r.mouseDownX=n.mouseDownX=e.chartX,n.mouseDownY=e.chartY,pn(t,"mouseup",c),C&&pn(t,"touchend",c)};var h=function(t){if(t&&t.touches&&t.touches.length>1)return;t=n.normalizeMouseEvent(t);var i=t.type,u=t.chartX,a=t.chartY,c=!r.isInsidePlot(u-r.plotLeft,a-r.plotTop);i.indexOf("touch")===-1&&(t.returnValue=!1),i==="touchstart"&&(Pt(t.target,"isTracker")?r.runTrackerClick||t.preventDefault():!r.runChartClick&&!c&&t.preventDefault()),c&&(u<r.plotLeft?u=r.plotLeft:u>r.plotLeft+r.plotWidth&&(u=r.plotLeft+r.plotWidth),a<r.plotTop?a=r.plotTop:a>r.plotTop+r.plotHeight&&(a=r.plotTop+r.plotHeight));if(r.mouseIsDown&&i!=="touchstart"){s=Math.sqrt(Math.pow(n.mouseDownX-u,2)+Math.pow(n.mouseDownY-a,2));if(s>10){var h=r.isInsidePlot(n.mouseDownX-r.plotLeft,n.mouseDownY-r.plotTop);r.hasCartesianSeries&&(n.zoomX||n.zoomY)&&h&&(n.selectionMarker||(n.selectionMarker=r.renderer.rect(r.plotLeft,r.plotTop,o?1:r.plotWidth,l?1:r.plotHeight,0).attr({fill:n.options.chart.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()));if(n.selectionMarker&&o){var p=u-n.mouseDownX;n.selectionMarker.attr({width:f(p),x:(p>0?0:p)+n.mouseDownX})}if(n.selectionMarker&&l){var d=a-n.mouseDownY;n.selectionMarker.attr({height:f(d),y:(d>0?0:d)+n.mouseDownY})}h&&!n.selectionMarker&&n.options.chart.panning&&r.pan(u)}}return c||n.onmousemove(t),e=c,c||!r.hasCartesianSeries};/Android 4\.0/.test(d)||(i.onmousemove=h),pn(i,"mouseleave",n.hideTooltipOnMouseLeave),C||pn(t,"mousemove",n.hideTooltipOnMouseMove),i.ontouchstart=function(e){(n.zoomX||n.zoomY)&&i.onmousedown(e),h(e)},i.ontouchmove=h,i.ontouchend=function(){s&&n.resetTracker()},i.onclick=function(e){var t=r.hoverPoint,i,s;e=n.normalizeMouseEvent(e),e.cancelBubble=!0,r.cancelClick||(t&&(Pt(e.target,"isTracker")||Pt(e.target.parentNode,"isTracker"))?(i=t.plotX,s=t.plotY,xt(t,{pageX:n.chartPosition.left+r.plotLeft+(r.inverted?r.plotWidth-s:i),pageY:n.chartPosition.top+r.plotTop+(r.inverted?r.plotHeight-i:s)}),vn(t.series,"click",xt(e,{point:t})),t.firePointEvent("click",e)):(xt(e,n.getMouseCoordinates(e)),r.isInsidePlot(e.chartX-r.plotLeft,e.chartY-r.plotTop)&&vn(r,"click",e)))}},destroy:function(){var e=this,n=e.chart,r=n.container;n.trackerGroup&&(n.trackerGroup=n.trackerGroup.destroy()),dn(r,"mouseleave",e.hideTooltipOnMouseLeave),dn(t,"mousemove",e.hideTooltipOnMouseMove),r.onclick=r.onmousedown=r.onmousemove=r.ontouchstart=r.ontouchend=r.ontouchmove=null,clearInterval(this.tooltipTimeout)},init:function(e,t){e.trackerGroup||(e.trackerGroup=e.renderer.g("tracker").attr({zIndex:9}).add()),t.enabled&&(e.tooltip=new jn(e,t)),this.setDOMEvents()}},In.prototype={init:function(e){var t=this,n=t.options=e.options.legend;if(!n.enabled)return;var r=n.itemStyle,i=Bt(n.padding,8),s=n.itemMarginTop||0;t.baseline=Nt(r.fontSize)+3+s,t.itemStyle=r,t.itemHiddenStyle=hn(r,n.itemHiddenStyle),t.itemMarginTop=s,t.padding=i,t.initialItemX=i,t.initialItemY=i-5,t.maxItemWidth=0,t.chart=e,t.itemHeight=0,t.lastLineHeight=0,t.render(),pn(t.chart,"endResize",function(){t.positionCheckboxes()})},colorizeItem:function(t,n){var r=this,i=r.options,s=t.legendItem,o=t.legendLine,u=t.legendSymbol,a=r.itemHiddenStyle.color,f=n?i.itemStyle.color:a,l=n?t.color:a,c=t.options&&t.options.marker,h={stroke:l,fill:l},p,d;s&&s.css({fill:f}),o&&o.attr({stroke:l});if(u){if(c){c=t.convertAttribs(c);for(p in c)d=c[p],d!==e&&(h[p]=d)}u.attr(h)}},positionItem:function(e){var t=this,n=t.options,r=n.symbolPadding,i=!n.rtl,s=e._legendItemPos,o=s[0],u=s[1],a=e.checkbox;e.legendGroup&&e.legendGroup.translate(i?o:t.legendWidth-o-2*r-4,u),a&&(a.x=o,a.y=u)},destroyItem:function(e){var t=e.checkbox;an(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&e[t].destroy()}),t&&Yt(e.checkbox)},destroy:function(){var e=this,t=e.group,n=e.box;n&&(e.box=n.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var t=this.group.alignAttr,n,r=this.clipHeight||this.legendHeight;t&&(n=t.translateY,an(this.allItems,function(i){var s=i.checkbox,o;s&&(o=n+s.y+(e||0)+3,jt(s,{left:t.translateX+i.legendItemWidth+s.x-20+z,top:o+z,display:o>n-6&&o<n+r-6?"":W}))}))},renderItem:function(e){var t=this,n=t.chart,r=n.renderer,i=t.options,s=i.layout==="horizontal",o=i.symbolWidth,a=i.symbolPadding,f=t.itemStyle,l=t.itemHiddenStyle,c=t.padding,h=!i.rtl,p,d=i.width,v=i.itemMarginBottom||0,m=t.itemMarginTop,g=t.initialItemX,y,b,w=e.legendItem,E=e.series||e,S=E.options,x=S.showCheckbox,T=i.useHTML;w||(e.legendGroup=r.g("legend-item").attr({zIndex:1}).add(t.scrollGroup),E.drawLegendSymbol(t,e),e.legendItem=w=r.text(i.labelFormatter.call(e),h?o+a:-a,t.baseline,T).css(hn(e.visible?f:l)).attr({align:h?"left":"right",zIndex:2}).add(e.legendGroup),(T?w:e.legendGroup).on("mouseover",function(){e.setState(K),w.css(t.options.itemHoverStyle)}).on("mouseout",function(){w.css(e.visible?f:l),e.setState()}).on("click",function(t){var n="legendItemClick",r=function(){e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(n,t,r):vn(e,n,t,r)}),t.colorizeItem(e,e.visible),S&&x&&(e.checkbox=Ft("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},i.itemCheckboxStyle,n.container),pn(e.checkbox,"click",function(t){var n=t.target;vn(e,"checkboxClick",{checked:n.checked},function(){e.select()})}))),y=w.getBBox(),b=e.legendItemWidth=i.itemWidth||o+a+y.width+c+(x?20:0),t.itemHeight=p=y.height,s&&t.itemX-g+b>(d||n.chartWidth-2*c-g)&&(t.itemX=g,t.itemY+=m+t.lastLineHeight+v,t.lastLineHeight=0),t.maxItemWidth=u(t.maxItemWidth,b),t.lastItemY=m+t.itemY+v,t.lastLineHeight=u(p,t.lastLineHeight),e._legendItemPos=[t.itemX,t.itemY],s?t.itemX+=b:(t.itemY+=m+p+v,t.lastLineHeight=p),t.offsetWidth=d||u(s?t.itemX-g:b,t.offsetWidth)},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.group,i,s,o,u,a=e.box,f=e.options,l=e.padding,c=f.borderWidth,h=f.backgroundColor;e.itemX=e.initialItemX,e.itemY=e.initialItemY,e.offsetWidth=0,e.lastItemY=0,r||(e.group=r=n.g("legend").attr({zIndex:7}).add(),e.contentGroup=n.g().attr({zIndex:1}).add(r),e.scrollGroup=n.g().add(e.contentGroup),e.clipRect=n.clipRect(0,0,9999,t.chartHeight),e.contentGroup.clip(e.clipRect)),i=[],an(t.series,function(e){var t=e.options;if(!t.showInLegend)return;i=i.concat(e.legendItems||(t.legendType==="point"?e.data:e))}),Jt(i,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),f.reversed&&i.reverse(),e.allItems=i,e.display=s=!!i.length,an(i,function(t){e.renderItem(t)}),o=f.width||e.offsetWidth,u=e.lastItemY+e.lastLineHeight,u=e.handleOverflow(u);if(c||h)o+=l,u+=l,a?o>0&&u>0&&(a[a.isNew?"attr":"animate"](a.crisp(null,null,null,o,u)),a.isNew=!1):(e.box=a=n.rect(0,0,o,u,f.borderRadius,c||0).attr({stroke:f.borderColor,"stroke-width":c||0,fill:h||W}).add(r).shadow(f.shadow),a.isNew=!0),a[s?"show":"hide"]();e.legendWidth=o,e.legendHeight=u,an(i,function(t){e.positionItem(t)}),s&&r.align(xt({width:o,height:u},f),!0,t.spacingBox),t.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i,s=this.options,u=s.y,f=s.verticalAlign==="top",l=n.spacingBox.height+(f?-u:u)-this.padding,c=s.maxHeight,h,p=this.clipRect,d=s.navigation,v=Bt(d.animation,!0),m=d.arrowSize||12,g=this.nav;return s.layout==="horizontal"&&(l/=2),c&&(l=a(l,c)),e>l?(this.clipHeight=h=l-20,this.pageCount=i=o(e/h),this.currentPage=Bt(this.currentPage,1),this.fullHeight=e,p.attr({height:h}),g||(this.nav=g=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,m,m).on("click",function(){t.scroll(-1,v)}).add(g),this.pager=r.text("",15,10).css(d.style).add(g),this.down=r.symbol("triangle-down",0,0,m,m).on("click",function(){t.scroll(1,v)}).add(g)),t.scroll(0),e=l):g&&(p.attr({height:n.chartHeight}),g.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(t,n){var r=this.pageCount,i=this.currentPage+t,s=this.clipHeight,o=this.options.navigation,u=o.activeColor,f=o.inactiveColor,l=this.pager,c=this.padding,h;i>r&&(i=r),i>0&&(n!==e&&tn(n,this.chart),this.nav.attr({translateX:c,translateY:s+7,visibility:U}),this.up.attr({fill:i===1?f:u}).css({cursor:i===1?"default":"pointer"}),l.attr({text:i+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:i===r?f:u}).css({cursor:i===r?"default":"pointer"}),h=-a(s*(i-1),this.fullHeight-s+c)+1,this.scrollGroup.animate({translateY:h}),l.attr({text:i+"/"+r}),this.currentPage=i,this.positionCheckboxes(h))}},qn.prototype={init:function(e,t){var n,r=e.series;e.series=null,n=hn(O,e),n.series=e.series=r;var i=n.chart,s=i.margin,o=kt(s)?s:[s,s,s,s];this.optionsMarginTop=Bt(i.marginTop,o[0]),this.optionsMarginRight=Bt(i.marginRight,o[1]),this.optionsMarginBottom=Bt(i.marginBottom,o[2]),this.optionsMarginLeft=Bt(i.marginLeft,o[3]);var u=i.events;this.runChartClick=u&&!!u.click,this.callback=t,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=i.showAxes;var a=this,f;a.index=B.length,B.push(a),i.reflow!==!1&&pn(a,"load",a.initReflow);if(u)for(f in u)pn(a,f,u[f]);a.xAxis=[],a.yAxis=[],a.animation=T?!1:Bt(i.animation,!0),a.pointCount=0,a.counters=new $t,a.firstRender()},initSeries:function(e){var t=this,n=t.options.chart,r=e.type||n.type||n.defaultSeriesType,i=new St[r];return i.init(this,e),i},addSeries:function(e,t,n){var r,i=this;return e&&(tn(n,i),t=Bt(t,!0),vn(i,"addSeries",{options:e},function(){r=i.initSeries(e),i.isDirtyLegend=!0,t&&i.redraw()})),r},isInsidePlot:function(e,t,n){var r=n?t:e,i=n?e:t;return r>=0&&r<=this.plotWidth&&i>=0&&i<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&an(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var t=this,n=t.axes,r=t.series,i=t.tracker,s=t.legend,o=t.isDirtyLegend,u,a=t.isDirtyBox,f=r.length,l=f,c,h=t.renderer,p=h.isHidden(),d=[];tn(e,t),p&&t.cloneRenderTo();while(l--){c=r[l];if(c.isDirty&&c.options.stacking){u=!0;break}}if(u){l=f;while(l--)c=r[l],c.options.stacking&&(c.isDirty=!0)}an(r,function(e){e.isDirty&&e.options.legendType==="point"&&(o=!0)}),o&&s.options.enabled&&(s.render(),t.isDirtyLegend=!1),t.hasCartesianSeries&&(t.isResizing||(t.maxTicks=null,an(n,function(e){e.setScale()})),t.adjustTickAmounts(),t.getMargins(),an(n,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,d.push(function(){vn(e,"afterSetExtremes",e.getExtremes())}));if(e.isDirty||a||u)e.redraw(),a=!0})),a&&t.drawChartBox(),an(r,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),i&&i.resetTracker&&i.resetTracker(!0),h.draw(),vn(t,"redraw"),p&&t.cloneRenderTo(!0),an(d,function(e){e.call()})},showLoading:function(e){var t=this,n=t.options,r=t.loadingDiv,i=n.loading;r||(t.loadingDiv=r=Ft(j,{className:R+"loading"},xt(i.style,{left:t.plotLeft+z,top:t.plotTop+z,width:t.plotWidth+z,height:t.plotHeight+z,zIndex:10,display:W}),t.container),t.loadingSpan=Ft("span",null,i.labelStyle,r)),t.loadingSpan.innerHTML=e||n.lang.loading,t.loadingShown||(jt(r,{opacity:0,display:""}),gn(r,{opacity:i.style.opacity},{duration:i.showDuration||0}),t.loadingShown=!0)},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&gn(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){jt(t,{display:W})}}),this.loadingShown=!1},get:function(e){var t=this,n=t.axes,r=t.series,i,s,o;for(i=0;i<n.length;i++)if(n[i].options.id===e)return n[i];for(i=0;i<r.length;i++)if(r[i].options.id===e)return r[i];for(i=0;i<r.length;i++){o=r[i].points||[];for(s=0;s<o.length;s++)if(o[s].id===e)return o[s]}return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis||{},r=t.yAxis||{},i,s;n=Ht(n),an(n,function(e,t){e.index=t,e.isX=!0}),r=Ht(r),an(r,function(e,t){e.index=t}),i=n.concat(r),an(i,function(t){s=new Bn(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return an(this.series,function(t){e=e.concat(fn(t.points,function(e){return e.selected}))}),e},getSelectedSeries:function(){return fn(this.series,function(e){return e.selected})},showResetZoom:function(){var e=this,t=O.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,s=n.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,e[s]),this.resetZoomButton.alignTo=s},zoomOut:function(){var e=this,t=e.resetZoomButton;vn(e,"selection",{resetSelection:!0},function(){e.zoom()}),t&&(e.resetZoomButton=t.destroy())},zoom:function(e){var t=this,n;!e||e.resetSelection?an(t.axes,function(e){n=e.zoom()}):an(e.xAxis.concat(e.yAxis),function(e){var r=e.axis;t.tracker[r.isXAxis?"zoomX":"zoomY"]&&(n=r.zoom(e.min,e.max))}),t.resetZoomButton||t.showResetZoom(),n&&t.redraw(Bt(t.options.chart.animation,t.pointCount<100))},pan:function(e){var t=this,n=t.xAxis[0],r=t.mouseDownX,i=n.pointRange/2,s=n.getExtremes(),o=n.translate(r-e,!0)+i,f=n.translate(r+t.plotWidth-e,!0)-i,l=t.hoverPoints;l&&an(l,function(e){e.setState()}),n.series.length&&o>a(s.dataMin,s.min)&&f<u(s.dataMax,s.max)&&n.setExtremes(o,f,!0,!1,{trigger:"pan"}),t.mouseDownX=e,jt(t.container,{cursor:"move"})},setTitle:function(e,t){var n=this,r=n.options,i,s;n.chartTitleOptions=i=hn(r.title,e),n.chartSubtitleOptions=s=hn(r.subtitle,t),an([["title",e,i],["subtitle",t,s]],function(e){var t=e[0],r=n[t],i=e[1],s=e[2];r&&i&&(n[t]=r=r.destroy()),s&&s.text&&!r&&(n[t]=n.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,"class":R+t,zIndex:s.zIndex||4}).css(s.style).add().align(s,!1,n.spacingBox))})},getChartSize:function(){var e=this,t=e.options.chart,n=e.renderToClone||e.renderTo;e.containerWidth=sn(n,"width"),e.containerHeight=sn(n,"height"),e.chartWidth=u(0,Bt(t.width,e.containerWidth,600)),e.chartHeight=u(0,Bt(t.height,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var n=this.renderToClone,r=this.container;e?n&&(this.renderTo.appendChild(r),Yt(n),delete this.renderToClone):(r&&this.renderTo.removeChild(r),this.renderToClone=n=this.renderTo.cloneNode(0),jt(n,{position:F,top:"-9999px",display:"block"}),t.body.appendChild(n),r&&n.appendChild(r))},getContainer:function(){var e=this,n,r=e.options.chart,i,s,o,u="data-highcharts-chart",a,f;e.renderTo=o=r.renderTo,f=R+L++,Ct(o)&&(e.renderTo=o=t.getElementById(o)),o||Zt(13,!0),a=Nt(Pt(o,u)),!isNaN(a)&&B[a]&&B[a].destroy(),Pt(o,u,e.index),o.innerHTML="",o.offsetWidth||e.cloneRenderTo(),e.getChartSize(),i=e.chartWidth,s=e.chartHeight,e.container=n=Ft(j,{className:R+"container"+(r.className?" "+r.className:""),id:f},xt({position:I,overflow:q,width:i+z,height:s+z,textAlign:"left",lineHeight:"normal",zIndex:0},r.style),e.renderToClone||o),e.renderer=r.forExport?new kn(n,i,s,!0):new N(n,i,s),T&&e.renderer.create(e,n,i,s)},getMargins:function(){var e=this,t=e.options.chart,n=t.spacingTop,r=t.spacingRight,i=t.spacingBottom,s=t.spacingLeft,o,a=e.legend,f=e.optionsMarginTop,l=e.optionsMarginLeft,c=e.optionsMarginRight,h=e.optionsMarginBottom,p=e.chartTitleOptions,d=e.chartSubtitleOptions,v=e.options.legend,m=Bt(v.margin,10),g=v.x,y=v.y,b=v.align,w=v.verticalAlign,E;e.resetMargins(),o=e.axisOffset,(e.title||e.subtitle)&&!Dt(e.optionsMarginTop)&&(E=u(e.title&&!p.floating&&!p.verticalAlign&&p.y||0,e.subtitle&&!d.floating&&!d.verticalAlign&&d.y||0),E&&(e.plotTop=u(e.plotTop,E+Bt(p.margin,15)+n))),a.display&&!v.floating&&(b==="right"?Dt(c)||(e.marginRight=u(e.marginRight,a.legendWidth-g+m+r)):b==="left"?Dt(l)||(e.plotLeft=u(e.plotLeft,a.legendWidth+g+m+s)):w==="top"?Dt(f)||(e.plotTop=u(e.plotTop,a.legendHeight+y+m+n)):w==="bottom"&&(Dt(h)||(e.marginBottom=u(e.marginBottom,a.legendHeight-y+m+i)))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&an(e.axes,function(e){e.getOffset()}),Dt(l)||(e.plotLeft+=o[3]),Dt(f)||(e.plotTop+=o[0]),Dt(h)||(e.marginBottom+=o[2]),Dt(c)||(e.marginRight+=o[1]),e.setChartSize()},initReflow:function(){function o(o){var u=r.width||sn(i,"width"),a=r.height||sn(i,"height"),f=o?o.target:n;if(!e.hasUserSize&&u&&a&&(f===n||f===t)){if(u!==e.containerWidth||a!==e.containerHeight)clearTimeout(s),e.reflowTimeout=s=setTimeout(function(){e.container&&(e.setSize(u,a,!1),e.hasUserSize=null)},100);e.containerWidth=u,e.containerHeight=a}}var e=this,r=e.options.chart,i=e.renderTo,s;pn(n,"resize",o),pn(e,"destroy",function(){dn(n,"resize",o)})},setSize:function(e,t,n){var r=this,s,o,a,f=r.resetZoomButton,l=r.title,c=r.subtitle,h;r.isResizing+=1,h=function(){r&&vn(r,"endResize",null,function(){r.isResizing-=1})},tn(n,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,Dt(e)&&(r.chartWidth=s=u(0,i(e)),r.hasUserSize=!!s),Dt(t)&&(r.chartHeight=o=u(0,i(t))),jt(r.container,{width:s+z,height:o+z}),r.renderer.setSize(s,o,n),r.plotWidth=s-r.plotLeft-r.marginRight,r.plotHeight=o-r.plotTop-r.marginBottom,r.maxTicks=null,an(r.axes,function(e){e.isDirty=!0,e.setScale()}),an(r.series,function(e){e.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.getMargins(),a=r.spacingBox,l&&l.align(null,null,a),c&&c.align(null,null,a),f&&f.align&&f.align(null,null,r[f.alignTo]),r.redraw(n),r.oldChartHeight=null,vn(r,"resize"),_===!1?h():setTimeout(h,_&&_.duration||500)},setChartSize:function(){var e=this,t=e.inverted,n=e.chartWidth,r=e.chartHeight,s=e.options.chart,o=s.spacingTop,a=s.spacingRight,f=s.spacingBottom,l=s.spacingLeft,c,h,p,d,v;e.plotLeft=c=i(e.plotLeft),e.plotTop=h=i(e.plotTop),e.plotWidth=p=u(0,i(n-c-e.marginRight)),e.plotHeight=d=u(0,i(r-h-e.marginBottom)),e.plotSizeX=t?d:p,e.plotSizeY=t?p:d,e.plotBorderWidth=v=s.plotBorderWidth||0,e.spacingBox={x:l,y:o,width:n-l-a,height:r-o-f},e.plotBox={x:c,y:h,width:p,height:d},e.clipBox={x:v/2,y:v/2,width:e.plotSizeX-v,height:e.plotSizeY-v},an(e.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.options.chart,n=t.spacingTop,r=t.spacingRight,i=t.spacingBottom,s=t.spacingLeft;e.plotTop=Bt(e.optionsMarginTop,n),e.marginRight=Bt(e.optionsMarginRight,r),e.marginBottom=Bt(e.optionsMarginBottom,i),e.plotLeft=Bt(e.optionsMarginLeft,s),e.axisOffset=[0,0,0,0]},drawChartBox:function(){var e=this,t=e.options.chart,n=e.renderer,r=e.chartWidth,i=e.chartHeight,s=e.chartBackground,o=e.plotBackground,u=e.plotBorder,a=e.plotBGImage,f=t.borderWidth||0,l=t.backgroundColor,c=t.plotBackgroundColor,h=t.plotBackgroundImage,p=t.plotBorderWidth||0,d,v,m=e.plotLeft,g=e.plotTop,y=e.plotWidth,b=e.plotHeight,w=e.plotBox,E=e.clipRect,S=e.clipBox;d=f+(t.shadow?8:0);if(f||l)s?s.animate(s.crisp(null,null,null,r-d,i-d)):(v={fill:l||W},f&&(v.stroke=t.borderColor,v["stroke-width"]=f),e.chartBackground=n.rect(d/2,d/2,r-d,i-d,t.borderRadius,f).attr(v).add().shadow(t.shadow));c&&(o?o.animate(w):e.plotBackground=n.rect(m,g,y,b,0).attr({fill:c}).add().shadow(t.plotShadow)),h&&(a?a.animate(w):e.plotBGImage=n.image(h,m,g,y,b).add()),E?E.animate({width:S.width,height:S.height}):e.clipRect=n.clipRect(S),p&&(u?u.animate(u.crisp(null,m,g,y,b)):e.plotBorder=n.rect(m,g,y,b,0,p).attr({stroke:t.plotBorderColor,"stroke-width":p,zIndex:1}).add()),e.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;an(["inverted","angular","polar"],function(o){n=St[t.type||t.defaultSeriesType],s=e[o]||t[o]||n&&n.prototype[o],i=r&&r.length;while(!s&&i--)n=St[r[i].type],n&&n.prototype[o]&&(s=!0);e[o]=s})},render:function(){var e=this,t=e.axes,n=e.renderer,r=e.options,i=r.labels,s=r.credits,o;e.setTitle(),e.legend=new In(e),an(t,function(e){e.setScale()}),e.getMargins(),e.maxTicks=null,an(t,function(e){e.setTickPositions(!0),e.setMaxTicks()}),e.adjustTickAmounts(),e.getMargins(),e.drawChartBox(),e.hasCartesianSeries&&an(t,function(e){e.render()}),e.seriesGroup||(e.seriesGroup=n.g("series-group").attr({zIndex:3}).add()),an(e.series,function(e){e.translate(),e.setTooltipPoints(),e.render()}),i.items&&an(i.items,function(t){var r=xt(i.style,t.style),s=Nt(r.left)+e.plotLeft,o=Nt(r.top)+e.plotTop+12;delete r.left,delete r.top,n.text(t.html,s,o).attr({zIndex:2}).css(r).add()}),s.enabled&&!e.credits&&(o=s.href,e.credits=n.text(s.text,0,0).on("click",function(){o&&(location.href=o)}).attr({align:s.position.align,zIndex:8}).css(s.style).add().align(s.position)),e.hasRendered=!0},destroy:function(){var t=this,n=t.axes,r=t.series,i=t.container,s,o=i&&i.parentNode;vn(t,"destroy"),B[t.index]=e,t.renderTo.removeAttribute("data-highcharts-chart"),dn(t),s=n.length;while(s--)n[s]=n[s].destroy();s=r.length;while(s--)r[s]=r[s].destroy();an(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","tracker","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var n=t[e];n&&n.destroy&&(t[e]=n.destroy())}),i&&(i.innerHTML="",dn(i),o&&Yt(i));for(s in t)delete t[s]},isReadyToRender:function(){var e=this;return!S&&n==n.top&&t.readyState!=="complete"||T&&!n.canvg?(T?_n.push(function(){e.firstRender()},e.options.global.canvasToolsURL):t.attachEvent("onreadystatechange",function(){t.detachEvent("onreadystatechange",e.firstRender),t.readyState==="complete"&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;if(!e.isReadyToRender())return;e.getContainer(),vn(e,"init"),Highcharts.RangeSelector&&t.rangeSelector.enabled&&(e.rangeSelector=new Highcharts.RangeSelector(e)),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),an(t.series||[],function(t){e.initSeries(t)}),Highcharts.Scroller&&(t.navigator.enabled||t.scrollbar.enabled)&&(e.scroller=new Highcharts.Scroller(e)),e.tracker=new Fn(e,t),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),an(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),vn(e,"load")}},qn.prototype.callbacks=[];var Rn=function(){};Rn.prototype={init:function(e,t,n){var r=this,i=e.chart.counters,s;return r.series=e,r.applyOptions(t,n),r.pointAttr={},e.options.colorByPoint&&(s=e.chart.options.colors,r.color=r.color||s[i.color++],i.wrapColor(s.length)),e.chart.pointCount++,r},applyOptions:function(t,n){var r=this,i=r.series,s=typeof t;r.config=t,s==="number"||t===null?r.y=t:typeof t[0]=="number"?(r.x=t[0],r.y=t[1]):s==="object"&&typeof t.length!="number"?(xt(r,t),r.options=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0)):typeof t[0]=="string"&&(r.name=t[0],r.y=t[1]),r.x===e&&(r.x=n===e?i.autoIncrement():n)},destroy:function(){var e=this,t=e.series,n=t.chart,r=n.hoverPoints,i;n.pointCount--,r&&(e.setState(),_t(r,e),r.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut();if(e.graphic||e.dataLabel)dn(e),e.destroyElements();e.legendItem&&n.legend.destroyItem(e);for(i in e)e[i]=null},destroyElements:function(){var e=this,t=["graphic","tracker","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n,r=6;while(r--)n=t[r],e[n]&&(e[n]=e[n].destroy())},getLabelConfig:function(){var e=this;return{x:e.category,y:e.y,key:e.name||e.category,series:e.series,point:e,percentage:e.percentage,total:e.total||e.stackTotal}},select:function(e,t){var n=this,r=n.series,i=r.chart;e=Bt(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=e,n.setState(e&&Q),t||an(i.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=!1,e.setState(J),e.firePointEvent("unselect"))})})},onMouseOver:function(){var e=this,t=e.series,n=t.chart,r=n.tooltip,i=n.hoverPoint;i&&i!==e&&i.onMouseOut(),e.firePointEvent("mouseOver"),r&&(!r.shared||t.noSharedTooltip)&&r.refresh(e),e.setState(K),n.hoverPoint=e},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;if(!t||un(this,t)===-1)this.firePointEvent("mouseOut"),this.setState(),e.hoverPoint=null},tooltipFormatter:function(e){var t=this,n=t.series,r=n.tooltipOptions,i=e.match(/\{(series|point)\.[a-zA-Z]+\}/g),s=/[{\.}]/,o,u,a,f,l,c,h,p={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};r.valuePrefix=r.valuePrefix||r.yPrefix,r.valueDecimals=Bt(r.valueDecimals,r.yDecimals),r.valueSuffix=r.valueSuffix||r.ySuffix;for(h in i)u=i[h],Ct(u)&&u!==e&&(l=(" "+u).split(s),o={point:t,series:n}[l[1]],c=l[2],o===t&&p.hasOwnProperty(c)?(f=p[c]?c:"value",a=(r[f+"Prefix"]||"")+Rt(t[c],Bt(r[f+"Decimals"],-1))+(r[f+"Suffix"]||"")):a=o[c],e=e.replace(u,a));return e},update:function(e,t,n){var r=this,i=r.series,s=r.graphic,o,u=i.data,a=u.length,f=i.chart;t=Bt(t,!0),r.firePointEvent("update",{options:e},function(){r.applyOptions(e),kt(e)&&(i.getAttribs(),s&&s.attr(r.pointAttr[i.state]));for(o=0;o<a;o++)if(u[o]===r){i.xData[o]=r.x,i.yData[o]=r.toYData?r.toYData():r.y,i.options.data[o]=e;break}i.isDirty=!0,i.isDirtyData=!0,t&&f.redraw(n)})},remove:function(e,t){var n=this,r=n.series,i=r.chart,s,o=r.data,u=o.length;tn(t,i),e=Bt(e,!0),n.firePointEvent("remove",null,function(){for(s=0;s<u;s++)if(o[s]===n){o.splice(s,1),r.options.data.splice(s,1),r.xData.splice(s,1),r.yData.splice(s,1);break}n.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&i.redraw()})},firePointEvent:function(e,t,n){var r=this,i=this.series,s=i.options;(s.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),e==="click"&&s.allowPointSelect&&(n=function(e){r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),vn(this,e,t,n)},importEvents:function(){if(!this.hasImportedEvents){var e=this,t=hn(e.series.options.point,e.options),n=t.events,r;e.events=n;for(r in n)pn(e,r,n[r]);this.hasImportedEvents=!0}},setState:function(e){var t=this,n=t.plotX,r=t.plotY,i=t.series,s=i.options.states,o=wn[i.type].marker&&i.options.marker,u=o&&!o.enabled,a=o&&o.states[e],f=a&&a.enabled===!1,l=i.stateMarkerGraphic,c=i.chart,h,p=t.pointAttr;e=e||J;if(e===t.state||t.selected&&e!==Q||s[e]&&s[e].enabled===!1||e&&(f||u&&!a.enabled))return;t.graphic?(h=o&&t.graphic.symbolName&&p[e].r,t.graphic.attr(hn(p[e],h?{x:n-h,y:r-h,width:2*h,height:2*h}:{}))):(e&&a&&(h=a.radius,l?l.attr({x:n-h,y:r-h}):i.stateMarkerGraphic=l=c.renderer.symbol(i.symbol,n-h,r-h,2*h,2*h).attr(p[e]).add(i.markerGroup)),l&&l[e&&c.isInsidePlot(n,r)?"show":"hide"]()),t.state=e}};var Un=function(){};Un.prototype={isCartesian:!0,type:"line",pointClass:Rn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(e,t){var n=this,r,i;n.chart=e,n.options=t=n.setOptions(t),n.bindAxes(),xt(n,{name:t.name,state:J,pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0}),T&&(t.animation=!1),i=t.events;for(r in i)pn(n,r,i[r]);if(i&&i.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)e.runTrackerClick=!0;n.getColor(),n.getSymbol(),n.setData(t.data,!1),n.isCartesian&&(e.hasCartesianSeries=!0),e.series.push(n),Jt(e.series,function(e,t){return(e.options.index||0)-(t.options.index||0)}),an(e.series,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var t=this,n=t.options,r=t.chart,i;t.isCartesian&&an(["xAxis","yAxis"],function(s){an(r[s],function(r){i=r.options;if(n[s]===i.index||n[s]===e&&i.index===0)r.series.push(t),t[s]=r,r.isDirty=!0})})},autoIncrement:function(){var e=this,t=e.options,n=e.xIncrement;return n=Bt(n,t.pointStart,0),e.pointInterval=Bt(e.pointInterval,t.pointInterval,1),e.xIncrement=n+e.pointInterval,n},getSegments:function(){var e=this,t=-1,n=[],r,i=e.points,s=i.length;if(s)if(e.options.connectNulls){r=s;while(r--)i[r].y===null&&i.splice(r,1);i.length&&(n=[i])}else an(i,function(e,r){e.y===null?(r>t+1&&n.push(i.slice(t+1,r)),t=r):r===s-1&&n.push(i.slice(t+1,r+1))});e.segments=n},setOptions:function(e){var t=this.chart,n=t.options,r=n.plotOptions,i=r[this.type],s=e.data,o;return e.data=null,o=hn(i,r.series,e),o.data=e.data=s,this.tooltipOptions=hn(n.tooltip,o.tooltip),i.marker===null&&delete o.marker,o},getColor:function(){var e=this.options,t=this.chart.options.colors,n=this.chart.counters;this.color=e.color||!e.colorByPoint&&t[n.color++]||"gray",n.wrapColor(t.length)},getSymbol:function(){var e=this,t=e.options.marker,n=e.chart,r=n.options.symbols,i=n.counters;e.symbol=t.symbol||r[i.symbol++],/^url/.test(e.symbol)&&(t.radius=0),i.wrapSymbol(r.length)},drawLegendSymbol:function(e){var t=this.options,n=t.marker,r,i=e.options,s,o=i.symbolWidth,u=this.chart.renderer,a=this.legendGroup,f=e.baseline,l;t.lineWidth&&(l={"stroke-width":t.lineWidth},t.dashStyle&&(l.dashstyle=t.dashStyle),this.legendLine=u.path([X,0,f-4,V,o,f-4]).attr(l).add(a)),n&&n.enabled&&(r=n.radius,this.legendSymbol=s=u.symbol(this.symbol,o/2-r,f-4-r,2*r,2*r).add(a))},addPoint:function(e,t,n,r){var i=this,s=i.options,o=i.data,u=i.graph,a=i.area,f=i.chart,l=i.xData,c=i.yData,h=u&&u.shift||0,p=s.data,d,v=i.pointClass.prototype;tn(r,f),u&&n&&(u.shift=h+1),a&&(n&&(a.shift=h+1),a.isArea=!0),t=Bt(t,!0),d={series:i},v.applyOptions.apply(d,[e]),l.push(d.x),c.push(v.toYData?v.toYData.call(d):d.y),p.push(e),s.legendType==="point"&&i.generatePoints(),n&&(o[0]&&o[0].remove?o[0].remove(!1):(o.shift(),l.shift(),c.shift(),p.shift())),i.getAttribs(),i.isDirty=!0,i.isDirtyData=!0,t&&f.redraw()},setData:function(e,t){var n=this,r=n.points,i=n.options,s=n.initialColor,o=n.chart,u=null,a=n.xAxis,f,l=n.pointClass.prototype;n.xIncrement=null,n.pointRange=a&&a.categories?1:i.pointRange,Dt(s)&&(o.counters.color=s);var c=[],h=[],p=e?e.length:[],d=i.turboThreshold||1e3,v,m=n.pointArrayMap,g=m&&m.length;if(p>d){f=0;while(u===null&&f<p)u=e[f],f++;if(At(u)){var y=Bt(i.pointStart,0),b=Bt(i.pointInterval,1);for(f=0;f<p;f++)c[f]=y,h[f]=e[f],y+=b;n.xIncrement=y}else if(Lt(u))if(g)for(f=0;f<p;f++)v=e[f],c[f]=v[0],h[f]=v.slice(1,g+1);else for(f=0;f<p;f++)v=e[f],c[f]=v[0],h[f]=v[1]}else for(f=0;f<p;f++)v={series:n},l.applyOptions.apply(v,[e[f]]),c[f]=v.x,h[f]=l.toYData?l.toYData.call(v):v.y;n.requireSorting&&c.length>1&&c[1]<c[0]&&Zt(15),Ct(h[0])&&Zt(14,!0),n.data=[],n.options.data=e,n.xData=c,n.yData=h,f=r&&r.length||0;while(f--)r[f]&&r[f].destroy&&r[f].destroy();a&&(a.minRange=a.userMinRange),n.isDirty=n.isDirtyData=o.isDirtyBox=!0,Bt(t,!0)&&o.redraw(!1)},remove:function(e,t){var n=this,r=n.chart;e=Bt(e,!0),n.isRemoving||(n.isRemoving=!0,vn(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,e&&r.redraw(t)})),n.isRemoving=!1},processData:function(t){var n=this,r=n.xData,i=n.yData,s=r.length,o=0,a=s,f,l,c,h=n.xAxis,p,d=n.options,v=d.cropThreshold,m=n.isCartesian;if(m&&!n.isDirty&&!h.isDirty&&!n.yAxis.isDirty&&!t)return!1;if(m&&n.sorted&&(!v||s>v||n.forceCrop)){var g=h.getExtremes(),y=g.min,b=g.max;if(r[s-1]<y||r[0]>b)r=[],i=[];else if(r[0]<y||r[s-1]>b){for(p=0;p<s;p++)if(r[p]>=y){o=u(0,p-1);break}for(;p<s;p++)if(r[p]>b){a=p+1;break}r=r.slice(o,a),i=i.slice(o,a),f=!0}}for(p=r.length-1;p>0;p--)l=r[p]-r[p-1],l>0&&(c===e||l<c)&&(c=l);n.cropped=f,n.cropStart=o,n.processedXData=r,n.processedYData=i,d.pointRange===null&&(n.pointRange=c||1),n.closestPointRange=c},generatePoints:function(){var t=this,n=t.options,r=n.data,i=t.data,s,o=t.processedXData,u=t.processedYData,a=t.pointClass,f=o.length,l=t.cropStart||0,c,h=t.hasGroupedData,p,d=[],v;if(!i&&!h){var m=[];m.length=r.length,i=t.data=m}for(v=0;v<f;v++)c=l+v,h?d[v]=(new a).init(t,[o[v]].concat(Ht(u[v]))):(i[c]?p=i[c]:r[c]!==e&&(i[c]=p=(new a).init(t,r[c],o[v])),d[v]=p);if(i&&(f!==(s=i.length)||h))for(v=0;v<s;v++)v===l&&!h&&(v+=f),i[v]&&(i[v].destroyElements(),i[v].plotX=e);t.data=i,t.points=d},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t=this,n=t.chart,r=t.options,s=r.stacking,o=t.xAxis,u=o.categories,a=t.yAxis,f=t.points,l=f.length,c=!!t.modifyValue,h,p=a.series,d=p.length,v=r.pointPlacement==="between";while(d--)if(p[d].visible){p[d]===t&&(h=!0);break}for(d=0;d<l;d++){var m=f[d],g=m.x,y=m.y,b=m.low,w=a.stacks[(y<r.threshold?"-":"")+t.stackKey],E,S;m.plotX=o.translate(g,0,0,0,1,v),s&&t.visible&&w&&w[g]&&(E=w[g],S=E.total,E.cum=b=E.cum-y,y=b+y,h&&(b=Bt(r.threshold,a.min)),a.isLog&&b<=0&&(b=null),s==="percent"&&(b=S?b*100/S:0,y=S?y*100/S:0),m.percentage=S?m.y*100/S:0,m.total=m.stackTotal=S,m.stackY=y),m.yBottom=Dt(b)?a.translate(b,0,1,0,1):null,c&&(y=t.modifyValue(y,m)),m.plotY=typeof y=="number"?i(a.translate(y,0,1,0,1)*10)/10:e,m.clientX=n.inverted?n.plotHeight-m.plotX:m.plotX,m.category=u&&u[m.x]!==e?u[m.x]:m.x}t.getSegments()},setTooltipPoints:function(e){var t=this,n=[],r,i,o,a=t.xAxis,f=a?a.tooltipLen||a.len:t.chart.plotSizeX,l=a&&a.tooltipPosName||"plotX",c,h,p=[];if(t.options.enableMouseTracking===!1)return;e&&(t.tooltipPoints=null),an(t.segments||t.points,function(e){n=n.concat(e)}),a&&a.reversed&&(n=n.reverse()),r=n.length;for(h=0;h<r;h++){c=n[h],i=n[h-1]?o+1:0,o=n[h+1]?u(0,s((c[l]+(n[h+1]?n[h+1][l]:f))/2)):f;while(i>=0&&i<=o)p[i++]=c}t.tooltipPoints=p},tooltipHeaderFormatter:function(e){var t=this,n=t.tooltipOptions,r=n.xDateFormat,i=t.xAxis,s=i&&i.options.type==="datetime",o;if(s&&!r)for(o in P)if(P[o]>=i.closestPointRange){r=n.dateTimeLabelFormats[o];break}return n.headerFormat.replace("{point.key}",s&&At(e)?M(r,e):e).replace("{series.name}",t.name).replace("{series.color}",t.color)},onMouseOver:function(){var e=this,t=e.chart,n=t.hoverSeries;n&&n!==e&&n.onMouseOut(),e.options.events.mouseOver&&vn(e,"mouseOver"),e.setState(K),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,n=e.chart,r=n.tooltip,i=n.hoverPoint;i&&i.onMouseOut(),e&&t.events.mouseOut&&vn(e,"mouseOut"),r&&!t.stickyTracking&&!r.shared&&r.hide(),e.setState(),n.hoverSeries=null},animate:function(e){var t=this,n=t.chart,r=n.renderer,i,s,o=t.options.animation,u=n.clipBox,a=n.inverted,f;o&&!kt(o)&&(o=wn[t.type].animation),f="_sharedClip"+o.duration+o.easing,e?(i=n[f],s=n[f+"m"],i||(n[f]=i=r.clipRect(xt(u,{width:0})),n[f+"m"]=s=r.clipRect(-99,a?-n.plotLeft:-n.plotTop,99,a?n.chartWidth:n.chartHeight)),t.group.clip(i),t.markerGroup.clip(s),t.sharedClipKey=f):(i=n[f],i&&(i.animate({width:n.plotSizeX},o),n[f+"m"].animate({width:n.plotSizeX+99},o)),t.animate=null,t.animationTimeout=setTimeout(function(){t.afterAnimate()},o.duration))},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,n=this.group,r=this.trackerGroup;n&&this.options.clip!==!1&&(n.clip(e.clipRect),r&&r.clip(e.clipRect),this.markerGroup.clip()),setTimeout(function(){t&&e[t]&&(e[t]=e[t].destroy(),e[t+"m"]=e[t+"m"].destroy())},100)},drawPoints:function(){var t=this,n,r=t.points,i=t.chart,s,o,u,a,f,l,c,h,p=t.options,d=p.marker,v,m,g,y=t.markerGroup;if(d.enabled||t._hasPointMarkers){u=r.length;while(u--)a=r[u],s=a.plotX,o=a.plotY,h=a.graphic,v=a.marker||{},m=d.enabled&&v.enabled===e||v.enabled,g=i.isInsidePlot(s,o,i.inverted),m&&o!==e&&!isNaN(o)?(n=a.pointAttr[a.selected?Q:J],f=n.r,l=Bt(v.symbol,t.symbol),c=l.indexOf("url")===0,h?h.attr({visibility:g?S?"inherit":U:q}).animate(xt({x:s-f,y:o-f},h.symbolName?{width:2*f,height:2*f}:{})):g&&(f>0||c)&&(a.graphic=h=i.renderer.symbol(l,s-f,o-f,2*f,2*f).attr(n).add(y))):h&&(a.graphic=h.destroy())}},convertAttribs:function(e,t,n,r){var i=this.pointAttrToOptions,s,o,u={};e=e||{},t=t||{},n=n||{},r=r||{};for(s in i)o=i[s],u[s]=Bt(e[o],t[s],n[s],r[s]);return u},getAttribs:function(){var e=this,t=wn[e.type].marker?e.options.marker:e.options,n=t.states,r=n[K],i,s=e.color,o={stroke:s,fill:s},u=e.points||[],a,f,l=[],c,h=e.pointAttrToOptions,p,d;e.options.marker?(r.radius=r.radius||t.radius+2,r.lineWidth=r.lineWidth||t.lineWidth+1):r.color=r.color||Nn(r.color||s).brighten(r.brightness).get(),l[J]=e.convertAttribs(t,o),an([K,Q],function(t){l[t]=e.convertAttribs(n[t],l[J])}),e.pointAttr=l,a=u.length;while(a--){f=u[a],t=f.options&&f.options.marker||f.options,t&&t.enabled===!1&&(t.radius=0),p=e.options.colorByPoint;if(f.options)for(d in h)Dt(t[h[d]])&&(p=!0);p?(t=t||{},c=[],n=t.states||{},i=n[K]=n[K]||{},e.options.marker||(i.color=Nn(i.color||f.color).brighten(i.brightness||r.brightness).get()),c[J]=e.convertAttribs(xt({color:f.color},t),l[J]),c[K]=e.convertAttribs(n[K],l[K],c[J]),c[Q]=e.convertAttribs(n[Q],l[Q],c[J])):c=l,f.pointAttr=c}},destroy:function(){var e=this,t=e.chart,n=/AppleWebKit\/533/.test(d),r,i,s=e.data||[],o,u,a;vn(e,"destroy"),dn(e),an(["xAxis","yAxis"],function(t){a=e[t],a&&(_t(a.series,e),a.isDirty=!0)}),e.legendItem&&e.chart.legend.destroyItem(e),i=s.length;while(i--)o=s[i],o&&o.destroy&&o.destroy();e.points=null,clearTimeout(e.animationTimeout),an(["area","graph","dataLabelsGroup","group","markerGroup","tracker","trackerGroup"],function(t){e[t]&&(r=n&&t==="group"?"hide":"destroy",e[t][r]())}),t.hoverSeries===e&&(t.hoverSeries=null),_t(t.series,e);for(u in e)delete e[u]},drawDataLabels:function(){var t=this,n=t.options,r=n.dataLabels,i=t.points,s,o,u,a;if(r.enabled||t._hasPointLabels)t.dlProcessOptions&&t.dlProcessOptions(r),a=t.plotGroup("dataLabelsGroup","data-labels",t.visible?U:q,r.zIndex||6),o=r,an(i,function(n){var i,f=n.dataLabel,l,c,h,p=!0;s=n.options&&n.options.dataLabels,i=o.enabled||s&&s.enabled;if(f&&!i)n.dataLabel=f.destroy();else if(i){h=r.rotation,r=hn(o,s),u=r.formatter.call(n.getLabelConfig(),r),r.style.color=Bt(r.color,r.style.color,t.color,"black");if(f)f.attr({text:u}),p=!1;else if(Dt(u)){l={fill:r.backgroundColor,stroke:r.borderColor,"stroke-width":r.borderWidth,r:r.borderRadius||0,rotation:h,padding:r.padding,zIndex:1};for(c in l)l[c]===e&&delete l[c];f=n.dataLabel=t.chart.renderer[h?"text":"label"](u,0,-999,null,null,null,r.useHTML).attr(l).css(r.style).add(a).shadow(r.shadow)}f&&t.alignDataLabel(n,f,r,null,p)}})},alignDataLabel:function(e,t,n,r,s){var o=this.chart,u=o.inverted,a=Bt(e.plotX,-999),f=Bt(e.plotY,-999),l=t.getBBox(),c;r=xt({x:u?o.plotWidth-f:a,y:i(u?o.plotHeight-a:f),width:0,height:0},r),xt(n,{width:l.width,height:l.height}),n.rotation?(c={align:n.align,x:r.x+n.x+r.width/2,y:r.y+n.y+r.height/2},t[s?"attr":"animate"](c)):(t.align(n,null,r),c=t.alignAttr),t.attr({visibility:n.crop===!1||o.isInsidePlot(c.x,c.y)||o.isInsidePlot(a,f,u)?o.renderer.isSVG?"inherit":U:q})},getSegmentPath:function(e){var t=this,n=[],r=t.options.step;return an(e,function(i,s){var o=i.plotX,u=i.plotY,a;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,i,s)):(n.push(s?V:X),r&&s&&(a=e[s-1],r==="right"?n.push(a.plotX,u):r==="center"?n.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,u):n.push(o,a.plotY)),n.push(i.plotX,i.plotY))}),n},getGraphPath:function(){var e=this,t=[],n,r=[];return an(e.segments,function(i){n=e.getSegmentPath(i),i.length>1?t=t.concat(n):r.push(i[0])}),e.singlePoints=r,e.graphPath=t,t},drawGraph:function(){var e=this.options,t=this.graph,n=this.group,r=e.lineColor||this.color,i=e.lineWidth,s=e.dashStyle,o,u=this.getGraphPath();t?(yn(t),t.animate({d:u})):i&&(o={stroke:r,"stroke-width":i,zIndex:1},s&&(o.dashstyle=s),this.graph=this.chart.renderer.path(u).attr(o).add(n).shadow(e.shadow))},invertGroups:function(){function n(){var t={width:e.yAxis.len,height:e.xAxis.len};an(["group","trackerGroup","markerGroup"],function(n){e[n]&&e[n].attr(t).invert()})}var e=this,t=e.chart;pn(t,"resize",n),pn(e,"destroy",function(){dn(t,"resize",n)}),n(),e.invertGroups=n},plotGroup:function(e,t,n,r,i){var s=this[e],o=this.chart,u=this.xAxis,a=this.yAxis;return s||(this[e]=s=o.renderer.g(t).attr({visibility:n,zIndex:r||.1}).add(i)),s.translate(u?u.left:o.plotLeft,a?a.top:o.plotTop),s},render:function(){var e=this,t=e.chart,n,r=e.options,i=r.animation,s=i&&!!e.animate,o=e.visible?U:q,u=r.zIndex,a=e.hasRendered,f=t.seriesGroup;n=e.plotGroup("group","series",o,u,f),e.markerGroup=e.plotGroup("markerGroup","markers",o,u,f),s&&e.animate(!0),e.getAttribs(),n.inverted=t.inverted,e.drawGraph&&e.drawGraph(),e.drawPoints(),e.drawDataLabels(),e.options.enableMouseTracking!==!1&&e.drawTracker(),t.inverted&&e.invertGroups(),r.clip!==!1&&!e.sharedClipKey&&!a&&(n.clip(t.clipRect),this.trackerGroup&&this.trackerGroup.clip(t.clipRect)),s?e.animate():a||e.afterAnimate(),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var e=this,t=e.chart,n=e.isDirtyData,r=e.group;r&&(t.inverted&&r.attr({width:t.plotWidth,height:t.plotHeight}),r.animate({translateX:e.xAxis.left,translateY:e.yAxis.top})),e.translate(),e.setTooltipPoints(!0),e.render(),n&&vn(e,"updatedData")},setState:function(e){var t=this,n=t.options,r=t.graph,i=n.states,s=n.lineWidth;e=e||J;if(t.state!==e){t.state=e;if(i[e]&&i[e].enabled===!1)return;e&&(s=i[e].lineWidth||s+1),r&&!r.dashstyle&&r.attr({"stroke-width":s},e?0:500)}},setVisible:function(t,n){var r=this,i=r.chart,s=r.legendItem,o=r.group,u=r.tracker,a=r.dataLabelsGroup,f=r.markerGroup,l,c,h=r.points,p,d=i.options.chart.ignoreHiddenSeries,v=r.visible;r.visible=t=t===e?!v:t,l=t?"show":"hide",o&&o[l](),f&&f[l]();if(u)u[l]();else if(h){c=h.length;while(c--)p=h[c],p.tracker&&p.tracker[l]()}i.hoverSeries===r&&r.onMouseOut(),a&&a[l](),s&&i.legend.colorizeItem(r,t),r.isDirty=!0,r.options.stacking&&an(i.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),d&&(i.isDirtyBox=!0),n!==!1&&i.redraw(),vn(r,l)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var n=this;n.selected=t=t===e?!n.selected:t,n.checkbox&&(n.checkbox.checked=t),vn(n,t?"select":"unselect")},drawTracker:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.renderer,u=s.options.tooltip.snap,a=e.tracker,f=t.cursor,l=f&&{cursor:f},c=e.singlePoints,h=this.isCartesian&&this.plotGroup("trackerGroup",null,U,t.zIndex||1,s.trackerGroup),p,d,v=function(){s.hoverSeries!==e&&e.onMouseOver()},m=function(){t.stickyTracking||e.onMouseOut()};if(i&&!n){d=i+1;while(d--)r[d]===X&&r.splice(d+1,0,r[d+1]-u,r[d+2],V),(d&&r[d]===X||d===i)&&r.splice(d,0,V,r[d-2]+u,r[d-1])}for(d=0;d<c.length;d++)p=c[d],r.push(X,p.plotX-u,p.plotY,V,p.plotX+u,p.plotY);a?a.attr({d:r}):(e.tracker=a=o.path(r).attr({isTracker:!0,"stroke-linejoin":"round",visibility:e.visible?U:q,stroke:$,fill:n?$:W,"stroke-width":t.lineWidth+(n?0:2*u)}).on("mouseover",v).on("mouseout",m).css(l).add(h),C&&a.on("touchstart",v))}};var zn=It(Un);St.line=zn,wn.area=hn(En,{threshold:0});var Wn=It(Un,{type:"area",getSegmentPath:function(e){var t=Un.prototype.getSegmentPath.call(this,e),n=[].concat(t),r,i=this.options,s=t.length;s===3&&n.push(V,t[1],t[2]);if(i.stacking&&!this.closedStacks)for(r=e.length-1;r>=0;r--)r<e.length-1&&i.step&&n.push(e[r+1].plotX,e[r].yBottom),n.push(e[r].plotX,e[r].yBottom);else this.closeSegment(n,e);return this.areaPath=this.areaPath.concat(n),t},closeSegment:function(e,t){var n=this.yAxis.getThreshold(this.options.threshold);e.push(V,t[t.length-1].plotX,n,V,t[0].plotX,n)},drawGraph:function(){this.areaPath=[],Un.prototype.drawGraph.apply(this);var e=this.areaPath,t=this.options,n=this.area;n?n.animate({d:e}):this.area=this.chart.renderer.path(e).attr({fill:Bt(t.fillColor,Nn(this.color).setOpacity(t.fillOpacity||.75).get()),zIndex:0}).add(this.group)},drawLegendSymbol:function(e,t){t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,e.options.symbolWidth,12,2).attr({zIndex:3}).add(t.legendGroup)}});St.area=Wn,wn.spline=hn(En);var Xn=It(Un,{type:"spline",getPointSpline:function(e,t,n){var r=1.5,i=r+1,s=t.plotX,o=t.plotY,f=e[n-1],l=e[n+1],c,h,p,d,v;if(f&&l){var m=f.plotX,g=f.plotY,y=l.plotX,b=l.plotY,w;c=(r*s+m)/i,h=(r*o+g)/i,p=(r*s+y)/i,d=(r*o+b)/i,w=(d-h)*(p-s)/(p-c)+o-d,h+=w,d+=w,h>g&&h>o?(h=u(g,o),d=2*o-h):h<g&&h<o&&(h=a(g,o),d=2*o-h),d>b&&d>o?(d=u(b,o),h=2*o-d):d<b&&d<o&&(d=a(b,o),h=2*o-d),t.rightContX=p,t.rightContY=d}return n?(v=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,c||s,h||o,s,o],f.rightContX=f.rightContY=null):v=[X,s,o],v}});St.spline=Xn,wn.areaspline=hn(wn.area);var Vn=Wn.prototype,$n=It(Xn,{type:"areaspline",closedStacks:!0,getSegmentPath:Vn.getSegmentPath,closeSegment:Vn.closeSegment,drawGraph:Vn.drawGraph});St.areaspline=$n,wn.column=hn(En,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},threshold:0});var Jn=It(Un,{type:"column",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){Un.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&an(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},translate:function(){var t=this,n=t.chart,r=t.options,i=r.stacking,s=r.borderWidth,l=0,c=t.xAxis,h=t.yAxis,p=c.reversed,d={},v,m;Un.prototype.translate.apply(t),r.grouping===!1?l=1:an(n.series,function(n){var r=n.options;n.type===t.type&&n.visible&&t.options.group===r.group&&(r.stacking?(v=n.stackKey,d[v]===e&&(d[v]=l++),m=d[v]):r.grouping!==!1&&(m=l++),n.columnIndex=m)});var g=t.points,y=f(c.transA)*(c.ordinalSlope||r.pointRange||c.closestPointRange||1),b=y*r.groupPadding,w=y-2*b,E=w/l,S=r.pointWidth,x=Dt(S)?(E-S)/2:E*r.pointPadding,T=Bt(S,E-2*x),N=o(u(T,1+2*s)),C=(p?l-(t.columnIndex||0):t.columnIndex)||0,k=x+(b+C*E-y/2)*(p?-1:1),L=r.threshold,A=t.translatedThreshold=h.getThreshold(L),O=Bt(r.minPointLength,5);an(g,function(e){var r=a(u(-999,e.plotY),h.len+999),l=Bt(e.yBottom,A),c=e.plotX+k,p=o(a(r,l)),d=o(u(r,l)-p),v=h.stacks[(e.y<0?"-":"")+t.stackKey],m;i&&t.visible&&v&&v[e.x]&&v[e.x].setOffset(k,N),f(d)<O&&O&&(d=O,p=f(p-A)>O?l-O:A-(r<=A?O:0)),e.barX=c,e.pointWidth=T,e.shapeType="rect",e.shapeArgs=m=n.renderer.Element.prototype.crisp.call(0,s,c,p,N,d),s%2&&(m.y-=1,m.height+=1),e.trackerArgs=f(d)<3&&hn(e.shapeArgs,{height:6,y:p-3})})},getSymbol:H,drawLegendSymbol:Wn.prototype.drawLegendSymbol,drawGraph:H,drawPoints:function(){var t=this,n=t.options,r=t.chart.renderer,i;an(t.points,function(s){var o=s.plotY,u=s.graphic;o!==e&&!isNaN(o)&&s.y!==null?(i=s.shapeArgs,u?(yn(u),u.animate(hn(i))):s.graphic=u=r[s.shapeType](i).attr(s.pointAttr[s.selected?Q:J]).add(t.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius)):u&&(s.graphic=u.destroy())})},drawTracker:function(){var t=this,n=t.chart,r=n.renderer,i,s,o=+(new Date),u=t.options,a=u.cursor,f=a&&{cursor:a},l=t.isCartesian&&t.plotGroup("trackerGroup",null,U,u.zIndex||1,n.trackerGroup),c,h,p,d=t.points,v,m=d.length,g=function(e){c=e.relatedTarget||e.fromElement,n.hoverSeries!==t&&Pt(c,"isTracker")!==o&&t.onMouseOver(),d[e.target._i].onMouseOver()},y=function(e){u.stickyTracking||(c=e.relatedTarget||e.toElement,Pt(c,"isTracker")!==o&&t.onMouseOut())};while(m--)v=d[m],s=v.tracker,i=v.trackerArgs||v.shapeArgs,h=v.plotY,p=!t.isCartesian||h!==e&&!isNaN(h),delete i.strokeWidth,v.y!==null&&p&&(s?s.attr(i):(v.tracker=s=r[v.shapeType](i).attr({isTracker:o,fill:$,visibility:t.visible?U:q}).on("mouseover",g).on("mouseout",y).css(f).add(v.group||l),C&&s.on("touchstart",g)),s.element._i=m)},alignDataLabel:function(e,t,n,r,i){var s=this.chart,o=s.inverted,u=e.below||e.plotY>Bt(this.translatedThreshold,s.plotSizeY),a=this.options.stacking||n.inside;e.shapeArgs&&(r=hn(e.shapeArgs),o&&(r={x:s.plotWidth-r.y-r.height,y:s.plotHeight-r.x-r.width,width:r.height,height:r.width}),a||(o?(r.x+=u?0:r.width,r.width=0):(r.y+=u?r.height:0,r.height=0))),n.align=Bt(n.align,!o||a?"center":u?"right":"left"),n.verticalAlign=Bt(n.verticalAlign,o||a?"middle":u?"top":"bottom"),Un.prototype.alignDataLabel.call(this,e,t,n,r,i)},animate:function(e){var t=this,n=t.points,r=t.options;e||(an(n,function(e){var n=e.graphic,i=e.shapeArgs,s=t.yAxis,o=r.threshold;n&&(n.attr({height:0,y:Dt(o)?s.getThreshold(o):s.translate(s.getExtremes().min,0,1,0,1)}),n.animate({height:i.height,y:i.y},r.animation))}),t.animate=null)},remove:function(){var e=this,t=e.chart;t.hasRendered&&an(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Un.prototype.remove.apply(e,arguments)}});St.column=Jn,wn.bar=hn(wn.column);var Kn=It(Jn,{type:"bar",inverted:!0});St.bar=Kn,wn.scatter=hn(En,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var Qn=It(Un,{type:"scatter",sorted:!1,requireSorting:!1,translate:function(){var e=this;Un.prototype.translate.apply(e),an(e.points,function(t){t.shapeType="circle",t.shapeArgs={x:t.plotX,y:t.plotY,r:e.chart.options.tooltip.snap}})},drawTracker:function(){var t=this,n=t.options.cursor,r=n&&{cursor:n},i=t.points,s=i.length,o,u=t.markerGroup,a=function(n){t.onMouseOver(),n.target._i!==e&&i[n.target._i].onMouseOver()},f=function(){t.options.stickyTracking||t.onMouseOut()};while(s--)o=i[s].graphic,o&&(o.element._i=s);t._hasTracking?t._hasTracking=!0:(u.attr({isTracker:!0}).on("mouseover",a).on("mouseout",f).css(r),C&&u.on("touchstart",a))},setTooltipPoints:H});St.scatter=Qn,wn.pie=hn(En,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}}});var Gn=It(Rn,{init:function(){Rn.prototype.init.apply(this,arguments);var e=this,t;return xt(e,{visible:e.visible!==!1,name:Bt(e.name,"Slice")}),t=function(){e.slice()},pn(e,"select",t),pn(e,"unselect",t),e},setVisible:function(t){var n=this,r=n.series,i=r.chart,s=n.tracker,o=n.dataLabel,u=n.connector,a=n.shadowGroup,f;n.visible=t=t===e?!n.visible:t,f=t?"show":"hide",n.group[f](),s&&s[f](),o&&o[f](),u&&u[f](),a&&a[f](),n.legendItem&&i.legend.colorizeItem(n,t),!r.isDirty&&r.options.ignoreHiddenPoint&&(r.isDirty=!0,i.redraw())},slice:function(e,t,n){var r=this,i=r.series,s=i.chart,o=r.slicedTranslation,u;tn(n,s),t=Bt(t,!0),e=r.sliced=Dt(e)?e:!r.sliced,u={translateX:e?o[0]:s.plotLeft,translateY:e?o[1]:s.plotTop},r.group.animate(u),r.shadowGroup&&r.shadowGroup.animate(u)}}),Yn={type:"pie",isCartesian:!1,pointClass:Gn,requireSorting:!1,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var e=this,t=e.points,n=e.startAngleRad;an(t,function(t){var r=t.graphic,i=t.shapeArgs;r&&(r.attr({r:e.center[3]/2,start:n,end:n}),r.animate({r:i.r,start:i.start,end:i.end},e.options.animation))}),e.animate=null},setData:function(e,t){Un.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),Bt(t,!0)&&this.chart.redraw()},getCenter:function(){var e=this.options,t=this.chart,n=t.plotWidth,r=t.plotHeight,i=e.center.concat([e.size,e.innerSize||0]),s=a(n,r),o;return cn(i,function(e,t){return o=/%$/.test(e),o?[n,r,s,s][t]*Nt(e)/100:e})},translate:function(){this.generatePoints();var e=0,t=this,n=0,s=1e3,o=t.options,u=o.slicedOffset,a=u+o.borderWidth,f,p=t.chart,d,v,m,g=t.startAngleRad=h/180*((o.startAngle||0)%360-90),y=t.points,b=2*h,w,E,S,x=o.dataLabels.distance,T=o.ignoreHiddenPoint,N,C=y.length,k;t.center=f=t.getCenter(),t.getX=function(e,t){return m=r.asin((e-f[1])/(f[2]/2+x)),f[0]+(t?-1:1)*l(m)*(f[2]/2+x)};for(N=0;N<C;N++)k=y[N],e+=T&&!k.visible?0:k.y;for(N=0;N<C;N++){k=y[N],w=e?k.y/e:0,d=i((g+n*b)*s)/s;if(!T||k.visible)n+=w;v=i((g+n*b)*s)/s,k.shapeType="arc",k.shapeArgs={x:f[0],y:f[1],r:f[2]/2,innerR:f[3]/2,start:d,end:v},m=(v+d)/2,m>.75*b&&(m-=2*h),k.slicedTranslation=cn([l(m)*u+p.plotLeft,c(m)*u+p.plotTop],i),E=l(m)*f[2]/2,S=c(m)*f[2]/2,k.tooltipPos=[f[0]+E*.7,f[1]+S*.7],k.half=m<b/4?0:1,k.angle=m,k.labelPos=[f[0]+E+l(m)*x,f[1]+S+c(m)*x,f[0]+E+l(m)*a,f[1]+S+c(m)*a,f[0]+E,f[1]+S,x<0?"center":k.half?"right":"left",m],k.percentage=w*100,k.total=e}this.setTooltipPoints()},render:function(){var e=this;e.getAttribs(),this.drawPoints(),e.options.enableMouseTracking!==!1&&e.drawTracker(),this.drawDataLabels(),e.options.animation&&e.animate&&e.animate(),e.isDirty=!1},drawPoints:function(){var e=this,t=e.chart,n=t.renderer,r,i,s,o=e.options.shadow,u,a;an(e.points,function(f){i=f.graphic,a=f.shapeArgs,s=f.group,u=f.shadowGroup,o&&!u&&(u=f.shadowGroup=n.g("shadow").attr({zIndex:4}).add()),s||(s=f.group=n.g("point").attr({zIndex:5}).add()),r=f.sliced?f.slicedTranslation:[t.plotLeft,t.plotTop],s.translate(r[0],r[1]),u&&u.translate(r[0],r[1]),i?i.animate(a):f.graphic=i=n.arc(a).setRadialReference(e.center).attr(xt(f.pointAttr[J],{"stroke-linejoin":"round"})).add(f.group).shadow(o,u),f.visible===!1&&f.setVisible(!1)})},drawDataLabels:function(){var e=this,t=e.data,n,r=e.chart,i=e.options.dataLabels,s=Bt(i.connectorPadding,10),o=Bt(i.connectorWidth,1),u,a,l=Bt(i.softConnector,!0),c=i.distance,h=e.center,p=h[2]/2,d=h[1],v=c>0,m,g,y,b=[[],[]],w,E,S,x,T=2,N,C=function(e,t){return t.y-e.y},k=function(e,t){e.sort(function(e,n){return(n.angle-e.angle)*t})};if(!i.enabled&&!e._hasPointLabels)return;Un.prototype.drawDataLabels.apply(e),an(t,function(e){e.dataLabel&&b[e.half].push(e)}),y=b[0][0]&&b[0][0].dataLabel&&(b[0][0].dataLabel.getBBox().height||21);while(T--){var L=[],A,O=[],M=b[T],_,D=M.length,P;k(M,T-.5);if(c>0){for(_=d-p-c;_<=d+p+c;_+=y)L.push(_);A=L.length;if(D>A){x=[].concat(M),x.sort(C),N=D;while(N--)x[N].rank=N;N=D;while(N--)M[N].rank>=A&&M.splice(N,1);D=M.length}for(N=0;N<D;N++){n=M[N],g=n.labelPos;var H=9999,B,j;for(j=0;j<A;j++)B=f(L[j]-g[1]),B<H&&(H=B,P=j);if(P<N&&L[N]!==null)P=N;else if(A<D-N+P&&L[N]!==null){P=A-D+N;while(L[P]===null)P++}else while(L[P]===null)P++;O.push({i:P,y:L[P]}),L[P]=null}O.sort(C)}for(N=0;N<D;N++){var F,I;n=M[N],g=n.labelPos,m=n.dataLabel,S=n.visible===!1?q:U,I=g[1];if(c>0){F=O.pop(),P=F.i,E=F.y;if(I>E&&L[P+1]!==null||I<E&&L[P-1]!==null)E=I}else E=I;w=i.justify?h[0]+(T?-1:1)*(p+c):e.getX(P===0||P===L.length-1?I:E,T),m.attr({visibility:S,align:g[6]})[m.moved?"animate":"attr"]({x:w+i.x+({left:s,right:-s}[g[6]]||0),y:E+i.y-10}),m.moved=!0,v&&o&&(u=n.connector,a=l?[X,w+(g[6]==="left"?5:-5),E,"C",w,E,2*g[2]-g[4],2*g[3]-g[5],g[2],g[3],V,g[4],g[5]]:[X,w+(g[6]==="left"?5:-5),E,V,g[2],g[3],V,g[4],g[5]],u?(u.animate({d:a}),u.attr("visibility",S)):n.connector=u=e.chart.renderer.path(a).attr({"stroke-width":o,stroke:i.connectorColor||n.color||"#606060",visibility:S,zIndex:3}).translate(r.plotLeft,r.plotTop).add())}}},alignDataLabel:H,drawTracker:Jn.prototype.drawTracker,drawLegendSymbol:Wn.prototype.drawLegendSymbol,getSymbol:function(){}};Yn=It(Un,Yn),St.pie=Yn,xt(Highcharts,{Axis:Bn,CanVGRenderer:Mn,Chart:qn,Color:Nn,Legend:In,MouseTracker:Fn,Point:Rn,Tick:Dn,Tooltip:jn,Renderer:N,Series:Un,SVGRenderer:kn,VMLRenderer:Ln,arrayMin:Kt,arrayMax:Qt,charts:B,dateFormat:M,pathAnim:D,getOptions:Tn,hasBidiBug:x,isTouchDevice:w,numberFormat:Rt,seriesTypes:St,setOptions:xn,addEvent:pn,removeEvent:dn,createElement:Ft,discardElement:Yt,css:jt,each:an,extend:xt,map:cn,merge:hn,pick:Bt,splat:Ht,extendClass:It,pInt:Nt,wrap:zt,svg:S,canvas:T,vml:!S&&!T,product:"Highcharts",version:"2.3.5"})}(),define("highcharts",function(e){return function(){var t,n;return t||e.Highcharts}}(this)),define("utils/PaginationUtil",["underscore"],function(e){var t=function(t){var n=this,r={currentPage:1,totalPage:1};this.options=e.extend(r,t),this.init()};return t.prototype={init:function(){this.options.onInit(),this.options.$el.append('<div data="pagination_wrapper"></div>'),this.render(),this.bindEvents()},render:function(){this.updateCss(),this.options.$el.find('div[data="pagination_wrapper"]').html(e.template(this._templ(),this.options))},bindEvents:function(){var e=this;e.options.$el.undelegate(),e.options.$el.delegate('a[role="prevBtn"]',"click",function(){if(e.options.currentPage===1)return;e.options.currentPage--,e.render(),e.options.onPageClick(e.options.currentPage)}),e.options.$el.delegate('a[role="nextBtn"]',"click",function(){console.log(e.options.currentPage,e.options.totalPage);if(e.options.currentPage===e.options.totalPage||e.options.totalPage<=0)return;e.options.currentPage++,e.render(),e.options.onPageClick(e.options.currentPage)})},updateCss:function(){this.options.prevClass=this.getPrevClass(),this.options.nextClass=this.getNextClass()},getPrevClass:function(){return this.options.currentPage==1?"paginate_disabled_previous":"paginate_enabled_previous"},getNextClass:function(){return this.options.totalPage<=0||this.options.currentPage===this.options.totalPage?"paginate_disabled_next":"paginate_enabled_next"},_templ:function(){return'<div class="tableview">							<div class="dataTables_paginate paging_two_button">								<a role="prevBtn" class="<%=prevClass%> paginate_button"></a>								<span class="navigationLabel">									<font class="pageIndex"><%=currentPage%></font>/<font class="totalPages"><%=totalPage%></font>								</span>								<a role="nextBtn" class="<%=nextClass%> paginate_button"></a>							</div>						</div>'}},t}),define("utils/levelUtil",["underscore"],function(e){return{split:function(t,n){n=n||50;if(t&&t.length){if(t.length<=n)return t;var r=t[0],i=t.length,s=parseInt(i/n),o=i%n,u=o===0?s-1:s,a=1,f,l,c=[],h=[];e.isObject(r)?(l=e.pluck(t,"item"),l=e.map(l,function(e){return parseInt(e)})):l=t,e.isString(r)&&(l=e.map(l,function(e){return parseInt(e)})),f=parseInt(e.max(l));var p=a;while(p<=f){var d=p+u,v=d>f?p+"~"+f:p+"~"+d;c.push(v),p=p+u+1}if(e.isObject(r)){var m,g;return e.each(c,function(n){m=parseInt(n.split("~")[0]),g=parseInt(n.split("~")[1]);var r=e.filter(t,function(e){var t=parseInt(e.item);if(t>=m&&t<=g)return e}),i=e.sum(e.pluck(r,"value"));h.push({item:n,value:i})}),h}return c}return t}}}),define("text!templates/public/alert.html",[],function(){return'<div class="Pop_line">\r\n    <div class="timetop">\r\n        <b class="l"><%=title%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n        <div class="Prompt"><%=message%></div>\r\n        <div class="opeDiv after">\r\n            <a class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/public/confirm.html",[],function(){return'<div class="Pop_line" style="width:300px;">\r\n	<div class="timetop">\r\n    	<b class="l"><%=i18n.GameCommon.confirmTitle%></b>\r\n    </div>\r\n	<div class="Poptxt">\r\n    	<p class="Prompt"><%=i18n.GameCommon.confirmDelete%></p>\r\n        <div class="opeDiv after">\r\n            <a  class="timecolse r Confirm"><%=i18n.GameCommon.confirm%></a>\r\n            <a class="r Cancel"><%=i18n.GameCommon.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/public/block.html",[],function(){return'<div class="weblogin">\r\n	<img src="images/loading.gif" height="25px"></img>	\r\n	<p><%=message%></p>\r\n</div>'}),function(e){function u(n,u){var f=n==window,c=u&&u.message!==undefined?u.message:undefined;u=e.extend({},e.blockUI.defaults,u||{}),u.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,u.overlayCSS||{});var v=e.extend({},e.blockUI.defaults.css,u.css||{}),m=e.extend({},e.blockUI.defaults.themedCSS,u.themedCSS||{});c=c===undefined?u.message:c,f&&s&&a(window,{fadeOut:0});if(c&&typeof c!="string"&&(c.parentNode||c.jquery)){var g=c.jquery?c[0]:c,y={};e(n).data("blockUI.history",y),y.el=g,y.parent=g.parentNode,y.display=g.style.display,y.position=g.style.position,y.parent&&y.parent.removeChild(g)}var b=u.baseZ,w=e.browser.msie||u.forceIframe?e('<iframe class="blockUI" style="z-index:'+b++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+u.iframeSrc+'"></iframe>'):e('<div class="blockUI" style="display:none"></div>'),E=e('<div class="blockUI blockOverlay" style="z-index:'+b++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),S,x;u.theme&&f?x='<div class="blockUI '+u.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+b+';display:none;position:fixed">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(u.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>":u.theme?x='<div class="blockUI '+u.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+b+';display:none;position:absolute">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(u.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>":f?x='<div class="blockUI '+u.blockMsgClass+' blockPage" style="z-index:'+b+';display:none;position:fixed"></div>':x='<div class="blockUI '+u.blockMsgClass+' blockElement" style="z-index:'+b+';display:none;position:absolute"></div>',S=e(x),c&&(u.theme?(S.css(m),S.addClass("ui-widget-content")):S.css(v)),(!u.applyPlatformOpacityRules||!e.browser.mozilla||!/Linux/.test(navigator.platform))&&E.css(u.overlayCSS),E.css("position",f?"fixed":"absolute"),(e.browser.msie||u.forceIframe)&&w.css("opacity",0);var T=[w,E,S],N=f?e("body"):e(n);e.each(T,function(){this.appendTo(N)}),u.theme&&u.draggable&&e.fn.draggable&&S.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var C=r&&(!e.boxModel||e("object,embed",f?null:n).length>0);if(i||C){f&&u.allowBodyStretch&&e.boxModel&&e("html,body").css("height","100%");if((i||!e.boxModel)&&!f)var k=d(n,"borderTopWidth"),L=d(n,"borderLeftWidth"),A=k?"(0 - "+k+")":0,O=L?"(0 - "+L+")":0;e.each([w,E,S],function(e,t){var n=t[0].style;n.position="absolute";if(e<2)f?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+u.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),f?n.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),O&&n.setExpression("left",O),A&&n.setExpression("top",A);else if(u.centerY)f&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!u.centerY&&f){var r=u.css&&u.css.top?parseInt(u.css.top):0,i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"';n.setExpression("top",i)}})}c&&(u.theme?S.find(".ui-widget-content").append(c):S.append(c),(c.jquery||c.nodeType)&&e(c).show()),(e.browser.msie||u.forceIframe)&&u.showOverlay&&w.show();if(u.fadeIn){var M=u.onBlock?u.onBlock:t,_=u.showOverlay&&!c?M:t,D=c?M:t;u.showOverlay&&E._fadeIn(u.fadeIn,_),c&&S._fadeIn(u.fadeIn,D)}else u.showOverlay&&E.show(),c&&S.show(),u.onBlock&&u.onBlock();l(1,n,u),f?(s=S[0],o=e(":input:enabled:visible",s),u.focusInput&&setTimeout(h,20)):p(S[0],u.centerX,u.centerY);if(u.timeout){var P=setTimeout(function(){f?e.unblockUI(u):e(n).unblock(u)},u.timeout);e(n).data("blockUI.timeout",P)}}function a(t,n){var r=t==window,i=e(t),u=i.data("blockUI.history"),a=i.data("blockUI.timeout");a&&(clearTimeout(a),i.removeData("blockUI.timeout")),n=e.extend({},e.blockUI.defaults,n||{}),l(0,t,n);var c;r?c=e("body").children().filter(".blockUI").add("body > .blockUI"):c=e(".blockUI",t),r&&(s=o=null),n.fadeOut?(c.fadeOut(n.fadeOut),setTimeout(function(){f(c,u,n,t)},n.fadeOut)):f(c,u,n,t)}function f(t,n,r,i){t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.parent&&n.parent.appendChild(n.el),e(i).removeData("blockUI.history")),typeof r.onUnblock=="function"&&r.onUnblock(i,r)}function l(t,n,r){var i=n==window,o=e(n);if(!t&&(i&&!s||!i&&!o.data("blockUI.isBlocked")))return;i||o.data("blockUI.isBlocked",t);if(!r.bindEvents||t&&!r.showOverlay)return;var u="mousedown mouseup keydown keypress";t?e(document).bind(u,r,c):e(document).unbind(u,c)}function c(t){if(t.keyCode&&t.keyCode==9&&s&&t.data.constrainTabKey){var n=o,r=!t.shiftKey&&t.target===n[n.length-1],i=t.shiftKey&&t.target===n[0];if(r||i)return setTimeout(function(){h(i)},10),!1}var u=t.data;return e(t.target).parents("div."+u.blockMsgClass).length>0?!0:e(t.target).parents().children().filter("div.blockUI").length==0}function h(e){if(!o)return;var t=o[e===!0?o.length-1:0];t&&t.focus()}function p(e,t,n){var r=e.parentNode,i=e.style,s=(r.offsetWidth-e.offsetWidth)/2-d(r,"borderLeftWidth"),o=(r.offsetHeight-e.offsetHeight)/2-d(r,"borderTopWidth");t&&(i.left=s>0?s+"px":"0"),n&&(i.top=o>0?o+"px":"0")}function d(t,n){return parseInt(e.css(t,n))||0}if(/1\.(0|1|2)\.(0|1|2)/.test(e.fn.jquery)||/^1.1/.test(e.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+e.fn.jquery);return}e.fn._fadeIn=e.fn.fadeIn;var t=function(){},n=document.documentMode||0,r=e.browser.msie&&(e.browser.version<8&&!n||n<8),i=e.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!n;e.blockUI=function(e){u(window,e)},e.unblockUI=function(e){a(window,e)},e.growlUI=function(t,n,r,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),n&&s.append("<h2>"+n+"</h2>"),r==undefined&&(r=3e3),e.blockUI({message:s,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})},e.fn.block=function(t){return this.unblock({fadeOut:0}).each(function(){e.css(this,"position")=="static"&&(this.style.position="relative"),e.browser.msie&&(this.style.zoom=1),u(this,t)})},e.fn.unblock=function(e){return this.each(function(){a(this,e)})},e.blockUI.version=2.35,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"default"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"default"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var s=null,o=[]}(jQuery),define("blockUI",function(){}),define("utils/ModelBox",["underscore","text!templates/public/alert.html","text!templates/public/confirm.html","text!templates/public/block.html","i18n!nls/gameI18N","blockUI"],function(e,t,n,r,i){var s={toast:function(e){$.blockUI({message:e,timeout:2e3})},block:function(t){t.message=t.message||i.GameCommon.loadingData,t.width=200,t.height=150,t.message=e.template(r,{message:t.message});var n=this._getCss(t);$.blockUI({message:t.message,css:n})},unblock:function(){$.unblockUI()},alert:function(n,r){var s=this,o={title:i.Product.CreateProduct.tips,width:256,height:156};e.extend(o,n),o.GameCommon=i.GameCommon;var u=e.template(t,o),a=s._getCss(o);$.blockUI({css:a,message:u,onBlock:function(){$(this).find(".Confirm").bind("click",function(){s.unblock(),$.isFunction(r)&&r()})}})},confirm:function(t){var r=this,t=t||{},s={message:e.template(n,{i18n:i})};t=e.extend(s,t);var o=(new Date).getTime();$("body").append('<div id="'+o+'" style="display:none;"></div>');var u=$("#"+o).html(t.message),a=$(window).height(),f=$(document).width(),l=u.width(),c=u.height(),h=f/2-l/2,p=a/2-c/2;$(".blockUI .blockMsg .blockPage").undelegate(),$.blockUI({css:{border:"0",background:"none",width:l,left:h,top:p},baseZ:1e5,message:t.message,focusInput:!1,onBlock:function(){var n=this;e.each(t.buttons,function(t){for(selector in t){var n=t[selector],r="click",i=n;e.isFunction(n)||(r=n.event,i=n.callback),$(".blockPage").delegate(selector,r,i)}}),$(this).find(".Cancel").bind("click",function(){r.unblock()})}}),$("#"+o).remove()},_getCss:function(e){var t=$(window).height(),n=$(document).width(),r=e.width,i=e.height,s=n/2-r/2,o=t/2-i/2,u={border:"0",background:"none",width:r,left:s,top:o};return u}};return s}),define("models/analysisTools/ChartRemark",["models/BaseModel"],function(e){var t=[{name:"saveRemark",url:"/v1/chartRemark/saveRemark"},{name:"deleteRemark",url:"/v1/chartRemark/deleteRemark"},{name:"queryRemark",url:"/v1/chartRemark/queryRemark",type:"get"},{name:"fetchRemarkList",url:"/v1/chartRemark/fetchRemarkList",type:"get"},{name:"queryRemarkByDatePid",url:"/v1/chartRemark/queryRemarkByDatePid",type:"get"},{name:"queryRemarkListByParameter",url:"/v1/chartRemark/queryRemarkListByParameter"}];return e.init(t)}),define("text!templates/analysisTools/remarkPop.html",[],function(){return'{{#list}}\r\n<div>\r\n	<font style="color:#1F96AC" id="_remarkTitle">{{remarkTitle}}</font>\r\n	<a dataid="{{id}}" style="float:right;padding-right:10px;color:#1F96AC" role="remarkUpdate" href="javascript:void(0)">{{AnalysisTools.ChartRemark.edit}}</a>\r\n	<a dataid="{{id}}" style="float:right;padding-right:10px;color:#1F96AC" role="remarkDelete" href="javascript:void(0)">{{AnalysisTools.ChartRemark.delete}}</a>\r\n	<br>\r\n		{{AnalysisTools.ChartRemark.remarkDate}}:{{remarkDate}}\r\n	<p style="border-bottom:1px solid #ddd;text-align: left;">\r\n		{{AnalysisTools.ChartRemark.remarkContent}}:{{remarkContent}}\r\n	</p>\r\n</div>\r\n{{/list}}'}),define("text!templates/analysisTools/editRemark.html",[],function(){return' <div class="EditPop_top timetop">\r\n     <b class="l"><%=AnalysisTools.ChartRemark.editRemark%></b>\r\n </div>\r\n <div class="Poptxt">\r\n     <ul id="levelStep" class="EditPop ChartNotes_Pop">\r\n<li>\r\n	<label><%=AnalysisTools.ChartRemark.remarkDate%></label>\r\n	<input type="text" class="Timeinput" style="width:92px;" id="remarkDate" value="<%=remarkDate%>" readonly="readonly">\r\n	<input type="hidden" id="remarkId" value="<%=id%>" />\r\n</li>\r\n<li>\r\n	<label><%=AnalysisTools.ChartRemark.remarkTitle%></label>\r\n	<input class="textinput" type="text" id="remarkTitle" value="<%=remarkTitle%>">\r\n</li> 	\r\n<li class="textarea">\r\n	<label><%=AnalysisTools.ChartRemark.remarkContent%></label>\r\n	<textarea id="remarkContent" ><%=remarkContent%></textarea>\r\n	\r\n</li> 	 	\r\n</ul>\r\n     <div class="opeDiv after product_opeDiv">\r\n         <a id="remarkSaveBtn" class="timecolse r Confirm"><%=AnalysisTools.ChartRemark.saveAndClose%></a>\r\n         <a id="remarkCancelBtn" class="r Cancel"><%=AnalysisTools.ChartRemark.cancel%></a>\r\n     </div>\r\n </div>\r\n'}),define("text!templates/analysisTools/chartBottomRemarkDiv.html",[],function(){return'<dl class="after">\r\n	<dt class="l">\r\n		<a class="Cancel l" id="add"><font>添加</font></a>\r\n	</dt>\r\n	<dd class="l" id="listRemark">\r\n		{{#list}}\r\n		<p>\r\n			<b>{{remarkDate}}</b>\r\n			<strong title="{{remarkTitle}}">{{remarkTitle}}</strong>\r\n			<font title="{{remarkContent}}">{{remarkContent}}</font>\r\n			<span class="r">\r\n				<a id="edit" data-id="{{id}}">{{AnalysisTools.ChartRemark.edit}}</a>\r\n				<a id="delete" data-id="{{id}}">{{AnalysisTools.ChartRemark.delete}}</a>\r\n			</span>\r\n		</p>\r\n		{{/list}}\r\n		{{^list}}\r\n			<p>{{GameCommon.noData}}</p>\r\n		{{/list}}\r\n	</dd>\r\n</dl>			'}),define("utils/remarkUtil",["mustache","utils/ModelBox","models/analysisTools/ChartRemark","text!templates/analysisTools/remarkPop.html","text!templates/analysisTools/editRemark.html","text!templates/analysisTools/chartBottomRemarkDiv.html","i18n!nls/gameI18N","jquery.datepicker"],function(e,t,n,r,i,s,o){return{popRemark:function(t){var s={remarkDate:t.remarkDate||0,productid:Params.productID},u=this;n.queryRemarkByDatePid({data:s,success:function(s){var a="";s&&(a=e.render(r,{list:_.each(s,function(e){e.remarkDate=u.yymmdd2yyyy(e.remarkDate||0)}),AnalysisTools:o.AnalysisTools}));var f=t.name||"";f.indexOf("^")!=-1&&(f=f.split("^")[0]),hs.htmlExpand(null,{pageOrigin:{x:t.x||0,y:t.y||0},dimmingOpacity:.3,headingText:f,maincontentText:a,width:200}),$(".highslide-maincontent").delegate("a[role='remarkUpdate']","click",function(){var e=$(this).attr("dataid")||0;n.queryRemark({data:"id="+e,success:function(e){e&&(e.remarkDate=u.yymmdd2yyyy(e.remarkDate),e.AnalysisTools=o.AnalysisTools,u.popRemarkDiv(_.template(i,e),t))}})}),$(".highslide-maincontent").delegate("a[role='remarkDelete']","click",function(){var e=$(this),r=e.attr("dataid")||0;n.deleteRemark({data:{id:r,productid:Params.productID},success:function(r){r==1&&(e.parent().remove(),hs.close(),u.popRemark(t),n.fetchRemarkList({type:"get",data:{productid:Params.productID},success:function(e){CurrentRemarkDates=_.pluck(e,"remarkDate")}}))}})})}})},synchronizeRemarkDates:function(){var e=this;n.fetchRemarkList({type:"get",data:{productid:Params.productID},success:function(e){CurrentRemarkDates=_.pluck(e,"remarkDate")}})},popRemarkDiv:function(e,n,r){var i=this;t.confirm({message:e,buttons:[{"#remarkDate":function(e){$("#remarkDate").focus(),$("#remarkDate").datepicker({dateFormat:"yy-mm-dd"})},"#remarkSaveBtn":function(){i.saveNewRemark(n,r)}}]})},saveNewRemark:function(e,r){var i=this,s=i.paramterData();s&&n.saveRemark({data:s,success:function(n){if(!n){alert(o.AnalysisTools.ChartRemark.saveFail);return}e&&(e.remarkDate?(hs.close(),i.popRemark(e)):i.queryRemarkList(e)),i.synchronizeRemarkDates(),t.unblock(),r&&r()}})},paramterData:function(){var e=this,t=$("#remarkId").val()||0,n=parseInt(e.formatDate($("#remarkDate").val()||0));if(n==0){alert(o.AnalysisTools.ChartRemark.dateNotBlank);return}var r=$("#remarkTitle").val()||"";if(r==""){alert(o.AnalysisTools.ChartRemark.titleNotBlank);return}if(this.getStringLen(r)>100){alert(o.AnalysisTools.ChartRemark.titleMore50);return}var i=$("#remarkContent").val()||"";if(i==""){alert(o.AnalysisTools.ChartRemark.contentNotBlank);return}if(this.getStringLen(i)>400){alert(o.AnalysisTools.ChartRemark.contentMore100);return}var s={id:t,developerid:DeveloperBean.developerID,productid:Params.productID,remarkDate:n,remarkTitle:r,remarkContent:i};return s},getStringLen:function(e){var t,n;n=0;for(t=0;t<e.length;t++)e.charCodeAt(t)>=0&&e.charCodeAt(t)<=255?n+=1:n+=2;return n},queryRemarkList:function(t){var r=this;n.queryRemarkListByParameter({data:Params,success:function(n){n&&_.each(n,function(e){e.remarkDate=r.yymmdd2yyyy(e.remarkDate)});var i={list:n,AnalysisTools:o.AnalysisTools};t.html(e.render(s,i))}})},queryRemarkById:function(e,t){var r=this;n.queryRemark({data:"id="+t,success:function(t){t&&(t.remarkDate=r.yymmdd2yyyy(t.remarkDate),t.AnalysisTools=o.AnalysisTools,r.popRemarkDiv(_.template(i,t),e))}})},deleteRemarkById:function(e,t){var r=this,i=$(e.currentTarget).attr("data-id");n.deleteRemark({data:{id:i,productid:Params.productID},success:function(n){n==1&&($(e.currentTarget).parent().parent().remove(),r.synchronizeRemarkDates(),t&&t())}})},formatDate:function(e){return(""+e).replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3")},yymmdd2yyyy:function(e){return(""+e).replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")}}}),define("utils/UnitMappingUtil",["i18n!nls/gameI18N"],function(e){return{getDeviceItem:function(){return"device"},getAccountItem:function(){return"account"},getAccountNumItem:function(){return"accountnum"},getMoneyItem:function(){return"money"},getTimeItem:function(){return"time"},getSecondItem:function(){return"senTime"},getTimesItem:function(){return"times"},getPercentItem:function(){return"percent"},getUnitByItem:function(t){if(t=="")return"";var n={device:"deviceUnit",account:"accountUnit",money:"moneyUnit",time:"timeUnit",times:"timesUnit",percent:"percentUnit",accountnum:"accountnumUnit",senTime:"senTimeUnit"};return t=="money"?"<small class='"+Params.displayCurrency+"'></small>":e.GameCommon[n[t]]||""}}}),define("text!templates/public/tooltipValue.html",[],function(){return'<div style="border-radius: 4px; width: 190px; background: #3f4345; display: block; overflow: hidden; padding: 1px 8px; margin: 6px 5px">\r\n	<div style="float: left">\r\n		<font style="float:left;padding-right:5px;"><%=name%></font>\r\n		<font style="width:12px;height:8px;display:<%=columnDisplay%>;margin-top:6px;float:left;background:<%=tooltipColor%>;border:2px solid <%=tooltipColor%>;border-radius:2px;"></font>\r\n		<font style="width:12px;display:<%=lineDisplay%>;margin-top:10px;float:left;border:2px solid <%=tooltipColor%>;border-radius:2px;"></font>\r\n		<font style="width:12px;height:8px;display:<%=areaDisplay%>;margin-top:6px;float:left;border:2px solid <%=tooltipColor%>;border-radius:2px;"></font>\r\n	</div>\r\n	<div style="float: right;">\r\n		<%=value%>&nbsp;&nbsp;&nbsp;&nbsp;\r\n	</div>\r\n</div>'}),function(e){e.fn.extend({actual:function(t,n){if(!this[t])throw'$.actual => The jQuery method "'+t+'" you called does not exist';var r={absolute:!1,clone:!1,includeMargin:!1},i=e.extend(r,n),s=this.eq(0),o,u;if(i.clone===!0)o=function(){var e="position: absolute !important; top: -1000 !important; ";s=s.clone().attr("style",e).appendTo("body")},u=function(){s.remove()};else{var a=[],f="",l;o=function(){e.fn.jquery>="1.8.0"?l=s.parents().addBack().filter(":hidden"):l=s.parents().andSelf().filter(":hidden"),f+="visibility: hidden !important; display: block !important; ",i.absolute===!0&&(f+="position: absolute !important; "),l.each(function(){var t=e(this);a.push(t.attr("style")),t.attr("style",f)})},u=function(){l.each(function(t){var n=e(this),r=a[t];r===undefined?n.removeAttr("style"):n.attr("style",r)})}}o();var c=/(outer)/g.test(t)?s[t](i.includeMargin):s[t]();return u(),c}})}(jQuery),define("jquery.actual",function(){}),define("utils/HighchartUtil",["highcharts","underscore","utils/PaginationUtil","utils/levelUtil","utils/remarkUtil","utils/UnitMappingUtil","models/analysisTools/ChartRemark","text!templates/public/tooltipValue.html","i18n!nls/gameI18N","jquery.actual"],function(e,t,n,r,i,s,o,u,a){var f=/^1\d([01]\d)([0123][0-9])\d{0,2}$/,l=/\d{2}(\d{2})(\d{2})~\d{2}(\d{2})(\d{2})/,c=/^(1\d)([01]\d)([0123][0-9])$/,h=/(\d{2})(\d{2})(\d{2})~(\d{2})(\d{2})(\d{2})/;e.theme={colors:["#6DC5FD","#72CB68","#F7941D","#45C09D","#BD77DE","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],chart:{backgroundColor:"#fff"},credits:{enabled:!1},title:{style:{fontSize:"12px",fontWeight:"bold"}},xAxis:{offset:1,labels:{style:{color:"#444"}},lineColor:"#DCDCDC",tickColor:"#BEBEBE",tickWidth:1},yAxis:{gridLineColor:"#cccccc",gridLineDashStyle:"Dash",gridLineWidth:1,labels:{style:{color:"#444"}},lineColor:"#DCDCDC",tickColor:"#BEBEBE",tickWidth:1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.65)",borderColor:"rgba(0, 0, 0, 0.25)",style:{padding:"5px",color:"#F0F0F0",lineHeight:"24px"},useHTML:!0,formatter:function(){var e=this.series.name,t="";if(e){var n=e.split("^");n.length==2&&(e=n[0],t=n[1],t.indexOf("#")!=-1?(t=t.substring(1),this.y=t+this.y):this.y=this.y+t)}return l.test(this.x)?this.x=this.x.replace(l,"$1/$2~$3/$4"):f.test(this.x)&&(this.x=this.x.replace(f,"$1/$2")),"<b>"+e+"</b><br/>"+this.x+" : "+this.y}},plotOptions:{series:{cursor:"pointer",point:{events:{click:function(){if(f.test(this.category)&&t.indexOf(CurrentRemarkDates,parseInt(this.category))!=-1){var e={remarkDate:this.category,name:this.series.name,x:this.pageX,y:this.pageY};i.popRemark(e)}}}}},area:{fillOpacity:.1,dataLabels:{shadow:!1},cursor:"pointer",marker:{symbol:"circle",radius:2,fillColor:"#FFFFFF",lineWidth:2,lineColor:null}},bar:{borderColor:"rgba(0,0,0,0.2)",fillOpacity:.2,marker:{enabled:!1}}},legend:{align:"right",reversed:!0,floating:!0,borderWidth:0,verticalAlign:"top",x:0,y:0}},e.setOptions(e.theme);var p={regex:{day:/^1\d([01]\d)([0123][0-9])\d{0,2}$/,week:/\d{2}(\d{2})(\d{2})~\d{2}(\d{2})(\d{2})/},isDay:function(e){return this.regex.day.test(e)},isWeek:function(e){return this.regex.week.test(e)},xUnitWidth:function(e){var t=-1;if(e&&e.x&&e.x.length){var n=e.x[0];if(this.isDay(n))return 55;if(this.isWeek(n))return 125}return t},getInterval:function(e){var t=-1,n=this.xUnitWidth(e);if(n!=-1){var r=$("#"+e.id).width(),i=r/n,s=e.x.length;return Math.ceil(s/i)}return t}};return{chart:function(e){var n=this;e.param=e.param||Params;if(e.level){var i=r.split(e.level.data),s=t.pluck(i,"item"),u=t.pluck(i,"value"),a=[{name:e.level.name,data:u}];e.x=s,e.series=a}if(!e.xType||e.xType!="date")return this._renderChart(e);if(!!CurrentRemarkDates)return this._markSeries(e),this._renderChart(e);o.fetchRemarkList({data:"productid="+Params.productID,success:function(r){return CurrentRemarkDates=t.pluck(r,"remarkDate"),n._markSeries(e),n._renderChart(e)}})},_renderChart:function(n){var r=this;return new e.Chart({colors:n.colors||e.theme.colors,chart:{renderTo:n.id,type:n.type||"area"},title:{text:n.title||""},xAxis:{gridLineColor:"#cccccc",gridLineDashStyle:"Dash",gridLineWidth:1,categories:n.x,tickInterval:function(){var e=$("#"+n.id).actual("width"),t=e/60,r=n.x.length,i=Math.ceil(r/t);return i}(),tickmarkPlacement:"on",labels:{rotation:n.rotation||0,align:n.align||"center",formatter:function(){return l.test(this.value)?this.value.replace(l,"$1/$2~$3/$4"):f.test(this.value)?this.value.replace(f,"$1/$2"):this.value}}},yAxis:[{title:{text:""},labels:{useHTML:!0,formatter:function(){return n.yLeftUnit&&(n.yLeftUnit=="money"?this.value=s.getUnitByItem(n.yLeftUnit)+this.value:this.value=this.value+s.getUnitByItem(n.yLeftUnit)),this.value}},min:0,max:n.max||null},{title:{text:""},labels:{formatter:function(){return n.yRightUnit&&(n.yRightUnit=="money"?this.value=s.getUnitByItem(n.yRightUnit)+this.value:this.value=this.value+s.getUnitByItem(n.yRightUnit)),this.value}},opposite:!0}],legend:{enabled:!!n.legend,labelFormatter:function(){var e=this.name;return this.name&&(e=this.name.split("^")[0]),e}},plotOptions:{area:{fillOpacity:n.opacity||.1},series:{stacking:n.stacking}},tooltip:{shared:n.level?!1:!0,useHTML:!0,formatter:function(){if(n.level){var i="";n.param.endTime==n.param.startTime?(i=n.param.startTime.replace(c,"20$1-$2-$3"),i=i+" "+r.getWeekDay(i)):i=n.param.startTime.replace(c,"20$1-$2-$3")+"~"+n.param.endTime.replace(c,"20$1-$2-$3");var o='<span style="padding-left: 5px;">'+i+"</span>",p="";n.unitItem&&n.unitItem[0]&&(p=n.unitItem[0]+""),p&&(p=="money"?this.y=s.getUnitByItem(p)+this.y:this.y=this.y+s.getUnitByItem(p));var d={name:this.series.name,areaDisplay:"none",columnDisplay:"block",lineDisplay:"none",tooltipColor:"#6DC5FD",value:this.y};return o+=t.template(u,d),o}l.test(this.x)?this.x=this.x.replace(h,"20$1-$2-$3 ~ 20$4-$5-$6"):f.test(this.x)&&(this.x=this.x.replace(c,"20$1-$2-$3"),this.x=this.x+" "+r.getWeekDay(this.x));var o='<span style="padding-left: 5px;">'+this.x+"</span>",v=0;n.hasTotal&&$.each(this.points,function(e,t){v+=this.y}),$.each(this.points,function(r,i){var a=e.theme.colors[r];n.colors&&n.colors[r]&&(a=n.colors[r]);var f="";n.unitItem&&n.unitItem[r]&&(f=n.unitItem[r]+""),f&&(f=="money"?this.y=s.getUnitByItem(f)+this.y:this.y=this.y+s.getUnitByItem(f));var l=i.series.type||"area",c={name:i.series.name,areaDisplay:l=="area"?"block":"none",columnDisplay:l=="column"?"block":"none",lineDisplay:l=="line"?"block":"none",tooltipColor:a,value:this.y};o+=t.template(u,c)});if(n.hasTotal){var p="";n.unitItem&&n.unitItem[0]&&(p=n.unitItem[0]+""),p&&(p=="money"?v=s.getUnitByItem(p)+v:v+=s.getUnitByItem(p));var m={name:a.GameCommon.total,areaDisplay:"block",columnDisplay:"none",lineDisplay:"none",tooltipColor:"#F7941D",value:v};o+=t.template(u,m)}return o}},series:n.series})},_markSeries:function(e){CurrentRemarkDates&&t.each(e.x,function(n,r){f.test(n)&&t.indexOf(CurrentRemarkDates,parseInt(n))!=-1&&t.each(e.series,function(e){e.data[r]={y:e.data[r],marker:{symbol:"square",radius:4}}})})},chartBar:function(e){var r=e.series,i=[];e.x&&e.x.left&&i.push({categories:e.x.left,title:{text:null}}),e.x&&e.x.right&&(i.push({categories:e.x.right,title:{text:null},opposite:!0}),r[0].xAxis=0,r.push({name:r[0].name,xAxis:1,data:r[0].data,type:"scatter",dataLabels:{enabled:!1}})),e.x=i;var s=null;if(e.pagination){$("#"+e.id).html('<div id="'+e.id+'_wrapper"></div>');var o=10,u=e.x[0].categories.length,a=Math.ceil(u/o),f=this;new n({totalPage:a,$el:$("#"+e.id),onPageClick:function(n){var r=(n-1)*o,i=r+o>u?u:r+o,a=t.cloneDeep(e);t.each(a.x,function(e){t.map(e,function(t,n){return n==="categories"&&(t=t.slice(r,i),e[n]=t),e})}),t.each(a.series,function(e){t.map(e,function(t,n){return n==="data"&&(t=t.slice(r,i),e[n]=t),e})}),a.id=a.id+"_wrapper",s=f._chartBar(a)},onInit:function(){s=this.onPageClick(1)}})}else s=this._chartBar(e);return s},_chartBar:function(e){var n=this;if(!e.xType||e.xType!="date")return this._renderChartBar(e);if(!!CurrentRemarkDates)return this._markSeries(e),this._renderChartBar(e);o.fetchRemarkList({data:"productid="+Params.productID,asyn:!1,success:function(r){return CurrentRemarkDates=t.pluck(r,"remarkDate"),n._markSeries(e),n._renderChartBar(e)}})},_renderChartBar:function(n){var r=this;return n.param=n.param||Params,new e.Chart({chart:{renderTo:n.id,type:"bar"},title:{text:n.title||""},xAxis:n.x,yAxis:{min:0,title:{text:""},labels:{overflow:"justify",formatter:function(){var e=this.value;return n.yPercent&&(e=this.value+"%"),e}}},plotOptions:{bar:{pointWidth:15,dataLabels:{enabled:!1,formatter:function(){return""+this.y}}},scatter:{marker:{enabled:!1}}},legend:{enabled:!1},tooltip:{formatter:function(){var e="";n.param.endTime==n.param.startTime?(e=n.param.startTime.replace(c,"20$1-$2-$3"),e=e+" "+r.getWeekDay(e)):e=n.param.startTime.replace(c,"20$1-$2-$3")+"~"+n.param.endTime.replace(c,"20$1-$2-$3");var i='<span style="padding-left: 5px;">'+e+"</span>",o="";n.unitItem&&n.unitItem[0]&&(o=n.unitItem[0]+""),o&&(o=="money"?this.y=s.getUnitByItem(o)+this.y:this.y=this.y+s.getUnitByItem(o));var a={name:this.series.name,areaDisplay:"none",columnDisplay:"block",lineDisplay:"none",tooltipColor:"#6DC5FD",value:this.y};return i+=t.template(u,a),i}},series:n.series})},getWeekDay:function(e){var t=(new Date(e)).getDay();return t==0?t=a.GameCommon.sunday:t==1?t=a.GameCommon.monday:t==2?t=a.GameCommon.tuesday:t==3?t=a.GameCommon.wednesday:t==4?t=a.GameCommon.thursday:t==5?t=a.GameCommon.friday:t==6&&(t=a.GameCommon.saturday),t},chartPie:function(t){return new e.Chart({chart:{renderTo:t.id,width:function(){var e=$("#"+t.id).actual("width");return e}(),plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage}%</b>",percentageDecimals:1,formatter:function(){return this.series.name+"<br/><b>"+this.point.name+"</b>:"+this.y+"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.y+" %"}}}},series:t.series})}}}),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v={}.hasOwnProperty,m=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};(function(){var e,t,n,r,i,s,o;i=["ms","moz","webkit","o"];for(s=0,o=i.length;s<o;s++){r=i[s];if(window.requestAnimationFrame)break;window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}e=null,n=0,t={};if(!requestAnimationFrame)return window.requestAnimationFrame=function(e,t){var n,r,i,s;return n=(new Date).getTime(),s=Math.max(0,16-(n-i)),r=window.setTimeout(function(){return e(n+s)},s),i=n+s,r},window.cancelAnimationFrame=function(e){return clearTimeout(e)};if(!window.cancelAnimationFrame)return e=window.requestAnimationFrame,window.requestAnimationFrame=function(r,i){var s;return s=++n,e(function(){if(!t[s])return r()},i),s},window.cancelAnimationFrame=function(e){return t[e]=!0}})(),String.prototype.hashCode=function(){var e,t,n,r,i;t=0;if(this.length===0)return t;for(n=r=0,i=this.length;0<=i?r<i:r>i;n=0<=i?++r:--r)e=this.charCodeAt(n),t=(t<<5)-t+e,t&=t;return t},p=function(e){var t,n;t=Math.floor(e/3600),n=Math.floor((e-t*3600)/60),e-=t*3600+n*60,e+="",n+="";while(n.length<2)n="0"+n;while(e.length<2)e="0"+e;return t=t?t+":":"",t+n+":"+e},c=function(e){return l(e.toFixed(0))},d=function(e,t){var n,r;for(n in t){if(!v.call(t,n))continue;r=t[n],e[n]=r}return e},h=function(e,t){var n,r,i;r={};for(n in e){if(!v.call(e,n))continue;i=e[n],r[n]=i}for(n in t){if(!v.call(t,n))continue;i=t[n],r[n]=i}return r},l=function(e){var t,n,r,i;e+="",n=e.split("."),r=n[0],i="",n.length>1&&(i="."+n[1]),t=/(\d+)(\d{3})/;while(t.test(r))r=r.replace(t,"$1,$2");return r+i},f=function(){function e(e,t){e==null&&(e=!0),this.clear=t!=null?t:!0,e&&AnimationUpdater.add(this)}return e.prototype.animationSpeed=32,e.prototype.update=function(e){var t;return e==null&&(e=!1),e||this.displayedValue!==this.value?(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),t=this.value-this.displayedValue,Math.abs(t/this.animationSpeed)<=.001?this.displayedValue=this.value:this.displayedValue=this.displayedValue+t/this.animationSpeed,this.render(),!0):!1},e}(),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.setTextField=function(e){return this.textField=e instanceof a?e:new a(e)},t.prototype.setMinValue=function(e,t){var n,r,i,s,o;this.minValue=e,t==null&&(t=!0);if(t){this.displayedValue=this.minValue,s=this.gp||[],o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(n.displayedValue=this.minValue);return o}},t.prototype.setOptions=function(e){return e==null&&(e=null),this.options=h(this.options,e),this.textField&&(this.textField.el.style.fontSize=e.fontSize+"px"),this},t}(f),a=function(){function e(e){this.el=e}return e.prototype.render=function(e){return this.el.innerHTML=c(e.displayedValue)},e}(),e=function(e){function t(e,t){this.elem=e,this.text=t!=null?t:!1,this.value=1*this.elem.innerHTML,this.text&&(this.value=0)}return m(t,e),t.prototype.displayedValue=0,t.prototype.value=0,t.prototype.setVal=function(e){return this.value=1*e},t.prototype.render=function(){var e;return this.text?e=p(this.displayedValue.toFixed(0)):e=l(c(this.displayedValue)),this.elem.innerHTML=e},t}(f),t={create:function(t){var n,r,i,s;r=[];for(i=0,s=t.length;i<s;i++)n=t[i],r.push(new e(n));return r}},u=function(e){function t(e){this.gauge=e,this.ctx=this.gauge.ctx,this.canvas=this.gauge.canvas,t.__super__.constructor.call(this,!1,!1),this.setOptions()}return m(t,e),t.prototype.displayedValue=0,t.prototype.value=0,t.prototype.options={strokeWidth:.035,length:.1,color:"#000000"},t.prototype.setOptions=function(e){return e==null&&(e=null),d(this.options,e),this.length=this.canvas.height*this.options.length,this.strokeWidth=this.canvas.height*this.options.strokeWidth,this.maxValue=this.gauge.maxValue,this.minValue=this.gauge.minValue,this.animationSpeed=this.gauge.animationSpeed,this.options.angle=this.gauge.options.angle},t.prototype.render=function(){var e,t,n,r,i,s,o,u,a;return e=this.gauge.getAngle.call(this,this.displayedValue),t=this.canvas.width/2,n=this.canvas.height*.9,u=Math.round(t+this.length*Math.cos(e)),a=Math.round(n+this.length*Math.sin(e)),s=Math.round(t+this.strokeWidth*Math.cos(e-Math.PI/2)),o=Math.round(n+this.strokeWidth*Math.sin(e-Math.PI/2)),r=Math.round(t+this.strokeWidth*Math.cos(e+Math.PI/2)),i=Math.round(n+this.strokeWidth*Math.sin(e+Math.PI/2)),this.ctx.fillStyle=this.options.color,this.ctx.beginPath(),this.ctx.arc(t,n,this.strokeWidth,0,Math.PI*2,!0),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(s,o),this.ctx.lineTo(u,a),this.ctx.lineTo(r,i),this.ctx.fill()},t}(f),n=function(){function e(e){this.elem=e}return e.prototype.updateValues=function(e){return this.value=e[0],this.maxValue=e[1],this.avgValue=e[2],this.render()},e.prototype.render=function(){var e,t;return this.textField&&this.textField.text(c(this.value)),this.maxValue===0&&(this.maxValue=this.avgValue*2),t=this.value/this.maxValue*100,e=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:t+"%"}),$(".typical-value",this.elem).css({width:e+"%"})},e}(),o=function(e){function t(e){this.canvas=e,t.__super__.constructor.call(this),typeof G_vmlCanvasManager!="undefined"&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.gp=[new u(this)],this.setOptions(),this.render()}return m(t,e),t.prototype.elem=null,t.prototype.value=[20],t.prototype.maxValue=80,t.prototype.minValue=0,t.prototype.displayedAngle=0,t.prototype.displayedValue=0,t.prototype.lineWidth=40,t.prototype.paddingBottom=.1,t.prototype.options={colorStart:"#6fadcf",colorStop:void 0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035},angle:.15,lineWidth:.44,fontSize:40},t.prototype.setOptions=function(e){var n,r,i,s;e==null&&(e=null),t.__super__.setOptions.call(this,e),this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth,this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.render(),s=this.gp;for(r=0,i=s.length;r<i;r++)n=s[r],n.setOptions(this.options.pointer),n.render();return this},t.prototype.set=function(e){var t,n,r,i,s,o;e instanceof Array||(e=[e]);if(e.length>this.gp.length)for(t=r=0,o=e.length-this.gp.length;0<=o?r<o:r>o;t=0<=o?++r:--r)this.gp.push(new u(this));t=0;for(i=0,s=e.length;i<s;i++)n=e[i],n>this.maxValue&&(this.maxValue=this.value*1.1),this.gp[t].value=n,this.gp[t++].setOptions({maxValue:this.maxValue,angle:this.options.angle});return this.value=e[e.length-1],AnimationUpdater.run()},t.prototype.getAngle=function(e){return(1+this.options.angle)*Math.PI+(e-this.minValue)/(this.maxValue-this.minValue)*(1-this.options.angle*2)*Math.PI},t.prototype.render=function(){var e,t,n,r,i,s,o,u,a;i=this.canvas.width/2,r=this.canvas.height*(1-this.paddingBottom),e=this.getAngle(this.displayedValue),this.textField&&this.textField.render(this),this.ctx.lineCap="butt",this.options.customFillStyle!==void 0?t=this.options.customFillStyle(this):this.options.colorStop!==void 0?(t=this.ctx.createRadialGradient(i,r,9,i,r,70),t.addColorStop(0,this.options.colorStart),t.addColorStop(1,this.options.colorStop)):t=this.options.colorStart,this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.arc(i,r,this.radius,(1+this.options.angle)*Math.PI,e,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(i,r,this.radius,e,(2-this.options.angle)*Math.PI,!1),this.ctx.stroke(),u=this.gp,a=[];for(s=0,o=u.length;s<o;s++)n=u[s],a.push(n.update(!0));return a},t}(i),r=function(e){function t(e){this.canvas=e,t.__super__.constructor.call(this),typeof G_vmlCanvasManager!="undefined"&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.setOptions(),this.render()}return m(t,e),t.prototype.lineWidth=15,t.prototype.displayedValue=0,t.prototype.value=33,t.prototype.maxValue=80,t.prototype.minValue=0,t.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35},t.prototype.getAngle=function(e){return(1-this.options.angle)*Math.PI+(e-this.minValue)/(this.maxValue-this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI},t.prototype.setOptions=function(e){return e==null&&(e=null),t.__super__.setOptions.call(this,e),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.canvas.height/2-this.lineWidth/2,this},t.prototype.set=function(e){return this.value=e,this.value>this.maxValue&&(this.maxValue=this.value*1.1),AnimationUpdater.run()},t.prototype.render=function(){var e,t,n,r,i,s;return e=this.getAngle(this.displayedValue),s=this.canvas.width/2,n=this.canvas.height/2,this.textField&&this.textField.render(this),t=this.ctx.createRadialGradient(s,n,39,s,n,70),t.addColorStop(0,this.options.colorStart),t.addColorStop(1,this.options.colorStop),r=this.radius-this.lineWidth/2,i=this.radius+this.lineWidth/2,this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(s,n,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.arc(s,n,this.radius,(1-this.options.angle)*Math.PI,e,!1),this.ctx.stroke()},t}(i),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.strokeGradient=function(e,t,n,r){var i;return i=this.ctx.createRadialGradient(e,t,n,e,t,r),i.addColorStop(0,this.options.shadowColor),i.addColorStop(.12,this.options._orgStrokeColor),i.addColorStop(.88,this.options._orgStrokeColor),i.addColorStop(1,this.options.shadowColor),i},t.prototype.setOptions=function(e){var n,r,i,s;return e==null&&(e=null),t.__super__.setOptions.call(this,e),s=this.canvas.width/2,n=this.canvas.height/2,r=this.radius-this.lineWidth/2,i=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(s,n,r,i),this},t}(r),window.AnimationUpdater={elements:[],animId:null,addAll:function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(AnimationUpdater.elements.push(t));return i},add:function(e){return AnimationUpdater.elements.push(e)},run:function(){var e,t,n,r,i;e=!0,i=AnimationUpdater.elements;for(n=0,r=i.length;n<r;n++)t=i[n],t.update()&&(e=!1);return e?cancelAnimationFrame(AnimationUpdater.animId):AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}},window.Gauge=o,window.Donut=s,window.BaseDonut=r,window.TextRenderer=a}.call(this),define("gauge",function(e){return function(){var t,n;return t||e.Gauge}}(this)),define("utils/GaugeUtil",["gauge"],function(e){return{draw:function(t){var n={lines:22,angle:1e-5,lineWidth:.4,pointer:{length:.9,strokeWidth:.05,color:"#435068"},colorStart:"#4BA04D",colorStop:"#4BA04D",strokeColor:"#8A9EAC",generateGradient:!0},r=document.getElementById(t.id),i=(new e(r)).setOptions(n);return i.maxValue=parseInt(t.maxValue),i.set(parseInt(t.currentValue)<=0?1e-10:parseInt(t.currentValue)),i.animationSpeed=32,i}}}),define("utils/RegexUtil",{email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,num:/^[1-9][0-9]*$/,isNum:function(e){return this.num.test(e)},isEmail:function(e){return this.email.test(e)},formatDigit:function(e){return e+"".replace(/(?=(?:(\d\d\d)+$))/g,",").replace(/^,/,"")},formatMoneyDigit:function(e){e=parseFloat(e).toFixed(2);var t=(e+"").split(".");return t[0].replace(/(?=(?:(\d\d\d)+$))/g,",").replace(/^,/,"")+"."+t[1]},getStringLen:function(e){var t,n;n=0;for(t=0;t<e.length;t++)e.charCodeAt(t)>=0&&e.charCodeAt(t)<=255?n+=1:n+=2;return n}}),define("text!templates/public/table.html",[],function(){return' <table class="table_style1" border="0" cellspacing="0" cellpadding="0" width="100%">\r\n	<thead>\r\n		<tr>\r\n			<%_.each(head,function(o){%>\r\n				<th width="<%=width%>"><%=o%></th>\r\n			<%});%>\r\n		</tr>\r\n	</thead>\r\n	<tbody>\r\n		<%_.each(body,function(o){%>\r\n			<tr>\r\n				<%_.each(o,function(cell,index){\r\n					if(dateIndex != -1 && index == dateIndex){\r\n						var hasMark;\r\n						if(cell.indexOf("~")>0){\r\n							cell = (cell+\'\').replace(/^(1\\d)([01]\\d)([0123][0-9])~(1\\d)([01]\\d)([0123][0-9])$/,\'20$1-$2-$3~20$4-$5-$6\');\r\n						}else{\r\n							if(_.indexOf(CurrentRemarkDates, parseInt(cell))!=-1){\r\n								hasMark = \'hasMark\';\r\n							}else{\r\n								hasMark = \'\';\r\n							}\r\n							cell = (cell+\'\').replace(/^(1\\d)([01]\\d)([0123][0-9])$/,\'20$1-$2-$3\');\r\n						}\r\n					}\r\n					if(typeof cell == "object"){\r\n						cell = cell.y;\r\n					}\r\n				%>\r\n					<td width="<%=width%>" class="<%=hasMark%>" role="<%=hasMark%>" title="<%=cell%>"><%=cell%></td>\r\n				<%});%>\r\n			</tr>\r\n		<%});%>\r\n	</tbody>\r\n</table>'}),function(window,document,undefined){(function(e){typeof define=="function"&&define.amd?define("dataTable",["jquery"],e):jQuery&&!jQuery.fn.dataTable&&e(jQuery)})(function($){var DataTable=function(oInit){function _fnAddColumn(e,t){var n=DataTable.defaults.columns,r=e.aoColumns.length,i=$.extend({},DataTable.models.oColumn,n,{sSortingClass:e.oClasses.sSortable,sSortingClassJUI:e.oClasses.sSortJUI,nTh:t?t:document.createElement("th"),sTitle:n.sTitle?n.sTitle:t?t.innerHTML:"",aDataSort:n.aDataSort?n.aDataSort:[r],mData:n.mData?n.oDefaults:r});e.aoColumns.push(i);if(e.aoPreSearchCols[r]===undefined||e.aoPreSearchCols[r]===null)e.aoPreSearchCols[r]=$.extend({},DataTable.models.oSearch);else{var s=e.aoPreSearchCols[r];s.bRegex===undefined&&(s.bRegex=!0),s.bSmart===undefined&&(s.bSmart=!0),s.bCaseInsensitive===undefined&&(s.bCaseInsensitive=!0)}_fnColumnOptions(e,r,null)}function _fnColumnOptions(e,t,n){var r=e.aoColumns[t];n!==undefined&&n!==null&&(n.mDataProp&&!n.mData&&(n.mData=n.mDataProp),n.sType!==undefined&&(r.sType=n.sType,r._bAutoType=!1),$.extend(r,n),_fnMap(r,n,"sWidth","sWidthOrig"),n.iDataSort!==undefined&&(r.aDataSort=[n.iDataSort]),_fnMap(r,n,"aDataSort"));var i=r.mRender?_fnGetObjectDataFn(r.mRender):null,s=_fnGetObjectDataFn(r.mData);r.fnGetData=function(e,t){var n=s(e,t);return r.mRender&&t&&t!==""?i(n,t,e):n},r.fnSetData=_fnSetObjectDataFn(r.mData),e.oFeatures.bSort||(r.bSortable=!1),!r.bSortable||$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortableNone,r.sSortingClassJUI=""):$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortable,r.sSortingClassJUI=e.oClasses.sSortJUI):$.inArray("asc",r.asSorting)!=-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortableAsc,r.sSortingClassJUI=e.oClasses.sSortJUIAscAllowed):$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)!=-1&&(r.sSortingClass=e.oClasses.sSortableDesc,r.sSortingClassJUI=e.oClasses.sSortJUIDescAllowed)}function _fnAdjustColumnSizing(e){if(e.oFeatures.bAutoWidth===!1)return!1;_fnCalculateColumnWidths(e);for(var t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].nTh.style.width=e.aoColumns[t].sWidth}function _fnVisibleToColumnIndex(e,t){var n=_fnGetColumns(e,"bVisible");return typeof n[t]=="number"?n[t]:null}function _fnColumnIndexToVisible(e,t){var n=_fnGetColumns(e,"bVisible"),r=$.inArray(t,n);return r!==-1?r:null}function _fnVisbleColumns(e){return _fnGetColumns(e,"bVisible").length}function _fnGetColumns(e,t){var n=[];return $.map(e.aoColumns,function(e,r){e[t]&&n.push(r)}),n}function _fnDetectType(e){var t=DataTable.ext.aTypes,n=t.length;for(var r=0;r<n;r++){var i=t[r](e);if(i!==null)return i}return"string"}function _fnReOrderIndex(e,t){var n=t.split(","),r=[];for(var i=0,s=e.aoColumns.length;i<s;i++)for(var o=0;o<s;o++)if(e.aoColumns[i].sName==n[o]){r.push(o);break}return r}function _fnColumnOrdering(e){var t="";for(var n=0,r=e.aoColumns.length;n<r;n++)t+=e.aoColumns[n].sName+",";return t.length==r?"":t.slice(0,-1)}function _fnApplyColumnDefs(e,t,n,r){var i,s,o,u,a,f;if(t)for(i=t.length-1;i>=0;i--){var l=t[i].aTargets;$.isArray(l)||_fnLog(e,1,"aTargets must be an array of targets, not a "+typeof l);for(o=0,u=l.length;o<u;o++)if(typeof l[o]=="number"&&l[o]>=0){while(e.aoColumns.length<=l[o])_fnAddColumn(e);r(l[o],t[i])}else if(typeof l[o]=="number"&&l[o]<0)r(e.aoColumns.length+l[o],t[i]);else if(typeof l[o]=="string")for(a=0,f=e.aoColumns.length;a<f;a++)(l[o]=="_all"||$(e.aoColumns[a].nTh).hasClass(l[o]))&&r(a,t[i])}if(n)for(i=0,s=n.length;i<s;i++)r(i,n[i])}function _fnAddData(e,t){var n,r=$.isArray(t)?t.slice():$.extend(!0,{},t),i=e.aoData.length,s=$.extend(!0,{},DataTable.models.oRow);s._aData=r,e.aoData.push(s);var o,u;for(var a=0,f=e.aoColumns.length;a<f;a++){n=e.aoColumns[a],typeof n.fnRender=="function"&&n.bUseRendered&&n.mData!==null?_fnSetCellData(e,i,a,_fnRender(e,i,a)):_fnSetCellData(e,i,a,_fnGetCellData(e,i,a));if(n._bAutoType&&n.sType!="string"){var l=_fnGetCellData(e,i,a,"type");l!==null&&l!==""&&(u=_fnDetectType(l),n.sType===null?n.sType=u:n.sType!=u&&n.sType!="html"&&(n.sType="string"))}}return e.aiDisplayMaster.push(i),e.oFeatures.bDeferRender||_fnCreateTr(e,i),i}function _fnGatherData(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;if(e.bDeferLoading||e.sAjaxSource===null){l=e.nTBody.firstChild;while(l){if(l.nodeName.toUpperCase()=="TR"){h=e.aoData.length,l._DT_RowIndex=h,e.aoData.push($.extend(!0,{},DataTable.models.oRow,{nTr:l})),e.aiDisplayMaster.push(h),f=l.firstChild,o=0;while(f){g=f.nodeName.toUpperCase();if(g=="TD"||g=="TH")_fnSetCellData(e,h,o,$.trim(f.innerHTML)),o++;f=f.nextSibling}}l=l.nextSibling}}a=_fnGetTrNodes(e),u=[];for(n=0,r=a.length;n<r;n++){f=a[n].firstChild;while(f)g=f.nodeName.toUpperCase(),(g=="TD"||g=="TH")&&u.push(f),f=f.nextSibling}for(v=0,m=e.aoColumns.length;v<m;v++){y=e.aoColumns[v],y.sTitle===null&&(y.sTitle=y.nTh.innerHTML);var w=y._bAutoType,E=typeof y.fnRender=="function",S=y.sClass!==null,x=y.bVisible,T,N,C,k;if(w||E||S||!x)for(p=0,d=e.aoData.length;p<d;p++)b=e.aoData[p],T=u[p*m+v],w&&y.sType!="string"&&(k=_fnGetCellData(e,p,v,"type"),k!==""&&(N=_fnDetectType(k),y.sType===null?y.sType=N:y.sType!=N&&y.sType!="html"&&(y.sType="string"))),y.mRender?T.innerHTML=_fnGetCellData(e,p,v,"display"):y.mData!==v&&(T.innerHTML=_fnGetCellData(e,p,v,"display")),E&&(C=_fnRender(e,p,v),T.innerHTML=C,y.bUseRendered&&_fnSetCellData(e,p,v,C)),S&&(T.className+=" "+y.sClass),x?b._anHidden[v]=null:(b._anHidden[v]=T,T.parentNode.removeChild(T)),y.fnCreatedCell&&y.fnCreatedCell.call(e.oInstance,T,_fnGetCellData(e,p,v,"display"),b._aData,p,v)}if(e.aoRowCreatedCallback.length!==0)for(n=0,r=e.aoData.length;n<r;n++)b=e.aoData[n],_fnCallbackFire(e,"aoRowCreatedCallback",null,[b.nTr,b._aData,n])}function _fnNodeToDataIndex(e,t){return t._DT_RowIndex!==undefined?t._DT_RowIndex:null}function _fnNodeToColumnIndex(e,t,n){var r=_fnGetTdNodes(e,t);for(var i=0,s=e.aoColumns.length;i<s;i++)if(r[i]===n)return i;return-1}function _fnGetRowData(e,t,n,r){var i=[];for(var s=0,o=r.length;s<o;s++)i.push(_fnGetCellData(e,t,r[s],n));return i}function _fnGetCellData(e,t,n,r){var i,s=e.aoColumns[n],o=e.aoData[t]._aData;if((i=s.fnGetData(o,r))===undefined)return e.iDrawError!=e.iDraw&&s.sDefaultContent===null&&(_fnLog(e,0,"Requested unknown parameter "+(typeof s.mData=="function"?"{mData function}":"'"+s.mData+"'")+" from the data source for row "+t),e.iDrawError=e.iDraw),s.sDefaultContent;if(i===null&&s.sDefaultContent!==null)i=s.sDefaultContent;else if(typeof i=="function")return i();return r=="display"&&i===null?"":i}function _fnSetCellData(e,t,n,r){var i=e.aoColumns[n],s=e.aoData[t]._aData;i.fnSetData(s,r)}function _fnGetObjectDataFn(e){if(e===null)return function(e,t){return null};if(typeof e=="function")return function(t,n,r){return e(t,n,r)};if(typeof e!="string"||e.indexOf(".")===-1&&e.indexOf("[")===-1)return function(t,n){return t[e]};var t=function(e,n,r){var i=r.split("."),s,o,u;if(r!=="")for(var a=0,f=i.length;a<f;a++){s=i[a].match(__reArray);if(s){i[a]=i[a].replace(__reArray,""),i[a]!==""&&(e=e[i[a]]),o=[],i.splice(0,a+1),u=i.join(".");for(var l=0,c=e.length;l<c;l++)o.push(t(e[l],n,u));var h=s[0].substring(1,s[0].length-1);e=h===""?o:o.join(h);break}if(e===null||e[i[a]]===undefined)return undefined;e=e[i[a]]}return e};return function(n,r){return t(n,r,e)}}function _fnSetObjectDataFn(e){if(e===null)return function(e,t){};if(typeof e=="function")return function(t,n){e(t,"set",n)};if(typeof e!="string"||e.indexOf(".")===-1&&e.indexOf("[")===-1)return function(t,n){t[e]=n};var t=function(e,n,r){var i=r.split("."),s,o,u,a;for(var f=0,l=i.length-1;f<l;f++){o=i[f].match(__reArray);if(o){i[f]=i[f].replace(__reArray,""),e[i[f]]=[],s=i.slice(),s.splice(0,f+1),a=s.join(".");for(var c=0,h=n.length;c<h;c++)u={},t(u,n[c],a),e[i[f]].push(u);return}if(e[i[f]]===null||e[i[f]]===undefined)e[i[f]]={};e=e[i[f]]}e[i[i.length-1].replace(__reArray,"")]=n};return function(n,r){return t(n,r,e)}}function _fnGetDataMaster(e){var t=[],n=e.aoData.length;for(var r=0;r<n;r++)t.push(e.aoData[r]._aData);return t}function _fnClearTable(e){e.aoData.splice(0,e.aoData.length),e.aiDisplayMaster.splice(0,e.aiDisplayMaster.length),e.aiDisplay.splice(0,e.aiDisplay.length),_fnCalculateEnd(e)}function _fnDeleteIndex(e,t){var n=-1;for(var r=0,i=e.length;r<i;r++)e[r]==t?n=r:e[r]>t&&e[r]--;n!=-1&&e.splice(n,1)}function _fnRender(e,t,n){var r=e.aoColumns[n];return r.fnRender({iDataRow:t,iDataColumn:n,oSettings:e,aData:e.aoData[t]._aData,mDataProp:r.mData},_fnGetCellData(e,t,n,"display"))}function _fnCreateTr(e,t){var n=e.aoData[t],r;if(n.nTr===null){n.nTr=document.createElement("tr"),n.nTr._DT_RowIndex=t,n._aData.DT_RowId&&(n.nTr.id=n._aData.DT_RowId),n._aData.DT_RowClass&&(n.nTr.className=n._aData.DT_RowClass);for(var i=0,s=e.aoColumns.length;i<s;i++){var o=e.aoColumns[i];r=document.createElement(o.sCellType),r.innerHTML=typeof o.fnRender!="function"||!!o.bUseRendered&&o.mData!==null?_fnGetCellData(e,t,i,"display"):_fnRender(e,t,i),o.sClass!==null&&(r.className=o.sClass),o.bVisible?(n.nTr.appendChild(r),n._anHidden[i]=null):n._anHidden[i]=r,o.fnCreatedCell&&o.fnCreatedCell.call(e.oInstance,r,_fnGetCellData(e,t,i,"display"),n._aData,t,i)}_fnCallbackFire(e,"aoRowCreatedCallback",null,[n.nTr,n._aData,t])}}function _fnBuildHead(e){var t,n,r,i,s,o=$("th, td",e.nTHead).length,u=0,a;if(o!==0)for(t=0,r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,n.setAttribute("role","columnheader"),e.aoColumns[t].bSortable&&(n.setAttribute("tabindex",e.iTabIndex),n.setAttribute("aria-controls",e.sTableId)),e.aoColumns[t].sClass!==null&&$(n).addClass(e.aoColumns[t].sClass),e.aoColumns[t].sTitle!=n.innerHTML&&(n.innerHTML=e.aoColumns[t].sTitle);else{var f=document.createElement("tr");for(t=0,r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,n.innerHTML=e.aoColumns[t].sTitle,n.setAttribute("tabindex","0"),e.aoColumns[t].sClass!==null&&$(n).addClass(e.aoColumns[t].sClass),f.appendChild(n);$(e.nTHead).html("")[0].appendChild(f),_fnDetectHeader(e.aoHeader,e.nTHead)}$(e.nTHead).children("tr").attr("role","row");if(e.bJUI)for(t=0,r=e.aoColumns.length;t<r;t++){n=e.aoColumns[t].nTh;var l=document.createElement("div");l.className=e.oClasses.sSortJUIWrapper,$(n).contents().appendTo(l);var c=document.createElement("span");c.className=e.oClasses.sSortIcon,l.appendChild(c),n.appendChild(l)}if(e.oFeatures.bSort)for(t=0;t<e.aoColumns.length;t++)e.aoColumns[t].bSortable!==!1?_fnSortAttachListener(e,e.aoColumns[t].nTh,t):$(e.aoColumns[t].nTh).addClass(e.oClasses.sSortableNone);e.oClasses.sFooterTH!==""&&$(e.nTFoot).children("tr").children("th").addClass(e.oClasses.sFooterTH);if(e.nTFoot!==null){var h=_fnGetUniqueThs(e,null,e.aoFooter);for(t=0,r=e.aoColumns.length;t<r;t++)h[t]&&(e.aoColumns[t].nTf=h[t],e.aoColumns[t].sClass&&$(h[t]).addClass(e.aoColumns[t].sClass))}}function _fnDrawHead(e,t,n){var r,i,s,o,u,a,f,l,c=[],h=[],p=e.aoColumns.length,d,v;n===undefined&&(n=!1);for(r=0,i=t.length;r<i;r++){c[r]=t[r].slice(),c[r].nTr=t[r].nTr;for(s=p-1;s>=0;s--)!e.aoColumns[s].bVisible&&!n&&c[r].splice(s,1);h.push([])}for(r=0,i=c.length;r<i;r++){l=c[r].nTr;if(l)while(f=l.firstChild)l.removeChild(f);for(s=0,o=c[r].length;s<o;s++){d=1,v=1;if(h[r][s]===undefined){l.appendChild(c[r][s].cell),h[r][s]=1;while(c[r+d]!==undefined&&c[r][s].cell==c[r+d][s].cell)h[r+d][s]=1,d++;while(c[r][s+v]!==undefined&&c[r][s].cell==c[r][s+v].cell){for(u=0;u<d;u++)h[r+u][s+v]=1;v++}c[r][s].cell.rowSpan=d,c[r][s].cell.colSpan=v}}}}function _fnDraw(e){var t=_fnCallbackFire(e,"aoPreDrawCallback","preDraw",[e]);if($.inArray(!1,t)!==-1){_fnProcessingDisplay(e,!1);return}var n,r,i,s=[],o=0,u=e.asStripeClasses.length,a=e.aoOpenRows.length;e.bDrawing=!0,e.iInitDisplayStart!==undefined&&e.iInitDisplayStart!=-1&&(e.oFeatures.bServerSide?e._iDisplayStart=e.iInitDisplayStart:e._iDisplayStart=e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart,e.iInitDisplayStart=-1,_fnCalculateEnd(e));if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++;else if(!e.oFeatures.bServerSide)e.iDraw++;else if(!e.bDestroying&&!_fnAjaxUpdate(e))return;if(e.aiDisplay.length!==0){var f=e._iDisplayStart,l=e._iDisplayEnd;e.oFeatures.bServerSide&&(f=0,l=e.aoData.length);for(var c=f;c<l;c++){var h=e.aoData[e.aiDisplay[c]];h.nTr===null&&_fnCreateTr(e,e.aiDisplay[c]);var p=h.nTr;if(u!==0){var d=e.asStripeClasses[o%u];h._sRowStripe!=d&&($(p).removeClass(h._sRowStripe).addClass(d),h._sRowStripe=d)}_fnCallbackFire(e,"aoRowCallback",null,[p,e.aoData[e.aiDisplay[c]]._aData,o,c]),s.push(p),o++;if(a!==0)for(var v=0;v<a;v++)if(p==e.aoOpenRows[v].nParent){s.push(e.aoOpenRows[v].nTr);break}}}else{s[0]=document.createElement("tr"),e.asStripeClasses[0]&&(s[0].className=e.asStripeClasses[0]);var m=e.oLanguage,g=m.sZeroRecords;e.iDraw==1&&e.sAjaxSource!==null&&!e.oFeatures.bServerSide?g=m.sLoadingRecords:m.sEmptyTable&&e.fnRecordsTotal()===0&&(g=m.sEmptyTable);var y=document.createElement("td");y.setAttribute("valign","top"),y.colSpan=_fnVisbleColumns(e),y.className=e.oClasses.sRowEmpty,y.innerHTML=_fnInfoMacros(e,g),s[o].appendChild(y)}_fnCallbackFire(e,"aoHeaderCallback","header",[$(e.nTHead).children("tr")[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]),_fnCallbackFire(e,"aoFooterCallback","footer",[$(e.nTFoot).children("tr")[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay]);var b=document.createDocumentFragment(),w=document.createDocumentFragment(),E,S;if(e.nTBody){E=e.nTBody.parentNode,w.appendChild(e.nTBody);if(!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered)while(i=e.nTBody.firstChild)e.nTBody.removeChild(i);for(n=0,r=s.length;n<r;n++)b.appendChild(s[n]);e.nTBody.appendChild(b),E!==null&&E.appendChild(e.nTBody)}_fnCallbackFire(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1,e.oFeatures.bServerSide&&(_fnProcessingDisplay(e,!1),e._bInitComplete||_fnInitComplete(e))}function _fnReDraw(e){e.oFeatures.bSort?_fnSort(e,e.oPreviousSearch):e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch):(_fnCalculateEnd(e),_fnDraw(e))}function _fnAddOptionsHtml(e){var t=$("<div></div>")[0];e.nTable.parentNode.insertBefore(t,e.nTable),e.nTableWrapper=$('<div id="'+e.sTableId+'_wrapper" class="'+e.oClasses.sWrapper+'" role="grid"></div>')[0],e.nTableReinsertBefore=e.nTable.nextSibling;var n=e.nTableWrapper,r=e.sDom.split(""),i,s,o,u,a,f,l;for(var c=0;c<r.length;c++){s=0,o=r[c];if(o=="<"){u=$("<div></div>")[0],a=r[c+1];if(a=="'"||a=='"'){f="",l=2;while(r[c+l]!=a)f+=r[c+l],l++;f=="H"?f=e.oClasses.sJUIHeader:f=="F"&&(f=e.oClasses.sJUIFooter);if(f.indexOf(".")!=-1){var h=f.split(".");u.id=h[0].substr(1,h[0].length-1),u.className=h[1]}else f.charAt(0)=="#"?u.id=f.substr(1,f.length-1):u.className=f;c+=l}n.appendChild(u),n=u}else if(o==">")n=n.parentNode;else if(o=="l"&&e.oFeatures.bPaginate&&e.oFeatures.bLengthChange)i=_fnFeatureHtmlLength(e),s=1;else if(o=="f"&&e.oFeatures.bFilter)i=_fnFeatureHtmlFilter(e),s=1;else if(o=="r"&&e.oFeatures.bProcessing)i=_fnFeatureHtmlProcessing(e),s=1;else if(o=="t")i=_fnFeatureHtmlTable(e),s=1;else if(o=="i"&&e.oFeatures.bInfo)i=_fnFeatureHtmlInfo(e),s=1;else if(o=="p"&&e.oFeatures.bPaginate)i=_fnFeatureHtmlPaginate(e),s=1;else if(DataTable.ext.aoFeatures.length!==0){var p=DataTable.ext.aoFeatures;for(var d=0,v=p.length;d<v;d++)if(o==p[d].cFeature){i=p[d].fnInit(e),i&&(s=1);break}}s==1&&i!==null&&(typeof e.aanFeatures[o]!="object"&&(e.aanFeatures[o]=[]),e.aanFeatures[o].push(i),n.appendChild(i))}t.parentNode.replaceChild(e.nTableWrapper,t)}function _fnDetectHeader(e,t){var n=$(t).children("tr"),r,i,s,o,u,a,f,l,c,h,p,d,v=function(e,t,n){var r=e[t];while(r[n])n++;return n};e.splice(0,e.length);for(s=0,a=n.length;s<a;s++)e.push([]);for(s=0,a=n.length;s<a;s++){r=n[s],c=0,i=r.firstChild;while(i){if(i.nodeName.toUpperCase()=="TD"||i.nodeName.toUpperCase()=="TH"){h=i.getAttribute("colspan")*1,p=i.getAttribute("rowspan")*1,h=!h||h===0||h===1?1:h,p=!p||p===0||p===1?1:p,l=v(e,s,c),d=h===1?!0:!1;for(u=0;u<h;u++)for(o=0;o<p;o++)e[s+o][l+u]={cell:i,unique:d},e[s+o].nTr=r}i=i.nextSibling}}}function _fnGetUniqueThs(e,t,n){var r=[];n||(n=e.aoHeader,t&&(n=[],_fnDetectHeader(n,t)));for(var i=0,s=n.length;i<s;i++)for(var o=0,u=n[i].length;o<u;o++)n[i][o].unique&&(!r[o]||!e.bSortCellsTop)&&(r[o]=n[i][o].cell);return r}function _fnAjaxUpdate(e){if(e.bAjaxDataGet){e.iDraw++,_fnProcessingDisplay(e,!0);var t=e.aoColumns.length,n=_fnAjaxParameters(e);return _fnServerParams(e,n),e.fnServerData.call(e.oInstance,e.sAjaxSource,n,function(t){_fnAjaxUpdateDraw(e,t)},e),!1}return!0}function _fnAjaxParameters(e){var t=e.aoColumns.length,n=[],r,i,s,o,u;n.push({name:"sEcho",value:e.iDraw}),n.push({name:"iColumns",value:t}),n.push({name:"sColumns",value:_fnColumnOrdering(e)}),n.push({name:"iDisplayStart",value:e._iDisplayStart}),n.push({name:"iDisplayLength",value:e.oFeatures.bPaginate!==!1?e._iDisplayLength:-1});for(o=0;o<t;o++)r=e.aoColumns[o].mData,n.push({name:"mDataProp_"+o,value:typeof r=="function"?"function":r});if(e.oFeatures.bFilter!==!1){n.push({name:"sSearch",value:e.oPreviousSearch.sSearch}),n.push({name:"bRegex",value:e.oPreviousSearch.bRegex});for(o=0;o<t;o++)n.push({name:"sSearch_"+o,value:e.aoPreSearchCols[o].sSearch}),n.push({name:"bRegex_"+o,value:e.aoPreSearchCols[o].bRegex}),n.push({name:"bSearchable_"+o,value:e.aoColumns[o].bSearchable})}if(e.oFeatures.bSort!==!1){var a=0;i=e.aaSortingFixed!==null?e.aaSortingFixed.concat(e.aaSorting):e.aaSorting.slice();for(o=0;o<i.length;o++){s=e.aoColumns[i[o][0]].aDataSort;for(u=0;u<s.length;u++)n.push({name:"iSortCol_"+a,value:s[u]}),n.push({name:"sSortDir_"+a,value:i[o][1]}),a++}n.push({name:"iSortingCols",value:a});for(o=0;o<t;o++)n.push({name:"bSortable_"+o,value:e.aoColumns[o].bSortable})}return n}function _fnServerParams(e,t){_fnCallbackFire(e,"aoServerParams","serverParams",[t])}function _fnAjaxUpdateDraw(e,t){if(t.sEcho!==undefined){if(t.sEcho*1<e.iDraw)return;e.iDraw=t.sEcho*1}(!e.oScroll.bInfinite||e.oScroll.bInfinite&&(e.bSorted||e.bFiltered))&&_fnClearTable(e),e._iRecordsTotal=parseInt(t.iTotalRecords,10),e._iRecordsDisplay=parseInt(t.iTotalDisplayRecords,10);var n=_fnColumnOrdering(e),r=t.sColumns!==undefined&&n!==""&&t.sColumns!=n,i;r&&(i=_fnReOrderIndex(e,t.sColumns));var s=_fnGetObjectDataFn(e.sAjaxDataProp)(t);for(var o=0,u=s.length;o<u;o++)if(r){var a=[];for(var f=0,l=e.aoColumns.length;f<l;f++)a.push(s[o][i[f]]);_fnAddData(e,a)}else _fnAddData(e,s[o]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,_fnDraw(e),e.bAjaxDataGet=!0,_fnProcessingDisplay(e,!1)}function _fnFeatureHtmlFilter(e){var t=e.oPreviousSearch,n=e.oLanguage.sSearch;n=n.indexOf("_INPUT_")!==-1?n.replace("_INPUT_",'<input type="text" />'):n===""?'<input type="text" />':n+' <input type="text" />';var r=document.createElement("div");r.className=e.oClasses.sFilter,r.innerHTML="<label>"+n+"</label>",e.aanFeatures.f||(r.id=e.sTableId+"_filter");var i=$('input[type="text"]',r);return r._DT_Input=i[0],i.val(t.sSearch.replace('"',"&quot;")),i.bind("keyup.DT",function(n){var r=e.aanFeatures.f,i=this.value===""?"":this.value;for(var s=0,o=r.length;s<o;s++)r[s]!=$(this).parents("div.dataTables_filter")[0]&&$(r[s]._DT_Input).val(i);i!=t.sSearch&&_fnFilterComplete(e,{sSearch:i,bRegex:t.bRegex,bSmart:t.bSmart,bCaseInsensitive:t.bCaseInsensitive})}),i.attr("aria-controls",e.sTableId).bind("keypress.DT",function(e){if(e.keyCode==13)return!1}),r}function _fnFilterComplete(e,t,n){var r=e.oPreviousSearch,i=e.aoPreSearchCols,s=function(e){r.sSearch=e.sSearch,r.bRegex=e.bRegex,r.bSmart=e.bSmart,r.bCaseInsensitive=e.bCaseInsensitive};if(!e.oFeatures.bServerSide){_fnFilter(e,t.sSearch,n,t.bRegex,t.bSmart,t.bCaseInsensitive),s(t);for(var o=0;o<e.aoPreSearchCols.length;o++)_fnFilterColumn(e,i[o].sSearch,o,i[o].bRegex,i[o].bSmart,i[o].bCaseInsensitive);_fnFilterCustom(e)}else s(t);e.bFiltered=!0,$(e.oInstance).trigger("filter",e),e._iDisplayStart=0,_fnCalculateEnd(e),_fnDraw(e),_fnBuildSearchArray(e,0)}function _fnFilterCustom(e){var t=DataTable.ext.afnFiltering,n=_fnGetColumns(e,"bSearchable");for(var r=0,i=t.length;r<i;r++){var s=0;for(var o=0,u=e.aiDisplay.length;o<u;o++){var a=e.aiDisplay[o-s],f=t[r](e,_fnGetRowData(e,a,"filter",n),a);f||(e.aiDisplay.splice(o-s,1),s++)}}}function _fnFilterColumn(e,t,n,r,i,s){if(t==="")return;var o=0,u=_fnFilterCreateSearch(t,r,i,s);for(var a=e.aiDisplay.length-1;a>=0;a--){var f=_fnDataToSearch(_fnGetCellData(e,e.aiDisplay[a],n,"filter"),e.aoColumns[n].sType);u.test(f)||(e.aiDisplay.splice(a,1),o++)}}function _fnFilter(e,t,n,r,i,s){var o,u=_fnFilterCreateSearch(t,r,i,s),a=e.oPreviousSearch;n||(n=0),DataTable.ext.afnFiltering.length!==0&&(n=1);if(t.length<=0)e.aiDisplay.splice(0,e.aiDisplay.length),e.aiDisplay=e.aiDisplayMaster.slice();else if(e.aiDisplay.length==e.aiDisplayMaster.length||a.sSearch.length>t.length||n==1||t.indexOf(a.sSearch)!==0){e.aiDisplay.splice(0,e.aiDisplay.length),_fnBuildSearchArray(e,1);for(o=0;o<e.aiDisplayMaster.length;o++)u.test(e.asDataSearch[o])&&e.aiDisplay.push(e.aiDisplayMaster[o])}else{var f=0;for(o=0;o<e.asDataSearch.length;o++)u.test(e.asDataSearch[o])||(e.aiDisplay.splice(o-f,1),f++)}}function _fnBuildSearchArray(e,t){if(!e.oFeatures.bServerSide){e.asDataSearch=[];var n=_fnGetColumns(e,"bSearchable"),r=t===1?e.aiDisplayMaster:e.aiDisplay;for(var i=0,s=r.length;i<s;i++)e.asDataSearch[i]=_fnBuildSearchRow(e,_fnGetRowData(e,r[i],"filter",n))}}function _fnBuildSearchRow(e,t){var n=t.join("  ");return n.indexOf("&")!==-1&&(n=$("<div>").html(n).text()),n.replace(/[\n\r]/g," ")}function _fnFilterCreateSearch(e,t,n,r){var i,s;return n?(i=t?e.split(" "):_fnEscapeRegex(e).split(" "),s="^(?=.*?"+i.join(")(?=.*?")+").*$",new RegExp(s,r?"i":"")):(e=t?e:_fnEscapeRegex(e),new RegExp(e,r?"i":""))}function _fnDataToSearch(e,t){return typeof DataTable.ext.ofnSearch[t]=="function"?DataTable.ext.ofnSearch[t](e):e===null?"":t=="html"?e.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):typeof e=="string"?e.replace(/[\r\n]/g," "):e}function _fnEscapeRegex(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"],n=new RegExp("(\\"+t.join("|\\")+")","g");return e.replace(n,"\\$1")}function _fnFeatureHtmlInfo(e){var t=document.createElement("div");return t.className=e.oClasses.sInfo,e.aanFeatures.i||(e.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"}),t.id=e.sTableId+"_info"),e.nTable.setAttribute("aria-describedby",e.sTableId+"_info"),t}function _fnUpdateInfo(e){if(!e.oFeatures.bInfo||e.aanFeatures.i.length===0)return;var t=e.oLanguage,n=e._iDisplayStart+1,r=e.fnDisplayEnd(),i=e.fnRecordsTotal(),s=e.fnRecordsDisplay(),o;s===0?o=t.sInfoEmpty:o=t.sInfo,s!=i&&(o+=" "+t.sInfoFiltered),o+=t.sInfoPostFix,o=_fnInfoMacros(e,o),t.fnInfoCallback!==null&&(o=t.fnInfoCallback.call(e.oInstance,e,n,r,i,s,o));var u=e.aanFeatures.i;for(var a=0,f=u.length;a<f;a++)$(u[a]).html(o)}function _fnInfoMacros(e,t){var n=e._iDisplayStart+1,r=e.fnFormatNumber(n),i=e.fnDisplayEnd(),s=e.fnFormatNumber(i),o=e.fnRecordsDisplay(),u=e.fnFormatNumber(o),a=e.fnRecordsTotal(),f=e.fnFormatNumber(a);return e.oScroll.bInfinite&&(r=e.fnFormatNumber(1)),t.replace(/_START_/g,r).replace(/_END_/g,s).replace(/_TOTAL_/g,u).replace(/_MAX_/g,f)}function _fnInitialise(e){var t,n,r=e.iInitDisplayStart;if(e.bInitialised===!1){setTimeout(function(){_fnInitialise(e)},200);return}_fnAddOptionsHtml(e),_fnBuildHead(e),_fnDrawHead(e,e.aoHeader),e.nTFoot&&_fnDrawHead(e,e.aoFooter),_fnProcessingDisplay(e,!0),e.oFeatures.bAutoWidth&&_fnCalculateColumnWidths(e);for(t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].sWidth!==null&&(e.aoColumns[t].nTh.style.width=_fnStringToCss(e.aoColumns[t].sWidth));e.oFeatures.bSort?_fnSort(e):e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch):(e.aiDisplay=e.aiDisplayMaster.slice(),_fnCalculateEnd(e),_fnDraw(e));if(e.sAjaxSource!==null&&!e.oFeatures.bServerSide){var i=[];_fnServerParams(e,i),e.fnServerData.call(e.oInstance,e.sAjaxSource,i,function(n){var i=e.sAjaxDataProp!==""?_fnGetObjectDataFn(e.sAjaxDataProp)(n):n;for(t=0;t<i.length;t++)_fnAddData(e,i[t]);e.iInitDisplayStart=r,e.oFeatures.bSort?_fnSort(e):(e.aiDisplay=e.aiDisplayMaster.slice(),_fnCalculateEnd(e),_fnDraw(e)),_fnProcessingDisplay(e,!1),_fnInitComplete(e,n)},e);return}e.oFeatures.bServerSide||(_fnProcessingDisplay(e,!1),_fnInitComplete(e))}function _fnInitComplete(e,t){e._bInitComplete=!0,_fnCallbackFire(e,"aoInitComplete","init",[e,t])}function _fnLanguageCompat(e){var t=DataTable.defaults.oLanguage;!e.sEmptyTable&&e.sZeroRecords&&t.sEmptyTable==="No data available in table"&&_fnMap(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&e.sZeroRecords&&t.sLoadingRecords==="Loading..."&&_fnMap(e,e,"sZeroRecords","sLoadingRecords")}function _fnFeatureHtmlLength(e){if(e.oScroll.bInfinite)return null;var t='name="'+e.sTableId+'_length"',n='<select size="1" '+t+' title="显示多少条" id="'+e.sTableId+'_page" class="d">',r,i,s=e.aLengthMenu;if(s.length==2&&typeof s[0]=="object"&&typeof s[1]=="object")for(r=0,i=s[0].length;r<i;r++)n+='<option value="'+s[0][r]+'">'+s[1][r]+"</option>";else for(r=0,i=s.length;r<i;r++)n+='<option value="'+s[r]+'">'+s[r]+"</option>";n+="</select>";var o=document.createElement("div");return e.aanFeatures.l||(o.id=e.sTableId+"_length"),o.className=e.oClasses.sLength,o.innerHTML='<div class="bottunDiv">'+e.oLanguage.sLengthMenu.replace("_MENU_",n)+"</div>",$('select option[value="'+e._iDisplayLength+'"]',o).attr("selected",!0),$("select",o).bind("change.DT",function(t){var n=$(this).val(),s=e.aanFeatures.l;for(r=0,i=s.length;r<i;r++)s[r]!=this.parentNode&&$("select",s[r]).val(n);e._iDisplayLength=parseInt(n,10),_fnCalculateEnd(e),e.fnDisplayEnd()==e.fnRecordsDisplay()&&(e._iDisplayStart=e.fnDisplayEnd()-e._iDisplayLength,e._iDisplayStart<0&&(e._iDisplayStart=0)),e._iDisplayLength==-1&&(e._iDisplayStart=0),_fnDraw(e)}),$("select",o).attr("aria-controls",e.sTableId),o}function _fnCalculateEnd(e){e.oFeatures.bPaginate===!1?e._iDisplayEnd=e.aiDisplay.length:e._iDisplayStart+e._iDisplayLength>e.aiDisplay.length||e._iDisplayLength==-1?e._iDisplayEnd=e.aiDisplay.length:e._iDisplayEnd=e._iDisplayStart+e._iDisplayLength}function _fnFeatureHtmlPaginate(e){if(e.oScroll.bInfinite)return null;var t=document.createElement("div");return t.className=e.oClasses.sPaging+e.sPaginationType,DataTable.ext.oPagination[e.sPaginationType].fnInit(e,t,function(e){_fnCalculateEnd(e),_fnDraw(e)}),e.aanFeatures.p||e.aoDrawCallback.push({fn:function(e){DataTable.ext.oPagination[e.sPaginationType].fnUpdate(e,function(e){_fnCalculateEnd(e),_fnDraw(e)})},sName:"pagination"}),t}function _fnPageChange(e,t){var n=e._iDisplayStart;if(typeof t=="number")e._iDisplayStart=t*e._iDisplayLength,e._iDisplayStart>e.fnRecordsDisplay()&&(e._iDisplayStart=0);else if(t=="first")e._iDisplayStart=0;else if(t=="previous")e._iDisplayStart=e._iDisplayLength>=0?e._iDisplayStart-e._iDisplayLength:0,e._iDisplayStart<0&&(e._iDisplayStart=0);else if(t=="next")e._iDisplayLength>=0?e._iDisplayStart+e._iDisplayLength<e.fnRecordsDisplay()&&(e._iDisplayStart+=e._iDisplayLength):e._iDisplayStart=0;else if(t=="last")if(e._iDisplayLength>=0){var r=parseInt((e.fnRecordsDisplay()-1)/e._iDisplayLength,10)+1;e._iDisplayStart=(r-1)*e._iDisplayLength}else e._iDisplayStart=0;else _fnLog(e,0,"Unknown paging action: "+t);return $(e.oInstance).trigger("page",e),n!=e._iDisplayStart}function _fnFeatureHtmlProcessing(e){var t=document.createElement("div");return e.aanFeatures.r||(t.id=e.sTableId+"_processing"),t.innerHTML=e.oLanguage.sProcessing,t.className=e.oClasses.sProcessing,e.nTable.parentNode.insertBefore(t,e.nTable),t}function _fnProcessingDisplay(e,t){if(e.oFeatures.bProcessing){var n=e.aanFeatures.r;for(var r=0,i=n.length;r<i;r++)n[r].style.visibility=t?"visible":"hidden"}$(e.oInstance).trigger("processing",[e,t])}function _fnFeatureHtmlTable(e){if(e.oScroll.sX===""&&e.oScroll.sY==="")return e.nTable;var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),u=e.nTable.cloneNode(!1),a=e.nTable.cloneNode(!1),f=e.nTable.getElementsByTagName("thead")[0],l=e.nTable.getElementsByTagName("tfoot").length===0?null:e.nTable.getElementsByTagName("tfoot")[0],c=e.oClasses;n.appendChild(r),s.appendChild(o),i.appendChild(e.nTable),t.appendChild(n),t.appendChild(i),r.appendChild(u),u.appendChild(f),l!==null&&(t.appendChild(s),o.appendChild(a),a.appendChild(l)),t.className=c.sScrollWrapper,n.className=c.sScrollHead,r.className=c.sScrollHeadInner,i.className=c.sScrollBody,s.className=c.sScrollFoot,o.className=c.sScrollFootInner,e.oScroll.bAutoCss&&(n.style.overflow="hidden",n.style.position="relative",s.style.overflow="hidden",i.style.overflow="auto"),n.style.border="0",n.style.width="100%",s.style.border="0",r.style.width=e.oScroll.sXInner!==""?e.oScroll.sXInner:"100%",u.removeAttribute("id"),u.style.marginLeft="0",e.nTable.style.marginLeft="0",l!==null&&(a.removeAttribute("id"),a.style.marginLeft="0");var h=$(e.nTable).children("caption");return h.length>0&&(h=h[0],h._captionSide==="top"?u.appendChild(h):h._captionSide==="bottom"&&l&&a.appendChild(h)),e.oScroll.sX!==""&&(n.style.width=_fnStringToCss(e.oScroll.sX),i.style.width=_fnStringToCss(e.oScroll.sX),l!==null&&(s.style.width=_fnStringToCss(e.oScroll.sX)),$(i).scroll(function(e){n.scrollLeft=this.scrollLeft,l!==null&&(s.scrollLeft=this.scrollLeft)})),e.oScroll.sY!==""&&(i.style.height=_fnStringToCss(e.oScroll.sY)),e.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"}),e.oScroll.bInfinite&&$(i).scroll(function(){!e.bDrawing&&$(this).scrollTop()!==0&&$(this).scrollTop()+$(this).height()>$(e.nTable).height()-e.oScroll.iLoadGap&&e.fnDisplayEnd()<e.fnRecordsDisplay()&&(_fnPageChange(e,"next"),_fnCalculateEnd(e),_fnDraw(e))}),e.nScrollHead=n,e.nScrollFoot=s,t}function _fnScrollDraw(e){var t=e.nScrollHead.getElementsByTagName("div")[0],n=t.getElementsByTagName("table")[0],r=e.nTable.parentNode,i,s,o,u,a,f,l,c,h,p,d,v,m,g=[],y=[],b,w=e.nTFoot!==null?e.nScrollFoot.getElementsByTagName("div")[0]:null,E=e.nTFoot!==null?w.getElementsByTagName("table")[0]:null,S=e.oBrowser.bScrollOversize,x=function(e){h=e.style,h.paddingTop="0",h.paddingBottom="0",h.borderTopWidth="0",h.borderBottomWidth="0",h.height=0};$(e.nTable).children("thead, tfoot").remove(),d=$(e.nTHead).clone()[0],e.nTable.insertBefore(d,e.nTable.childNodes[0]),a=e.nTHead.getElementsByTagName("tr"),f=d.getElementsByTagName("tr"),e.nTFoot!==null&&(v=$(e.nTFoot).clone()[0],e.nTable.insertBefore(v,e.nTable.childNodes[1]),c=e.nTFoot.getElementsByTagName("tr"),l=v.getElementsByTagName("tr")),e.oScroll.sX===""&&(r.style.width="100%",t.parentNode.style.width="100%");var T=_fnGetUniqueThs(e,d);for(i=0,s=T.length;i<s;i++)p=_fnVisibleToColumnIndex(e,i),T[i].style.width=e.aoColumns[p].sWidth;e.nTFoot!==null&&_fnApplyToChildren(function(e){e.style.width=""},l),e.oScroll.bCollapse&&e.oScroll.sY!==""&&(r.style.height=r.offsetHeight+e.nTHead.offsetHeight+"px"),b=$(e.nTable).outerWidth(),e.oScroll.sX===""?(e.nTable.style.width="100%",S&&($("tbody",r).height()>r.offsetHeight||$(r).css("overflow-y")=="scroll")&&(e.nTable.style.width=_fnStringToCss($(e.nTable).outerWidth()-e.oScroll.iBarWidth))):e.oScroll.sXInner!==""?e.nTable.style.width=_fnStringToCss(e.oScroll.sXInner):b==$(r).width()&&$(r).height()<$(e.nTable).height()?(e.nTable.style.width=_fnStringToCss(b-e.oScroll.iBarWidth),$(e.nTable).outerWidth()>b-e.oScroll.iBarWidth&&(e.nTable.style.width=_fnStringToCss(b))):e.nTable.style.width=_fnStringToCss(b),b=$(e.nTable).outerWidth(),_fnApplyToChildren(x,f),_fnApplyToChildren(function(e){g.push(_fnStringToCss($(e).width()))},f),_fnApplyToChildren(function(e,t){e.style.width=g[t]},a),$(f).height(0),e.nTFoot!==null&&(_fnApplyToChildren(x,l),_fnApplyToChildren(function(e){y.push(_fnStringToCss($(e).width()))},l),_fnApplyToChildren(function(e,t){e.style.width=y[t]},c),$(l).height(0)),_fnApplyToChildren(function(e,t){e.innerHTML="",e.style.width=g[t]},f),e.nTFoot!==null&&_fnApplyToChildren(function(e,t){e.innerHTML="",e.style.width=y[t]},l);if($(e.nTable).outerWidth()<b){var N=r.scrollHeight>r.offsetHeight||$(r).css("overflow-y")=="scroll"?b+e.oScroll.iBarWidth:b;S&&(r.scrollHeight>r.offsetHeight||$(r).css("overflow-y")=="scroll")&&(e.nTable.style.width=_fnStringToCss(N-e.oScroll.iBarWidth)),r.style.width=_fnStringToCss(N),e.nScrollHead.style.width=_fnStringToCss(N),e.nTFoot!==null&&(e.nScrollFoot.style.width=_fnStringToCss(N)),e.oScroll.sX===""?_fnLog(e,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):e.oScroll.sXInner!==""&&_fnLog(e,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else r.style.width=_fnStringToCss("100%"),e.nScrollHead.style.width=_fnStringToCss("100%"),e.nTFoot!==null&&(e.nScrollFoot.style.width=_fnStringToCss("100%"));e.oScroll.sY===""&&S&&(r.style.height=_fnStringToCss(e.nTable.offsetHeight+e.oScroll.iBarWidth));if(e.oScroll.sY!==""&&e.oScroll.bCollapse){r.style.height=_fnStringToCss(e.oScroll.sY);var C=e.oScroll.sX!==""&&e.nTable.offsetWidth>r.offsetWidth?e.oScroll.iBarWidth:0;e.nTable.offsetHeight<r.offsetHeight&&(r.style.height=_fnStringToCss(e.nTable.offsetHeight+C))}var k=$(e.nTable).outerWidth();n.style.width=_fnStringToCss(k),t.style.width=_fnStringToCss(k);var L=$(e.nTable).height()>r.clientHeight||$(r).css("overflow-y")=="scroll";t.style.paddingRight=L?e.oScroll.iBarWidth+"px":"0px",e.nTFoot!==null&&(E.style.width=_fnStringToCss(k),w.style.width=_fnStringToCss(k),w.style.paddingRight=L?e.oScroll.iBarWidth+"px":"0px"),$(r).scroll();if(e.bSorted||e.bFiltered)r.scrollTop=0}function _fnApplyToChildren(e,t,n){var r=0,i=0,s=t.length,o,u;while(i<s){o=t[i].firstChild,u=n?n[i].firstChild:null;while(o)o.nodeType===1&&(n?e(o,u,r):e(o,r),r++),o=o.nextSibling,u=n?u.nextSibling:null;i++}}function _fnConvertToWidth(e,t){if(!e||e===null||e==="")return 0;t||(t=document.body);var n,r=document.createElement("div");return r.style.width=_fnStringToCss(e),t.appendChild(r),n=r.offsetWidth,t.removeChild(r),n}function _fnCalculateColumnWidths(e){var t=e.nTable.offsetWidth,n=0,r,i=0,s=e.aoColumns.length,o,u,a,f,l=$("th",e.nTHead),c=e.nTable.getAttribute("width"),h=e.nTable.parentNode;for(o=0;o<s;o++)e.aoColumns[o].bVisible&&(i++,e.aoColumns[o].sWidth!==null&&(r=_fnConvertToWidth(e.aoColumns[o].sWidthOrig,h),r!==null&&(e.aoColumns[o].sWidth=_fnStringToCss(r)),n++));if(s==l.length&&n===0&&i==s&&e.oScroll.sX===""&&e.oScroll.sY==="")for(o=0;o<e.aoColumns.length;o++)r=$(l[o]).width(),r!==null&&(e.aoColumns[o].sWidth=_fnStringToCss(r));else{var p=e.nTable.cloneNode(!1),d=e.nTHead.cloneNode(!0),v=document.createElement("tbody"),m=document.createElement("tr"),g;p.removeAttribute("id"),p.appendChild(d),e.nTFoot!==null&&(p.appendChild(e.nTFoot.cloneNode(!0)),_fnApplyToChildren(function(e){e.style.width=""},p.getElementsByTagName("tr"))),p.appendChild(v),v.appendChild(m);var y=$("thead th",p);y.length===0&&(y=$("tbody tr:eq(0)>td",p));var b=_fnGetUniqueThs(e,d);a=0;for(o=0;o<s;o++){var w=e.aoColumns[o];w.bVisible&&w.sWidthOrig!==null&&w.sWidthOrig!==""?b[o-a].style.width=_fnStringToCss(w.sWidthOrig):w.bVisible?b[o-a].style.width="":a++}for(o=0;o<s;o++)if(e.aoColumns[o].bVisible){var E=_fnGetWidestNode(e,o);E!==null&&(E=E.cloneNode(!0),e.aoColumns[o].sContentPadding!==""&&(E.innerHTML+=e.aoColumns[o].sContentPadding),m.appendChild(E))}h.appendChild(p),e.oScroll.sX!==""&&e.oScroll.sXInner!==""?p.style.width=_fnStringToCss(e.oScroll.sXInner):e.oScroll.sX!==""?(p.style.width="",$(p).width()<h.offsetWidth&&(p.style.width=_fnStringToCss(h.offsetWidth))):e.oScroll.sY!==""?p.style.width=_fnStringToCss(h.offsetWidth):c&&(p.style.width=_fnStringToCss(c)),p.style.visibility="hidden",_fnScrollingWidthAdjust(e,p);var S=$("tbody tr:eq(0)",p).children();S.length===0&&(S=_fnGetUniqueThs(e,$("thead",p)[0]));if(e.oScroll.sX!==""){var x=0;a=0;for(o=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(e.aoColumns[o].sWidthOrig===null?x+=$(S[a]).outerWidth():x+=parseInt(e.aoColumns[o].sWidth.replace("px",""),10)+($(S[a]).outerWidth()-$(S[a]).width()),a++);p.style.width=_fnStringToCss(x),e.nTable.style.width=_fnStringToCss(x)}a=0;for(o=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(f=$(S[a]).width(),f!==null&&f>0&&(e.aoColumns[o].sWidth=_fnStringToCss(f)),a++);var T=$(p).css("width");e.nTable.style.width=T.indexOf("%")!==-1?T:_fnStringToCss($(p).outerWidth()),p.parentNode.removeChild(p)}c&&(e.nTable.style.width=_fnStringToCss(c))}function _fnScrollingWidthAdjust(e,t){if(e.oScroll.sX===""&&e.oScroll.sY!==""){var n=$(t).width();t.style.width=_fnStringToCss($(t).outerWidth()-e.oScroll.iBarWidth)}else e.oScroll.sX!==""&&(t.style.width=_fnStringToCss($(t).outerWidth()))}function _fnGetWidestNode(e,t){var n=_fnGetMaxLenString(e,t);if(n<0)return null;if(e.aoData[n].nTr===null){var r=document.createElement("td");return r.innerHTML=_fnGetCellData(e,n,t,""),r}return _fnGetTdNodes(e,n)[t]}function _fnGetMaxLenString(e,t){var n=-1,r=-1;for(var i=0;i<e.aoData.length;i++){var s=_fnGetCellData(e,i,t,"display")+"";s=s.replace(/<.*?>/g,""),s.length>n&&(n=s.length,r=i)}return r}function _fnStringToCss(e){if(e===null)return"0px";if(typeof e=="number")return e<0?"0px":e+"px";var t=e.charCodeAt(e.length-1);return t<48||t>57?e:e+"px"}function _fnScrollBarWidth(){var e=document.createElement("p"),t=e.style;t.width="100%",t.height="200px",t.padding="0px";var n=document.createElement("div");t=n.style,t.position="absolute",t.top="0px",t.left="0px",t.visibility="hidden",t.width="200px",t.height="150px",t.padding="0px",t.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var r=e.offsetWidth;n.style.overflow="scroll";var i=e.offsetWidth;return r==i&&(i=n.clientWidth),document.body.removeChild(n),r-i}function _fnSort(e,t){var n,r,i,s,o,u,a,f,l=[],c=[],h=DataTable.ext.oSort,p=e.aoData,d=e.aoColumns,v=e.oLanguage.oAria;if(!e.oFeatures.bServerSide&&(e.aaSorting.length!==0||e.aaSortingFixed!==null)){l=e.aaSortingFixed!==null?e.aaSortingFixed.concat(e.aaSorting):e.aaSorting.slice();for(n=0;n<l.length;n++){var m=l[n][0],g=_fnColumnIndexToVisible(e,m);a=e.aoColumns[m].sSortDataType;if(DataTable.ext.afnSortData[a]){var y=DataTable.ext.afnSortData[a].call(e.oInstance,e,m,g);if(y.length===p.length)for(i=0,s=p.length;i<s;i++)_fnSetCellData(e,i,m,y[i]);else _fnLog(e,0,"Returned data sort array (col "+m+") is the wrong length")}}for(n=0,r=e.aiDisplayMaster.length;n<r;n++)c[e.aiDisplayMaster[n]]=n;var b=l.length,w,E;for(n=0,r=p.length;n<r;n++)for(i=0;i<b;i++){E=d[l[i][0]].aDataSort;for(o=0,u=E.length;o<u;o++)a=d[E[o]].sType,w=h[(a?a:"string")+"-pre"],a=="enum"?p[n]._aSortData[E[o]]=n:p[n]._aSortData[E[o]]=w?w(_fnGetCellData(e,n,E[o],"sort")):_fnGetCellData(e,n,E[o],"sort")}e.aiDisplayMaster.sort(function(e,t){var n,r,i,s,o,u;for(n=0;n<b;n++){o=d[l[n][0]].aDataSort;for(r=0,i=o.length;r<i;r++){u=d[o[r]].sType,s=h[(u?u:"string")+"-"+l[n][1]](p[e]._aSortData[o[r]],p[t]._aSortData[o[r]]);if(s!==0)return s}}return h["numeric-asc"](c[e],c[t])})}(t===undefined||t)&&!e.oFeatures.bDeferRender&&_fnSortingClasses(e);for(n=0,r=e.aoColumns.length;n<r;n++){var S=d[n].sTitle.replace(/<.*?>/g,"");f=d[n].nTh,f.removeAttribute("aria-sort"),f.removeAttribute("aria-label");if(d[n].bSortable)if(l.length>0&&l[0][0]==n){f.setAttribute("aria-sort",l[0][1]=="asc"?"ascending":"descending");var x=d[n].asSorting[l[0][2]+1]?d[n].asSorting[l[0][2]+1]:d[n].asSorting[0];f.setAttribute("aria-label",S+(x=="asc"?v.sSortAscending:v.sSortDescending))}else f.setAttribute("aria-label",S+(d[n].asSorting[0]=="asc"?v.sSortAscending:v.sSortDescending));else f.setAttribute("aria-label",S)}e.bSorted=!0,$(e.oInstance).trigger("sort",e),e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch,1):(e.aiDisplay=e.aiDisplayMaster.slice(),e._iDisplayStart=0,_fnCalculateEnd(e),_fnDraw(e))}function _fnSortAttachListener(e,t,n,r){_fnBindAction(t,{},function(t){if(e.aoColumns[n].bSortable===!1)return;var i=function(){var r,i;if(t.shiftKey){var s=!1;for(var o=0;o<e.aaSorting.length;o++)if(e.aaSorting[o][0]==n){s=!0,r=e.aaSorting[o][0],i=e.aaSorting[o][2]+1,e.aoColumns[r].asSorting[i]?(e.aaSorting[o][1]=e.aoColumns[r].asSorting[i],e.aaSorting[o][2]=i):e.aaSorting.splice(o,1);break}s===!1&&e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0])}else e.aaSorting.length==1&&e.aaSorting[0][0]==n?(r=e.aaSorting[0][0],i=e.aaSorting[0][2]+1,e.aoColumns[r].asSorting[i]||(i=0),e.aaSorting[0][1]=e.aoColumns[r].asSorting[i],e.aaSorting[0][2]=i):(e.aaSorting.splice(0,e.aaSorting.length),e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0]));_fnSort(e)};e.oFeatures.bProcessing?(_fnProcessingDisplay(e,!0),setTimeout(function(){i(),e.oFeatures.bServerSide||_fnProcessingDisplay(e,!1)},0)):i(),typeof r=="function"&&r(e)})}function _fnSortingClasses(e){var t,n,r,i,s,o,u,a=e.aoColumns.length,f=e.oClasses;for(t=0;t<a;t++)e.aoColumns[t].bSortable&&$(e.aoColumns[t].nTh).removeClass(f.sSortAsc+" "+f.sSortDesc+" "+e.aoColumns[t].sSortingClass);e.aaSortingFixed!==null?o=e.aaSortingFixed.concat(e.aaSorting):o=e.aaSorting.slice();for(t=0;t<e.aoColumns.length;t++)if(e.aoColumns[t].bSortable){u=e.aoColumns[t].sSortingClass,s=-1;for(r=0;r<o.length;r++)if(o[r][0]==t){u=o[r][1]=="asc"?f.sSortAsc:f.sSortDesc,s=r;break}$(e.aoColumns[t].nTh).addClass(u);if(e.bJUI){var l=$("span."+f.sSortIcon,e.aoColumns[t].nTh);l.removeClass(f.sSortJUIAsc+" "+f.sSortJUIDesc+" "+f.sSortJUI+" "+f.sSortJUIAscAllowed+" "+f.sSortJUIDescAllowed);var c;s==-1?c=e.aoColumns[t].sSortingClassJUI:o[s][1]=="asc"?c=f.sSortJUIAsc:c=f.sSortJUIDesc,l.addClass(c)}}else $(e.aoColumns[t].nTh).addClass(e.aoColumns[t].sSortingClass);u=f.sSortColumn;if(e.oFeatures.bSort&&e.oFeatures.bSortClasses){var h=_fnGetTdNodes(e),p,d,v=[];for(t=0;t<a;t++)v.push("");for(t=0,p=1;t<o.length;t++)d=parseInt(o[t][0],10),v[d]=u+p,p<3&&p++;var m=new RegExp(u+"[123]"),g,y,b;for(t=0,n=h.length;t<n;t++)d=t%a,y=h[t].className,b=v[d],g=y.replace(m,b),g!=y?h[t].className=$.trim(g):b.length>0&&y.indexOf(b)==-1&&(h[t].className=y+" "+b)}}function _fnSaveState(e){if(!e.oFeatures.bStateSave||e.bDestroying)return;var t,n,r=e.oScroll.bInfinite,i={iCreate:(new Date).getTime(),iStart:r?0:e._iDisplayStart,iEnd:r?e._iDisplayLength:e._iDisplayEnd,iLength:e._iDisplayLength,aaSorting:$.extend(!0,[],e.aaSorting),oSearch:$.extend(!0,{},e.oPreviousSearch),aoSearchCols:$.extend(!0,[],e.aoPreSearchCols),abVisCols:[]};for(t=0,n=e.aoColumns.length;t<n;t++)i.abVisCols.push(e.aoColumns[t].bVisible);_fnCallbackFire(e,"aoStateSaveParams","stateSaveParams",[e,i]),e.fnStateSave.call(e.oInstance,e,i)}function _fnLoadState(e,t){if(!e.oFeatures.bStateSave)return;var n=e.fnStateLoad.call(e.oInstance,e);if(!n)return;var r=_fnCallbackFire(e,"aoStateLoadParams","stateLoadParams",[e,n]);if($.inArray(!1,r)!==-1)return;e.oLoadedState=$.extend(!0,{},n),e._iDisplayStart=n.iStart,e.iInitDisplayStart=n.iStart,e._iDisplayEnd=n.iEnd,e._iDisplayLength=n.iLength,e.aaSorting=n.aaSorting.slice(),e.saved_aaSorting=n.aaSorting.slice(),$.extend(e.oPreviousSearch,n.oSearch),$.extend(!0,e.aoPreSearchCols,n.aoSearchCols),t.saved_aoColumns=[];for(var i=0;i<n.abVisCols.length;i++)t.saved_aoColumns[i]={},t.saved_aoColumns[i].bVisible=n.abVisCols[i];_fnCallbackFire(e,"aoStateLoaded","stateLoaded",[e,n])}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date;date.setTime(date.getTime()+iSecs*1e3);var aParts=window.location.pathname.split("/"),sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase(),sFullCookie,oData;fnCallback!==null?(oData=typeof $.parseJSON=="function"?$.parseJSON(sValue):eval("("+sValue+")"),sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")):sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/";var aCookies=document.cookie.split(";"),iNewCookieLen=sFullCookie.split(";")[0].length,aOldCookies=[];if(iNewCookieLen+document.cookie.length+10>4096){for(var i=0,iLen=aCookies.length;i<iLen;i++)if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")"),oData&&oData.iCreate&&aOldCookies.push({name:aSplitCookie[0],time:oData.iCreate})}catch(e){}}aOldCookies.sort(function(e,t){return t.time-e.time});while(iNewCookieLen+document.cookie.length+10>4096){if(aOldCookies.length===0)return;var old=aOldCookies.pop();document.cookie=old.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(e){var t=window.location.pathname.split("/"),n=e+"_"+t[t.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",r=document.cookie.split(";");for(var i=0;i<r.length;i++){var s=r[i];while(s.charAt(0)==" ")s=s.substring(1,s.length);if(s.indexOf(n)===0)return decodeURIComponent(s.substring(n.length,s.length))}return null}function _fnSettingsFromNode(e){for(var t=0;t<DataTable.settings.length;t++)if(DataTable.settings[t].nTable===e)return DataTable.settings[t];return null}function _fnGetTrNodes(e){var t=[],n=e.aoData;for(var r=0,i=n.length;r<i;r++)n[r].nTr!==null&&t.push(n[r].nTr);return t}function _fnGetTdNodes(e,t){var n=[],r,i,s,o,u=e.aoData.length,a,f,l,c,h=0,p=u;t!==undefined&&(h=t,p=t+1);for(o=h;o<p;o++){l=e.aoData[o];if(l.nTr!==null){i=[],s=l.nTr.firstChild;while(s)c=s.nodeName.toLowerCase(),(c=="td"||c=="th")&&i.push(s),s=s.nextSibling;r=0;for(a=0,f=e.aoColumns.length;a<f;a++)e.aoColumns[a].bVisible?n.push(i[a-r]):(n.push(l._anHidden[a]),r++)}}return n}function _fnLog(e,t,n){var r=e===null?"DataTables warning: "+n:"DataTables warning (table id = '"+e.sTableId+"'): "+n;if(t===0){DataTable.ext.sErrMode=="alert";return}window.console&&console.log&&console.log(r)}function _fnMap(e,t,n,r){r===undefined&&(r=n),t[n]!==undefined&&(e[r]=t[n])}function _fnExtend(e,t){var n;for(var r in t)t.hasOwnProperty(r)&&(n=t[r],typeof oInit[r]=="object"&&n!==null&&$.isArray(n)===!1?$.extend(!0,e[r],n):e[r]=n);return e}function _fnBindAction(e,t,n){$(e).bind("click.DT",t,function(t){e.blur(),n(t)}).bind("keypress.DT",t,function(e){e.which===13&&n(e)}).bind("selectstart.DT",function(){return!1})}function _fnCallbackReg(e,t,n,r){n&&e[t].push({fn:n,sName:r})}function _fnCallbackFire(e,t,n,r){var i=e[t],s=[];for(var o=i.length-1;o>=0;o--)s.push(i[o].fn.apply(e.oInstance,r));return n!==null&&$(e.oInstance).trigger(n,r),s}function _fnBrowserDetect(e){var t=$('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];document.body.appendChild(t),e.oBrowser.bScrollOversize=$("#DT_BrowserTest",t)[0].offsetWidth===100?!0:!1,document.body.removeChild(t)}function _fnExternApiFunc(e){return function(){var t=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.oApi[e].apply(this,t)}}var __reArray=/\[.*?\]$/,_fnJsonString=window.JSON?JSON.stringify:function(e){var t=typeof e;if(t!=="object"||e===null)return t==="string"&&(e='"'+e+'"'),e+"";var n,r,i=[],s=$.isArray(e);for(n in e)r=e[n],t=typeof r,t==="string"?r='"'+r+'"':t==="object"&&r!==null&&(r=_fnJsonString(r)),i.push((s?"":'"'+n+'":')+r);return(s?"[":"{")+i+(s?"]":"}")};this.$=function(e,t){var n,r,i=[],s,o=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),u=o.aoData,a=o.aiDisplay,f=o.aiDisplayMaster;t||(t={}),t=$.extend({},{filter:"none",order:"current",page:"all"},t);if(t.page=="current")for(n=o._iDisplayStart,r=o.fnDisplayEnd();n<r;n++)s=u[a[n]].nTr,s&&i.push(s);else if(t.order=="current"&&t.filter=="none")for(n=0,r=f.length;n<r;n++)s=u[f[n]].nTr,s&&i.push(s);else if(t.order=="current"&&t.filter=="applied")for(n=0,r=a.length;n<r;n++)s=u[a[n]].nTr,s&&i.push(s);else if(t.order=="original"&&t.filter=="none")for(n=0,r=u.length;n<r;n++)s=u[n].nTr,s&&i.push(s);else if(t.order=="original"&&t.filter=="applied")for(n=0,r=u.length;n<r;n++)s=u[n].nTr,$.inArray(n,a)!==-1&&s&&i.push(s);else _fnLog(o,1,"Unknown selection options");var l=$(i),c=l.filter(e),h=l.find(e);return $([].concat($.makeArray(c),$.makeArray(h)))},this._=function(e,t){var n=[],r,i,s,o=this.$(e,t);for(r=0,i=o.length;r<i;r++)n.push(this.fnGetData(o[r]));return n},this.fnAddData=function(e,t){if(e.length===0)return[];var n=[],r,i=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(typeof e[0]=="object"&&e[0]!==null)for(var s=0;s<e.length;s++){r=_fnAddData(i,e[s]);if(r==-1)return n;n.push(r)}else{r=_fnAddData(i,e);if(r==-1)return n;n.push(r)}return i.aiDisplay=i.aiDisplayMaster.slice(),(t===undefined||t)&&_fnReDraw(i),n},this.fnAdjustColumnSizing=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnAdjustColumnSizing(t),e===undefined||e?this.fnDraw(!1):(t.oScroll.sX!==""||t.oScroll.sY!=="")&&this.oApi._fnScrollDraw(t)},this.fnClearTable=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnClearTable(t),(e===undefined||e)&&_fnDraw(t)},this.fnClose=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);for(var n=0;n<t.aoOpenRows.length;n++)if(t.aoOpenRows[n].nParent==e){var r=t.aoOpenRows[n].nTr.parentNode;return r&&r.removeChild(t.aoOpenRows[n].nTr),t.aoOpenRows.splice(n,1),0}return 1},this.fnDeleteRow=function(e,t,n){var r=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i,s,o;o=typeof e=="object"?_fnNodeToDataIndex(r,e):e;var u=r.aoData.splice(o,1);for(i=0,s=r.aoData.length;i<s;i++)r.aoData[i].nTr!==null&&(r.aoData[i].nTr._DT_RowIndex=i);var a=$.inArray(o,r.aiDisplay);r.asDataSearch.splice(a,1),_fnDeleteIndex(r.aiDisplayMaster,o),_fnDeleteIndex(r.aiDisplay,o),typeof t=="function"&&t.call(this,r,u),r._iDisplayStart>=r.fnRecordsDisplay()&&(r._iDisplayStart-=r._iDisplayLength,r._iDisplayStart<0&&(r._iDisplayStart=0));if(n===undefined||n)_fnCalculateEnd(r),_fnDraw(r);return u},this.fnDestroy=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=t.nTableWrapper.parentNode,r=t.nTBody,i,s;e=e===undefined?!1:e,t.bDestroying=!0,_fnCallbackFire(t,"aoDestroyCallback","destroy",[t]);if(!e)for(i=0,s=t.aoColumns.length;i<s;i++)t.aoColumns[i].bVisible===!1&&this.fnSetColumnVis(i,!0);$(t.nTableWrapper).find("*").andSelf().unbind(".DT"),$("tbody>tr>td."+t.oClasses.sRowEmpty,t.nTable).parent().remove(),t.nTable!=t.nTHead.parentNode&&($(t.nTable).children("thead").remove(),t.nTable.appendChild(t.nTHead)),t.nTFoot&&t.nTable!=t.nTFoot.parentNode&&($(t.nTable).children("tfoot").remove(),t.nTable.appendChild(t.nTFoot)),t.nTable.parentNode.removeChild(t.nTable),$(t.nTableWrapper).remove(),t.aaSorting=[],t.aaSortingFixed=[],_fnSortingClasses(t),$(_fnGetTrNodes(t)).removeClass(t.asStripeClasses.join(" ")),$("th, td",t.nTHead).removeClass([t.oClasses.sSortable,t.oClasses.sSortableAsc,t.oClasses.sSortableDesc,t.oClasses.sSortableNone].join(" ")),t.bJUI&&($("th span."+t.oClasses.sSortIcon+", td span."+t.oClasses.sSortIcon,t.nTHead).remove(),$("th, td",t.nTHead).each(function(){var e=$("div."+t.oClasses.sSortJUIWrapper,this),n=e.contents();$(this).append(n),e.remove()})),!e&&t.nTableReinsertBefore?n.insertBefore(t.nTable,t.nTableReinsertBefore):e||n.appendChild(t.nTable);for(i=0,s=t.aoData.length;i<s;i++)t.aoData[i].nTr!==null&&r.appendChild(t.aoData[i].nTr);t.oFeatures.bAutoWidth===!0&&(t.nTable.style.width=_fnStringToCss(t.sDestroyWidth)),s=t.asDestroyStripes.length;if(s){var o=$(r).children("tr");for(i=0;i<s;i++)o.filter(":nth-child("+s+"n + "+i+")").addClass(t.asDestroyStripes[i])}for(i=0,s=DataTable.settings.length;i<s;i++)DataTable.settings[i]==t&&DataTable.settings.splice(i,1);t=null,oInit=null},this.fnDraw=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);e===!1?(_fnCalculateEnd(t),_fnDraw(t)):_fnReDraw(t)},this.fnFilter=function(e,t,n,r,i,s){var o=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(!o.oFeatures.bFilter)return;if(n===undefined||n===null)n=!1;if(r===undefined||r===null)r=!0;if(i===undefined||i===null)i=!0;if(s===undefined||s===null)s=!0;if(t===undefined||t===null){_fnFilterComplete(o,{sSearch:e+"",bRegex:n,bSmart:r,bCaseInsensitive:s},1);if(i&&o.aanFeatures.f){var u=o.aanFeatures.f;for(var a=0,f=u.length;a<f;a++)try{u[a]._DT_Input!=document.activeElement&&$(u[a]._DT_Input).val(e)}catch(l){$(u[a]._DT_Input).val(e)}}}else $.extend(o.aoPreSearchCols[t],{sSearch:e+"",bRegex:n,bSmart:r,bCaseInsensitive:s}),_fnFilterComplete(o,o.oPreviousSearch,1)},this.fnGetData=function(e,t){var n=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(e!==undefined){var r=e;if(typeof e=="object"){var i=e.nodeName.toLowerCase();i==="tr"?r=_fnNodeToDataIndex(n,e):i==="td"&&(r=_fnNodeToDataIndex(n,e.parentNode),t=_fnNodeToColumnIndex(n,r,e))}return t!==undefined?_fnGetCellData(n,r,t,""):n.aoData[r]!==undefined?n.aoData[r]._aData:null}return _fnGetDataMaster(n)},this.fnGetNodes=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);return e!==undefined?t.aoData[e]!==undefined?t.aoData[e].nTr:null:_fnGetTrNodes(t)},this.fnGetPosition=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=e.nodeName.toUpperCase();if(n=="TR")return _fnNodeToDataIndex(t,e);if(n=="TD"||n=="TH"){var r=_fnNodeToDataIndex(t,e.parentNode),i=_fnNodeToColumnIndex(t,r,e);return[r,_fnColumnIndexToVisible(t,i),i]}return null},this.fnIsOpen=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),n=t.aoOpenRows;for(var r=0;r<t.aoOpenRows.length;r++)if(t.aoOpenRows[r].nParent==e)return!0;return!1},this.fnOpen=function(e,t,n){var r=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i=_fnGetTrNodes(r);if($.inArray(e,i)===-1)return;this.fnClose(e);var s=document.createElement("tr"),o=document.createElement("td");s.appendChild(o),o.className=n,o.colSpan=_fnVisbleColumns(r),typeof t=="string"?o.innerHTML=t:$(o).html(t);var u=$("tr",r.nTBody);return $.inArray(e,u)!=-1&&$(s).insertAfter(e),r.aoOpenRows.push({nTr:s,nParent:e}),s},this.fnPageChange=function(e,t){var n=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnPageChange(n,e),_fnCalculateEnd(n),(t===undefined||t)&&_fnDraw(n)},this.fnSetColumnVis=function(e,t,n){var r=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i,s,o=r.aoColumns,u=r.aoData,a,f,l;if(o[e].bVisible==t)return;if(t){var c=0;for(i=0;i<e;i++)o[i].bVisible&&c++;f=c>=_fnVisbleColumns(r);if(!f)for(i=e;i<o.length;i++)if(o[i].bVisible){l=i;break}for(i=0,s=u.length;i<s;i++)u[i].nTr!==null&&(f?u[i].nTr.appendChild(u[i]._anHidden[e]):u[i].nTr.insertBefore(u[i]._anHidden[e],_fnGetTdNodes(r,i)[l]))}else for(i=0,s=u.length;i<s;i++)u[i].nTr!==null&&(a=_fnGetTdNodes(r,i)[e],u[i]._anHidden[e]=a,a.parentNode.removeChild(a));o[e].bVisible=t,_fnDrawHead(r,r.aoHeader),r.nTFoot&&_fnDrawHead(r,r.aoFooter);for(i=0,s=r.aoOpenRows.length;i<s;i++)r.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(r);if(n===undefined||n)_fnAdjustColumnSizing(r),_fnDraw(r);_fnSaveState(r)},this.fnSettings=function(){return _fnSettingsFromNode(this[DataTable.ext.iApiIndex])},this.fnSort=function(e){var t=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);t.aaSorting=e,_fnSort(t)},this.fnSortListener=function(e,t,n){_fnSortAttachListener(_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),e,t,n)},this.fnUpdate=function(e,t,n,r,i){var s=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),o,u,a,f=typeof t=="object"?_fnNodeToDataIndex(s,t):t;if($.isArray(e)&&n===undefined){s.aoData[f]._aData=e.slice();for(o=0;o<s.aoColumns.length;o++)this.fnUpdate(_fnGetCellData(s,f,o),f,o,!1,!1)}else if($.isPlainObject(e)&&n===undefined){s.aoData[f]._aData=$.extend(!0,{},e);for(o=0;o<s.aoColumns.length;o++)this.fnUpdate(_fnGetCellData(s,f,o),f,o,!1,!1)}else{_fnSetCellData(s,f,n,e),a=_fnGetCellData(s,f,n,"display");var l=s.aoColumns[n];l.fnRender!==null&&(a=_fnRender(s,f,n),l.bUseRendered&&_fnSetCellData(s,f,n,a)),s.aoData[f].nTr!==null&&(_fnGetTdNodes(s,f)[n].innerHTML=a)}var c=$.inArray(f,s.aiDisplay);return s.asDataSearch[c]=_fnBuildSearchRow(s,_fnGetRowData(s,f,"filter",_fnGetColumns(s,"bSearchable"))),(i===undefined||i)&&_fnAdjustColumnSizing(s),(r===undefined||r)&&_fnReDraw(s),0},this.fnVersionCheck=DataTable.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:_fnExternApiFunc,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLanguageCompat:_fnLanguageCompat,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAddData:_fnAddData,_fnCreateTr:_fnCreateTr,_fnGatherData:_fnGatherData,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnServerParams:_fnServerParams,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnBuildSearchArray:_fnBuildSearchArray,_fnBuildSearchRow:_fnBuildSearchRow,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnDataToSearch:_fnDataToSearch,_fnSort:_fnSort,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnVisbleColumns:_fnVisbleColumns,_fnCalculateEnd:_fnCalculateEnd,_fnConvertToWidth:_fnConvertToWidth,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnDetectType:_fnDetectType,_fnSettingsFromNode:_fnSettingsFromNode,_fnGetDataMaster:_fnGetDataMaster,_fnGetTrNodes:_fnGetTrNodes,_fnGetTdNodes:_fnGetTdNodes,_fnEscapeRegex:_fnEscapeRegex,_fnDeleteIndex:_fnDeleteIndex,_fnReOrderIndex:_fnReOrderIndex,_fnColumnOrdering:_fnColumnOrdering,_fnLog:_fnLog,_fnClearTable:_fnClearTable,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnCreateCookie:_fnCreateCookie,_fnReadCookie:_fnReadCookie,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnScrollBarWidth:_fnScrollBarWidth,_fnApplyToChildren:_fnApplyToChildren,_fnMap:_fnMap,_fnGetRowData:_fnGetRowData,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnBindAction:_fnBindAction,_fnExtend:_fnExtend,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnJsonString:_fnJsonString,_fnRender:_fnRender,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnInfoMacros:_fnInfoMacros,_fnBrowserDetect:_fnBrowserDetect,_fnGetColumns:_fnGetColumns},$.extend(DataTable.ext.oApi,this.oApi);for(var sFunc in DataTable.ext.oApi)sFunc&&(this[sFunc]=_fnExternApiFunc(sFunc));var _that=this;return this.each(function(){var e=0,t,n,r,i,s,o=this.getAttribute("id"),u=!1,a=!1;if(this.nodeName.toLowerCase()!="table"){_fnLog(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}for(e=0,t=DataTable.settings.length;e<t;e++){if(DataTable.settings[e].nTable==this){if(oInit===undefined||oInit.bRetrieve)return DataTable.settings[e].oInstance;if(oInit.bDestroy){DataTable.settings[e].oInstance.fnDestroy();break}_fnLog(DataTable.settings[e],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}if(DataTable.settings[e].sTableId==this.id){DataTable.settings.splice(e,1);break}}if(o===null||o==="")o="DataTables_Table_"+DataTable.ext._oExternConfig.iNextUnique++,this.id=o;var f=$.extend(!0,{},DataTable.models.oSettings,{nTable:this,oApi:_that.oApi,oInit:oInit,sDestroyWidth:$(this).width(),sInstance:o,sTableId:o});DataTable.settings.push(f),f.oInstance=_that.length===1?_that:$(this).dataTable(),oInit||(oInit={}),oInit.oLanguage&&_fnLanguageCompat(oInit.oLanguage),oInit=_fnExtend($.extend(!0,{},DataTable.defaults),oInit),_fnMap(f.oFeatures,oInit,"bPaginate"),_fnMap(f.oFeatures,oInit,"bLengthChange"),_fnMap(f.oFeatures,oInit,"bFilter"),_fnMap(f.oFeatures,oInit,"bSort"),_fnMap(f.oFeatures,oInit,"bInfo"),_fnMap(f.oFeatures,oInit,"bProcessing"),_fnMap(f.oFeatures,oInit,"bAutoWidth"),_fnMap(f.oFeatures,oInit,"bSortClasses"),_fnMap(f.oFeatures,oInit,"bServerSide"),_fnMap(f.oFeatures,oInit,"bDeferRender"),_fnMap(f.oScroll,oInit,"sScrollX","sX"),_fnMap(f.oScroll,oInit,"sScrollXInner","sXInner"),_fnMap(f.oScroll,oInit,"sScrollY","sY"),_fnMap(f.oScroll,oInit,"bScrollCollapse","bCollapse"),_fnMap(f.oScroll,oInit,"bScrollInfinite","bInfinite"),_fnMap(f.oScroll,oInit,"iScrollLoadGap","iLoadGap"),_fnMap(f.oScroll,oInit,"bScrollAutoCss","bAutoCss"),_fnMap(f,oInit,"asStripeClasses"),_fnMap(f,oInit,"asStripClasses","asStripeClasses"),_fnMap(f,oInit,"fnServerData"),_fnMap(f,oInit,"fnFormatNumber"),_fnMap(f,oInit,"sServerMethod"),_fnMap(f,oInit,"aaSorting"),_fnMap(f,oInit,"aaSortingFixed"),_fnMap(f,oInit,"aLengthMenu"),_fnMap(f,oInit,"sPaginationType"),_fnMap(f,oInit,"sAjaxSource"),_fnMap(f,oInit,"sAjaxDataProp"),_fnMap(f,oInit,"iCookieDuration"),_fnMap(f,oInit,"sCookiePrefix"),_fnMap(f,oInit,"sDom"),_fnMap(f,oInit,"bSortCellsTop"),_fnMap(f,oInit,"iTabIndex"),_fnMap(f,oInit,"oSearch","oPreviousSearch"),_fnMap(f,oInit,"aoSearchCols","aoPreSearchCols"),_fnMap(f,oInit,"iDisplayLength","_iDisplayLength"),_fnMap(f,oInit,"bJQueryUI","bJUI"),_fnMap(f,oInit,"fnCookieCallback"),_fnMap(f,oInit,"fnStateLoad"),_fnMap(f,oInit,"fnStateSave"),_fnMap(f.oLanguage,oInit,"fnInfoCallback"),_fnCallbackReg(f,"aoDrawCallback",oInit.fnDrawCallback,"user"),_fnCallbackReg(f,"aoServerParams",oInit.fnServerParams,"user"),_fnCallbackReg(f,"aoStateSaveParams",oInit.fnStateSaveParams,"user"),_fnCallbackReg(f,"aoStateLoadParams",oInit.fnStateLoadParams,"user"),_fnCallbackReg(f,"aoStateLoaded",oInit.fnStateLoaded,"user"),_fnCallbackReg(f,"aoRowCallback",oInit.fnRowCallback,"user"),_fnCallbackReg(f,"aoRowCreatedCallback",oInit.fnCreatedRow,"user"),_fnCallbackReg(f,"aoHeaderCallback",oInit.fnHeaderCallback,"user"),_fnCallbackReg(f,"aoFooterCallback",oInit.fnFooterCallback,"user"),_fnCallbackReg(f,"aoInitComplete",oInit.fnInitComplete,"user"),_fnCallbackReg(f,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user"),f.oFeatures.bServerSide&&f.oFeatures.bSort&&f.oFeatures.bSortClasses?_fnCallbackReg(f,"aoDrawCallback",_fnSortingClasses,"server_side_sort_classes"):f.oFeatures.bDeferRender&&_fnCallbackReg(f,"aoDrawCallback",_fnSortingClasses,"defer_sort_classes"),oInit.bJQueryUI?($.extend(f.oClasses,DataTable.ext.oJUIClasses),oInit.sDom===DataTable.defaults.sDom&&DataTable.defaults.sDom==="lfrtip"&&(f.sDom='<"H"lfr>t<"F"ip>')):$.extend(f.oClasses,DataTable.ext.oStdClasses),$(this).addClass(f.oClasses.sTable);if(f.oScroll.sX!==""||f.oScroll.sY!=="")f.oScroll.iBarWidth=_fnScrollBarWidth();f.iInitDisplayStart===undefined&&(f.iInitDisplayStart=oInit.iDisplayStart,f._iDisplayStart=oInit.iDisplayStart),oInit.bStateSave&&(f.oFeatures.bStateSave=!0,_fnLoadState(f,oInit),_fnCallbackReg(f,"aoDrawCallback",_fnSaveState,"state_save"));if(oInit.iDeferLoading!==null){f.bDeferLoading=!0;var l=$.isArray(oInit.iDeferLoading);f._iRecordsDisplay=l?oInit.iDeferLoading[0]:oInit.iDeferLoading,f._iRecordsTotal=l?oInit.iDeferLoading[1]:oInit.iDeferLoading}oInit.aaData!==null&&(a=!0),oInit.oLanguage.sUrl!==""?(f.oLanguage.sUrl=oInit.oLanguage.sUrl,$.getJSON(f.oLanguage.sUrl,null,function(e){_fnLanguageCompat(e),$.extend(!0,f.oLanguage,oInit.oLanguage,e),_fnInitialise(f)}),u=!0):$.extend(!0,f.oLanguage,oInit.oLanguage),oInit.asStripeClasses===null&&(f.asStripeClasses=[f.oClasses.sStripeOdd,f.oClasses.sStripeEven]),t=f.asStripeClasses.length,f.asDestroyStripes=[];if(t){var c=!1,h=$(this).children("tbody").children("tr:lt("+t+")");for(e=0;e<t;e++)h.hasClass(f.asStripeClasses[e])&&(c=!0,f.asDestroyStripes.push(f.asStripeClasses[e]));c&&h.removeClass(f.asStripeClasses.join(" "))}var p=[],d,v=this.getElementsByTagName("thead");v.length!==0&&(_fnDetectHeader(f.aoHeader,v[0]),p=_fnGetUniqueThs(f));if(oInit.aoColumns===null){d=[];for(e=0,t=p.length;e<t;e++)d.push(null)}else d=oInit.aoColumns;for(e=0,t=d.length;e<t;e++)oInit.saved_aoColumns!==undefined&&oInit.saved_aoColumns.length==t&&(d[e]===null&&(d[e]={}),d[e].bVisible=oInit.saved_aoColumns[e].bVisible),_fnAddColumn(f,p?p[e]:null);_fnApplyColumnDefs(f,oInit.aoColumnDefs,d,function(e,t){_fnColumnOptions(f,e,t)});for(e=0,t=f.aaSorting.length;e<t;e++){f.aaSorting[e][0]>=f.aoColumns.length&&(f.aaSorting[e][0]=0);var m=f.aoColumns[f.aaSorting[e][0]];f.aaSorting[e][2]===undefined&&(f.aaSorting[e][2]=0),oInit.aaSorting===undefined&&f.saved_aaSorting===undefined&&(f.aaSorting[e][1]=m.asSorting[0]);for(n=0,r=m.asSorting.length;n<r;n++)if(f.aaSorting[e][1]==m.asSorting[n]){f.aaSorting[e][2]=n;break}}_fnSortingClasses(f),_fnBrowserDetect(f);var g=$(this).children("caption").each(function(){this._captionSide=$(this).css("caption-side")}),y=$(this).children("thead");y.length===0&&(y=[document.createElement("thead")],this.appendChild(y[0])),f.nTHead=y[0];var b=$(this).children("tbody");b.length===0&&(b=[document.createElement("tbody")],this.appendChild(b[0])),f.nTBody=b[0],f.nTBody.setAttribute("role","alert"),f.nTBody.setAttribute("aria-live","polite"),f.nTBody.setAttribute("aria-relevant","all");var w=$(this).children("tfoot");w.length===0&&g.length>0&&(f.oScroll.sX!==""||f.oScroll.sY!=="")&&(w=[document.createElement("tfoot")],this.appendChild(w[0])),w.length>0&&(f.nTFoot=w[0],_fnDetectHeader(f.aoFooter,f.nTFoot));if(a)for(e=0;e<oInit.aaData.length;e++)_fnAddData(f,oInit.aaData[e]);else _fnGatherData(f);f.aiDisplay=f.aiDisplayMaster.slice(),f.bInitialised=!0,u===!1&&_fnInitialise(f)}),_that=null,this};DataTable.fnVersionCheck=function(e){var t=function(e,t){while(e.length<t)e+="0";return e},n=DataTable.ext.sVersion.split("."),r=e.split("."),i="",s="";for(var o=0,u=r.length;o<u;o++)i+=t(n[o],3),s+=t(r[o],3);return parseInt(i,10)>=parseInt(s,10)},DataTable.fnIsDataTable=function(e){var t=DataTable.settings;for(var n=0;n<t.length;n++)if(t[n].nTable===e||t[n].nScrollHead===e||t[n].nScrollFoot===e)return!0;return!1},DataTable.fnTables=function(e){var t=[];return jQuery.each(DataTable.settings,function(n,r){(!e||e===!0&&$(r.nTable).is(":visible"))&&t.push(r.nTable)}),t},DataTable.version="1.9.4",DataTable.settings=[],DataTable.models={},DataTable.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:DataTable.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},DataTable.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},DataTable.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},DataTable.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){if(e<1e3)return e;var t=e+"",n=t.split(""),r="",i=t.length;for(var s=0;s<i;s++)s%3===0&&s!==0&&(r=this.oLanguage.sInfoThousands+r),r=n[i-s-1]+r;return r},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(e,t,n,r){r.jqXHR=$.ajax({url:e,data:t,success:function(e){e.sError&&r.oApi._fnLog(r,0,e.sError),$(r.oInstance).trigger("xhr",[r,e]),n(e)},dataType:"json",cache:!1,type:r.sServerMethod,error:function(e,t,n){t=="parsererror"&&r.oApi._fnLog(r,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(oSettings){var sData=this.oApi._fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance),oData;try{oData=typeof $.parseJSON=="function"?$.parseJSON(sData):eval("("+sData+")")}catch(e){oData=null}return oData},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(e,t){this.oApi._fnCreateCookie(e.sCookiePrefix+e.sInstance,this.oApi._fnJsonString(t),e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},DataTable.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},DataTable.ext=$.extend(!0,{},DataTable.models.ext),$.extend(DataTable.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"buttonDiv l",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),$.extend(DataTable.ext.oJUIClasses,DataTable.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),$.extend(DataTable.ext.oPagination,{two_button:{fnInit:function(e,t,n){var r=e.oLanguage.oPaginate,i=e.oClasses,s=function(t){e.oApi._fnPageChange(e,t.data.action)&&n(e)},o=e.bJUI?'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUIPrev+'"></span></a>'+'<a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUINext+'"></span></a>':'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+r.sPrevious+"</a>"+'<a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+r.sNext+"</a>";$(t).append(o);var u=$("a",t),a=u[0],f=u[1];e.oApi._fnBindAction(a,{action:"previous"},s),e.oApi._fnBindAction(f,{action:"next"},s),e.aanFeatures.p||(t.id=e.sTableId+"_paginate",a.id=e.sTableId+"_previous",f.id=e.sTableId+"_next",a.setAttribute("aria-controls",e.sTableId),f.setAttribute("aria-controls",e.sTableId))},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=e.oClasses,r=e.aanFeatures.p,i;for(var s=0,o=r.length;s<o;s++)i=r[s].firstChild,i&&(i.className=e._iDisplayStart===0?n.sPagePrevDisabled:n.sPagePrevEnabled,i=i.nextSibling,i.className=e.fnDisplayEnd()==e.fnRecordsDisplay()?n.sPageNextDisabled:n.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,t,n){var r=document.createElement("span"),i=document.createElement("span"),s=document.createElement("span"),o=document.createElement("span"),u=document.createElement("span");r.innerHTML=e.oLanguage.oPaginate.sFirst,i.innerHTML=e.oLanguage.oPaginate.sPrevious,o.innerHTML=e.oLanguage.oPaginate.sNext,u.innerHTML=e.oLanguage.oPaginate.sLast;var a=e.oClasses;r.className=a.sPageButton+" "+a.sPageFirst,i.className=a.sPageButton+" "+a.sPagePrevious,o.className=a.sPageButton+" "+a.sPageNext,u.className=a.sPageButton+" "+a.sPageLast,t.appendChild(r),t.appendChild(i),t.appendChild(s),t.appendChild(o),t.appendChild(u),$(r).bind("click.DT",function(){e.oApi._fnPageChange(e,"first")&&n(e)}),$(i).bind("click.DT",function(){e.oApi._fnPageChange(e,"previous")&&n(e)}),$(o).bind("click.DT",function(){e.oApi._fnPageChange(e,"next")&&n(e)}),$(u).bind("click.DT",function(){e.oApi._fnPageChange(e,"last")&&n(e)}),$("span",t).bind("mousedown.DT",function(){return!1}).bind("selectstart.DT",function(){return!1}),e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"&&(t.setAttribute("id",e.sTableId+"_paginate"),r.setAttribute("id",e.sTableId+"_first"),i.setAttribute("id",e.sTableId+"_previous"),o.setAttribute("id",e.sTableId+"_next"),u.setAttribute("id",e.sTableId+"_last"))},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=$.fn.dataTableExt.oPagination.iFullNumbersShowPages,r=Math.floor(n/2),i=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),s=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,o="",u,a,f,l,c=e.oClasses;i<n?(u=1,a=i):s<=r?(u=1,a=n):s>=i-r?(u=i-n+1,a=i):(u=s-Math.ceil(n/2)+1,a=u+n-1);for(f=u;f<=a;f++)s!=f?o+='<span class="'+c.sPageButton+'">'+f+"</span>":o+='<span class="'+c.sPageButtonActive+'">'+f+"</span>";var h=e.aanFeatures.p,p,d,v,m=function(n){var r=this.innerHTML*1-1;e._iDisplayStart=r*e._iDisplayLength,t(e),n.preventDefault()},g=function(){return!1};for(f=0,l=h.length;f<l;f++){if(h[f].childNodes.length===0)continue;var y=$("span:eq(2)",h[f]);y.html(o),$("span",y).bind("click.DT",m).bind("mousedown.DT",g).bind("selectstart.DT",g),p=h[f].getElementsByTagName("span"),d=[p[0],p[1],p[p.length-2],p[p.length-1]],$(d).removeClass(c.sPageButton+" "+c.sPageButtonActive+" "+c.sPageButtonStaticDisabled),s==1?(d[0].className+=" "+c.sPageButtonStaticDisabled,d[1].className+=" "+c.sPageButtonStaticDisabled):(d[0].className+=" "+c.sPageButton,d[1].className+=" "+c.sPageButton),i===0||s==i||e._iDisplayLength==-1?(d[2].className+=" "+c.sPageButtonStaticDisabled,d[3].className+=" "+c.sPageButtonStaticDisabled):(d[2].className+=" "+c.sPageButton,d[3].className+=" "+c.sPageButton)}}}}),$.extend(DataTable.ext.oSort,{"string-pre":function(e){return typeof e!="string"&&(e=e!==null&&e.toString?e.toString():""),e.toLowerCase()},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0},"html-pre":function(e){return e.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(e,t){return e<t?-1:e>t?1:0},"html-desc":function(e,t){return e<t?1:e>t?-1:0},"html-percent-pre":function(e){return e.replace(/<.*?>/g,"").replace(/%/,"")},"html-percent-asc":function(e,t){return e-t},"html-percent-desc":function(e,t){return t-e},"date-pre":function(e){var t=Date.parse(e);if(isNaN(t)||t==="")t=Date.parse("01/01/1970 00:00:00");return t},"date-asc":function(e,t){return e-t},"date-desc":function(e,t){return t-e},"numeric-pre":function(e){return e=="-"||e===""?0:e*1},"numeric-asc":function(e,t){return e-t},"numeric-desc":function(e,t){return t-e},"formatted-num-pre":function(e){return e=e==="-"||e===""?0:e.replace(/[^\d\-\.]/g,""),parseFloat(e)},"formatted-num-asc":function(e,t){return e-t},"formatted-num-desc":function(e,t){return t-e},"enum-pre":function(e){return e},"enum-asc":function(e,t){return e-t},"enum-desc":function(e,t){return t-e}}),$.extend(DataTable.ext.aTypes,[function(e){if(typeof e=="number")return"numeric";if(typeof e!="string")return null;var t="0123456789-￥",n="0123456789.￥%,",r,i=!1;r=e.charAt(0);if(t.indexOf(r)==-1)return null;for(var s=1;s<e.length;s++){r=e.charAt(s);if(n.indexOf(r)==-1)return null;if(r=="."){if(i)return null;i=!0}if(r=="￥")return null;if(r=="%"&&s!=e.length-1)return null}return"formatted-num"},function(e){var t=Date.parse(e);return t!==null&&!isNaN(t)||typeof e=="string"&&e.length===0?"date":null},function(e){if(typeof e=="string"&&e.indexOf("<")!=-1&&e.indexOf(">")!=-1){var t=e.replace(/<.*?>/g,"").toLowerCase();if(t!=null&&t!=""&&t.length>0){var n=t.charAt(t.length-1);return n=="%"?"html-percent":"html"}return"html"}return null},function(e){return typeof e!="string"||e.indexOf("<")==-1&&e.indexOf(">")==-1&&e.indexOf("~")==-1&&e.indexOf("周")==-1&&e.indexOf("次")==-1&&e.indexOf("费")==-1&&e.indexOf("元")==-1&&e.indexOf("s")==-1&&e.indexOf("y")==-1&&e.indexOf("r")==-1&&e.indexOf("日")==-1&&e.indexOf("岁")==-1&&e.indexOf("下")==-1&&e.indexOf("上")==-1&&e.indexOf("知")==-1&&e.indexOf("号")==-1&&e.indexOf("Y")==-1&&e.indexOf("时")==-1&&e.indexOf("户")==-1&&e.indexOf("钟")==-1&&e.indexOf("天")==-1&&e.indexOf("年")==-1&&e.indexOf("月")==-1&&e.indexOf("天")==-1&&e.indexOf("值")==-1&&e.indexOf("内")==-1&&e.indexOf("+")==-1?null:"enum"}]),$.fn.DataTable=DataTable,$.fn.dataTable=DataTable,$.fn.dataTableSettings=DataTable.settings,$.fn.dataTableExt=DataTable.ext})}(window,document),define("jquery.select",["libs/store.min","jquery"],function(e,t){function r(e){var n=[].slice.call(arguments,1),r=0,i=!0;return e=t.event.fix(e||window.event),e.type="mousewheel",e.wheelDelta&&(r=e.wheelDelta/120),e.detail&&(r=-e.detail/3),n.unshift(e,r),t.event.handle.apply(this,n)}t.fn.extend({sSelect:function(){return this.each(function(e,n){var r=this.id+"__jQSelect"+e||"__jQSelect"+e,i="dropdown_"+this.id;if(n.style.display!="none"&&t(this).parents()[0].id.indexOf("__jQSelect")<0){var s=this.tabIndex||0;t(this).before("<div id="+i+" class='selectlist margins'><div class='relative' id="+r+" tabIndex="+s+"></div></div>").prependTo(t("#"+r)),t("#"+r).append("<div class='dropselect'><h4></h4></div><ul id='dropselistbox'></ul>");var o=t(this).css("z-index"),u=t("#"+r+" option").index(t("#"+r+" option:selected")[0]);t("#"+r+" h4").attr("title",t("#"+r+" option:selected").text());var a=t("#"+r+" option:selected").text();t("#"+r+" h4").empty().append(a);if(r=="platformList__jQSelect0"&&a){var f=a.split("+");for(var e=f.length;e>0;e--)t("#"+r+" h4").prepend("<img src='images/"+f[e-1]+"_icon.png'/>")}var l=t("#"+r+" select").width(),c=t("#"+r+" select").height(),h=t("#"+r+" select").css("z-index"),p=parseFloat(t("#"+r+" select").css("left"));t("#"+i).css({height:c+"px","float":"left"}),t("#"+r).css({"z-index":h});var d=t("#"+i).width();p>0&&(t("#"+i).css({width:p}),d=p),t("#"+r+" ul").css({minWidth:d+40+"px",maxWidth:d+200+"px",display:"none"}),t("#"+r+" select").hide(),t("#"+r+" div").hover(function(){t("#"+r+" .dropselect").addClass("over")},function(){t("#"+r+" .dropselect").removeClass("over")});var v;t("#"+r+" ul").bind("mouseover",function(e){clearTimeout(v)}),t("#"+this.id+"_icon").bind("mouseover",function(e){t("#"+r+" .dropselect").addClass("over")}),t("#"+this.id+"_icont").bind("mouseover",function(e){t("#"+r+" .dropselect").addClass("over")});var m=function(){t("#"+r+" .dropselect").addClass("current"),t("#"+r+" ul").show();var e=t("#"+r).css("z-index");t.fn.setSelectValue(r),u=t("#"+r+" li").index(t(".selectedli")[0]);var n=t(window).scrollTop()+document.documentElement.clientHeight-t("#"+r).offset().top,i=t("#"+r+" ul").outerHeight(!0),s=t("#"+r).offset().top-t(window).scrollTop()-i;n<i&&s>0?t("#"+r+" ul").css({top:-i}):t("#"+r+" ul").css({top:t("#"+r+" h4").outerHeight(!0)}),t(window).scroll(function(){n<i?t("#"+r+" ul").css({top:-i}):t("#"+r+" ul").css({top:t("#"+r+" h4").outerHeight(!0)})}),t("#"+r+" li").click(function(n){u=t("#"+r+" li").index(this),t.fn.keyDown(r,u);var i=t("#"+r+" option:selected").text();t("#"+r+" h4").empty().append(i);if(r=="platformList__jQSelect0"&&i){var s=i.split("+");for(var o=s.length;o>0;o--)t("#"+r+" h4").prepend("<img src='images/"+s[o-1]+"_icon.png'/>")}t("#"+r+" h4").attr("title",t("#"+r+" option:selected").text()),t.fn.clearSelectMenu(r,e),n.stopPropagation(),n.cancelbubble=!0}).hover(function(){t("#"+r+" li").removeClass("over"),t(this).addClass("over").addClass("selectedli"),u=t("#"+r+" li").index(this)})};t("#"+r).bind("focus",function(){t("#"+r+" h4").addClass("over")}).bind("click",function(e){if(t("#"+r+" ul").css("display")=="block")return t.fn.clearSelectMenu(r,o),!1;m(),e.stopPropagation()}).bind("keydown",function(e){t(this).bind("keydown",function(e){if(e.keyCode==40||e.keyCode==38||e.keyCode==35||e.keyCode==36)return!1});var n=t("#"+r+" li.over"),i=t("#"+r+" option").length;switch(e.keyCode){case 9:return!0;case 13:t.fn.clearSelectMenu(r,o);break;case 27:t.fn.clearSelectMenu(r,o);break;case 33:n.removeClass("over"),u=0,t.fn.keyDown(r,u);break;case 34:n.removeClass("over"),u=i-1,t.fn.keyDown(r,u);break;case 35:n.removeClass("over"),u=i-1,t.fn.keyDown(r,u);break;case 36:n.removeClass("over"),u=0,t.fn.keyDown(r,u);break;case 38:e.preventDefault(),n.removeClass("over"),u==0?u=0:u--,t.fn.keyDown(r,u);break;case 40:e.preventDefault(),n.removeClass("over"),u==i-1?u=i-1:u++,t.fn.keyDown(r,u);break;default:e.preventDefault()}}).bind("blur",function(){return t.fn.clearSelectMenu(r,o),!1}).bind("selectstart",function(){return!1})}else if(t(this).parents()[0].id.indexOf("__jQSelect")>0){r=t(this).parents()[0].id,t.fn.setSelectValue(r);var l=t("#"+r+" select").width();t.browser.safari&&(l+=24);var p=parseFloat(t("#"+r+" select").css("left")),d=t("#"+i).width();p>0&&(t("#"+i).css({width:p}),d=p),t("#"+r+" ul").css({width:d-2+"px"}),this.style.display!="none"&&t(this).hide()}})},clearSelectMenu:function(e,n){e!=undefined&&(n=n||"auto",t("#"+e+" ul").empty().hide(),t("#"+e+" .dropselect").removeClass("over").removeClass("current"))},setSelectValue:function(e){var n=[];t.each(t("#"+e+" option"),function(r){n.push("<li class='FixSelectBrowser' id='"+e+r+"' title='"+t(this).text()+"'>"+t(this).text()+"</li>")}),n=n.join(""),t("#"+e+" ul").html(n);var r=t("#"+e+" option:selected").text();t("#"+e+" h4").html(r);if(e=="platformList__jQSelect0"&&r){var i=r.split("+");for(var s=i.length;s>0;s--)t("#"+e+" h4").prepend("<img src='images/"+i[s-1]+"_icon.png'/>")}t("#"+e+" h4").attr("title",t("#"+e+" option:selected").text()),t("#"+e+" li").eq(t("#"+e+" select")[0].selectedIndex).addClass("over").addClass("selectedli")},keyDown:function(n,r){var i=t("#"+n+" select");i[0].selectedIndex=r,i.change(),t("#"+n+" li:eq("+r+")").toggleClass("over");var s=t("#"+n+" option:selected").text();t("#"+n+" h4").html(s);if(n=="platformList__jQSelect0"&&s){var o=s.split("+");for(var u=o.length;u>0;u--)t("#"+n+" h4").prepend("<img src='images/"+o[u-1]+"_icon.png'/>")}t("#"+n+" h4").attr("title",t("#"+n+" option:selected").text()),e.set(n.split("__")[0],s)}});var n=["DOMMouseScroll","mousewheel"];t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],r,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("utils/dataTableUtil",["underscore","libs/store.min","text!templates/public/table.html","models/analysisTools/ChartRemark","i18n!nls/gameI18N","dataTable","jquery.select"],function(e,t,n,r,i){var s={dataTable:function(t){var n={pagination:!0,filter:!1,sort:!0,autoWidth:!1};t=e.extend(n,t);var r=t.$el,i=r.attr("id"),s=t.iLength;i||(i=(new Date).getTime()),t.id=i,r.attr("id",i);var o={sDom:'rt<"page"flp>',bPaginate:t.pagination,bLengthChange:!0,bFilter:t.filter,bSort:t.sort,bInfo:!0,bAutoWidth:t.autoWidth,iDisplayLength:s=="undefined"?parseInt(this._getCurPageiDisplayLength(t.id+"_page")):s,sPaginationType:"full_numbers",oLanguage:this._getPagiantionOption()};t.aaSorting&&(o.aaSorting=t.aaSorting);var u=r.dataTable(o);t.pagination&&$("#"+t.id+"_page").sSelect()},drawTable:function(t){var s=t.head.length;s&&(t.width=100/s+"%",t.dateIndex=e.indexOf(t.head,i.GameCommon.date));if(t.headType&&t.headType=="date"&&!CurrentRemarkDates){var o=this;r.fetchRemarkList({data:"productid="+Params.productID,success:function(r){CurrentRemarkDates=e.pluck(r,"remarkDate");var i=e.template(n,t);t.$el.html(i),o._renderDataTable(t)}})}else{var u=e.template(n,t);t.$el.html(u),this._renderDataTable(t)}},_renderDataTable:function(e){$.fn.dataTableExt.oPagination.two_button={fnInit:function(e,t,n){nPrevious=$("<a/>",{"class":"paginate_button previous"}),nNext=$("<a/>",{"class":"paginate_button next"});var r='<font class="pageIndex">#</font>/<font class="totalPages">TOTAL</font>';navLabel=$("<span />",{html:r,"class":"navigationLabel"}),$(t).append(nPrevious).append(navLabel).append(nNext),nPrevious.click(function(){e.oApi._fnPageChange(e,"previous"),n(e)}).bind("selectstart",function(){return!1}),nNext.click(function(){e.oApi._fnPageChange(e,"next"),n(e)}).bind("selectstart",function(){return!1})},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=e.aanFeatures.p;for(var r=0,i=n.length;r<i;r++){var s=$(n[r]).find("a.paginate_button");e._iDisplayStart===0?s.eq(0).attr("class","paginate_disabled_previous paginate_button"):s.eq(0).attr("class","paginate_enabled_previous paginate_button"),e.fnDisplayEnd()==e.fnRecordsDisplay()?s.eq(1).attr("class","paginate_disabled_next paginate_button"):s.eq(1).attr("class","paginate_enabled_next paginate_button")}}},$.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:Math.ceil((e._iDisplayStart+e._iDisplayLength)/e._iDisplayLength),iTotalPages:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},e.$el.find("table").dataTable({sDom:'rt<"tableview"flp>',bFilter:!1,bSort:!0,bInfo:!1,bAutoWidth:!1,iDisplayLength:parseInt(this._getCurPageiDisplayLength(e.id+"_page")),sPaginationType:"two_button",fnDrawCallback:function(){var e=this.fnGetData().length;e<=this.fnPagingInfo().iLength&&$(this).parent().children(".dataTables_paginate").hide(),$(this).parent().find(".dataTables_paginate .navigationLabel .pageIndex").text(""+this.fnPagingInfo().iPage+""),$(this).parent().find(".dataTables_paginate .navigationLabel .totalPages").text(this.fnPagingInfo().iTotalPages)},oLanguage:{sLengthMenu:"",sZeroRecords:i.GameCommon.sorryForNoData}})},_getPagiantionOption:function(){return{sLengthMenu:"<b class='l'>"+i.GameCommon.perPageDisplay+"</b> _MENU_ <b class='l'> "+i.GameCommon.records+"</b>",sZeroRecords:i.GameCommon.sorryForNoData,sInfo:i.GameCommon.currentDisplay+" _START_ "+i.GameCommon.to+" _END_ "+i.GameCommon.barTotal+" _TOTAL_ "+i.GameCommon.records,sInfoEmtpy:i.GameCommon.cannotFindData,sInfoFiltered:i.GameCommon.totalNumber+" _MAX_ "+i.GameCommon.records+")",sProcessing:i.GameCommon.loading,sSearch:i.GameCommon.seek,sUrl:"",oPaginate:{sFirst:i.GameCommon.first,sPrevious:i.GameCommon.pre,sNext:i.GameCommon.next,sLast:i.GameCommon.last}}},_getCurPageiDisplayLength:function(e){return t.get(e)||10}};return s}),define("utils/CurrencyUtil",{currencyTypeMapping:{CNY:"CNY(人民币)",USD:"USD(美元)",EUR:"EUR(欧元)",JPY:"JPY(日元)",TWD:"TWD(新台币)",HKD:"HKD(港币)",GBP:"GBP(英镑)",AUD:"AUD(澳元)",RUB:"RUB(卢布)"},currency2Dollars:{CNY:.16667,HKD:.125,TWD:.03333,EUR:1.11,USD:1,GBP:1.43,AUD:1,JPY:.01176,RUB:.0303},dollar2Currency:{CNY:6,HKD:8,TWD:30,EUR:.9,USD:1,GBP:.7,AUD:1,JPY:85,RUB:33},standardCash2SepicalCurrency:function(e,t){if(t=="CNY")return parseFloat(parseFloat(e).toFixed(2));var n=this.currency2Dollars.CNY*e*this.dollar2Currency[t];return parseFloat(n.toFixed(2))},getCurrencySymbol:function(e){e||(e="CNY");var t={CNY:"¥",HKD:"$",TWD:"NT$",EUR:"€",USD:"$",GBP:"£",AUD:"$",JPY:"¥",RUB:"руб"};return t[e]}}),define("text!templates/summary/index.html",[],function(){return'<div class="content r">\r\n	<!-- Concurrent Users begin -->\r\n	<div class="infoBar after">\r\n		<ul class="l">\r\n			<li class="infoBar1"><span style="display:block"><%=GameCommon.equipmentActive%></span><strong id="totalDeviceInstallNum"></strong></li>\r\n			<li class="infoBar2"><span style="display:block"><%=GameCommon.newIncreasedPlayer%></span><strong id="totalNewPlayerNum"></strong></li>\r\n			<li class="infoBar3"><span style="display:block"><%=GameCommon.payPlayer%></span><strong id="totalChargePlayerNum"></strong></li>\r\n			<li class="infoBar4"><span style="display:block"><%=GameCommon.income%></span><strong id="totalIncomeNum"></strong></li>\r\n		</ul>\r\n<!-- 		<div class="RegionalServices l">\r\n			区服\r\n			<strong>12、13</strong>\r\n		</div> -->\r\n		<div class="r relative" id="datePicker">\r\n\r\n		</div> \r\n	</div>\r\n	<div class="boxmax" id="onlineUsersCode">\r\n		<div class="title">\r\n			<strong class="l"><%=Summary.Summary.onlineTrend%></strong> \r\n		</div>\r\n		<div class="tablebox">\r\n			<div class="gauge after">\r\n				<ul class="canvasDIV l">\r\n					<li>\r\n						<%=GameCommon.avg%>ACU\r\n					</li>\r\n					<li>\r\n						<strong id="acuavgNum"></strong>\r\n					</li>\r\n					<li class="relative">\r\n						<canvas width=180 height=100 id="canvas-acuavg"></canvas>\r\n					</li>\r\n					<li>\r\n						<span>Max<br><font id="maxNum"></font></span>\r\n					</li>\r\n				</ul>\r\n				<div class="center">\r\n					<div id="chart-acupcu" style="width: 100%; height: 200px; margin: 0 auto;padding-top: 20px">\r\n						<div class="login">\r\n							<img src="images/loading.gif" height="25px"></img> <br>\r\n							<%=GameCommon.loadingData%>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!--关键指标-->\r\n	<div class="boxmax">\r\n		<div id="keyCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=Summary.Summary.keyIndicator%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div role="tabbar" class="box_top">\r\n	                <a class="tab hover" data-tab="newInstallAndPlayer"><%=GameCommon.newInstallAndPlayer%></a>\r\n<!-- 	                <a class="tab" data-tab="newPlayer"><%=Summary.Summary.newPlayer%></a> -->\r\n	                <a class="tab" data-tab="activePlayer"><%=GameCommon.activePlayer%></a>\r\n	                <a class="tab" data-tab="chargePlayer"><%=GameCommon.payPlayer%></a>\r\n	                <a class="tab" data-tab="income"><%=GameCommon.income%></a>\r\n	                <div class="info l">\r\n	                	<span id="sum-span">SUM <span class="info_display"><%=GameCommon.equipmentAcount%></span>：<font id="keycode-sum"></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>AVG <span class="info_display"><%=GameCommon.equipmentAcount%></span>：<font id="keycode-avg"></font>\r\n	                </div>\r\n				</div>\r\n				<div class="picbox_chart_table" role="remarkBottom">\r\n					<div id="keyCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="keyCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n\r\n	<div class="boxmax">\r\n		<div id="chargeCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=GameCommon.payPermeate%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div role="tabbar" class="box_top">\r\n	                <a class="tab hover" data-tab="paidRate"><%=GameCommon.dailyPayRate%></a>\r\n	                <a class="tab" data-tab="dayARPU"><%=GameCommon.day%>ARPU</a>\r\n	                <a class="tab" data-tab="dayARPPU"><%=GameCommon.day%>ARPPU</a>\r\n	                <div class="info l">\r\n	                	AVG：<font id="charge-avg"></font>\r\n	                </div>\r\n				</div>\r\n				<div class="picbox_chart_table" role="remarkBottom">\r\n					<div id="chargeCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="chargeCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!--留存-->\r\n	<div class="boxmax">\r\n		<div id="retentionCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=Summary.Summary.playerRetain%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div role="tabbar" class="box_top">\r\n				 	<a class="tab hover" data-tab="newPlayerRetention"><%=Player.Retention.newplayerRetention%></a>\r\n					<a class="tab" data-tab="newDeviceRetention"><%=Player.Retention.installRetention%></a>\r\n					<div class="info l">\r\n	                	<span class="title-data">AVG：<%=Summary.Summary.morrow%></span><font id="avgDay01"></font> | <span class="title-data"><%=Summary.Summary.servenDays%></span><font id="avgDay07"></font> | <span class="title-data"><%=Summary.Summary.thirtyDays%></span><font id="avgDay30"></font>\r\n	                </div>\r\n				</div>\r\n				<div class="picbox_chart_table" role="remarkBottom">\r\n					<div id="retentionCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="retentionCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n	<div class="boxmax">\r\n		<div id="playTimeNumsCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=GameCommon.avgGamingTimeCount%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div class="box_top">\r\n	                <div class="info r">\r\n	                	AVG：<%=Summary.Summary.avgEveryPlayerGaming%><font id="chart-playtimes-num"></font>\r\n	                </div>\r\n				</div>\r\n				<div class="picbox_chart_table" role="remarkBottom">\r\n					<div id="playTimeNumsCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="playTimeNumsCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n\r\n'}),define("utils/excelDataUtil",["underscore","i18n!nls/gameI18N","models/Constant"],function(e,t,n){var r={buildArray:function(n){var r=new Array;r.push(n.head);var i=e.indexOf(n.head,t.GameCommon.date),s=n.body||"";typeof s=="string"&&r.push(new Array([t.GameCommon.sorryForNoData]));if(typeof s=="object"){n.body=e.map(n.body,function(e){return i!=-1&&(e[i]=e[i].replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")),e});for(var o=0;o<n.body.length;o++)r.push(n.body[o])}return this.arrayToJson(r)},arrayToJson:function(e){var t="[";for(var r=0;r<e.length;r++){var i=e[r],s="";for(var o=0;o<i.length;o++)i[o].toString().indexOf("'")&&(i[o]=i[o].toString().replace(new RegExp("'","gm"),"\\'")),s=s+i[o]+"^";t=t+"{'"+n.TABLE_DATA_KEY+"':'"+s.substring(0,s.length-1)+"'},"}return t.substring(0,t.length-1)+"]"},tableToJson:function(e){var t=!1;navigator.userAgent.indexOf("Firefox")>0&&(t=!0);var r="[";for(var i=0;i<e.rows.length;i++){var s=e.rows[i],o="";for(var u=0;u<s.cells.length;u++){var a="";t?(s.cells[u].textContent||(s.cells[u].textContent="--"),a=s.cells[u].textContent):(s.cells[u].innerText||(s.cells[u].innerText="--"),a=s.cells[u].innerText),a.toString().indexOf("'")&&(a=a.toString().replace(new RegExp("'","gm"),"\\'")),a.toString().indexOf('"')&&(a=a.toString().replace(new RegExp('"',"gm"),"")),o=o+a+"^"}r=r+"{'"+n.TABLE_DATA_KEY+"':'"+o.substring(0,o.length-1)+"'},"}return r.substring(0,r.length-1)+"]"}};return r}),define("text!templates/public/indicator.html",[],function(){return"<div class='norm'>\r\n	<i></i>\r\n	<div class='normTitle'><%=title%></div>\r\n	<ul>\r\n		<% _.each(list,function(o){%>\r\n			<li class=\"after\">\r\n				<font><%= o.value%></font>\r\n				<span><%= o.key%></span>\r\n			</li>\r\n		<%});%>\r\n	</ul>\r\n</div>\r\n"}),define("text!templates/public/hoverTooltip.html",[],function(){return"<div class='exp-box'>\r\n	<em class='icon-exp'>三角图标</em>\r\n	<div class='noun-exp' style='width:<%=_contentWidth%>;'><%=_content%></div>\r\n</div>"}),define("text!templates/public/excelExport.html",[],function(){return'<form style="display: none;" action="/game/excelExport/export" method="post" id="excelExportForm">\r\n	<input type="text" name="excelName" value="<%=excelName%>"/>\r\n	<input type="text" name="excelArray" value="<%=excelArray%>"/>\r\n</form>'}),define("text!templates/analysisTools/chartBottomRemarkBtn.html",[],function(){return'<div class="ChartNotes" id="chartBottomRemarkBtn">\r\n	<img src="images/onNotes.gif" role="remarkBtn" />\r\n	<div role="remarkDiv" style="display: none;"></div>\r\n</div>'}),define("text!templates/analysisTools/addRemark.html",[],function(){return'<div class="EditPop_top timetop">\r\n    <b class="l"><%=AnalysisTools.ChartRemark.editRemark%></b>\r\n</div>\r\n<div class="Poptxt">\r\n    <ul id="levelStep" class="EditPop ChartNotes_Pop">\r\n<li>\r\n	<label><%=AnalysisTools.ChartRemark.remarkDate%></label>\r\n	<input type="text" class="Timeinput" style="width:92px;" id="remarkDate" value="" readonly="readonly">\r\n</li>\r\n<li>\r\n	<label><%=AnalysisTools.ChartRemark.remarkTitle%></label>\r\n	<input class="textinput" type="text" id="remarkTitle" value="">\r\n</li> 	\r\n<li class="textarea">\r\n	<label><%=AnalysisTools.ChartRemark.remarkContent%></label>\r\n	<textarea id="remarkContent" value=""></textarea>\r\n</li> 	 	\r\n</ul>\r\n     <div class="opeDiv after product_opeDiv">\r\n         <a id="remarkSaveBtn" class="timecolse r Confirm"><%=AnalysisTools.ChartRemark.saveAndClose%></a>\r\n         <a id="remarkCancelBtn" class="r Cancel"><%=AnalysisTools.ChartRemark.cancel%></a>\r\n     </div>\r\n </div>'}),define("jquery.tabs",["i18n!nls/gameI18N","underscore","utils/TabActionCache","utils/excelDataUtil","utils/remarkUtil","text!templates/public/indicator.html","text!templates/public/hoverTooltip.html","text!templates/public/excelExport.html","text!templates/analysisTools/chartBottomRemarkBtn.html","text!templates/analysisTools/addRemark.html"],function(e,t,n,r,i,s,o,u,a,f){$.fn.extend({tabs:function(o){var l,c,h;if(t.isFunction(o))l=o,c=!0,h=!0;else if(t.isObject(o)){var p={callback:null,excel:!1,indicator:!0,hoverTooltip:!1};o=t.extend(p,o),l=o.callback,c=o.excel,h=o.indicator,hasHoverTooltip=o.hoverTooltip}var d=$(this),v=d.attr("id"),m=d.find('div[role="tabbar"]'),g=d.find('div[role="chart"]'),y=d.find('div[role="table"]'),b=d.find('div[role="remarkBottom"]'),w=d.find('div[role="title"]'),E=n.get(v);E&&E.r?(E["r"]=="c"?y.hide():g.hide(),E["r"]=="c"?(d.find('a[role="chartBtn"]').addClass("hover"),d.find('a[role="tableBtn"]').removeClass("hover")):E["r"]=="t"&&(d.find('a[role="chartBtn"]').removeClass("hover"),d.find('a[role="tableBtn"]').addClass("hover"))):y.hide(),d.undelegate(),d.delegate('a[role="chartBtn"]',"click",function(){$(this).addClass("hover"),$(this).next('a[role="tableBtn"]').removeClass("hover"),y.hide(),g.show(),n.set(v,"c","r")}),d.delegate('a[role="tableBtn"]',"click",function(){$(this).addClass("hover"),$(this).prev('a[role="chartBtn"]').removeClass("hover"),g.hide(),y.show(),n.set(v,"t","r")}),d.delegate('td[role="hasMark"]',"click",function(e){var t=$(this).html(),n={remarkDate:$(this).html().replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"),name:t,x:e.pageX,y:e.pageY};i.popRemark(n)});if(b.length){var S=b.find('div[id="chartBottomRemarkBtn"]').length;S<=0&&b.append(a),b.undelegate(),b.delegate('img[role="remarkBtn"]',"click",function(){var e=$(this).siblings("div[role='remarkDiv']"),t=$(this),n=t.attr("src").split("/")[1];n==="onNotes.gif"?(t.attr("src","images/offNotes.gif"),e.show(),i.queryRemarkList(e)):(t.attr("src","images/onNotes.gif"),e.hide())});var x=b.find("div[role='remarkDiv']");b.delegate('div[role="remarkDiv"] a[id="edit"]',"click",function(e){var t=$(e.currentTarget).attr("data-id");i.queryRemarkById(x,t)}),b.delegate('div[role="remarkDiv"] a[id="add"]',"click",function(n){i.popRemarkDiv(t.template(f,e),x)}),b.delegate('div[role="remarkDiv"] a[id="delete"]',"click",function(e){i.deleteRemarkById(e)})}var T=this;c&&(d.attr("id")!="consumeHabbitAnalasisCode"&&(w.find('a[role="excel"]').remove(),w.append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>')),d.delegate('a[role="excel"]',"click",function(){var e="";if(T.excelName)e=T.excelName;else{var n=d.attr("id"),i=T.getDirectChildHtml($("#"+n).find('div[role="title"]>strong')),s=T.getDirectChildHtml($("#"+n).find('div[role="tabbar"]>a.hover'));s&&(s="-"+s);var o="("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")";e=i+s+o}var a=r.buildArray({head:T.head,body:T.body}),f=t.template(u,{excelName:e,excelArray:a});$("body").append(f),$("#excelExportForm").submit(),$("#excelExportForm").remove()}));if(h){w.find('a[role="indicator"]').remove(),$indicatorBtn=$('<a role="indicator" class="Cancel r relative minCancel" style="z-index:10"><font class="indicator">?</font></a>'),w.find("*:eq(0)").before($indicatorBtn);for(var N=$('a[role="indicator"]').length,C=0;N>=0;N--)$('a[role="indicator"]:eq('+C+")").css({"z-index":"1"+N}),C++;d.delegate('a[role="indicator"]',"click",function(n){$target=$(n.currentTarget),$c=$target.children("div"),hasLoaded=!!$c.length;if(hasLoaded)$c.toggle();else{var r=d.attr("id"),i=e.Indicator[r],o=t.template(s,{list:i,title:e.Indicator.DataIndicatorExplain.explain});$target.append(o)}})}d.delegate("th.hover-tooltip p","hover",function(e){T.hoverTooltip(e,$(e.currentTarget).parent(".hover-tooltip").attr("data-th")||"")}),d.delegate("a[data-tab]","hover",function(e){T.hoverTooltip(e,$(e.currentTarget).attr("data-tab")||"")}),d.delegate("strong.l","hover",function(e){T.hoverTooltip(e,d.attr("id")||"")});if(l){var k='<div class="login"><img src="images/loading.gif" height="25px"></img> <br>'+e.GameCommon.loadingData+"</div>";if(m.length){m.undelegate(),m.delegate("a","click",function(){var e=$(this).attr("data-tab");m.trigger("change.tabs",e)}),m.bind("change.tabs",function(e,t){n.set(v,t,"n"),m.find("a").removeClass("hover"),m.find("[data-tab='"+t+"']").addClass("hover"),g.html(k),y.html(k),l(t)});var E=n.get(v),L=E&&E.n?E.n:m.find("a.hover").attr("data-tab");m.trigger("change.tabs",L)}else g.html(k),y.html(k),l()}return this},hoverTooltip:function(n,r){var i=e.IndicatorTip[r];if(i){var s=$(n.currentTarget).children("div"),u=!!s.length;if(n.type=="mouseenter")if(u)s.show();else{var a=300;parseInt(this.getCurrentStrWidth(i,12))<300&&(a=parseInt(this.getCurrentStrWidth(i,12)));var f=t.template(o,{_content:i,_contentWidth:a+"px"});$(n.currentTarget).append(f)}else n.type=="mouseout"&&u&&s.hide()}},getCurrentStrWidth:function(e,t){var n=$("<pre>").hide().appendTo(document.body);$(n).html(e).css("font",t+"x");var r=n.width();return n.remove(),r},getDirectChildHtml:function(e){return e.contents().filter(function(){return this.nodeType===3}).text()||""}})}),define("views/summary/SummaryView",["backbone","views/public/DatePicker","views/public/SelectView","models/player/NewPlayer","models/player/Retention","models/player/ActivePlayer","models/revenue/IncomeData","models/revenue/PayPermeate","models/concurrent/ConcurrentUser","models/player/Behavior","models/Constant","utils/HighchartUtil","utils/GaugeUtil","utils/RegexUtil","utils/dataTableUtil","utils/CurrencyUtil","utils/UnitMappingUtil","text!templates/summary/index.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=e.View.extend({el:"#container",initialize:function(){$("#container").html(_.template(g,y)),new t({el:"#datePicker",style:"summary"}),this.params=_.clone(Params),this.params.partnerID="",this.params.gameserverID="";if(Params.displayCurrency==null||Params.displayCurrency=="")Params.displayCurrency="CNY";this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.displayCurrency=Params.displayCurrency,this.render()},render:function(){return this.renderHeader(),this.renderConrurrent(),this.renderKeyCode(),this.renderCharge(),this.renderRetention(),this.renderPlayTimes(),this},renderHeader:function(){var e=this;o.fetchChargePlayerNumsBetweenDays({data:this.params,success:function(e){$("#totalChargePlayerNum").html(p.formatDigit(e))}}),o.fetchIncomeNumsBetweenDays({data:this.params,success:function(t){$("#totalIncomeNum").html(e.ctUnit+p.formatMoneyDigit(t))}}),r.fetchNewPlayerList({data:this.params,success:function(e){$("#totalNewPlayerNum").html(p.formatDigit(_.sum(_.pluck(e,"value"))))}}),r.fetchInstallList({data:this.params,success:function(e){$("#totalDeviceInstallNum").html(p.formatDigit(_.sum(_.pluck(e,"value"))))}})},renderKeyCode:function(){var e=this,t=$("#keyCode").tabs(function(n){var i,u,a,f="",l=null;switch(n){case"newInstallAndPlayer":i=r,u="fetchInstallNewPlayerList",a=y.GameCommon.newInstallAndPlayer,legend=!0;break;case"activePlayer":i=s,u="newAndOldDauList",a=y.GameCommon.activePlayer,l="normal",legend=!0;break;case"chargePlayer":i=o,u="fetchNewAndOldChargePlayers",l="normal",a=y.GameCommon.payPlayer,legend=!0;break;case"income":i=o,u="incomeNumList",a=y.GameCommon.income,f="#"+e.ctUnit,legend=!1}i[u]({data:e.params,success:function(r){var i,s,o,u,h,g,b;if(n==="chargePlayer"||n==="activePlayer"){var w=r["new"],E=r.old,S=r.total;i=_.pluck(S,"item"),s=_.pluck(S,"value"),u=_.pluck(w,"value"),h=_.pluck(E,"value"),n=="activePlayer"?o=[{name:y.Player.ActivePlayer.newDau,data:u,fillOpacity:.5},{name:y.Player.ActivePlayer.oldDau,data:h,fillOpacity:.5}]:o=[{name:y.Summary.Summary.newChargePlayer,data:u,fillOpacity:.5},{name:y.Summary.Summary.oldChargePlayer,data:h,fillOpacity:.5}]}else n==="newInstallAndPlayer"?(i=_.pluck(r.install,"item"),g=_.pluck(r.install,"value"),b=_.pluck(r.newPlayer,"value"),o=[{name:y.GameCommon.newIncreasedPlayer,data:b},{name:y.GameCommon.equipmentActive,data:g}]):(i=_.pluck(r,"item"),s=_.pluck(r,"value"),o=[{name:a,data:s}]);var x=null,T=null,N=null;n==="income"?(T=[y.GameCommon.date,a+"("+e.ctUnit+")"],N=[y.GameCommon.date,a+"("+v.getCurrencySymbol(Params.displayCurrency)+")"],x=_.zip(i,s)):n==="chargePlayer"?(T=[y.GameCommon.date,y.Summary.Summary.newChargePlayer+"("+m.getUnitByItem(m.getAccountItem())+")",y.Summary.Summary.oldChargePlayer+"("+m.getUnitByItem(m.getAccountItem())+")",y.GameCommon.total+"("+m.getUnitByItem(m.getAccountItem())+")"],x=_.zip(i,u,h,s)):n==="newInstallAndPlayer"?(T=[y.GameCommon.date,y.GameCommon.equipmentActive+"("+m.getUnitByItem(m.getDeviceItem())+")",y.GameCommon.newIncreasedPlayer+"("+m.getUnitByItem(m.getAccountItem())+")"],x=_.zip(i,_.map(g),_.map(b))):n==="activePlayer"&&(T=[y.GameCommon.date,y.Player.ActivePlayer.newDau+"("+m.getUnitByItem(m.getAccountItem())+")",y.Player.ActivePlayer.oldDau+"("+m.getUnitByItem(m.getAccountItem())+")",y.GameCommon.total+"("+m.getUnitByItem(m.getAccountItem())+")"],x=_.zip(i,u,h,s)),n==="income"?c.chart({id:"keyCode-chart",x:i,series:o,legend:legend,stacking:l,yLeftUnit:m.getMoneyItem(),xType:"date",unitItem:[m.getMoneyItem()]}):n==="chargePlayer"||n==="activePlayer"?c.chart({id:"keyCode-chart",x:i,series:o,legend:legend,stacking:l,xType:"date",colors:["#6DC5FD","#CCCCCC"],unitItem:[m.getAccountItem(),m.getAccountItem()],hasTotal:!0}):c.chart({id:"keyCode-chart",x:i,series:o,legend:legend,stacking:l,xType:"date",unitItem:[m.getAccountItem(),m.getDeviceItem()]}),d.drawTable({head:T,body:x,$el:$("#keyCode-table"),headType:"date"}),n==="income"?t.head=N:t.head=T,t.body=x,n==="activePlayer"||n==="chargePlayer"?($(".info_display").hide(),$("#sum-span").hide(),$("#keycode-avg").html("<em>"+f.substring(1)+p.formatDigit(_.avg(e.remarkObj2value(s)))+"</em>")):n==="newInstallAndPlayer"?($(".info_display").show(),$("#sum-span").show(),$("#keycode-sum").html("<em>"+p.formatDigit(_.sum(e.remarkObj2value(g)))+"</em> | <em>"+p.formatDigit(_.sum(e.remarkObj2value(b)))+"</em>"),$("#keycode-avg").html("<em>"+p.formatDigit(_.avg(e.remarkObj2value(g)))+"</em> | <em>"+p.formatDigit(_.avg(e.remarkObj2value(b)))+"</em>")):($(".info_display").hide(),$("#sum-span").show(),$("#keycode-sum").html("<em>"+e.ctUnit+p.formatMoneyDigit(_.sumForMoney(e.remarkObj2value(s)))+"</em>"),$("#keycode-avg").html("<em>"+e.ctUnit+p.formatMoneyDigit(_.avgForMoney(e.remarkObj2value(s)))+"</em>"))}})})},renderConrurrent:function(){a.fetchACUPCU({data:this.params,success:function(e){var t,n,r,i;t=e.acu;var s=_.pluck(t,"item"),o=_.pluck(t,"value"),u=[{name:"ACU",data:o}];r=_.avg(o);if(e.pcu){n=e.pcu;var a=_.pluck(n,"value");u.push({name:"PCU",data:a}),i=_.max(a)}else i=_.max(o);c.chart({id:"chart-acupcu",x:s,series:u,title:"ACU & PCU",xType:"date",unitItem:[m.getAccountItem(),m.getAccountItem()]}),$("#acuavgNum").html(p.formatDigit(r)),$("#maxNum").html(p.formatDigit(i)),h.draw({id:"canvas-acuavg",maxValue:i,currentValue:r})}}),$("#onlineUsersCode").tabs({hoverTooltip:!0})},renderCharge:function(){var e,t,n,r=!1,i=this,s="",o=$("#chargeCode").tabs(function(a){switch(a){case"paidRate":e=u,t="fetchDailyRateOfPay",n=y.GameCommon.dailyPayRate,r=!0,s="%";break;case"dayARPU":e=u,t="fetchDailyARPU",n=y.GameCommon.day+"ARPU",s="#"+i.ctUnit,r=!1;break;case"dayARPPU":e=u,t="fetchDailyARPPU",n=y.GameCommon.day+"ARPPU",s="#"+i.ctUnit,r=!1}e[t]({data:i.params,success:function(e){var t=_.pluck(e,"item"),r=_.pluck(e,"value"),i=[{name:n,data:r}];s.indexOf("#")!=-1?(i=[{name:n,data:r}],$("#charge-avg").html("<em>"+s.substring(1)+p.formatMoneyDigit(_.avgForMoney(r))+"</em>")):$("#charge-avg").html("<em>"+p.formatDigit(_.avg(r))+s+"</em>"),s.indexOf("#")!=-1?c.chart({id:"chargeCode-chart",x:t,series:i,yLeftUnit:m.getMoneyItem(),xType:"date",unitItem:[m.getMoneyItem()]}):c.chart({id:"chargeCode-chart",x:t,series:i,yLeftUnit:m.getPercentItem(),xType:"date",unitItem:[m.getPercentItem()]});var u=null,a=null,f=null;s.indexOf("#")!=-1?(f=[y.GameCommon.date,n+"("+s.substring(1)+")"],a=[y.GameCommon.date,n+"("+v.getCurrencySymbol(Params.displayCurrency)+")"],u=_.zip(t,r)):(f=[y.GameCommon.date,n+"("+s+")"],u=_.zip(t,r)),d.drawTable({head:f,body:u,$el:$("#chargeCode-table"),headType:"date"}),s.indexOf("#")!=-1?o.head=a:o.head=f,o.body=u}})})},remarkObj2value:function(e){return _.map(e,function(e){return typeof e=="object"&&(e=e.y),e})},renderRetention:function(){var e=this,t=$("#retentionCode").tabs(function(n){this.retentionBean={type:n},e.params.retentionBean=this.retentionBean,i.fetchDay1Day7Day30Retention({data:e.params,success:function(e){var n=_.pluck(e.day01,"item"),r=_.pluck(e.day01,"value"),i=_.pluck(e.day07,"value"),s=_.pluck(e.day30,"value"),o=$.map(r,function(e){return parseInt(e)>-1?e:null});_day07=$.map(i,function(e){return parseInt(e)>-1?e:null}),_day30=$.map(s,function(e){return parseInt(e)>-1?e:null});var u=_.avg(o),a=_.avg(_day07),f=_.avg(_day30),l=[{name:y.Summary.Summary.morrowRetainRate,data:_.map(r,function(e){return parseInt(e)>-1?e:null})},{name:y.Summary.Summary.sevenDaysRetainRate,data:_.map(i,function(e){return parseInt(e)>-1?e:null})},{name:y.Summary.Summary.thiryDaysRetainTate,data:_.map(s,function(e){return parseInt(e)>-1?e:null})}];u=="--"?$("#avgDay01").html("<em class='no-data'>"+u+"% </em>"):$("#avgDay01").html("<em>"+u+"% </em>"),a=="--"?$("#avgDay07").html("<em class='no-data'>"+a+"% </em>"):$("#avgDay07").html("<em>"+a+"% </em>"),f=="--"?$("#avgDay30").html("<em class='no-data'>"+f+"% </em>"):$("#avgDay30").html("<em>"+f+"% </em>"),c.chart({id:"retentionCode-chart",x:n,series:l,legend:!0,yLeftUnit:m.getPercentItem(),unitItem:[m.getPercentItem(),m.getPercentItem(),m.getPercentItem()],xType:"date"});var h=_.zip(n,_.map(r,function(e){return parseInt(e)>-1?e:"--"}),_.map(i,function(e){return parseInt(e)>-1?e:"--"}),_.map(s,function(e){return parseInt(e)>-1?e:"--"})),p=[y.GameCommon.date,y.Summary.Summary.morrowRetainRate+"(%)",y.Summary.Summary.sevenDaysRetainRate+"(%)",y.Summary.Summary.thiryDaysRetainTate+"(%)"];d.drawTable({head:p,body:h,$el:$("#retentionCode-table"),headType:"date"}),t.head=p,t.body=h}})})},renderPlayTimes:function(){var e=_.clone(Params);e.player={userType:"activePlayer",dayType:"day"},e.partnerID="";var t=$("#playTimeNumsCode").tabs(function(){f.fetchAvgGameTimesList({data:e,success:function(e){var n=_.pluck(e.useTimeList,"item"),r=_.pluck(e.useTimeList,"value"),i=_.pluck(e.useTimesList,"value"),s=_.pluck(e.dauList,"value"),o=[],u=[],a=0,f=0;for(var l=0;l<r.length;l++)s[l]==0?(o[l]=0,u[l]=0):(o[l]=Math.round(r[l]/60/s[l]),u[l]=Math.round(i[l]/s[l]*10)/10),f+=s[l],a+=r[l];var h=0,p=y.Summary.Summary.minute;a/f<60?(h=f==0?0:Math.round(a/f),p=y.Summary.Summary.second):h=f==0?0:Math.round(a/60/f),$("#chart-playtimes-num").html("<em>"+h+"</em>"+p);var v=[{name:y.GameCommon.timeTimes,data:u,type:"column",yAxis:1},{name:y.GameCommon.timeMinute,data:o}];c.chart({id:"playTimeNumsCode-chart",x:n,series:v,yLeftUnit:m.getTimeItem(),yRightUnit:m.getTimesItem(),xType:"date",unitItem:[m.getTimesItem(),m.getTimeItem()]});var g=_.zip(n,u,o),b=[y.GameCommon.date,y.Player.Behavior.avgGamingCount+"("+y.GameCommon.times+")",y.Player.Behavior.avgGamingTime+"("+y.GameCommon.point+")"];d.drawTable({head:b,body:g,$el:$("#playTimeNumsCode-table"),headType:"date"}),t.head=b,t.body=g}})})}});return b}),define("utils/CheckUtil",{isArrRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1}}),define("models/datasummary/DailyReport",["models/BaseModel"],function(e){var t=[{name:"operationReports",url:"/v1/dailyReport/operationReports"},{name:"saveReportsMetrics",url:"/v1/dailyReport/saveReportsMetrics"},{name:"fetchReportsMetrics",url:"/v1/dailyReport/fetchReportsMetrics"},{name:"fetchPartnerReports",url:"/v1/dailyReport/fetchPartnerReports"},{name:"updatePartnerFocus",url:"/v1/dailyReport/updatePartnerFocus"},{name:"fetchReportsSubscribeSetting",url:"/v1/dailyReport/fetchReportsSubscribeSetting"},{name:"insertSubscribeSetting",url:"/v1/dailyReport/insertSubscribeSetting"},{name:"updateSubscribeStatus",url:"/v1/dailyReport/updateSubscribeStatus"}];return e.init(t)}),define("text!templates/summary/summarizeDay.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop after">\r\n			<a class="time l relative">\r\n				<span>\r\n					<font class="calendar" id="calendarDisplay" style="width:102px"></font>\r\n				</span>\r\n				<input id="startTime_Datepicker"  class="Timeinput startTime_Datepicker" type="text" name="Time" />\r\n			</a>\r\n			<a class="time hover report r relative" style="float:right">\r\n				<img id=\'subscribeBtn\' src="images/off.jpg" class="l" data-value="">\r\n				<font class="l"><%=DaySummary.subscribeReport%></font>\r\n				<img id=\'subscribeSetting\' src="images/setUp.png" class="l setup"/>\r\n			</a>\r\n		</div>\r\n		<div class="title">\r\n			<strong><%=DaySummary.operatorReportTitle%></strong>\r\n		</div>\r\n		<div class="tablebox" id="dailyReportDiv">\r\n			<div class="login">\r\n				<img src="images/loading.gif" height="25px"></img> <br>\r\n				<%=GameCommon.loadingData%>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n\r\n	<div class="boxmax">\r\n		<div class="title">\r\n			<strong><%=DaySummary.partnerReportTitle%></strong>\r\n		</div>\r\n		<div class="tablebox" id="partnerReportDiv">\r\n			<div class="login">\r\n				<img src="images/loading.gif" height="25px"></img> <br>\r\n				<%=GameCommon.loadingData%>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!templates/summary/dailyReportTable.html",[],function(){return'<table class="table_style_Report" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n	<thead id="dailyReport-thead">\r\n		<tr>\r\n			<th width="140"><a id="addMetricsBtn" href="javascript:void(0)"><%=i18n.DaySummary.customMetrics%></a></th>\r\n			<th><font class="blue"><%=Time[0]%></font></th>\r\n			<th class="blue"><%=i18n.DaySummary.prevDay%><font><%=Time[7]%></font></th>\r\n			<th class="border_right blue"><%=i18n.DaySummary.prevWeek%><font><%=Time[1]%></font></th>\r\n			<th><%=Time[1]%></th>\r\n			<th><%=Time[2]%></th>\r\n			<th><%=Time[3]%></th>\r\n			<th><%=Time[4]%></th>\r\n			<th><%=Time[5]%></th>\r\n			<th><%=Time[6]%></th>\r\n			<th><%=Time[7]%></th>\r\n			<!-- <th><%=i18n.DaySummary.operatorDailyReport.trend%></th> -->\r\n		</tr>\r\n	</thead>\r\n	<tbody id="dailyReport-tbody">\r\n		<tr>\r\n			<th colspan="11" class="left"><%=i18n.DaySummary.operatorDailyReport.userCategory%></th>\r\n		</tr>\r\n		<%\r\n			if(User.length == 0){\r\n		%>\r\n				<tr><td colspan="11"><%=i18n.DaySummary.noData%></td></tr>\r\n		<%		\r\n			}\r\n			_.each(User,function(data){\r\n		%>\r\n			<tr>\r\n				<td class="left"><%=i18n.DaySummary.operatorDailyReport[data.item]%></td>\r\n				<td><%=data.value[7].value%></td>\r\n				<%if(data.value[7].value=="--"){%>\r\n					<td class="green">\r\n						<img src="images/equal.gif">\r\n					</td>\r\n					<td class="border_right red">\r\n						<img src="images/equal.gif">\r\n					</td>\r\n				<%}else{%>\r\n					<td class="green">\r\n						<%\r\n							var diff = data.value[7].value-data.value[6].value; \r\n							if(diff<0){\r\n						%>\r\n								<img src="images/red.gif">\r\n						<%\r\n						}else if(diff > 0){\r\n						%>	\r\n							<img src="images/green.gif">\r\n						<%}else{\r\n						%>\r\n							<img src="images/equal.gif">\r\n						<%	\r\n						}%>\r\n	\r\n						<% if(diff == 0){\r\n						%>\r\n							0\r\n						<%}else if(data.value[6].value==0 || data.value[7].value==0){\r\n						%>\r\n							100	\r\n						<%}else{\r\n						%>	\r\n							<%=((Math.abs(diff/data.value[6].value))*100).toFixed(1)%>\r\n						<%}%> %\r\n					</td>\r\n					<td class="border_right red">\r\n						<%\r\n							var diff = data.value[7].value-data.value[0].value; \r\n							if(diff<0){\r\n						%>\r\n							<img src="images/red.gif">\r\n						<%\r\n						}else if(diff > 0){\r\n						%>	\r\n							<img src="images/green.gif">\r\n						<%}else{\r\n						%>\r\n							<img src="images/equal.gif">\r\n						<%	\r\n						}%>\r\n	\r\n						<% if(diff == 0){\r\n						%>\r\n							0\r\n						<%}else if(data.value[0].value==0 || data.value[7].value==0){\r\n						%>\r\n							100	\r\n						<%}else{\r\n						%>	\r\n							<%=((Math.abs(diff/data.value[0].value))*100).toFixed(1)%>\r\n						<%}%> %\r\n					</td>\r\n				<%}%>\r\n				<td><%=data.value[0].value%></td>\r\n				<td><%=data.value[1].value%></td>\r\n				<td><%=data.value[2].value%></td>\r\n				<td><%=data.value[3].value%></td>\r\n				<td><%=data.value[4].value%></td>\r\n				<td><%=data.value[5].value%></td>\r\n				<td><%=data.value[6].value%></td>\r\n				<!-- <td>\r\n					<div style="width:100%">缩略趋势</div>\r\n				</td> -->\r\n			</tr>\r\n		<%\r\n			});\r\n		%>\r\n				\r\n\r\n		<tr>\r\n			<th colspan="11" class="left"><%=i18n.DaySummary.operatorDailyReport.valueCategory%></th>\r\n		</tr>\r\n		<%\r\n			if(NewPlayerValue.length == 0){\r\n		%>\r\n				<tr><td colspan="11"><%=i18n.DaySummary.noData%></td></tr>\r\n		<%		\r\n			}\r\n			_.each(NewPlayerValue,function(data){\r\n		%>\r\n			<tr>\r\n				<td class="left">\r\n					<%=i18n.DaySummary.operatorDailyReport[data.item]%>(<%=ctUnit%>)\r\n				</td>\r\n				<td><%=data.value[7].value%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.value[7].value-data.value[6].value; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.value[6].value==0 || data.value[7].value==0){\r\n					%>\r\n						100	\r\n					<%}else{	\r\n					%>	\r\n						<%=((Math.abs(diff/data.value[6].value))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.value[7].value-data.value[0].value; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.value[0].value==0 || data.value[7].value==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n\r\n					%>	\r\n						<%=((Math.abs(diff/data.value[0].value))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td><%=data.value[0].value%></td>\r\n				<td><%=data.value[1].value%></td>\r\n				<td><%=data.value[2].value%></td>\r\n				<td><%=data.value[3].value%></td>\r\n				<td><%=data.value[4].value%></td>\r\n				<td><%=data.value[5].value%></td>\r\n				<td><%=data.value[6].value%></td>\r\n			</tr>\r\n		<%\r\n			});\r\n		%>\r\n\r\n\r\n		<tr>\r\n			<th colspan="11" class="left"><%=i18n.DaySummary.operatorDailyReport.incomeCategory%></th>\r\n		</tr>\r\n		<%\r\n			if(Income.length == 0){\r\n		%>\r\n				<tr><td colspan="11"><%=i18n.DaySummary.noData%></td></tr>\r\n		<%		\r\n			}\r\n			_.each(Income,function(data){\r\n		%>\r\n			<tr>\r\n				<td class="left"><%=i18n.DaySummary.operatorDailyReport[data.item]%>\r\n					<%if(data.item == \'DayIncome\' || data.item == \'ARPU\' || data.item == \'ARPPU\'){\r\n					%>\r\n						(<%=ctUnit%>)\r\n					<%\r\n					}%>\r\n				</td>\r\n				<td><%=data.value[7].value%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.value[7].value-data.value[6].value; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.value[6].value==0 || data.value[7].value==0){\r\n					%>\r\n						100	\r\n					<%}else{	\r\n					%>	\r\n						<%=((Math.abs(diff/data.value[6].value))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.value[7].value-data.value[0].value; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.value[0].value==0 || data.value[7].value==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n\r\n					%>	\r\n						<%=((Math.abs(diff/data.value[0].value))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td><%=data.value[0].value%></td>\r\n				<td><%=data.value[1].value%></td>\r\n				<td><%=data.value[2].value%></td>\r\n				<td><%=data.value[3].value%></td>\r\n				<td><%=data.value[4].value%></td>\r\n				<td><%=data.value[5].value%></td>\r\n				<td><%=data.value[6].value%></td>\r\n				<!-- <td>\r\n					<div style="width:100%">缩略趋势</div>\r\n				</td> -->\r\n			</tr>\r\n		<%\r\n			});\r\n		%>\r\n\r\n		<tr>\r\n			<th colspan="11" class="left"><%=i18n.DaySummary.operatorDailyReport.totalCategory%></th>\r\n		</tr>\r\n		<%\r\n			if(Total.length == 0){\r\n		%>\r\n				<tr><td colspan="11"><%=i18n.DaySummary.noData%></td></tr>\r\n		<%		\r\n			}\r\n			_.each(Total,function(data){\r\n		%>\r\n			<tr>\r\n				<td class="left"><%=i18n.DaySummary.operatorDailyReport[data.item]%>\r\n					<%if(data.item == \'TotalIncome\'){\r\n					%>\r\n						(<%=ctUnit%>)\r\n					<%\r\n					}%>\r\n				</td>\r\n				<td colspan="3" class="border_right left"><%=data.value[7].value%></td>\r\n				<td><%=data.value[0].value%></td>\r\n				<td><%=data.value[1].value%></td>\r\n				<td><%=data.value[2].value%></td>\r\n				<td><%=data.value[3].value%></td>\r\n				<td><%=data.value[4].value%></td>\r\n				<td><%=data.value[5].value%></td>\r\n				<td><%=data.value[6].value%></td>\r\n				<!-- <td>\r\n					<div style="width:100%"></div>\r\n				</td> -->\r\n			</tr>\r\n		<%\r\n			});\r\n		%>\r\n		\r\n	</tbody>\r\n</table>'}),define("text!templates/summary/metricsSelect.html",[],function(){return'<div id="combinePartner" >\r\n	<div class="timetop">\r\n    	<b class="l"><%=DaySummary.customMetrics%></b>\r\n        <span class="r"><!--<a id="selectAllBtn">恢复默认设置</a>--></span>\r\n    </div>\r\n    <div class="Poptxt">\r\n    	<div class="channelPop">\r\n	    	<dl class="after">\r\n	    		<dd><input name="userType" id="userType" type="checkbox" class="_checkType" style="margin:9px 5px 0 0"/>\r\n					<strong><%=DaySummary.operatorDailyReport.userCategory %></strong>\r\n				</dd>\r\n	    		<dt><input name="metricsName" type="checkbox" value="Install">\r\n					<label><%=DaySummary.operatorDailyReport.Install %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="NewPlayer">\r\n					<label><%=DaySummary.operatorDailyReport.NewPlayer %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="RegistConvert">\r\n					<label><%=DaySummary.operatorDailyReport.RegistConvert %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="DAU">\r\n					<label><%=DaySummary.operatorDailyReport.DAU %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="OldDAU">\r\n					<label><%=DaySummary.operatorDailyReport.OldDAU %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="AvgACU">\r\n					<label><%=DaySummary.operatorDailyReport.AvgACU %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="PCU">\r\n					<label><%=DaySummary.operatorDailyReport.PCU %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="PlayTimes">\r\n					<label><%=DaySummary.operatorDailyReport.PlayTimes %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="AvgPlayTimes">\r\n					<label><%=DaySummary.operatorDailyReport.AvgPlayTimes %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="AvgPlayTime">\r\n					<label><%=DaySummary.operatorDailyReport.AvgPlayTime %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="DeviceNexDayKeeper">\r\n					<label><%=DaySummary.operatorDailyReport.DeviceNexDayKeeper %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="DeviceSevenDayKeeper">\r\n					<label><%=DaySummary.operatorDailyReport.DeviceSevenDayKeeper %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="DeviceThirtyDayKeeper">\r\n					<label><%=DaySummary.operatorDailyReport.DeviceThirtyDayKeeper %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="AccountNexDayKeeper">\r\n					<label><%=DaySummary.operatorDailyReport.AccountNexDayKeeper %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="AccountSevenDayKeeper">\r\n					<label><%=DaySummary.operatorDailyReport.AccountSevenDayKeeper %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="AccountThirtyDayKeeper">\r\n					<label><%=DaySummary.operatorDailyReport.AccountThirtyDayKeeper %></label>\r\n				</dt>\r\n	    	</dl>\r\n	    	<dl class="after">\r\n	    		<dd><input name="incomeType" id="incomeType" type="checkbox"  class="_checkType" style="margin:9px 5px 0 0">\r\n					<strong><%=DaySummary.operatorDailyReport.incomeCategory %></strong>\r\n				</dd>\r\n	    		<dt><input name="metricsName" type="checkbox" value="DayIncome">\r\n					<label><%=DaySummary.operatorDailyReport.DayIncome %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="PayAccountNum">\r\n					<label><%=DaySummary.operatorDailyReport.PayAccountNum %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="NewPayAccountNum">\r\n					<label><%=DaySummary.operatorDailyReport.NewPayAccountNum %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="DayPayRate">\r\n					<label><%=DaySummary.operatorDailyReport.DayPayRate %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="ARPU">\r\n					<label><%=DaySummary.operatorDailyReport.ARPU %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="ARPPU">\r\n					<label><%=DaySummary.operatorDailyReport.ARPPU %></label>\r\n				</dt>\r\n	    	</dl>\r\n	    	<!-- <dl class="after">\r\n	    		<dd><strong>消耗类</strong></dd>\r\n	    		<dt><input name="metricsName" type="checkbox" value="RewardVC"><label>赠送虚拟币</label></dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="BuyVC"><label>购买虚拟币</label></dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="ConsumeVC"><label>消耗虚拟币</label></dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="TotalRemaineVC"><label>累计留存虚拟币</label></dt>\r\n	    	</dl> -->\r\n	    	<dl class="after">\r\n	    		<dd><input name="valueType"  id="valueType" type="checkbox" class="_checkType"  style="margin:9px 5px 0 0">\r\n					<strong><%=DaySummary.operatorDailyReport.valueCategory %></strong>\r\n				</dd>\r\n	    		<dt><input name="metricsName" type="checkbox" value="NewValue01">\r\n					<label><%=DaySummary.operatorDailyReport.NewValue01 %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="NewValue02">\r\n					<label><%=DaySummary.operatorDailyReport.NewValue02 %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="NewValue03">\r\n					<label><%=DaySummary.operatorDailyReport.NewValue03 %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="NewValue07">\r\n					<label><%=DaySummary.operatorDailyReport.NewValue07 %></label>\r\n				</dt>\r\n	    	</dl>\r\n	    	<dl class="after">\r\n	    		<dd><input name="totalType"  id="totalType" type="checkbox" class="_checkType"  style="margin:9px 5px 0 0">\r\n					<strong><%=DaySummary.operatorDailyReport.totalCategory %></strong>\r\n				</dd>\r\n	    		<dt><input name="metricsName" type="checkbox" value="TotalInstall">\r\n					<label><%=DaySummary.operatorDailyReport.TotalInstall %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="TotalAccount">\r\n					<label><%=DaySummary.operatorDailyReport.TotalAccount %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="TotalIncome">\r\n					<label><%=DaySummary.operatorDailyReport.TotalIncome %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="TotalPayRate">\r\n					<label><%=DaySummary.operatorDailyReport.TotalPayRate %></label>\r\n				</dt>\r\n	    		<dt><input name="metricsName" type="checkbox" value="TotalPayAccountNum">\r\n					<label><%=DaySummary.operatorDailyReport.TotalPayAccountNum %></label>\r\n				</dt>\r\n	    	</dl>\r\n    	</div>\r\n        <div class="opeDiv after">\r\n        	<input name="checkAll" id="checkAll" type="checkbox" style="margin:10px 5px 0 15px;float:left" >\r\n			<span style="float:left;display:block;margin-top:10px"><%=GameCommon.checkAll %></span>\r\n\r\n            <a id="comfirmBtn" class="timecolse r Confirm"><%=GameCommon.confirm %></a>\r\n            <a id="cancelBtn" class="r Cancel"><%=GameCommon.cancel %></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/summary/partnerReportTable.html",[],function(){return'<table id="partnerReportTable" class="table_style_Report" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n	<thead>\r\n		<tr>\r\n			<th class="left"><%=i18n.DaySummary.partnerReport.parterName%></th>\r\n			<th style="width:15px;"></th>\r\n			<th><%=i18n.DaySummary.partnerReport.install%><font class="blue"><%=endTime%></font></th>\r\n			<th class="blue"><%=i18n.DaySummary.prevDay%><font><%=prevDayTime%></font></th>\r\n			<th class="border_right blue"><%=i18n.DaySummary.prevWeek%><font><%=prevWeekTime%></font></th>\r\n			<th><%=i18n.DaySummary.partnerReport.newPlayer%><font class="blue"><%=endTime%></font></th>\r\n			<th class="blue"><%=i18n.DaySummary.prevDay%><font><%=prevDayTime%></font></th>\r\n			<th class="border_right blue"><%=i18n.DaySummary.prevWeek%><font><%=prevWeekTime%></font></th>\r\n			<th><%=i18n.DaySummary.partnerReport.income%><font class="blue"><%=endTime%></font></th>\r\n			<th class="blue"><%=i18n.DaySummary.prevDay%><font><%=prevDayTime%></font></th>\r\n			<th class="border_right blue"><%=i18n.DaySummary.prevWeek%><font><%=prevWeekTime%></font></th>\r\n		</tr>\r\n	</thead>\r\n	<tbody>\r\n		<tr id="focusParnterTR">\r\n			<th colspan="11" class="left"><%=i18n.DaySummary.partnerReport.focusPartner%></th>\r\n		</tr>\r\n		<%\r\n			if(foucsPartenr.length == 0){\r\n		%>\r\n				<tr class=\'noData\'><td colspan="11"><%=i18n.DaySummary.noData%></td></tr>\r\n		<%		\r\n			}\r\n			_.each(foucsPartenr,function(data){\r\n		%>\r\n			<tr>\r\n				<td class="left"><%=data.partnerName%></td>\r\n				<td style=\'width:15px;\'><a class=\'sign_btn\' href="javascript:void(0)" data-id=\'<%=data.partnerId%>\' data-value=\'<%=data.focus%>\' ><img src="images/sign.gif" ></a></td>\r\n				<td><%=data.data[0]%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.data[0]-data.data[1]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[1]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[1]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.data[0]-data.data[2]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[2]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[2]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td><%=data.data[3]%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.data[3]-data.data[4]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[4]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[4]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.data[3]-data.data[5]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[5]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[5]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td><%=data.data[6]%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.data[6]-data.data[7]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[7]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[7]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.data[6]-data.data[8]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[8]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[8]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n			</tr>\r\n		<%\r\n			});\r\n		%>\r\n		\r\n		<tr id="otherParnterTR">\r\n			<th colspan="11" class="left"><%=i18n.DaySummary.partnerReport.otherPartner%></th>\r\n		</tr>\r\n		<%\r\n			if(otherPartner.length == 0){\r\n		%>\r\n				<tr class=\'noData\'><td colspan="11"><%=i18n.DaySummary.noData%></td></tr>\r\n		<%		\r\n			}\r\n			_.each(otherPartner,function(data){\r\n		%>\r\n			<tr>\r\n				<td class="left"><%=data.partnerName%></td>\r\n				<td style=\'width:15px;\' ><a class=\'sign_btn\' href="javascript:void(0)" data-id=\'<%=data.partnerId%>\' data-value=\'<%=data.focus%>\' ><img src="images/sign_on.gif"></a></td>\r\n				<td><%=data.data[0]%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.data[0]-data.data[1]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[1]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[1]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.data[0]-data.data[2]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[2]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[2]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td><%=data.data[3]%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.data[3]-data.data[4]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[4]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[4]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.data[3]-data.data[5]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[5]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[5]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td><%=data.data[6]%></td>\r\n				<td class="green">\r\n					<%\r\n						var diff = data.data[6]-data.data[7]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[7]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[7]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n				<td class="border_right red">\r\n					<%\r\n						var diff = data.data[6]-data.data[8]; \r\n						if(diff<0){\r\n					%>\r\n							<img src="images/red.gif">\r\n					<%\r\n					}else if(diff > 0){\r\n					%>	\r\n						<img src="images/green.gif">\r\n					<%}else{\r\n					%>\r\n						<img src="images/equal.gif">\r\n					<%	\r\n					}%>\r\n\r\n					<% if(diff == 0){\r\n					%>\r\n						0\r\n					<%}else if(data.data[8]==0){\r\n					%>\r\n						100	\r\n					<%}else{\r\n					%>	\r\n						<%=((Math.abs(diff/data.data[8]))*100).toFixed(1)%>\r\n					<%}%> %\r\n				</td>\r\n			</tr>\r\n		<%\r\n			});\r\n		%>\r\n	</tbody>\r\n</table>'}),define("text!templates/summary/subscribeDailog.html",[],function(){return'<div class="Pop_line">\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=i18n.DaySummary.title_subscribe%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n        <ul id="levelStep" class="setup_Report_Pop">\r\n        	<li class="step after">\r\n    			<label><%=i18n.DaySummary.title_sendTime%>：</label>\r\n                <select id="reportSendTime" style="position:absolute;left:80px;">\r\n                    <option value="1">1:00</option>\r\n                    <option value="2">2:00</option>\r\n                    <option value="3">3:00</option>\r\n                    <option value="4">4:00</option>\r\n                    <option value="5">5:00</option>\r\n                    <option value="6">6:00</option>\r\n                    <option value="7">7:00</option>\r\n                    <option value="8">8:00</option>\r\n                    <option value="9">9:00</option>\r\n                    <option value="10">10:00</option>\r\n                    <option value="11">11:00</option>\r\n                    <option value="12">12:00</option>\r\n                    <option value="13">13:00</option>\r\n                    <option value="14">14:00</option>\r\n                    <option value="15">15:00</option>\r\n                    <option value="16">16:00</option>\r\n                    <option value="17">17:00</option>\r\n                    <option value="18">18:00</option>\r\n                    <option value="19">19:00</option>\r\n                    <option value="20">20:00</option>\r\n                    <option value="21">21:00</option>\r\n                    <option value="22">22:00</option>\r\n                    <option value="23">23:00</option>\r\n                </select>\r\n    		</li>\r\n    		<li class="step" id="receiveMail" style="max-height: 200px;overflow-y:auto;">\r\n    			<label><%=i18n.DaySummary.title_receiveMail%>：</label>\r\n\r\n    			<!--增加邮箱时增加下例DIV即可-->\r\n                <%\r\n                    if(Setting.mailArr.length == 0){\r\n                %>\r\n                    <div>\r\n                        <input type="text" class="textinput" value="">\r\n                        <em class="r deleteItemtype">删除</em>\r\n                    </div>\r\n                <%\r\n                    }else{\r\n                        _.each(Setting.mailArr,function(data){\r\n                %>\r\n                            <div>\r\n                                <input type="text" class="textinput" value="<%=data%>">\r\n                                <em class="r deleteItemtype">删除</em>\r\n                            </div>\r\n                <%\r\n                        });\r\n                    }\r\n                %>\r\n    			\r\n    			\r\n    		</li>\r\n    	</ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a id="addStepBtn" class="l CancelonCL">+<%=i18n.DaySummary.title_addMail%></a>\r\n            <a id="saveBtn" class="timecolse r Confirm"><%=i18n.DaySummary.title_saveClose%></a>\r\n            <a id="canelBtn" class="r Cancel"><%=i18n.DaySummary.title_cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/summary/SummarizeDayView",["backbone","utils/ModelBox","utils/dataTableUtil","utils/RegexUtil","utils/CheckUtil","utils/CurrencyUtil","models/datasummary/DailyReport","text!templates/summary/summarizeDay.html","text!templates/summary/dailyReportTable.html","text!templates/summary/metricsSelect.html","text!templates/summary/partnerReportTable.html","text!templates/summary/subscribeDailog.html","i18n!nls/gameI18N","jquery.datepicker"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{"click #addMetricsBtn":"metricsSelect","click .sign_btn":"signChange","click #subscribeBtn":"onOffSubscribe","click #subscribeSetting":"subscribeSetting"},initialize:function(){$("#container").html(_.template(u,h)),this.reportTime=(new Date).addDays(-1).toFormat("YYYY-MM-DD"),$("#startTime_Datepicker").val(this.reportTime),$("#calendarDisplay").html(this.reportTime);var e=this;this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",$("#startTime_Datepicker").datepicker({minDate:new Date(Params.registerTime),maxDate:(new Date).addDays(-1),dateFormat:"yy-mm-dd",onSelect:function(){e.reportTime=(new Date($(this).val())).toFormat("YYYY-MM-DD"),$("#calendarDisplay").html($(this).val()),e.render()}}),o.fetchReportsSubscribeSetting({data:Params,success:function(e){(e==null?!1:e.subscribe)?($("#subscribeBtn").attr("src","images/on.jpg"),$("#subscribeBtn").attr("data-value","true")):($("#subscribeBtn").attr("src","images/off.jpg"),$("#subscribeBtn").attr("data-value","false"))}}),this.render()},render:function(){this.fetchOperationReports(),this.fetchPartnerReports()},fetchOperationReports:function(){var e=this,t={developerID:Params.developerID,productID:Params.productID,platformID:Params.platformID,startTime:(new Date(this.reportTime)).toFormat("YYMMDD"),endTime:(new Date(this.reportTime)).toFormat("YYMMDD"),partnerID:"",gameserverID:"",displayCurrency:Params.displayCurrency};$("#dailyReportDiv").html('<div class="login"><img src="images/loading.gif" height="25px"></img> <br>'+h.GameCommon.loadingData+"</div>");var n=[(new Date(this.reportTime)).toFormat("YYMMDD"),(new Date(this.reportTime)).addDays(-7).toFormat("YYMMDD"),(new Date(this.reportTime)).addDays(-6).toFormat("YYMMDD"),(new Date(this.reportTime)).addDays(-5).toFormat("YYMMDD"),(new Date(this.reportTime)).addDays(-4).toFormat("YYMMDD"),(new Date(this.reportTime)).addDays(-3).toFormat("YYMMDD"),(new Date(this.reportTime)).addDays(-2).toFormat("YYMMDD"),(new Date(this.reportTime)).addDays(-1).toFormat("YYMMDD")],i=[];_.each(n,function(e){i.push(e.replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3"))}),o.operationReports({data:t,success:function(t){var n=t.user,s=t.income,o=t.consume,u=t.total;_.each(n,function(e){(e.item=="DeviceNexDayKeeper"||e.item=="DeviceSevenDayKeeper"||e.item=="DeviceThirtyDayKeeper"||e.item=="AccountNexDayKeeper"||e.item=="AccountSevenDayKeeper"||e.item=="AccountThirtyDayKeeper")&&_.each(e.value,function(e){e.value=parseInt(e.value)>-1?e.value:"--"})}),$("#dailyReportDiv").html(_.template(a,{RegexUtil:r,i18n:h,NewPlayerValue:t.newPlayerValue,Total:u,Consume:o,Income:s,User:n,Time:i,ctUnit:e.ctUnit}))}})},metricsSelect:function(e){var n=this,r=_.template(f,h);o.fetchReportsMetrics({data:Params,success:function(e){$('input[name="metricsName"]').each(function(){_.indexOf(e,$(this).val())!=-1&&$(this).attr("checked","checked")}),$("#userType").parent().siblings("dt").children("input:not(:checked)").length?$("#userType").attr("checked",!1):$("#userType").attr("checked",!0),$("#incomeType").parent().siblings("dt").children("input:not(:checked)").length?$("#incomeType").attr("checked",!1):$("#incomeType").attr("checked",!0),$("#valueType").parent().siblings("dt").children("input:not(:checked)").length?$("#valueType").attr("checked",!1):$("#valueType").attr("checked",!0),$("#totalType").parent().siblings("dt").children("input:not(:checked)").length?$("#totalType").attr("checked",!1):$("#totalType").attr("checked",!0),n.checkAllBox()}}),t.confirm({message:_.template(f,h),buttons:[{"._checkType":function(e){var t=$(e.currentTarget),r=t.attr("checked")=="checked"?!0:!1;t.parent().siblings("dt").children("input").each(function(e){$(this).attr("checked",r)}),n.checkAllBox()},'input[name="metricsName"]':function(e){var t=$(e.currentTarget),r=t.parent().siblings("dt").children("input");if(t.attr("checked")=="checked"){var i=!0;r.each(function(e){$(this).attr("checked")!="checked"&&(i=!1)}),t.parent().siblings("dd").children("input").attr("checked",i)}else t.parent().siblings("dd").children("input").attr("checked",!1);n.checkAllBox()},"#checkAll":function(e){var t=$(e.currentTarget),n=t.attr("checked")=="checked"?!0:!1;$(".channelPop").find("input:checkbox").each(function(e){$(this).attr("checked",n)})},"#comfirmBtn":function(){var e=[];$('input[name="metricsName"]').each(function(){$(this).attr("checked")=="checked"&&e.push($(this).val())}),o.saveReportsMetrics({data:{productId:Params.productID,platformId:Params.platformID==""?0:Params.platformID,metricsNames:e.toString()},success:function(e){e&&(t.unblock(),n.fetchOperationReports())}})},"#cancelBtn":function(){t.unblock()}}]})},checkAllBox:function(){$(".channelPop").find("input:not(:checked)").length?$("#checkAll").attr("checked",!1):$("#checkAll").attr("checked",!0)},fetchPartnerReports:function(){var e=this;$("#partnerReportDiv").html('<div class="login"><img src="images/loading.gif" height="25px"></img> <br>'+h.GameCommon.loadingData+"</div>");var t=(new Date(this.reportTime)).toFormat("YYYY-MM-DD"),n=(new Date(this.reportTime)).addDays(-1).toFormat("YYYY-MM-DD"),r=(new Date(this.reportTime)).addDays(-7).toFormat("YYYY-MM-DD"),i={developerID:Params.developerID,productID:Params.productID,platformID:Params.platformID,startTime:(new Date(t)).toFormat("YYMMDD"),endTime:(new Date(t)).toFormat("YYMMDD"),partnerID:"",gameserverID:"",displayCurrency:Params.displayCurrency};o.fetchPartnerReports({data:i,success:function(e){var i=_.filter(e,function(e){return e.focus==1}),s=_.filter(e,function(e){return e.focus==0});$("#partnerReportDiv").html(_.template(l,{foucsPartenr:i,otherPartner:s,i18n:h,endTime:t,prevDayTime:n,prevWeekTime:r}))}})},signChange:function(e){var t=$(e.currentTarget).attr("data-id"),n=$(e.currentTarget).attr("data-value");o.updatePartnerFocus({data:{partnerid:t,focus:n=="true"?!1:!0},success:function(t){t&&($("#otherParnterTR").next().attr("class")=="noData"&&$("#otherParnterTR").next().remove(),$("#focusParnterTR").next().attr("class")=="noData"&&$("#focusParnterTR").next().remove(),n=="true"?($(e.currentTarget).find("img").attr("src","images/sign_on.gif"),$(e.currentTarget).attr("data-value","false"),$("#otherParnterTR").after($(e.currentTarget).parent().parent())):($(e.currentTarget).find("img").attr("src","images/sign.gif"),$(e.currentTarget).attr("data-value","true"),$("#otherParnterTR").before($(e.currentTarget).parent().parent())))}})},subscribeSetting:function(e){o.fetchReportsSubscribeSetting({data:Params,success:function(e){var n="";e==null&&(e={mails:"",sendTime:1}),e.mailArr=e.mails.split(","),n=_.template(c,{Setting:e,i18n:h}),t.confirm({message:n,buttons:[{"#addStepBtn":function(){var e=$("#receiveMail").find("div").length;e>=30?alert(h.DaySummary.tip1):$("#receiveMail").append('<div><input type="text" class="textinput" value=""><em class="r deleteItemtype">删除</em></div>')},"#saveBtn":function(){var e=[],n=!0;$("#receiveMail").find("div input").each(function(){if(!r.isEmail($(this).val()))return alert(h.DaySummary.tip2),n=!1,!1;e.push($(this).val())}),e.length>1&&i.isArrRepeat(e)&&(alert(h.DaySummary.tip3),n=!1),n&&o.insertSubscribeSetting({data:{developerId:Params.developerID,productId:Params.productID,mails:e.toString(),sendTime:$("#reportSendTime").val()},success:function(e){e&&t.unblock()}})},".deleteItemtype":function(e){var t=$("#receiveMail").find("div").length;t>1&&$(e.currentTarget).parent().remove()}}]}),$("#reportSendTime").find('option[value="'+e.sendTime+'"]').attr("selected",!0),$("select").sSelect()}})},onOffSubscribe:function(e){var t="true",n="images/on.jpg";$("#subscribeBtn").attr("data-value")=="true"&&(t="false",n="images/off.jpg"),o.updateSubscribeStatus({data:{developerId:Params.developerID,subscribe:t=="true"?!0:!1,productId:Params.productID},success:function(e){e&&($("#subscribeBtn").attr("src",n),$("#subscribeBtn").attr("data-value",t))}})}});return p}),define("text!templates/player/newPlayer.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n			<div id="showSelectedPartners" class="Editor hide Filter" >\r\n				<div id="selectVersion"></div>\r\n			</div>\r\n		</div>\r\n		<div id="newPlayerCode">\r\n			<div class="title"  role="title">\r\n				<strong class="l"><%=Player.NewPlayer.newPlayer%></strong>\r\n			</div>\r\n			<div class="textbox">\r\n				<div class="box_top" role="tabbar">\r\n					<a class="tab hover" data-tab="installAndNewPlayer"><%=GameCommon.newInstallAndPlayer%></a>\r\n<!-- 					<a class="tab" data-tab="newPlayer"><%=GameCommon.newIncreasedPlayer%></a> -->\r\n					<a class="tab" data-tab="conversion"><%=Player.NewPlayer.playerConversion%></a>\r\n					<div class="info l" id="sumAvgMd">\r\n	                	SUM <%=GameCommon.equipmentAcount%>：<font id="newPlayerCode-sum"></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n	                	AVG <%=GameCommon.equipmentAcount%>：<font id="newPlayerCode-avg"></font>  \r\n<!-- 	                	MD <%=GameCommon.equipmentAcount%>：<font id="newPlayerCode-md"></font> -->\r\n	                </div>\r\n				</div>\r\n				<div class="picbox_chart_table" role="remarkBottom">\r\n					<div id="newPlayerCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="newPlayerCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n<!-- 	<div class="box"> -->\r\n<!-- 		<div class="contentbox l"> -->\r\n<!-- 			<div class="title"> -->\r\n<!-- 				<strong class="l"><%=GameCommon.equipmentActive%></strong> -->\r\n<!-- 			</div> -->\r\n<!--             <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r\n<!--                 <tbody> -->\r\n<!--                     <tr> -->\r\n<!--                         <td class="left border_none">SUM</td> -->\r\n<!--                         <td class="center border_none"><strong id="installSum"></strong> -->\r\n<!--                         </td> -->\r\n<!--                     </tr> -->\r\n<!--                     <tr> -->\r\n<!--                         <td class="left ">AVG | MD</td> -->\r\n<!--                         <td class="center "><strong><font id="installAvg"></font>|<font id="installMD"></font></strong> -->\r\n<!--                         </td> -->\r\n<!--                     </tr> -->\r\n<!--                 </tbody> -->\r\n<!--             </table> -->\r\n<!-- 		</div> -->\r\n	\r\n<!-- 		<div class="contentbox r"> -->\r\n<!-- 			<div class="title"> -->\r\n<!-- 				<strong class="l"><%=GameCommon.newIncreasedPlayer%></strong> -->\r\n<!-- 			</div> -->\r\n<!--             <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r\n<!--                 <tbody> -->\r\n<!--                     <tr> -->\r\n<!--                         <td class="left border_none">SUM</td> -->\r\n<!--                         <td class="center border_none"><strong id="newPlayerSum"></strong> -->\r\n<!--                         </td> -->\r\n<!--                     </tr> -->\r\n<!--                     <tr> -->\r\n<!--                         <td class="left ">AVG | MD</td> -->\r\n<!--                         <td class="center "><strong><font id="newPlayerAvg"></font>|<font id="newPlayerMD"></font></strong> -->\r\n<!--                         </td> -->\r\n<!--                     </tr> -->\r\n<!--                 </tbody> -->\r\n<!--             </table> -->\r\n<!-- 		</div> -->\r\n<!-- 		<div class="clear"></div> -->\r\n<!-- 	</div> -->\r\n\r\n	<ul class="Esbox">\r\n		<li class="contentbox l" >\r\n			<div id="newDeviceSubAccountCode">\r\n				<div class="title"  role="title">\r\n					<strong class="l"><%=GameCommon.subAccount%></strong>\r\n				</div>\r\n				<div class="textbox">\r\n					<div role="picbox_chart_table">\r\n						<div id="newDeviceSubAccountCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="newDeviceSubAccountCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n					</div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</li>\r\n		<li class="contentbox r" >\r\n			<div id="newPlayerAccountCode">\r\n				<div class="title"  role="title">\r\n					<strong class="l"><%=GameCommon.newPlayerAccountType%></strong>\r\n				</div>\r\n				<div class="textbox">\r\n					<div role="picbox_chart_table">\r\n						<div id="newPlayerAccountCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="newPlayerAccountCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n					</div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</li>\r\n		<li class="contentbox l" >\r\n			<div id="newPlayerLocationCode">\r\n				<div class="title"  role="title">\r\n					<strong class="l"><%=GameCommon.region%></strong>\r\n					<div role="titlebar" class="buttonDiv l">\r\n		            	<a data-tab="globalLocation" id="globalLocation" class="but l butL hover"><%=GameCommon.globalArea%></a>\r\n		            	<a data-tab="chinaLocation" id="chinaLocation" class="but l butR"><%=GameCommon.chinaArea%></a>\r\n		            </div>\r\n				</div>\r\n				<div class="textbox">\r\n					<div role="picbox_chart_table">\r\n						<div id="newPlayerLocationCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="newPlayerLocationCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n					</div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</li>\r\n		<li class="contentbox r" >\r\n			<div id="newPlayerPartnerCode">\r\n				<div class="title"  role="title">\r\n					<strong class="l"><%=GameCommon.channel%></strong>\r\n				</div>\r\n				<div class="textbox">\r\n					<div role="picbox_chart_table">\r\n						<div id="newPlayerPartnerCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="newPlayerPartnerCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n					</div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        		<div id="pagination"></div>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</li>\r\n		<li class="contentbox l" >\r\n			<div id="newPlayerSexCode">\r\n				<div class="title"  role="title">\r\n					<strong class="l"><%=GameCommon.sex%></strong>\r\n				</div>\r\n	            <div class="textbox">\r\n            		<div role="picbox_chart_table">\r\n            			<div class="minpicbox" id="newPlayerSexCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="newPlayerSexCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n            		</div>\r\n	            	<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        	</div>\r\n            	</div>\r\n            </div>\r\n		</li>\r\n		<li class="contentbox r" >\r\n			<div id="newPlayerAgeCode">\r\n				<div class="title"  role="title">\r\n					<strong class="l"><%=GameCommon.age%></strong>\r\n				</div>\r\n				<div class="textbox">\r\n					<div role="picbox_chart_table">\r\n						<div id="newPlayerAgeCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="newPlayerAgeCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n					</div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</li>\r\n	</ul>\r\n</div>'}),define("text!templates/public/people.html",[],function(){return'<div class="famale" style="height:140px">\r\n	<p class="male" id="maleScale"></p>\r\n    <p style="padding-left:35px" id="malePicture"></p>\r\n</div>\r\n<p style="height:35px;margin:0px; text-align:center;font-size:30px; line-height:35px; color:#693">VS</p>\r\n<div class="famale r" style="height:120px">\r\n	<p id="femaleScale" class="male"></p>\r\n    <p style="padding-right:35px; text-align:right" id="femalePicture">\r\n    </p>\r\n</div>\r\n<div class="clear"></div>'}),define("views/player/NewPlayerView",["backbone","models/player/NewPlayer","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","models/Constant","text!templates/player/newPlayer.html","text!templates/public/people.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{'click div[role="titlebar"]>a':"renderNewPlayerLocation"},initialize:function(){$("#container").html(_.template(l,h)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.player={userType:f.NEW_PLAYER},this.render()},render:function(){return this.renderPlayer(),this.renderLocation(),this.renderChannel(),this.renderGender(),this.renderAge(),this.renderAccountType(),this.renderSubAccount(),this},renderPlayer:function(){var e=_.clone(Params);e.player=this.player;var i=this,u=$("#newPlayerCode").tabs(function(a){var f,l,c=!1,p="";switch(a){case"installAndNewPlayer":f="fetchInstallNewPlayerList",l=h.GameCommon.equipmentActive,c=!1;break;case"conversion":c=!0,f="fetchConversionList",l=h.Player.NewPlayer.playerConversion,p="%"}t[f]({data:e,success:function(e){var t=null,c=null,p=null,d=null,v=null;f==="fetchInstallNewPlayerList"?(t=_.pluck(e.install,"item"),p=_.pluck(e.install,"value"),d=_.pluck(e.newPlayer,"value"),c=[{name:h.GameCommon.newIncreasedPlayer,data:d},{name:h.GameCommon.equipmentActive,data:p}],n.chart({id:"newPlayerCode-chart",x:t,series:c,legend:!0,xType:"date",unitItem:[o.getAccountItem(),o.getDeviceItem()]})):(t=_.pluck(e,"item"),v=_.pluck(e,"value"),c=[{name:l,data:v}],n.chart({id:"newPlayerCode-chart",x:t,series:c,yLeftUnit:o.getPercentItem(),unitItem:[o.getPercentItem()],xType:"date"})),a==="installAndNewPlayer"?($("#sumAvgMd").show(),$("#newPlayerCode-sum").html("<em>"+r.formatDigit(_.sum(i.remarkObj2value(p)))+"</em> | <em>"+r.formatDigit(_.sum(i.remarkObj2value(d)))+"</em>"),$("#newPlayerCode-avg").html("<em>"+r.formatDigit(_.avg(i.remarkObj2value(p)))+"</em> | <em>"+r.formatDigit(_.avg(i.remarkObj2value(d)))+"</em>")):$("#sumAvgMd").hide();var m=null,g=null;f==="fetchConversionList"?(m=_.zip(t,i.remarkObj2value(v)),g=[h.GameCommon.date,l+"("+o.getUnitByItem(o.getPercentItem())+")"]):(g=[h.GameCommon.date,h.GameCommon.equipmentActive+"("+o.getUnitByItem(o.getDeviceItem())+")",h.GameCommon.newIncreasedPlayer+"("+o.getUnitByItem(o.getAccountItem())+")"],m=_.zip(t,_.map(i.remarkObj2value(p)),_.map(i.remarkObj2value(d)))),s.drawTable({head:g,body:m,$el:$("#newPlayerCode-table"),headType:"date"}),u.head=g,u.body=m}})})},remarkObj2value:function(e){return _.map(e,function(e){return typeof e=="object"&&(e=e.y),e})},renderInstallNum:function(e){t.fetchInstallList({data:Params,success:function(e){e=_.pluck(e,"value"),$("#installSum").html(r.formatDigit(_.sum(e))),$("#installAvg").html(r.formatDigit(_.avg(e))),$("#installMD").html(r.formatDigit(_.median(e)))}})},renderNewPlayerNum:function(e){var n=_.clone(Params);n.player=this.player,t.fetchNewPlayerList({data:n,success:function(e){e=_.pluck(e,"value"),$("#newPlayerSum").html(r.formatDigit(_.sum(e))),$("#newPlayerAvg").html(r.formatDigit(_.avg(e))),$("#newPlayerMD").html(r.formatDigit(_.median(e)))}})},renderSubAccount:function(){var e=this,r=_.clone(Params);r.player=this.player,r.groupBy="subaccount";var i=$("#newDeviceSubAccountCode").tabs(function(){t.fetchSubaccount({data:r,success:function(e){var t=_.pluck(e,"item"),r=_.pluck(e,"value"),u=[{name:h.GameCommon.newDevice,data:r}],a=_.percent(r,3,1),f=_.zip(t,r,a),l=[h.GameCommon.accountNum,h.GameCommon.newDevice+"("+o.getUnitByItem(o.getDeviceItem())+")",h.GameCommon.percentage];n.chartBar({id:"newDeviceSubAccountCode-chart",x:{left:t,right:a},series:u,pagination:!0,unitItem:[o.getDeviceItem()]}),s.drawTable({head:l,body:f,$el:$("#newDeviceSubAccountCode-table")}),i.head=l,i.body=f}})})},renderNewPlayerLocation:function(e){var t=$(e.target),n=t.attr("id");t.parent().find("a").removeClass("hover"),t.addClass("hover");var r=null;n=="globalLocation"?r=f.GLOBALLOCATION:n=="chinaLocation"&&(r=f.LOCATION),this.request("newPlayerLocationCode",r,h.GameCommon.region,!0)},renderLocation:function(){this.request("newPlayerLocationCode",f.GLOBALLOCATION,h.GameCommon.region,!0)},renderChannel:function(){this.request("newPlayerPartnerCode","partner",h.GameCommon.channel,!0)},renderGender:function(){this.request("newPlayerSexCode","sex",h.GameCommon.sex)},renderAge:function(){this.request("newPlayerAgeCode","age",h.GameCommon.age)},renderAccountType:function(){this.request("newPlayerAccountCode","accountType",h.GameCommon.accountType,!0)},request:function(e,r,i,u){var a=this,l=_.clone(Params);l.player=this.player,l.groupBy=r,r=="location"&&(l.countryType=f.CHINAID);var p=$("#"+e).tabs(function(){t.fetchNewPlayerList({data:l,success:function(t){if(r=="sex")$("#newPlayerSexCode-chart").html(c),a.drawSex(t),p.head=[h.GameCommon.sex,h.GameCommon.percentage],p.body=_.zip([h.GameCommon.male,h.GameCommon.female],_.percent(_.pluck(t,"value"),3,1));else{var f=_.pluck(t,"item"),l=_.pluck(t,"value"),d=[{name:h.GameCommon.newIncreasedPlayer,data:l}],v=_.percent(l,3,1),m=_.zip(f,l,v),g=[i,h.GameCommon.newIncreasedPlayer+"("+o.getUnitByItem(o.getAccountItem())+")",h.GameCommon.percentage];n.chartBar({id:e+"-chart",x:{left:f,right:v},series:d,pagination:u,unitItem:[o.getAccountItem()]}),s.drawTable({head:g,body:m,$el:$("#"+e+"-table")}),p.head=g,p.body=m}}})})},drawSex:function(e){var t=0,n=10,r=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,r=10-t,o=10-r);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(r))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var c=_.zip([h.GameCommon.male,h.GameCommon.female],f),p=[h.GameCommon.sex,h.GameCommon.percentage];s.drawTable({head:p,body:c,$el:$("#newPlayerSexCode-table")})}});return p}),define("text!templates/player/activePlayer.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		\r		<div id="dauCode">\r			<div class="title"  role="title">\r				<strong class="l"><%=GameCommon.player%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="dautab" class="tab hover">DAU</a>\r					<a data-tab="wautab" class="tab">WAU</a>\r					<a data-tab="mautab" class="tab">MAU</a>\r					<a data-tab="daumautab" class="tab">DAU/MAU</a>\r					<div class="info l">\r	                	AVG | MD：<font id="dauAvg"></font> | <font id="dauMD"></font>\r	                </div>\r				</div>\r				<div class="picbox_chart_table" role="remarkBottom">\r					<div id="dauCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="dauCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="activePlayerPlayedDaysCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=Player.ActivePlayer.playedDays%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="activePlayerPlayedDaysCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="activePlayerPlayedDaysCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="activePlayerLevelCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.grade%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="activePlayerLevelCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="activePlayerLevelCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="activePlayerLocationCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=Player.ActivePlayer.region%></strong>\r					<div role="titlebar" class="buttonDiv l">\r		            	<a data-tab="globalLocation" id="globalLocation" class="but l butL hover"><%=GameCommon.globalArea%></a>\r		            	<a data-tab="chinaLocation" id="chinaLocation" class="but l butR"><%=GameCommon.chinaArea%></a>\r		            </div>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="activePlayerLocationCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="activePlayerLocationCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="activePlayerPartnerCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.channel%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="activePlayerPartnerCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="activePlayerPartnerCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>	\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="activePlayerSexCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.sex%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div class="minpicbox" id="activePlayerSexCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="activePlayerSexCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="activePlayerAgeCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.age%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="activePlayerAgeCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="activePlayerAgeCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/player/ActivePlayerView",["backbone","models/player/ActivePlayer","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","models/Constant","text!templates/player/activePlayer.html","text!templates/public/people.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{'click div[role="titlebar"]>a':"renderActivePlayerLocation"},initialize:function(){$("#container").html(_.template(l,h)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.player={userType:f.ACTIVE_PLAYER},this.render()},render:function(){return this.renderActivity(),this.renderLifetime(),this.renderLevel(),this.renderLocation(),this.renderChannel(),this.renderGender(),this.renderAge(),this},renderActivity:function(){var e=this,i=_.clone(Params),u="",a=null;i.player=this.player;var f=$("#dauCode").tabs(function(l){switch(l){case"dautab":api="newAndOldDauList",u="DAU",legend=!0,a="normal";break;case"wautab":api="fetchWauList",u="WAU",legend=!1;break;case"mautab":api="fetchMauList",u="MAU",legend=!1;break;case"daumautab":api="fetchDauDivideMauList",u="DAU/MAU",legend=!1}t[api]({data:i,success:function(t){var i,c,p,d,v;if(l==="dautab"){var m=t["new"],g=t.old,y=t.total;i=_.pluck(y,"item"),c=_.pluck(y,"value"),d=_.pluck(m,"value"),v=_.pluck(g,"value"),p=[{name:h.Player.ActivePlayer.newDau,data:d,fillOpacity:.5},{name:h.Player.ActivePlayer.oldDau,data:v,fillOpacity:.5}]}else i=_.pluck(t,"item"),c=_.pluck(t,"value"),p=[{name:u,data:c}];var b=_.zip(i,c),w=[h.GameCommon.date,u];if(l==="dautab")w=[h.GameCommon.date,h.Player.ActivePlayer.newDau+"("+o.getUnitByItem(o.getAccountItem())+")",h.Player.ActivePlayer.oldDau+"("+o.getUnitByItem(o.getAccountItem())+")",h.GameCommon.total+"("+o.getUnitByItem(o.getAccountItem())+")"],b=_.zip(i,d,v,c);else if(l==="wautab"||l==="mautab")w=[h.GameCommon.date,u+"("+o.getUnitByItem(o.getAccountItem())+")"];s.drawTable({head:w,body:b,$el:$("#dauCode-table"),headType:"date"}),l==="dautab"?n.chart({id:"dauCode-chart",x:i,series:p,legend:legend,stacking:a,xType:"date",colors:["#6DC5FD","#CCCCCC"],unitItem:[o.getAccountItem(),o.getAccountItem()],hasTotal:!0}):l==="wautab"||l==="mautab"?n.chart({id:"dauCode-chart",x:i,series:p,legend:legend,stacking:a,xType:"date",unitItem:[o.getAccountItem()]}):n.chart({id:"dauCode-chart",x:i,series:p,legend:legend,stacking:a,xType:"date"}),f.head=w,f.body=b,$("#dauAvg").html("<em>"+r.formatDigit(_.avg(e.remarkObj2value(c)))+"</em>"),$("#dauMD").html("<em>"+r.formatDigit(_.median(e.remarkObj2value(c)))+"</em>")}})})},remarkObj2value:function(e){return _.map(e,function(e){return typeof e=="object"&&(e=e.y),e})},renderLifetime:function(){this.request(f.LIFETIME,"activePlayerPlayedDaysCode",h.Player.ActivePlayer.playedDays)},renderLevel:function(){this.request(f.LEVEL,"activePlayerLevelCode",h.GameCommon.grade,!0)},renderActivePlayerLocation:function(e){var t=$(e.target),n=t.attr("id");t.parent().find("a").removeClass("hover"),t.addClass("hover");var r=null;n=="globalLocation"?r=f.GLOBALLOCATION:n=="chinaLocation"&&(r=f.LOCATION),this.request(r,"activePlayerLocationCode",h.GameCommon.region,!0)},renderLocation:function(){this.request(f.GLOBALLOCATION,"activePlayerLocationCode",h.GameCommon.region,!0)},renderChannel:function(){this.request(f.PARTNER,"activePlayerPartnerCode",h.GameCommon.channel,!0)},renderGender:function(){this.request(f.SEX,"activePlayerSexCode",h.GameCommon.sex)},renderAge:function(){this.request(f.AGE,"activePlayerAgeCode",h.GameCommon.age)},request:function(e,r,i,u){var a=_.clone(Params);a.groupBy=e,e=="location"&&(a.countryType=f.CHINAID),a.player={},a.player.userType=f.ACTIVE_PLAYER;var l=this,p=$("#"+r).tabs(function(){t.fetchGroupedPlayerList({data:a,success:function(t){if(e=="sex")$("#activePlayerSexCode-chart").html(c),l.drawSex(t),p.head=[h.GameCommon.sex,h.GameCommon.percentage],p.body=_.zip([h.GameCommon.male,h.GameCommon.female],_.percent(_.pluck(t,"value"),3,1));else{var a=_.pluck(t,"item"),f=_.pluck(t,"value"),d=[{name:h.Player.CustomRetention.activeUser,data:f}],v=_.percent(f,3,1),m=_.zip(a,f,v),g=[i,h.Player.CustomRetention.activeUser+"("+o.getUnitByItem(o.getAccountItem())+")",h.GameCommon.percentage];s.drawTable({head:g,body:m,$el:$("#"+r+"-table")}),n.chartBar({id:r+"-chart",x:{left:a,right:v},series:d,pagination:u,unitItem:[o.getAccountItem()]}),p.head=g,p.body=m}}})})},drawSex:function(e){var t=0,n=10,r=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,r=10-t,o=10-r);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(r))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var c=_.zip([h.GameCommon.male,h.GameCommon.female],f),p=[h.GameCommon.sex,h.GameCommon.percentage];s.drawTable({head:p,body:c,$el:$("#activePlayerSexCode-table")})}});return p}),define("text!templates/player/behavior.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="playerTabs" class="l margin_left">\r                <a data="newPlayer" class="tagbut tagbutL hover"><%=GameCommon.newIncreasedPlayer%></a>\r                <a data="activePlayer" class="tagbut"><%=GameCommon.activePlayer%></a>\r                <a data="chargePlayer" class="tagbut tagbutR" ><%=GameCommon.payPlayer%></a>\r			</div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r\r		<div id="avgTimeAndTimeCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=GameCommon.avgGamingTimeCount%></strong>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a class="tab hover" data-tab="day"><%=Player.Behavior.daily%></a>\r					<a class="tab" data-tab="week"><%=Player.Behavior.weekly%></a>\r					<a class="tab" data-tab="month"><%=Player.Behavior.monthly%></a>\r					<div class="info l">\r	                	AVG：<span id="avgTimeAndTimeCode-avg"></span>\r	                </div>\r				</div>\r				<div class="picbox_chart_table" role="remarkBottom">\r					<div id="avgTimeAndTimeCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="avgTimeAndTimeCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r\r<!-- 		<div class="box"> -->\r<!-- 			<div class="contentbox l"> -->\r<!-- 				<div class="title"> -->\r<!-- 					<strong class="l"><%=Player.Behavior.avgGamingTime%></strong> -->\r<!-- 				</div> -->\r<!--                 <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r<!--                     <tbody> -->\r<!--                         <tr> -->\r<!--                             <td class="left border_none" id="avgUseTimeName"></td> -->\r<!--                             <td class="center border_none"><strong id="avgUseTimeNum"></strong></td> -->\r<!--                         </tr> -->\r<!--                     </tbody> -->\r<!--                 </table> -->\r<!-- 			</div> -->\r		\r<!-- 			<div class="contentbox r"> -->\r<!-- 				<div class="title"> -->\r<!-- 					<strong class="l"><%=Player.Behavior.avgGamingCount%></strong> -->\r<!-- 				</div> -->\r<!--                 <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r<!--                     <tbody> -->\r<!--                         <tr> -->\r<!--                             <td class="left border_none" id="avgUseTimeNumName"></td> -->\r<!--                             <td class="center border_none"><strong  id="avgUseTimesNum"></strong></td> -->\r<!--                         </tr> -->\r<!--                     </tbody> -->\r<!--                 </table> -->\r<!-- 			</div> -->\r<!-- 			<div class="clear"></div> -->\r<!-- 		</div> -->\r\r		<div class="boxmax">\r			<div id="playFrequencyCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Behavior.gameFrequency%></strong>\r				</div>\r				<div class="textbox">\r					<div role="tabbar" class="box_top">\r						<a class="tab hover" data-tab="monthDays"><%=Player.Behavior.monthGamingDays%></a>\r						<a class="tab" data-tab="weekDays"><%=Player.Behavior.weekGamingDays%></a>\r						<a class="tab" data-tab="weekTimes"><%=Player.Behavior.weekGamingTimes%></a>\r						<a class="tab" data-tab="dayTimes"><%=Player.Behavior.dayGamingTimes%></a>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="playFrequencyCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="playFrequencyCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r\r			</div>\r		</div>\r\r		<div class="boxmax">\r			<div id="playTimeCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Behavior.gamingTime%></strong>\r				</div>\r				<div class="textbox">\r					<div role="tabbar" class="box_top">\r						<a class="tab hover" data-tab="weekTime"><%=Player.Behavior.weekGamingTime%></a>\r						<a class="tab" data-tab="dayTime"><%=Player.Behavior.dayGamingTime%></a>\r						<a class="tab" data-tab="singleTime"><%=Player.Behavior.singleGamingTime%></a>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="playTimeCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="playTimeCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r\r		<div class="boxmax">\r			<div id="playTimesDistributeCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Behavior.gamingTimeInterval%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="playTimesDistributeCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="playTimesDistributeCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r\r		<!-- <div class="boxmax">\r			<div class="title">\r				<strong class="l">游戏间隔</strong>\r			</div>\r			<div class="textbox">\r				<div id="playIntervalChart" style="width: 100%; height: 350px; margin: 0 auto">\r					<div class="login">\r						<img src="images/loading.gif" height="25px"></img> <br>\r						正在加载统计数据...\r					</div>\r				</div>\r			</div>\r		</div> -->\r\r	</div>\r	\r</div>'}),define("views/player/BehaviorView",["backbone","views/public/DatePicker","views/public/SelectView","utils/HighchartUtil","utils/dataTableUtil","utils/UnitMappingUtil","text!templates/player/behavior.html","models/player/Behavior","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#container",events:{"click #playerTabs>a":"changePlayerType"},initialize:function(){$("#container").html(_.template(o,f)),new t({el:"#datePicker"}),new n({el:"#selectChoose"}),this.userType="newPlayer",this.playerName=$("#playerTabs>a.hover").text(),this.render()},render:function(){return this.renderToPlayAvgTimeAndTimes(),this.renderToPlayFrequency(),this.renderToPlayTime(),this.renderToPlayTimeInterval(),this},renderToPlayAvgTimeAndTimes:function(){var e=this,t=$("#avgTimeAndTimeCode").tabs(function(n){var o,a="";switch(n){case"day":o=f.Player.Behavior.everyDayGame,a="day";break;case"week":o=f.Player.Behavior.everyWeekGame,a="week";break;case"month":o=f.Player.Behavior.everyMonthGame,a="month"}var l=_.clone(Params);l.player={userType:e.userType,dayType:a},u.fetchAvgGameTimesList({$entity:l,$callback:function(e,u,a){var l=_.pluck(a.useTimeList,"item"),c=_.pluck(a.useTimeList,"value"),h=_.pluck(a.useTimesList,"value"),p=_.pluck(a.dauList,"value"),d=[],v=[],m=0,g=0,y=0;for(var b=0;b<c.length;b++)p[b]==0?(d[b]=0,v[b]=0):(d[b]=Math.round(c[b]/60/p[b]),v[b]=Math.round(h[b]/p[b]*10)/10),y+=p[b],m+=c[b],g+=h[b];var w=0,E=f.Player.Behavior.minute;m/y<60?(w=y==0?0:Math.round(m/y),E=f.Player.Behavior.second):w=y==0?0:Math.round(m/60/y);var S=y==0?0:Math.round(g/y*10)/10;n==="day"?$("#avgTimeAndTimeCode-avg").html(f.Player.Behavior.avgPlayerDailyGaming+"<font><em>"+S+"</em></font>"+f.Player.Behavior.timesTotal+"<font><em>"+w+"</em></font>"+E):n==="week"?$("#avgTimeAndTimeCode-avg").html(f.Player.Behavior.avgPlayerWeeklyGaming+"<font><em>"+S+"</em></font>"+f.Player.Behavior.timesTotal+"<font><em>"+w+"</em></font>"+E):n==="month"&&$("#avgTimeAndTimeCode-avg").html(f.Player.Behavior.avgPlayerMonthlyGaming+"<font><em>"+S+"</em></font>"+f.Player.Behavior.timesTotal+"<font><em>"+w+"</em></font>"+E);var x=[{name:o+f.GameCommon.timeTimes,data:v,type:"column",yAxis:1},{name:o+f.GameCommon.timeMinute,data:d}];r.chart({id:"avgTimeAndTimeCode-chart",x:l,series:x,yLeftUnit:s.getTimeItem(),yRightUnit:s.getTimesItem(),xType:"date",unitItem:[s.getTimesItem(),s.getTimeItem()]});var T=_.zip(l,d,v),N=[f.GameCommon.date,o+f.GameCommon.timeNum+"("+f.GameCommon.point+")",o+f.GameCommon.timesNum+"("+f.GameCommon.times+")"];i.drawTable({head:N,body:T,$el:$("#avgTimeAndTimeCode-table"),headType:"date"}),t.head=N,t.body=T}})})},renderToPlayFrequency:function(){var e=this,t=$("#playFrequencyCode").tabs(function(n){var o,a="";switch(n){case"monthDays":o=f.Player.Behavior.monthGamingDays,a="monthGameDays";break;case"weekDays":o=f.Player.Behavior.weekGamingDays,a="weekGameDays";break;case"weekTimes":o=f.Player.Behavior.weekGamingTimes,a="weekGameTimes";break;case"dayTimes":o=f.Player.Behavior.dayGamingTimes,a="dayGameTimes"}var l=_.clone(Params);l.player={userType:e.userType,groupType:a},u.fetchGameFrequencyList({$entity:l,$callback:function(u,a,l){var c=l.list,h=l.title,p=_.pluck(c,"item"),d=_.pluck(c,"value"),v=_.percent(d,3,1),m=f.GameCommon.day,g=f.GameCommon.times,y=p;if(n=="monthDays"||n=="weekDays")y=_.map(p,function(e){return e+""+m});else if(n=="weekTimes"||n=="dayTimes")y=_.map(p,function(e){return e+g});var b=[{name:e.playerName,data:d}];n!="dayTimes"?r.chartBar({id:"playFrequencyCode-chart",title:h,x:{left:y,right:v},series:b,unitItem:[s.getAccountItem()]}):r.chartBar({id:"playFrequencyCode-chart",x:{left:y,right:v},series:b,unitItem:[s.getAccountItem()]});var w=_.zip(y,d,v),E=[o,e.playerName+"("+s.getUnitByItem(s.getAccountItem())+")",f.GameCommon.percentage];i.drawTable({head:E,body:w,$el:$("#playFrequencyCode-table")}),t.head=E,t.body=w}})})},renderToPlayTime:function(){var e=this,t=$("#playTimeCode").tabs(function(n){var o,a="";switch(n){case"weekTime":o=f.Player.Behavior.weekGamingTime,a="weekUseTime";break;case"dayTime":o=f.Player.Behavior.dayGamingTime,a="dayUseTime";break;case"singleTime":o=f.Player.Behavior.singleGamingTime,a="perTimeUseTime"}var l=_.clone(Params);l.player={userType:e.userType,groupType:a},u.fetchGameDurationTimeList({$entity:l,$callback:function(u,a,l){var c=l.list,h=l.title,p=_.pluck(c,"item"),d=_.pluck(c,"value"),v=_.percent(d,3,1),m=[{name:e.playerName,data:d}],g=_.zip(p,d,v),y=[o,e.playerName+"("+s.getUnitByItem(s.getAccountItem())+")",f.GameCommon.percentage];i.drawTable({head:y,body:g,$el:$("#playTimeCode-table")}),n=="weekTime"?r.chartBar({id:"playTimeCode-chart",title:h,x:{left:p,right:v},series:m,unitItem:[s.getAccountItem()]}):r.chartBar({id:"playTimeCode-chart",x:{left:p,right:v},series:m,unitItem:[s.getAccountItem()]}),t.head=y,t.body=g}})})},renderToPlayTimeInterval:function(){var e=_.clone(Params);e.player={userType:this.userType,groupType:"hour"};var t=this,n=$("#playTimesDistributeCode").tabs(function(){u.fetchGameTimesList({$entity:e,$callback:function(e,o,u){var a=f.GameCommon.playerCount,l=_.pluck(u,"item"),u=_.pluck(u,"value"),c=[{name:t.playerName,data:u}],h=_.zip(l,u),p=[a,t.playerName+"("+s.getUnitByItem(s.getAccountItem())+")"];i.drawTable({head:p,body:h,$el:$("#playTimesDistributeCode-table")}),r.chart({id:"playTimesDistributeCode-chart",x:l,series:c,unitItem:[s.getAccountItem()]}),n.head=p,n.body=h}})})},renderToPlayInterval:function(){var e=_.clone(Params);e.player={userType:this.userType,groupType:"interval"},u.fetchIntervalList({$entity:e,$callback:function(e,t,n){var i=_.pluck(n,"item"),n=_.pluck(n,"value"),s=_.percent(n,3,1),o=[{name:f.Player.Behavior.gameGap,data:n}];r.chartBar({id:"playIntervalChart",x:{left:i,right:s},series:o})}})},userGroupSelectClick:function(e){this.render()},changePlayerType:function(e){var t=$(e.currentTarget);$("#playerTabs>a").removeClass("hover"),t.addClass("hover"),this.userType=t.attr("data"),this.playerName=t.text(),this.render()}});return l}),define("text!templates/player/device.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop" style="margin-bottom:0px;">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="playerTabs" class="l margin_left">\r                <a data="newPlayer" class="tagbut tagbutL hover"><%=GameCommon.newIncreasedPlayer%></a>\r                <a data="activePlayer" class="tagbut"><%=GameCommon.activePlayer%></a>\r                <a data="chargePlayer" class="tagbut tagbutR" ><%=GameCommon.payPlayer%></a>\r			</div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r	</div>\r\r	\r	<div class="boxmax" >\r		<div id="deviceModelCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.Device.model%></strong>\r			</div>\r			<div class="textbox">\r				<div role="picbox_chart_table">\r					<div id="deviceModelCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="deviceModelCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r	<ul class="Esbox">\r		<li class="contentbox r" >\r			<div id="deviceOSCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.operateSystem%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="deviceOSCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="deviceOSCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="deviceResolutionCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.DPI%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="deviceResolutionCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="deviceResolutionCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="deviceCarrierCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.serviceProvider%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="deviceCarrierCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="deviceCarrierCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="deviceNetworkCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.networkingModeDistribution%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="deviceNetworkCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="deviceNetworkCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/player/DeviceView",["backbone","views/public/DatePicker","views/public/SelectView","models/Constant","models/player/ActivePlayer","utils/HighchartUtil","utils/dataTableUtil","utils/UnitMappingUtil","text!templates/player/device.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#container",events:{"click #playerTabs>a":"changePlayerType"},initialize:function(){$("#container").html(_.template(a,f)),new t({el:"#datePicker"}),new n({el:"#selectChoose"}),this.player={userType:r.NEW_PLAYER},this.playerName=$("#playerTabs>a.hover").text(),this.render()},render:function(){return this.renderPhoneModel(),this.renderOS(),this.renderResolution(),this.renderCarrier(),this.renderNetWorking(),this},changePlayerType:function(e){var t=$(e.currentTarget);$("#playerTabs>a").removeClass("hover"),t.addClass("hover"),this.player.userType=t.attr("data"),this.playerName=t.text(),this.render()},renderPhoneModel:function(){this.request(r.MOBILE,"deviceModelCode",f.Player.Device.model,!0)},renderOS:function(){this.request(r.MOBILE_OS,"deviceOSCode",f.Player.Device.operateSystem,!0)},renderResolution:function(){this.request(r.PIXEL,"deviceResolutionCode",f.Player.Device.DPI,!0)},renderCarrier:function(){this.request(r.CARRIER,"deviceCarrierCode",f.Player.Device.serviceProvider,!0)},renderNetWorking:function(){this.request(r.NETWORK,"deviceNetworkCode",f.Player.Device.networkingModeDistribution)},request:function(e,t,n,r){var a=_.clone(Params);a.groupBy=e,a.player=this.player;var l=this,c=$("#"+t).tabs(function(){i.fetchGroupedPlayerList({data:a,success:function(e){var i=_.pluck(e,"item"),a=_.pluck(e,"value");t=="deviceModelCode"&&(i=_.map(i,function(e){return e=="2014501"?"红米4G":e}));if(t=="deviceNetworkCode"){var h=_.percent(a,3),p=_.map(h,function(e){return parseFloat((e*100).toFixed(1))}),a=_.zip(i,p),d=[{type:"pie",name:n,data:a}];s.chartPie({id:t+"-chart",series:d});var v=_.zip(i,_.map(p,function(e){return e+"%"})),m=[f.Player.Device.linkNetType,f.GameCommon.percentage];o.drawTable({head:m,body:v,$el:$("#"+t+"-table")}),c.head=m,c.body=v}else{var d=[{name:l.playerName,data:a}],h=_.percent(a,3,1);s.chartBar({id:t+"-chart",x:{left:i,right:h},series:d,pagination:r,unitItem:[u.getAccountItem()]});var v=_.zip(i,a,h),m=[n,l.playerName+"("+u.getUnitByItem(u.getAccountItem())+")",f.GameCommon.percentage];o.drawTable({head:m,body:v,$el:$("#"+t+"-table")}),c.head=m,c.body=v}}})})}});return l}),define("models/player/Churned",["models/BaseModel"],function(e){var t=[{name:"fetchPerDayLostNumAndRate",url:"/v1/churned/fetchPerDayLostNumAndRate"},{name:"fetchPerDayReturnNumList",url:"/v1/churned/perDayReturnNumList"},{name:"fetchLostUserAnalysNumList",url:"/v1/churned/lostUserAnalysNumList"}];return e.init(t)}),define("text!templates/player/churned.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			\r			<!-- 每日流失/流失漏斗 标签 -->\r			<div class="l margin_right" id="tagb">\r                <a class="tagbut tagbutL hover"><%=Player.Churned.dailyLoss%></a>\r                <a class="tagbut tagbutR" id="toLostFunnelBtn"><%=Player.Churned.lossFunnel%></a>\r			</div>\r			\r			<!-- 日历控件 -->\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r\r		</div>\r		<div id="churnedPerDayCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.Churned.dailyLoss%></strong>\r				<div class="buttonDiv l">\r					<label class="l selectlble"><%=Player.Churned.lossCondition%>：</label>\r					<select id="churnedSelect" class="true">\r						<option selected="selected" value="7"><%=Player.Churned.servenDaysNotLoginIn%></option>\r						<option value="14"><%=Player.Churned.fourteenDaysNotLoginIn%></option>\r						<option value="30"><%=Player.Churned.thirtynDaysNotLoginIn%></option>\r					</select>\r	                </div>\r				<div class="buttonDiv l" style="margin-left:0;">\r					<label class="l selectlble"><%=GameCommon.of%></label>\r					<select id="userTypeSelect" class="true">\r						<option selected="selected" value="3"><%=Player.Churned.allPlayers%></option>\r						<option value="2"><%=GameCommon.payPlayer%></option>\r					</select>\r				</div>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a class="tab hover" data-tab="lost"><%=Player.Churned.dailyLoss%></a>\r					<a class="tab" data-tab="return"><%=Player.Churned.dailyBackflow%></a>\r				</div>\r				<div class="picbox_chart_table" role="remarkBottom">\r					<div id="churnedPerDayCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="churnedPerDayCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r	\r	<div class="boxmax">\r		<div id="churnedPlayerAnalysisCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.Churned.lossUserAnalysis%></strong>\r				<div class="buttonDiv l">\r					<div class="l selectlble"><%=Player.Churned.analysisType%>：</div>\r					<select id="analyticalMethodsSelect" class="true">\r						<option selected="selected" value="1"><%=Player.Churned.lossLevel%></option>\r						<option value="2"><%=Player.Churned.userLifeCycle%></option>\r						<option value="3"><%=Player.Churned.paySum%></option>\r						<option value="4"><%=Player.Churned.payCount%></option>\r					</select>\r				</div>\r			</div>\r			<div class="textbox">\r				<div role="picbox_chart_table">\r					<div id="churnedPlayerAnalysisCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="churnedPlayerAnalysisCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r</div>\r'}),define("views/player/ChurnedView",["backbone","models/player/Churned","models/Constant","utils/HighchartUtil","utils/dataTableUtil","utils/CurrencyUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/player/churned.html","i18n!nls/gameI18N","jquery.select","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e.View.extend({el:"#container",events:{"change #churnedSelect":"churnedSelectClick","change #userTypeSelect":"userTypeSelectClick","change #analyticalMethodsSelect":"analyticalMethodsSelectClick","click #toLostFunnelBtn":"toLostFunnel"},initialize:function(){$("#container").html(_.template(f,l)),$("#churnedSelect").sSelect(),$("#userTypeSelect").sSelect(),$("#analyticalMethodsSelect").sSelect(),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.params=_.clone(Params),this.dayType=parseInt($("#churnedSelect").val()),this.playerType=parseInt($("#userTypeSelect").val()),this.analysType=parseInt($("#analyticalMethodsSelect").val()),this.params.churnedParameterBean={playerType:this.playerType,dayType:this.dayType,analysType:this.analysType},this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.playerName=$("#userTypeSelect option:selected").text(),this.render()},render:function(){this.renderPerDayLostReturnChart(),this.renderLostUserAnalysChart()},renderPerDayLostReturnChart:function(){var e=this.params,n=this,s=$("#churnedPerDayCode").tabs(function(u){var a,f,c,h,p;switch(u){case"lost":c="fetchPerDayLostNumAndRate",a="perDayLostChart",f=l.Player.Churned.dailyLoss,h=!0,p=!0;break;case"return":c="fetchPerDayReturnNumList",a="perDayReturnChart",f=l.Player.Churned.dailyBackflow,h=!1,p=!1}t[c]({$entity:e,$callback:function(e,t,a){var c,h,d;if(u==="lost")var v=a.rate,m=a.num,c=_.pluck(v,"item"),g=_.pluck(m,"value"),y=_.pluck(v,"value"),d=[{name:l.Player.Churned.dailyLossNum,data:g,type:"column",yAxis:1},{name:l.Player.Churned.dailyLossRate,data:y,type:"area"}];else c=_.pluck(a,"item"),h=_.pluck(a,"value"),d=[{name:f,data:h}];var b=null,w=null;u==="lost"?(b=_.zip(c,g,y),w=[l.GameCommon.date,l.Player.Churned.dailyLossNum+"("+o.getUnitByItem(o.getAccountNumItem())+")",l.Player.Churned.dailyLossRate]):(b=_.zip(c,h),w=[l.GameCommon.date,n.playerName+"("+o.getUnitByItem(o.getAccountNumItem())+")"]),i.drawTable({head:w,body:b,$el:$("#churnedPerDayCode-table"),headType:"date"}),u==="lost"?r.chart({id:"churnedPerDayCode-chart",x:c,series:d,legend:p,xType:"date",yLeftUnit:o.getPercentItem(),unitItem:[o.getAccountNumItem(),o.getPercentItem()]}):r.chart({id:"churnedPerDayCode-chart",x:c,series:d,legend:p,xType:"date",unitItem:[o.getAccountNumItem()]}),s.head=w,s.body=b}})},!1)},renderLostUserAnalysChart:function(){var e=this.params.churnedParameterBean.analysType,n=this,s=$("#churnedPlayerAnalysisCode").tabs(function(){var u=!1;t.fetchLostUserAnalysNumList({$entity:n.params,$callback:function(t,a,f){var c="";switch(parseInt(e)){case 1:c=l.Player.Churned.lossLevel,u=!0;break;case 2:c=l.Player.Churned.userLifeCycle;break;case 3:c=l.GameCommon.paySum;break;case 4:c=l.GameCommon.payCount}var h=_.pluck(f,"item"),p=null;if(c==l.GameCommon.paySum&&Params.displayCurrency!="CNY"){h=[];var d=_.pluck(f,"item");_.each(d,function(e){var t="";d.indexOf(e)==0?t="<"+e.split("<")[1]:d.indexOf(e)==9?t=">"+e.split(">")[1]:t=e.split("~")[0]+"~"+e.split("~")[1],h.push(t)})}var f=_.pluck(f,"value"),v=_.percent(f,3,1),m=[{name:n.playerName,data:f}];r.chartBar({id:"churnedPlayerAnalysisCode-chart",x:{left:h,right:v},series:m,pagination:u,unitItem:[o.getAccountItem()]});var g=_.zip(h,f,v),y=[c,n.playerName+"("+o.getUnitByItem(o.getAccountItem())+")",l.GameCommon.percentage];i.drawTable({head:y,body:g,$el:$("#churnedPlayerAnalysisCode-table")}),s.head=y,c==l.GameCommon.paySum?s.body=_.zip(h,f,v):s.body=g}})})},churnedSelectClick:function(e){this.params.churnedParameterBean.dayType=parseInt($(e.currentTarget).val()),this.renderPerDayLostReturnChart(),this.renderLostUserAnalysChart()},userTypeSelectClick:function(e){this.playerName=$("#userTypeSelect option:selected").text(),this.params.churnedParameterBean.playerType=parseInt($(e.currentTarget).val()),this.renderPerDayLostReturnChart(),this.renderLostUserAnalysChart()},analyticalMethodsSelectClick:function(e){this.params.churnedParameterBean.analysType=parseInt($(e.currentTarget).val()),this.renderLostUserAnalysChart()},toLostFunnel:function(){require(["utils/urlUtil"],function(e){e.changeHashByParams("#page/player-lostFunnel_churned/")})},loading:function(){return'<div class="login"><img src="images/loading.gif" height="25px"></img> <br>'+l.GameCommon.loadingData+"</div>"}});return c}),define("models/player/Conversion",["models/BaseModel"],function(e){var t=[{name:"fetchNewChargeUserNumList",url:"/v1/convertion/newChargeUserNumList"},{name:"fetchChargeUserNumList",url:"/v1/convertion/chargeUserNumList"},{name:"fetchTotalPaidRate",url:"/v1/convertion/fetchTotalPaidRate"},{name:"fetchFirstDayChargeRateAndNum",url:"/v1/convertion/fetchFirstDayChargeRateAndNum"},{name:"fetchFirstWeekChargeRateAndNum",url:"/v1/convertion/fetchFirstWeekChargeRateAndNum"},{name:"fetchFirstMonthChargeRateAndNum",url:"/v1/convertion/fetchFirstMonthChargeRateAndNum"},{name:"fetchFirstChargeTotalTimeList",url:"/v1/convertion/firstChargeTotalTimeList"},{name:"fetchFirstChargeTotalDayNumList",url:"/v1/convertion/firstChargeTotalDayNumList"},{name:"fetchFirstChargeLevelList",url:"/v1/convertion/firstChargeLevelList"},{name:"fetchFirstChargeMoney",url:"/v1/convertion/fetchFirstChargeMoney"},{name:"fetchFirstChargePackage",url:"/v1/convertion/fetchFirstChargePackage"}];return e.init(t)}),define("text!templates/player/convertion.html",[],function(){return'<div id="convertion">\r		<div class="content r">\r			<div class="boxmax">\r				<div class="maintop">\r					<div id="datePicker" class="relative l" style=" z-index:99"></div>\r					<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r					<div class="clear"></div>\r					<div id="showSelectedPartners" class="Editor hide Filter" >\r						<div id="selectVersion"></div>\r					</div>\r				</div>\r				<div id="chargeConvertionCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.payConversion%></strong>\r					</div>\r					<div class="textbox">\r						<div role="tabbar" class="box_top">\r							<a class="tab hover" data-tab="newPayPlayer"><%=Player.Convertion.newIncreasedPayPlayer%></a>\r							<a class="tab" data-tab="totalPayPlayer"><%=Player.Convertion.accumulativePayPlayer%></a>\r							<a class="tab" data-tab="payRate"><%=Player.Convertion.totalPayRate%></a>\r							<div class="info l" id="sumDiv">\r		                		SUM：<font id="chart-sum"></font>\r		                	</div>\r						</div>\r						<div class="picbox_chart_table" role="remarkBottom">\r							<div id="chargeConvertionCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="chargeConvertionCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r			\r			<div class="boxmax">\r				<div id="newPlayerChargeCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.newPalyerPay%></strong>\r					</div>\r					<div class="textbox">\r						<div role="tabbar" class="box_top">\r							<a class="tab hover" data-tab="dailyPayRate"><%=Player.Convertion.firstDayPayRate%></a>\r							<a class="tab" data-tab="weekPayRate"><%=Player.Convertion.firstWeekPayRate%></a>\r							<a class="tab" data-tab="monthPayRate"><%=Player.Convertion.firstMonthPayRate%></a>\r						</div>\r						<div class="picbox_chart_table" role="remarkBottom">\r							<div id="newPlayerChargeCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="newPlayerChargeCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</div>\r			\r		<ul id="Esbox" class="Esbox">\r			<li class="contentbox l">\r				<div id="playerFirstBuyPeriodCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.playerFirstPayPeriod%></strong>\r					</div>\r					<div class="textbox">\r						<div role="tabbar" class="box_top">\r							<a class="tab hover" data-tab="gameDays"><%=Player.Convertion.gamingDays%></a>\r							<a class="tab" data-tab="accumulGameTime"><font><%=Player.Convertion.accumulativeGamingTime%></font></a>\r							<div class="info l">\r			                	AVG | MD：<font id="avgCycle"></font>| <font id="middleCycle"></font>\r			                </div>\r						</div>\r						<div role="picbox_chart_table">\r							<div id="playerFirstBuyPeriodCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="playerFirstBuyPeriodCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</li>\r			<li class="contentbox r" >\r				<div id="playerFirstBuyLevelCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.playerFirstPayLevel%></strong>\r					</div>\r					<div class="textbox">\r						<div class="box_top">\r							<div class="info r">\r			                	AVG | MD：<font id="avgLevel"></font>| <font id="middleLevel"></font>\r			                </div>\r						</div>\r						<div role="picbox_chart_table">\r							<div id="playerFirstBuyLevelCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="playerFirstBuyLevelCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</li>\r			<li class="contentbox l" >\r				<div id="playerFirstBuyMoneyCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.playerFirstBuyMoney%></strong>\r					</div>\r					<div class="textbox">\r						<div role="picbox_chart_table">\r							<div id="playerFirstBuyMoneyCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="playerFirstBuyMoneyCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</li>\r			<li class="contentbox r" >\r				<div id="playerFirstBuyChargePackageCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.playerFirstBuyChargePackage%></strong>\r					</div>\r					<div class="textbox">\r						<div role="picbox_chart_table">\r							<div id="playerFirstBuyChargePackageCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="playerFirstBuyChargePackageCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</li>\r		</ul>\r</div>\r'}),define("views/player/ConvertionView",["backbone","models/player/Conversion","models/Constant","views/public/DatePicker","views/public/SelectView","utils/HighchartUtil","utils/dataTableUtil","utils/RegexUtil","utils/levelUtil","utils/CurrencyUtil","utils/UnitMappingUtil","text!templates/player/convertion.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(c,h)),new r({el:"#datePicker"}),new i({el:"#selectChoose"}),this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.render()},render:function(){return this.renderConvertionPayIntoChart(),this.renderNewPlayerPayChart(),this.renderFirstChargeCycleChart(),this.renderFirstChargeLevelChart(),this.renderFirstChargeMoneyChart(),this.renderFirstChargePackageChart(),this},renderConvertionPayIntoChart:function(){var e=_.clone(Params);e.player={userType:"newPlayer"};var n=$("#chargeConvertionCode").tabs(function(r){var i,a,f=!1,c="";switch(r){case"newPayPlayer":i="fetchNewChargeUserNumList",a=h.Player.Convertion.newIncreasedPayPlayer;break;case"totalPayPlayer":i="fetchChargeUserNumList",a=h.Player.Convertion.accumulativePayPlayer;break;case"payRate":i="fetchTotalPaidRate",a=h.Player.Convertion.totalPayRate,c="^%",f=!0}r==="newPayPlayer"?$("#sumDiv").show():$("#sumDiv").hide(),t[i]({$entity:e,$callback:function(e,t,f){var p=_.pluck(f,"item"),f=_.pluck(f,"value"),d=[{name:a,data:f}];$("#chart-sum").html("<em>"+u.formatDigit(_.sum(f))+c+"</em>"),r=="payRate"?s.chart({id:"chargeConvertionCode-chart",x:p,series:d,xType:"date",yLeftUnit:l.getPercentItem(),unitItem:[l.getPercentItem()]}):s.chart({id:"chargeConvertionCode-chart",x:p,series:d,xType:"date",unitItem:[l.getAccountItem()]});var v=_.zip(p,f),m=null;i==="fetchTotalPaidRate"?m=[h.GameCommon.date,a+"(%)"]:m=[h.GameCommon.date,a+"("+l.getUnitByItem(l.getAccountItem())+")"],o.drawTable({head:m,body:v,$el:$("#chargeConvertionCode-table"),headType:"date"}),n.head=m,n.body=v}})})},renderNewPlayerPayChart:function(){var e=_.clone(Params);e.player={userType:"newPlayer"};var n=$("#newPlayerChargeCode").tabs(function(r){var i,u;switch(r){case"dailyPayRate":i="fetchFirstDayChargeRateAndNum",u=h.Player.Convertion.firstDayPay;break;case"weekPayRate":i="fetchFirstWeekChargeRateAndNum",u=h.Player.Convertion.firstWeekPay;break;case"monthPayRate":i="fetchFirstMonthChargeRateAndNum",u=h.Player.Convertion.firstMonthPay}t[i]({$entity:e,$callback:function(e,t,r){var i=r.rate,a=r.num,f=_.pluck(i,"item"),c=_.pluck(a,"value"),p=_.pluck(i,"value"),d=[{name:u+h.GameCommon.number,data:c,type:"column",yAxis:1},{name:u+h.GameCommon.rate,data:p,type:"area"}];s.chart({id:"newPlayerChargeCode-chart",x:f,series:d,yLeftUnit:l.getPercentItem(),xType:"date",unitItem:[l.getAccountNumItem(),l.getPercentItem()]});var v=_.zip(f,c,p),m=[h.GameCommon.date,u+h.GameCommon.number+"("+l.getUnitByItem(l.getAccountNumItem())+")",u+h.GameCommon.rate+"(%)"];o.drawTable({head:m,body:v,$el:$("#newPlayerChargeCode-table"),headType:"date"}),n.head=m,n.body=v}})})},renderFirstChargeCycleChart:function(){var e,n,r=this,i=$("#playerFirstBuyPeriodCode").tabs(function(u){switch(u){case"gameDays":e="fetchFirstChargeTotalDayNumList",n=h.Player.Convertion.gamingDays;break;case"accumulGameTime":e="fetchFirstChargeTotalTimeList",n=h.Player.Convertion.accumulativeGamingTime}t[e]({$entity:Params,$callback:function(e,t,u){var a=_.pluck(u.processed,"item"),f=_.pluck(u.processed,"value"),c=[{name:h.GameCommon.payPlayer,data:f}],p=u.all;percent=_.percent(f,3,1);var d="";if(n==h.Player.Convertion.gamingDays){var v=_.avg(p),m=_.median(p);$("#avgCycle").html("<em>"+(v==0?h.GameCommon.firstDay:v+h.GameCommon._day)+"</em>"),$("#middleCycle").html("<em>"+(m==0?h.GameCommon.firstDay:v+h.GameCommon._day)+"</em>")}else n==h.Player.Convertion.accumulativeGamingTime&&($("#avgCycle").html(r.handleMinute(_.avg(p))),$("#middleCycle").html(r.handleMinute(_.median(p))));var g=_.zip(a,f,percent),y=[n,h.GameCommon.payPlayer+"("+l.getUnitByItem(l.getAccountItem())+")",h.GameCommon.percentage];o.drawTable({head:y,body:g,$el:$("#playerFirstBuyPeriodCode-table")}),s.chartBar({id:"playerFirstBuyPeriodCode-chart",x:{left:a,right:percent},series:c,unitItem:[l.getAccountItem()]}),i.head=y,i.body=g}})})},renderFirstChargeLevelChart:function(){var e=$("#playerFirstBuyLevelCode").tabs(function(){t.fetchFirstChargeLevelList({$entity:Params,$callback:function(t,n,r){r=_.sortBy(r,function(e){return-e.value});var i=_.filter(r,function(e){return e.value!=0}),u="--",f="--",c=[];i&&i.length&&(_.each(i,function(e){for(var t=1;t<=e.value;t++)c.push(parseInt(e.item))}),u=_.median(c),f=_.avg(c)),$("#avgLevel").html("<em>"+f+"</em>"),$("#middleLevel").html("<em>"+u+"</em>");var p=_.pluck(r,"item"),d=_.pluck(r,"value"),v=[{name:h.Player.Convertion.playerFirstPayLevel,data:d}],m=_.percent(d,3,1),g=a.split(r,10),y=_.pluck(g,"item"),b=_.pluck(g,"value"),w=[{name:h.GameCommon.payPlayer,data:b}],E=_.percent(b,3,1),S=_.zip(p,d,m),x=[h.Player.Convertion.playerFirstPayLevel,h.GameCommon.payPlayer+"("+l.getUnitByItem(l.getAccountItem())+")",h.GameCommon.percentage];o.drawTable({head:x,body:S,$el:$("#playerFirstBuyLevelCode-table")}),s.chartBar({id:"playerFirstBuyLevelCode-chart",x:{left:y,right:E},series:w,pagination:!1,unitItem:[l.getAccountItem()]}),e.head=x,e.body=S}})})},renderFirstChargeMoneyChart:function(){var e=this,n=$("#playerFirstBuyMoneyCode").tabs(function(){t.fetchFirstChargeMoney({data:Params,success:function(e){var t=_.pluck(e,"item"),e=_.pluck(e,"value"),r=_.percent(e,3,1),i=[{name:h.GameCommon.payPlayer,data:e}],u=_.zip(t,e,r),a=[h.Player.Convertion.playerFirstBuyMoney,h.GameCommon.payPlayer+"("+l.getUnitByItem(l.getAccountItem())+")",h.GameCommon.percentage];o.drawTable({head:a,body:u,$el:$("#playerFirstBuyMoneyCode-table")}),s.chartBar({id:"playerFirstBuyMoneyCode-chart",x:{left:t,right:r},series:i,pagination:!1,unitItem:[l.getAccountItem()]}),n.head=a,n.body=_.zip(t,e,r)}})})},renderFirstChargePackageChart:function(){var e=$("#playerFirstBuyChargePackageCode").tabs(function(){t.fetchFirstChargePackage({$entity:Params,$callback:function(t,n,r){var i=_.pluck(r,"item"),r=_.pluck(r,"value"),u=_.percent(r,3,1),a=[{name:h.GameCommon.payPlayer,data:r}],f=_.zip(i,r,u),c=[h.Player.Convertion.playerFirstBuyChargePackage,h.GameCommon.payPlayer+"("+l.getUnitByItem(l.getAccountItem())+")",h.GameCommon.percentage];o.drawTable({head:c,body:f,$el:$("#playerFirstBuyChargePackageCode-table")}),s.chartBar({id:"playerFirstBuyChargePackageCode-chart",x:{left:i,right:u},series:a,pagination:!0,unitItem:[l.getAccountItem()]}),e.head=c,e.body=f}})})},handleMinute:function(e){return e=="--"?"<em>"+e+"</em>":e<=60?"<em>"+(e+h.Summary.Summary.minute)+"</em>":e<=1440?"<em>"+((e/60).toFixed(1)+h.GameCommon.hour)+"</em>":"<em>"+((e/1440).toFixed(1)+h.GameCommon._day)+"</em>"}});return p}),define("text!templates/player/retention.html",[],function(){return'<div id="retention">\r		<div class="content r">\r			<div class="boxmax">\r				<div class="maintop">\r					<div class="l margin_right" id="tagb">\r						<a class="tagbut tagbutL hover"><%=GameCommon.retain%></a>\r						<a class="tagbut tagbutR" id="customRetentionBtn"><%=Player.Retention.customRetain%></a>\r					</div>\r					<div id="datePicker" class="relative l" style=" z-index:99"></div>\r					<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r					<div class="clear"></div>\r					<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r				</div>\r				<div id="retentionCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Retention.retainRate%></strong>\r					</div>\r					<div class="textbox">\r						<div class="box_top" role="tabbar">\r							<a class="tab hover" data-tab="newPlayerRetention"><%=Player.Retention.newplayerRetention%></a>\r							<a class="tab" data-tab="newDeviceRetention"><%=Player.Retention.installRetention%></a>\r						</div>\r						<div class="picbox_chart_table" role="remarkBottom">\r							<div id="retentionCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="retentionCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r				<div class="clear"></div>\r			</div>\r\r			<div class="box">\r				<div class="contentbox l" style="width:32%">\r					<div class="title">\r						<strong class="l"><%=Player.Retention.morrowRetain%></strong>\r					</div>\r                    <table cellspacing="0" cellpadding="0" border="0" width="100%"	class="table_style2">\r                        <tbody>\r                            <tr>\r                                <td class="left border_none">AVG</td>\r                                <td class="center border_none"><strong><font id="avgday01"></font><font>%</font></strong>\r                                </td>\r                            </tr>\r                        </tbody>\r                    </table>\r				</div>\r\r				<div class="contentbox r" style="width:32%">\r					<div class="title">\r						<strong class="l">30<%=Player.Retention.dayRetain%></strong>\r					</div>\r                    <table cellspacing="0" cellpadding="0" border="0" width="100%"\r                        class="table_style2">\r                        <tbody>\r                            <tr>\r                                <td class="left border_none">AVG</td>\r                                <td class="center border_none"><strong><font id="avgday30"></font><font>%</font></strong>\r                                </td>\r                            </tr>\r                        </tbody>\r                    </table>\r				</div>\r\r				<div class="contentbox" style="width:32%; margin:0 auto">\r					<div class="title">\r						<strong class="l">7<%=Player.Retention.dayRetain%></strong>\r					</div>\r                    <table cellspacing="0" cellpadding="0" border="0" width="100%"\r                        class="table_style2">\r                        <tbody>\r                            <tr>\r                                <td class="left border_none">AVG</td>\r                                <td class="center border_none"><strong><font id="avgday07"></font><font>%</font></strong>\r                                </td>\r                            </tr>\r                        </tbody>\r                    </table>\r				</div>\r			</div>\r			<div class="boxmax">\r				<div id="retainedUserAnallyticCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Retention.retainUserAnalysis%></strong>\r						<div class="buttonDiv l">\r							<div class="l selectlble"><%=Player.Retention.userGroup%>：</div>\r							<select id="retainedUsersSelect" class="true">\r								<option selected="selected"  value="1">Day1 <%=Player.Retention.retainUser%></option>\r								<option value="7">Day7 <%=Player.Retention.retainUser%></option>\r								<option value="30">Day30 <%=Player.Retention.retainUser%></option>\r							</select>\r						</div>\r						<div class="buttonDiv l">\r							<div class="l selectlble"><%=Player.Churned.analysisType%>：</div>\r							<select id="analyticalMethodsSelect" class="true">\r								<option  selected="selected" value="firstDayLevel"><%=Player.Retention.newIncreasedDayLevel%></option>\r								<option value="logintimes"><%=Player.Retention.newIncreasedDayGameTimes%></option>\r								<option value="firstDayUseTime"><%=Player.Retention.newIncreasedDayGamingTime%></option>\r								<option value="isFirstDayCharge"><%=Player.Retention.newIncreasedDayWhetherPay%></option>\r							    <option value="sex"><%=GameCommon.player%><%=GameCommon.sex%></option>\r								<option value="age"><%=GameCommon.player%><%=GameCommon.age%></option>\r							</select>\r						</div>\r					</div>\r					<div class="textbox">\r						<div role="picbox_chart_table">\r							<div id="retainedUserAnallyticCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r							<div id="retainedUserAnallyticCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</div>\r		<div class="clear"></div>\r	</div>\r'}),define("views/player/RetentionView",["backbone","models/player/Retention","models/Constant","utils/HighchartUtil","utils/urlUtil","utils/dataTableUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/player/retention.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e.View.extend({el:"#container",events:{"change #retainedUsersSelect":"retainedUsersSelectClick","change #analyticalMethodsSelect":"analyticalMethodsSelectClick","click #customRetentionBtn":"toCustomRetention"},initialize:function(){$("#container").html(_.template(f,l)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.$retainedUsersSelect=$("#retainedUsersSelect"),this.$analyticalMethodsSelect=$("#analyticalMethodsSelect"),this.$retainedUsersSelect.sSelect(),this.$analyticalMethodsSelect.sSelect(),this.retentionBean={type:"newPlayerRetention",keepDay:1},this.groupBy="firstDayLevel",this.render()},render:function(){this.retentionRateChart(),this.renderRetentionAnalysChart()},retainedUsersSelectClick:function(){this.retentionBean.keepDay=parseInt(this.$retainedUsersSelect.val()),this.renderRetentionAnalysChart()},analyticalMethodsSelectClick:function(){this.groupBy=this.$analyticalMethodsSelect.val(),this.renderRetentionAnalysChart()},retentionRateChart:function(){var e=_.clone(Params),n=this,i=$("#retentionCode").tabs(function(u){n.retentionBean.type=u,e.retentionBean=n.retentionBean,t.fetchDay1Day7Day30Retention({$entity:e,$callback:function(e,t,n){var u=_.pluck(n.day01,"item"),a=_.pluck(n.day01,"value"),f=_.pluck(n.day07,"value"),c=_.pluck(n.day30,"value"),h=$.map(a,function(e){return parseInt(e)>-1?e:null});_day07=$.map(f,function(e){return parseInt(e)>-1?e:null}),_day30=$.map(c,function(e){return parseInt(e)>-1?e:null});var p=_.avg(h),d=_.avg(_day07),v=_.avg(_day30),m=[{name:l.Summary.Summary.morrowRetainRate,data:_.map(a,function(e){return parseInt(e)>-1?e:null})},{name:l.Summary.Summary.sevenDaysRetainRate,data:_.map(f,function(e){return parseInt(e)>-1?e:null})},{name:l.Summary.Summary.thiryDaysRetainTate,data:_.map(c,function(e){return parseInt(e)>-1?e:null})}];$("#avgday01").html(p),$("#avgday07").html(d),$("#avgday30").html(v),r.chart({id:"retentionCode-chart",x:u,series:m,legend:!0,yPercent:!0,xType:"date",yLeftUnit:o.getPercentItem(),unitItem:[o.getPercentItem(),o.getPercentItem(),o.getPercentItem()]});var g=_.zip(u,_.map(a,function(e){return parseInt(e)>-1?e:"--"}),_.map(f,function(e){return parseInt(e)>-1?e:"--"}),_.map(c,function(e){return parseInt(e)>-1?e:"--"})),y=[l.GameCommon.date,l.Summary.Summary.morrowRetainRate+"(%)",l.Summary.Summary.sevenDaysRetainRate+"(%)",l.Summary.Summary.thiryDaysRetainTate+"(%)"];s.drawTable({head:y,body:g,$el:$("#retentionCode-table"),headType:"date"}),i.head=y,i.body=g}})})},renderRetentionAnalysChart:function(){var e=_.clone(Params);e.retentionBean=this.retentionBean,e.groupBy=this.groupBy;var n=!1;e.groupBy==="firstDayLevel"&&(n=!0);var i=$("#analyticalMethodsSelect option:selected").text(),u=$("#retainedUsersSelect option:selected").text(),a=$("#retainedUserAnallyticCode").tabs(function(){t.fetchRetentionUserAnalys({$entity:e,$callback:function(e,t,f){var c=_.pluck(f,"item"),h=_.pluck(f,"value"),p=$.map(h,function(e){return parseInt(e)>-1?e:null}),d=_.percent(p,3,1),v=_.zip(c,p,d),m=[i,u+"("+o.getUnitByItem(o.getAccountItem())+")",l.GameCommon.percentage];s.drawTable({head:m,body:v,$el:$("#retainedUserAnallyticCode-table")}),r.chartBar({id:"retainedUserAnallyticCode-chart",x:{left:c,right:d},series:[{name:u,data:p}],pagination:n,unitItem:[o.getAccountItem()]}),a.head=m,a.body=v}})})},toCustomRetention:function(){i.changeHashByParams("#page/player-customRetention_retention/")}});return c}),define("models/player/CustomRetention",["models/BaseModel"],function(e){var t=[{name:"fetchCustomRetentionList",url:"/v1/customRetention/customRetentionList"},{name:"fetchMaxUserNum",url:"/v1/customRetention/maxUserNum"},{name:"fetchYesterdayPerHourUserNumList",url:"/v1/customRetention/yesterdayPerHourUserNumList"},{name:"fetchTodayPerHourUserNumList",url:"/v1/customRetention/todayPerHourUserNumList"},{name:"fetchRecentPlayerList",url:"/v1/customRetention/recentPlayerList"},{name:"fetchACUList",url:"/v1/customRetention/acuList"},{name:"fetchPCUList",url:"/v1/customRetention/pcuList"}];return e.init(t)}),define("text!templates/player/customRetention.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div class="l margin_right">\r\n                <a class="tagbut tagbutL" id="retentionBtn"><%=GameCommon.retain%></a>\r\n                <a class="tagbut tagbutR hover"><%=Player.CustomRetention.customRetain %></a>\r\n			</div>\r\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n			<div id="showSelectedPartners" class="Editor hide Filter" >\r\n				<div id="selectVersion"></div>\r\n			</div>\r\n		</div>\r\n        <div id="playerCustomRetentionCustomRetain">\r\n            <div class="title" role="title">\r\n                <strong class="l"><%=Player.CustomRetention.retentionMatrix %></strong>\r\n            </div>\r\n        </div>\r\n\r\n		<div class="tablebox">\r\n			<div class="Condition after">\r\n				<ul class="l customul">\r\n                    <li class="buttonDiv">\r\n                        <label class="l selectlble"><%=Player.CustomRetention.playerSample %>：</label>\r\n                        <input type="text" id="startTime" name="startTime" class="Timeinput l" />\r\n                        <label class="l selectlble"><%=GameCommon.to %></label>\r\n                        <input type="text" id="endTime"	name="endTime" class="Timeinput l" />\r\n                        <label class="l selectlble"><%=Player.CustomRetention.during %></label>\r\n                        <select id="sampleSelect" class="true">\r\n                            <option value="day"><%=Player.CustomRetention.daily %></option>\r\n                            <option value="week"><%=Player.CustomRetention.weekly %></option>\r\n                            <option value="month"><%=Player.CustomRetention.monthly %></option>\r\n                        </select>\r\n                        <label class="l selectlble"><%=Player.CustomRetention.of %></label>\r\n                        <select id="userSelect" class="true">\r\n                            <option value="newPlayerRetention"><%=Player.CustomRetention.newIncreasedUser %></option>\r\n                            <option value="newDeviceRetention"><%=Player.CustomRetention.newInstall %></option>\r\n                            <option value="activePlayerRetention"><%=Player.CustomRetention.activeUser %></option>\r\n                            <option value="activeDeviceRetention"><%=Player.CustomRetention.activeInstall %></option>\r\n                        </select>\r\n                    </li>\r\n                    <li class="buttonDiv">\r\n                        <label class="l selectlble"><%=Player.CustomRetention.retainAction%></label>\r\n                        <select id="retentionSelect" class="true">\r\n                            <option value="1"><%=Player.CustomRetention.daily %></option>\r\n                            <option value="7"><%=Player.CustomRetention.weekly %></option>\r\n                            <option value="30"><%=Player.CustomRetention.monthly %></option>\r\n                        </select>\r\n                        <label class="l selectlble"><%=Player.CustomRetention.in%></label>\r\n                        <select id="activitySelect" class="true">\r\n                            <option><%=Player.CustomRetention.startApp %></option>\r\n                        </select>\r\n                        <select id="activityResultSelect" class="true">\r\n                            <option value="1"><%=Player.CustomRetention.atLeast%>1<%=GameCommon.times%></option>\r\n                            <option value="2"><%=Player.CustomRetention.atLeast %>2<%=GameCommon.times%></option>\r\n                            <option value="3"><%=Player.CustomRetention.atLeast %>3<%=GameCommon.times%></option>\r\n                        </select>\r\n                        <label class="l selectlble"><%=Player.CustomRetention.asRetainUser %></label>\r\n                    </li>\r\n                </ul>\r\n				<div class="custombutton l"><a id="searchBtn" class="Confirm" ><%=Player.CustomRetention.query %></a></div>\r\n			</div>\r\n			<div id="dataTable">\r\n				\r\n			</div>\r\n		</div>\r\n	</div>\r\n	\r\n</div>'}),define("text!templates/player/customRetentionTip.html",[],function(){return'<div class="retention-data-detail" style="position: absolute;"  >\r    <div class="retention-leftCor"><img src="images/pic-retention-data-detail-cor.png" /></div>\r    <ul>\r        <li><strong><%=sampleNum%></strong><%=curUnit%><br /><%=dateShow%> <%=sampleSelect%>中；</li>\r        <li><strong><%=retentionNum%></strong><%=curUnit%><br />在之后的第<%=sortNum%><%=retentionDateTip%>（<%=tooltipDate%>内），启动游戏<%=times%>；</li>\r    </ul>\r    <div class="retention-percent"><strong>留存率</strong><span><%=rateNum%></span><em><%=retentionNum%>/<%=sampleNum%></em></div>\r</div>\r'}),define("text!templates/player/retention-custom-table.html",[],function(){return'<% _.each(data,function(item,index){%>\r\n	<tr class=<%= index%2 == 0 ? "odd" : "even"%>>\r\n<!-- 	<%_.each(item,function(value){%> -->\r\n<!-- 		<td><%= value%></td> -->\r\n<!-- 	<%});%> -->\r\n		<td><%= item.dateShow%></td>\r\n		<td><%= item.sampleNum%></td>\r\n		<td class="<%=item.retentionNumList[0].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[0].sortNum%>" tooltipDate="<%= item.retentionNumList[0].tooltipDate%>"  rateNum="<%= item.retentionNumList[0].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[0].retentionNum%>"><%= item.retentionNumList[0].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[1].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[1].sortNum%>" tooltipDate="<%= item.retentionNumList[1].tooltipDate%>"  rateNum="<%= item.retentionNumList[1].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[1].retentionNum%>"><%= item.retentionNumList[1].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[2].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[2].sortNum%>" tooltipDate="<%= item.retentionNumList[2].tooltipDate%>"  rateNum="<%= item.retentionNumList[2].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[2].retentionNum%>"><%= item.retentionNumList[2].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[3].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[3].sortNum%>" tooltipDate="<%= item.retentionNumList[3].tooltipDate%>"  rateNum="<%= item.retentionNumList[3].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[3].retentionNum%>"><%= item.retentionNumList[3].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[4].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[4].sortNum%>" tooltipDate="<%= item.retentionNumList[4].tooltipDate%>"  rateNum="<%= item.retentionNumList[4].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[4].retentionNum%>"><%= item.retentionNumList[4].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[5].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[5].sortNum%>" tooltipDate="<%= item.retentionNumList[5].tooltipDate%>"  rateNum="<%= item.retentionNumList[5].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[5].retentionNum%>"><%= item.retentionNumList[5].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[6].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[6].sortNum%>" tooltipDate="<%= item.retentionNumList[6].tooltipDate%>"  rateNum="<%= item.retentionNumList[6].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[6].retentionNum%>"><%= item.retentionNumList[6].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[7].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[7].sortNum%>" tooltipDate="<%= item.retentionNumList[7].tooltipDate%>"  rateNum="<%= item.retentionNumList[7].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[7].retentionNum%>"><%= item.retentionNumList[7].rateNum%></td>\r\n		<td class="<%=item.retentionNumList[8].tooltip ? \'_tooltip\' :\'\'%>" sortNum="<%= item.retentionNumList[8].sortNum%>" tooltipDate="<%= item.retentionNumList[8].tooltipDate%>"  rateNum="<%= item.retentionNumList[8].rateNum%>" dateShow="<%= item.dateShow%>" sampleNum="<%= item.sampleNum%>" retentionNum="<%= item.retentionNumList[8].retentionNum%>"><%= item.retentionNumList[8].rateNum%></td>\r\n		\r\n	</tr>\r\n<%}); %>\r\n'}),define("text!templates/player/retentionData.html",[],function(){return'<table id="grid_day" class="table_style1 bctable" height="100%" width="100%" cellspacing="0" cellpadding="0" border="0">\r	<thead>\r		<tr>\r			<th rowspan="2" width="20%" style="line-height: 60px;"><%=Player.CustomRetention.date%></th>\r			<th rowspan="2" width="10%" style="line-height: 60px;" title="<%=Player.CustomRetention.userCount %>"><%=Player.CustomRetention.userCount%></th>\r			<th colspan="9" style="height: 28px; font-size: 12px; line-height: 28px;"><%=Player.CustomRetention.nRetentionUser1%><%=dateTip%><%=Player.CustomRetention.nRetentionUser2%></th>\r		</tr>\r		<tr class="yhbl">\r			<th class="left-cor">\r				<div class="dayLeft">\r					<span><img src="images/icon-left-cor.png" id="leftCor" /></span>\r					+<%=array[0]%>\r				</div>\r			</th>\r			<th>+<%=array[1]%></th>\r			<th>+<%=array[2]%></th>\r			<th>+<%=array[3]%></th>\r			<th>+<%=array[4]%></th>\r			<th>+<%=array[5]%></th>\r			<th>+<%=array[6]%></th>\r			<th>+<%=array[7]%></th>\r			<th class="right-cor">\r				<div class="dayRight">\r					+<%=array[8]%>\r					<span><img src="images/icon-right-cor.png" id="rightCor" /></span>\r				</div>\r			</th>\r		</tr>\r	</thead>\r	<tbody id="customTableData">\r	</tbody>\r</table>'}),define("text!templates/public/loading.html",[],function(){return'<div class="login"><img src="images/loading.gif" height="25px"></img> <br><%=GameCommon.loadingData%></div>'}),define("views/player/CustomRetentionView",["backbone","models/player/CustomRetention","views/public/SelectView","utils/HighchartUtil","utils/urlUtil","utils/excelDataUtil","text!templates/player/customRetention.html","text!templates/player/customRetentionTip.html","text!templates/player/retention-custom-table.html","text!templates/player/retentionData.html","text!templates/public/loading.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{"click #searchBtn":"search","click #retentionBtn":"toRetention","click #leftCor":"leftPaging","click #rightCor":"rightpaging","mouseover ._tooltip":"showTooltip","mouseout ._tooltip":"hideTooltip"},initialize:function(){$("#container").html(_.template(o,h)),new n({el:"#selectChoose"}),this.$sampleSelect=$("#sampleSelect"),this.$userSelect=$("#userSelect"),this.$retentionSelect=$("#retentionSelect"),this.$activitySelect=$("#activitySelect"),this.$activityResultSelect=$("#activityResultSelect"),this.$startTime=$("#startTime"),this.$endTime=$("#endTime"),this.$dataTable=$("#dataTable"),this.$sampleSelect.sSelect(),this.$retentionSelect.sSelect(),this.$userSelect.sSelect(),this.$activitySelect.sSelect(),this.$activityResultSelect.sSelect(),this.timeFormat="YYYY-MM-DD",this.startTime=(new Date).add({days:-10}).toFormat("YYYY-MM-DD"),Date.compare(Params.productRegistTime,this.startTime)==1&&(this.startTime=Params.productRegistTime),this.endTime=(new Date).add({days:-1}).toFormat("YYYY-MM-DD"),this.retentionBean={type:"newPlayerRetention",minLoginTimes:1,ayalyseParticle:"day",keepDay:1},this.$startTime.val(this.startTime),this.$endTime.val(this.endTime),this.$startTime.datepicker({minDate:new Date(this.registTime),maxDate:new Date(this.endTime),dateFormat:"yy-mm-dd"}),this.$endTime.datepicker({minDate:new Date(this.registTime),maxDate:new Date(this.endTime),dateFormat:"yy-mm-dd"}),this.$currentPageNum=1,this.$pageArray=[1,2,3,4,5,6,7,8,9],this.$perPageNum=9,this.$curUnit="账户",this.timeId=null,this.$retentionDateTip=h.GameCommon.day,this.render()},render:function(){return this.renderTable(),this},renderTable:function(){$("#playerCustomRetentionCustomRetain").tabs({indicator:!0});for(var e=1;e<=this.$perPageNum;e++)this.$pageArray[e-1]=(this.$currentPageNum-1)*this.$perPageNum+e;h.array=this.$pageArray,h.dateTip=this.$retentionDateTip,this.$dataTable.html(_.template(f,h));var n=_.clone(Params);n.startTime=parseInt(this.formatDate(this.startTime)),n.endTime=parseInt(this.formatDate(this.endTime)),n.retentionBean=this.retentionBean,n.curPageNum=this.$currentPageNum,n.pageSize=9,t.fetchCustomRetentionList({$entity:n,$callback:function(e,t,n){var r=_.template(a,{data:n});$("#customTableData").html(r)}}),this.$currentPageNum==1?($("#leftCor").hide(),$("#rightCor").show()):this.$currentPageNum==4?($("#rightCor").hide(),$("#leftCor").show()):($("#leftCor").show(),$("#rightCor").show())},leftPaging:function(){this.$currentPageNum--,this.$currentPageNum<1&&(this.$currentPageNum=1),this.search()},rightpaging:function(){this.$currentPageNum++,this.$currentPageNum>4&&(this.$currentPageNum=4),this.search()},showTooltip:function(e){var t=$(e.currentTarget),n={sampleNum:t.attr("sampleNum")||0,dateShow:t.attr("dateShow")||"1970-01-01",retentionNum:t.attr("retentionNum")||0,rateNum:t.attr("rateNum")||0,tooltipDate:t.attr("tooltipDate")||"1970-01-01",times:this.$activityResultSelect.siblings(".dropselect").text(),sampleSelect:this.$userSelect.siblings(".dropselect").text(),retentionDateTip:this.$retentionDateTip,curUnit:this.$curUnit,sortNum:t.attr("sortNum")},r=_.template(u,n);timeId=setTimeout(function(){hs.htmlExpand(null,{pageOrigin:{x:e.pageX+150||0,y:e.pageY||0},wrapperClassName:"my-highslide",maincontentText:r,width:281,height:182},!0)},1e3)},hideTooltip:function(e){timeId&&clearTimeout(timeId),hs.close()},search:function(){var e=this.$startTime.val(),t=this.$endTime.val();if(!e||!t){alert(h.Player.CustomRetention.dateNotEmpty);return}if(Date.compare(e,t)==1){alert(h.Player.CustomRetention.dateIsWrong);return}this.$userSelect.val()=="activeDeviceRetention"||this.$userSelect.val()=="newDeviceRetention"?this.$curUnit="台":this.$curUnit="账户";var n=this.$retentionSelect.val();n==1?this.$retentionDateTip=h.GameCommon.day:n==7?this.$retentionDateTip=h.GameCommon.week:n==30&&(this.$retentionDateTip=h.GameCommon.month),this.retentionBean.keepDay=n,this.retentionBean.ayalyseParticle=this.$sampleSelect.val(),this.startTime=e,this.endTime=t,this.retentionBean.type=this.$userSelect.val(),this.retentionBean.minLoginTimes=parseInt(this.$activityResultSelect.val()),this.renderTable()},formatDate:function(e){return e.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3")},toRetention:function(){i.changeHashByParams("#page/player-retention/")}});return p}),define("models/player/LostFunnel",["models/BaseModel"],function(e){var t=[{name:"fetchLostFunnelDataList",url:"/v1/lostFunnel/lostfunneldata"}];return e.init(t)}),define("text!templates/player/lostFunnel.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div class="l margin_right" id="tagb">\r                <a class="tagbut tagbutL" id="toChurnedBtn"><%=Player.LostFunnel.dailyLoss%></a>\r                <a class="tagbut tagbutR hover"><%=Player.LostFunnel.lossFunnel%></a>\r			</div>\r			\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="playerLostFunnelLossFunnel">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.LostFunnel.lossFunnel%></strong>\r				<div id="dayTypeSelect" class="buttonDiv l">\r					<a class="hover but butL l" data="0" ><%=Player.LostFunnel.analysisSomeDay%></a>\r					<a data="1"class="but butR l"  ><%=Player.LostFunnel.analysisSomeWeek%></a>\r				</div>\r			</div>\r		</div>\r		<div class="textbox">\r			<div class="Condition after">\r            	<ul class="Condition-Top">\r                    <li class="buttonDiv">\r                       <label class="l selectlble"><%=Player.LostFunnel.duringInspectAnalysis%></label>\r                        <input id="datePicker" type="text" class="Timeinput l"/>\r                        <select id="weekSelect" class="true" style="display: none;">\r                            <option value="1" selected="selected"><%=Player.LostFunnel.one%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="2"><%=Player.LostFunnel.two%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="3"><%=Player.LostFunnel.three%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="4"><%=Player.LostFunnel.four%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="5"><%=Player.LostFunnel.five%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="6"><%=Player.LostFunnel.six%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="7"><%=Player.LostFunnel.seven%><%=Player.LostFunnel.beforeWeek%></option>\r                        </select>\r                        <label class="l selectlble"><%=Player.LostFunnel.during%></label>\r                        <select id="userTypeSelect" class="true">\r                            <option value="0" selected="selected"><%=Player.LostFunnel.newIncreasedUser%></option>\r                            <option value="1"><%=Player.LostFunnel.activeUser%></option>\r                            <option value="2"><%=Player.LostFunnel.activePayUser%></option>\r                        </select>\r                        <label class="l selectlble"><%=Player.LostFunnel.lossCourse%></label>\r                        <a id="searchBtn" class="Confirm l"><%=Player.LostFunnel.updateData%></a>\r                    </li>\r                </ul>\r            </div>\r			<div class="table" id="tagContentthrday0">\r				<div id="lostFunelChart" class="picbox">\r					<div class="login">\r						<img src="images/loading.gif" height="25px"></img> <br>\r						<%=GameCommon.loadingData%>\r					</div>\r				</div>\r			</div>\r		</div>	\r	</div>\r</div>'}),define("views/player/LostFunnelView",["backbone","models/player/LostFunnel","utils/HighchartUtil","utils/urlUtil","views/public/SelectView","text!templates/player/lostFunnel.html","i18n!nls/gameI18N","jquery.select","jquery.datepicker"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#container",events:{"click #searchBtn":"searchBtnClick","click #dayTypeSelect > a":"dayTypeSelectClick","click #toChurnedBtn":"toChurned"},initialize:function(){$("#container").html(_.template(s,o)),new i({el:"#selectChoose"}),$("#userTypeSelect").sSelect(),$("#weekSelect").sSelect();var e=(new Date).add({days:-6}).toFormat("YYYY-MM-DD");this.registTime=Params.productRegistTime,this.startTime=Date.compare(this.registTime,e)==1?this.registTime:e,this.endTime=(new Date).add({days:-1}).toFormat("YYYY-MM-DD"),this.playerType=$("#userTypeSelect").val(),this.dayType="0",this.weekNum=$("#weekSelect").val(),this.weekStartTime=(new Date).add({days:-(7*this.weekNum)-7}).toFormat("YYYY-MM-DD"),this.weekEndTime=(new Date).add({days:-(7*this.weekNum)}).toFormat("YYYY-MM-DD"),$("#datePicker").val(this.startTime),$("#datePicker").datepicker({minDate:new Date(this.registTime),maxDate:new Date(this.endTime),dateFormat:"yy-mm-dd"}),this.render()},render:function(){this.lostFunelChart()},dayTypeSelectClick:function(e){this.dayType=$(e.currentTarget).attr("data"),$("#dayTypeSelect > a").removeClass("hover"),$(e.currentTarget).addClass("hover"),this.dayType=="0"?($("#dropdown_weekSelect").hide(),$("#datePicker").show()):($("#datePicker").hide(),$("#weekSelect").show(),$("#dropdown_weekSelect").show(),$("#weekSelect").sSelect()),this.lostFunelChart()},timeSelectClick:function(e){},searchBtnClick:function(e){this.playerType=$("#userTypeSelect").val(),this.dayType=="0"?this.startTime=$("#datePicker").val():this.weekNum=$("#weekSelect").val(),this.lostFunelChart()},lostFunelChart:function(){$("#playerLostFunnelLossFunnel").tabs({indicator:!0});var e=_.clone(Params);this.dayType=="0"?(e.startTime=parseInt(this.formatDate(this.startTime)),e.endTime=parseInt(this.formatDate(this.startTime))):e.timeflag=this.weekNum,e.item=this.dayType,e.churnedParameterBean={playerType:this.playerType},t.fetchLostFunnelDataList({$entity:e,$callback:function(e,t,n){var r=0,i=_.pluck(n,"value"),s=i[0],u=[],a=0;for(var f=0;f<i.length;f++)f==0?(a=i[f],u[f]=i[f]):(a!=0&&i[f]!=0?u[f]=Math.round(i[f]/a*1e3)/10:u[f]="0.0",a=i[f]);var l=u;i=_.map(i,function(e){return parseInt(e)>-1?e:null});var c=i,h=i,p=i,d=_.pluck(n,"item"),v=new Highcharts.Chart({chart:{renderTo:"lostFunelChart",zoomType:"xy",backgroundColor:"#fff"},title:{text:""},xAxis:{categories:d},yAxis:{min:0,title:{text:""}},legend:{enabled:!1},tooltip:{formatter:function(){return""+this.x+": "+this.y}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}},area:{marker:{enabled:!0,states:{hover:{enabled:!0}}},dataLabels:{enabled:!0,formatter:function(){if(s!=0){var e=100;return this.y<s&&(e=Math.round(this.y/s*1e3)/10),e==0?"0.0"+o.Player.LostFunnel._rateUser:e+o.Player.LostFunnel._rateUser}}}},line:{dataLabels:{enabled:!0,x:-56,y:20,formatter:function(){var e=l[r];return r+=1,e?r==1?"":e+"%":""}},lineWidth:0,marker:{enabled:!1}}},series:[{name:o.Player.LostFunnel.visittimes,type:"column",data:p},{name:o.Player.LostFunnel.line,color:"#6DC5FD",type:"line",data:c},{name:o.Player.LostFunnel.funnel,color:"#6DC5FD",type:"area",data:h}]})}})},toChurned:function(){r.changeHashByParams("#page/player-churned/")},formatDate:function(e){return e.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3")}});return u}),define("text!templates/concurrent/concurrentUser.html",[],function(){return'<div id="concurrentUser">\r<div class="content r">\r	<!-- Concurrent Users begin -->\r	<div class="boxmax">\r		<div class="maintop">\r			<strong class="l" style="font-size: 16px;font-weight: bold; "><%=Concurrent.ConcurrentUser.onlineAnalysis%></strong>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="onlineUsersCode" >\r			<div class="title"  role="title">\r				<strong class="l"><%=Concurrent.ConcurrentUser.onlineUsers%></strong> \r			</div>\r		</div>\r		<div class="tablebox">\r			<div class="gauge after">\r				<ul class="canvasDIV l">\r					<li>\r						<%=Concurrent.ConcurrentUser.final5Minutes%> （<font id="fiveSecondsLoop"></font>）\r					</li>\r					<li>\r						<strong id="last5Num"></strong>\r					</li>\r					<li class="relative">\r						<canvas width=180 height=100 id="gaugeCanvas"></canvas>\r					</li>\r					<li>\r						<span>30 Day Max<br><font id="max30DayNum"></font></span>\r					</li>\r				</ul>\r				<div class="center">\r					<div id="todayAndYestodayChart" style="width: 100%; height: 200px; margin: 0 auto;padding-top:20px;">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img> <br>\r							<%=GameCommon.loadingData%>\r						</div>\r					</div>\r				</div>\r			</div>\r		</div>\r	</div>\r	<!-- Concurrent Users end -->\r	<!-- Recent Players begin -->\r	<div class="boxmax">\r		<div class="title"   role="title">\r			<strong class="l"><%=Concurrent.ConcurrentUser.recentlyPlayers%></strong> <span class="relative r"></span>\r		</div>\r		<div class="tablebox" id="RecentPlayers">\r            <div class="login">\r                <img src="images/loading.gif" height="25px"></img><br>\r                <%=GameCommon.loadingData%>\r            </div>\r		</div>\r	</div>\r	<!-- Recent Players end -->\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div class="clear"></div>\r		</div>\r		\r		<!-- Daily Concurrent Users begin -->\r		<div id="concurrentDailyPlayers">\r			<div class="title"   role="title">\r				<strong class="l"><%=Concurrent.ConcurrentUser.dailyOnlineUsers%></strong>\r			</div>\r		</div>\r		<div class="textbox">\r       		<div class="box_top" id="concurrentTabs">\r				<a data-tab="dailyAcu" class="tab hover">ACU</a>\r				<a data-tab="dailyPcu" class="tab">PCU</a>\r				<a data-tab="dailyAcuPcu" class="tab">ACU/PCU</a>\r			</div>\r        \r			<div id="concurrentTabContents">\r				<div data-tab="dailyAcu" id="dailyAcu" class="picbox">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img><br>\r							<%=GameCommon.loadingData%>\r						</div>\r				</div>\r				<div data-tab="dailyPcu"  id="dailyPcu"  class="picbox hide">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img><br>\r							<%=GameCommon.loadingData%>\r						</div>\r				</div>\r				<div data-tab="dailyAcuPcu" id="dailyAcuPcu"  class="picbox hide">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img><br>\r							<%=GameCommon.loadingData%>\r						</div>\r				</div>\r			</div>\r		</div>\r	</div>\r		<!-- Daily Concurrent Users begin -->\r	<div class="box">\r		<div class="contentbox l">\r			<div class="title">\r				<strong class="l">ACU</strong>\r			</div>\r            <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2">\r                <tbody>\r                    <tr>\r                        <td class="left border_none">MAX</td>\r                        <td class="center border_none">\r                            <strong>\r                                <font id="ACUMax"></font>|<font id="ACUMaxDate"	style="font-size: 15px"></font>\r                        </strong>\r                        </td>\r                    </tr>\r                    <tr>\r                        <td class="left">AVG</td>\r                        <td class="center"><strong id="ACUAVG"></strong></td>\r                    </tr>\r                </tbody>\r            </table>\r		</div>\r		<div class="contentbox r">\r			<div class="title">\r				<strong class="l">PCU</strong>\r			</div>\r            <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2">\r                <tbody>\r                    <tr>\r                        <td class="left border_none">MAX</td>\r                        <td class="center border_none">\r                            <strong>\r                                <font id="PCUMax"></font>|<font id="PCUMaxDate" style="font-size: 15px"></font>\r                        </strong>\r                        </td>\r                    </tr>\r                    <tr>\r                        <td class="left">AVG</td>\r                        <td class="center"><strong id="PCUAVG"></strong></td>\r                    </tr>\r                </tbody>\r            </table>\r		</div>\r		<div class="clear"></div>\r	</div>\r</div>\r<div class="clear"></div>\r</div>\r'}),define("text!templates/concurrent/concurrentUser-table.html",[],function(){return'<div id="recentPlayerList" class="dataTables_wrapper">\r	<table width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style_ope">\r		<tbody>\r			{{#resultData}}\r			<tr class="odd">\r				<td class="aroww left">\r					<span>{{time}}</span>\r				</td>\r				<td class="left">{{province}}</td>\r			</tr>\r			<tr class="hide">\r				<td class="details" colspan="2">\r						<div class="mintdbox mintable" id="valueinfogrid_wrapper">\r							<div class="mintablebox">\r								<table height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style1" id="valueinfogrid">\r									<thead>\r										<tr>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1"><%=Concurrent.ConcurrentUser.useDevice%>:{{mobileModel}}</th>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1"><%=Concurrent.ConcurrentUser.useOS%>:{{osVersion}}</th>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1"><%=Concurrent.ConcurrentUser.usePixel%>:{{pixel}}</th>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1"><%=Concurrent.ConcurrentUser.useLanguage%>:{{language}}</th>\r										</tr>\r									</thead>\r									<tbody>\r										{{#events}}\r										<tr>\r											<td>{{time}}</td>\r											<td colspan="3" class="left">{{action}}</td>\r										</tr>\r										{{/events}}\r									</tbody>\r								</table>\r							</div>\r						</div>\r				</td>\r			</tr>\r			{{/resultData}}\r			{{^resultData}}\r				<div class="login"><%=GameCommon.noData%></div>\r			{{/resultData}}\r		</tbody>\r	</table>\r</div>\r'}),define("views/concurrent/ConcurrentUserView",["backbone","mustache","models/concurrent/ConcurrentUser","utils/GaugeUtil","utils/RegexUtil","utils/HighchartUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/concurrent/concurrentUser.html","text!templates/concurrent/concurrentUser-table.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click #concurrentTabs>a":"tabClick","click #recentPlayerList tr.odd":"recentPlayerTrToggle"},initialize:function(){this.gauge=null,$("#container").html(_.template(f,c)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.render()},render:function(){return this.renderConcurrentUser(),this.renderRecentPlayers(),this.renderDailyConcurrentUser(),this},renderConcurrentUser:function(){_currentIntervalObj&&clearInterval(_currentIntervalObj);var e=this;this.renderLastMinsUserNum("first");var t=5;_currentIntervalObj=setInterval(function(){$("#fiveSecondsLoop").html(t--),t<1&&(t=5,e.renderLastMinsUserNum())},1e3),this.renderTodayYestodayChart()},renderLastMinsUserNum:function(e){n.fetchLastMinsUserNum({$entity:Params,$callback:function(t,s,o){var u=o?parseInt(o):0;$("#last5Num").html(u),n.fetchMaxUserNum({$entity:Params,$callback:function(t,n,s){s&&(s=parseInt(s));var o=s<u?u:s;$("#max30DayNum").html(i.formatDigit(o)),e=="first"?gauge=r.draw({id:"gaugeCanvas",maxValue:o,currentValue:u}):o!=0&&(gauge.maxValue!=o&&(gauge.maxValue=o),gauge.set(u))}})}})},renderRecentPlayers:function(){n.fetchRecentPlayerList({$entity:Params,$callback:function(e,n,r){r?(r.Concurrent=c.Concurrent,$("#RecentPlayers").html(t.render(_.template(l,c),{resultData:r}))):$("#RecentPlayers").html('<div class="login">'+c.GameCommon.noData+"</div>")}})},renderDailyConcurrentUser:function(){$("#concurrentDailyPlayers").tabs({indicator:!0}),$("#concurrentTabs").tabs({hoverTooltip:!0});var e=this;this.dailyConcurrentUserChart={},n.fetchACUList({$entity:Params,$callback:function(t,r,u){var a=_.pluck(u,"item"),f=_.pluck(u,"value"),l=_.max(f);$("#ACUMax").html(i.formatDigit(l));var c=a[_.indexOf(f,l)];$("#ACUMaxDate").html(e.formatDate(c)),$("#ACUAVG").html(i.formatDigit(Math.floor(_.sum(f)/f.length)));var h=[{name:"ACU",data:f}];e.dailyConcurrentUserChart.dailyAcu={id:"dailyAcu",x:a,series:h,xType:"date"},s.chart({id:"dailyAcu",x:a,series:h,xType:"date",unitItem:[o.getAccountItem()]}),n.fetchPCUList({$entity:Params,$callback:function(t,n,r){var s=_.pluck(r,"item"),u=_.pluck(r,"value"),l=_.max(u);$("#PCUMax").html(i.formatDigit(l));var c=s[_.indexOf(u,l)];$("#PCUMaxDate").html(e.formatDate(c)),$("#PCUAVG").html(i.formatDigit(Math.floor(_.sum(u)/u.length)));var h=[{name:"PCU",data:u}];e.dailyConcurrentUserChart.dailyPcu={id:"dailyPcu",x:s,series:h,xType:"date",unitItem:[o.getAccountItem()]};var p=_.twoArraysDivide(e.remarkObj2value(f),e.remarkObj2value(u),1),h=[{name:"ACU/PCU",data:p}];e.dailyConcurrentUserChart.dailyAcuPcu={id:"dailyAcuPcu",x:a,series:h,xType:"date"}}})}})},remarkObj2value:function(e){return _.map(e,function(e){return typeof e=="object"&&(e=e.y),e})},renderTodayYestodayChart:function(){var e=$("#onlineUsersCode").tabs(function(t){var r=null;n.fetchYesterdayPerHourUserNumList({$entity:Params,$callback:function(t,i,u){var a=_.pluck(u,"item"),f=_.pluck(u,"value"),l=[{name:"Yesterday",data:_.pluck(u,"value")}],h=["#cccccc","#6DC5FD"];r=s.chart({id:"todayAndYestodayChart",x:_.pluck(u,"item"),series:l,title:c.Concurrent.todayAndYes,colors:h,unitItem:[o.getAccountItem(),o.getAccountItem()]}),n.fetchTodayPerHourUserNumList({$entity:Params,$callback:function(t,n,i){var s=_.pluck(i,"value");r.addSeries({data:_.pluck(i,"value"),name:"Today"});var o=_.zip(a,s,f),u=[c.GameCommon.time,c.GameCommon.today+":"+(new Date).toFormat("MM-DD"),c.Concurrent.ConcurrentUser.yestoday+":"+(new Date).add({days:-1}).toFormat("MM-DD")],l=_.map(o,function(e){return e=_.map(e,function(e){return e==undefined&&(e="--"),e}),e});e.head=u,e.body=l;var h=c.Concurrent.ConcurrentUser.onlineUsers+"("+(new Date).add({days:-1}).toFormat("YYYY-MM-DD")+"~"+(new Date).toFormat("YYYY-MM-DD")+")";e.excelName=h}})}})})},recentPlayerTrToggle:function(e){$(e.currentTarget).next("tr").toggle(),$(e.currentTarget).toggleClass("hover")},tabClick:function(e){var t=$(e.currentTarget).attr("data-tab");$("#concurrentTabs>a").removeClass("hover"),$('#concurrentTabs>a[data-tab="'+t+'"]').addClass("hover"),$("#concurrentTabContents>div").hide(),$('#concurrentTabContents>div[data-tab="'+t+'"]').show();var n=$("#"+t+" div.highcharts-container").length!=0;n||s.chart(this.dailyConcurrentUserChart[t])},formatDate:function(e){return e.replace(/(\d\d)(\d\d)(\d\d)/,"20$1-$2-$3")}});return h}),define("models/level/LevelDetail",["models/BaseModel"],function(e){var t=[{name:"levelSettingList",url:"/v1/levelDetail/levelSettingList"},{name:"saveLevelSetting",url:"/v1/levelDetail/saveLevelSetting"},{name:"theMaxLevel",url:"/v1/levelDetail/theMaxLevel"},{name:"levelStageData",url:"/v1/levelDetail/levelStageData"},{name:"levelDetailList",url:"/v1/levelDetail/levelDetailList"},{name:"levelUpTimeList",url:"/v1/levelDetail/levelUpTimeList"},{name:"levelStayRateList",url:"/v1/levelDetail/levelStayRateList"},{name:"chargeTimesList",url:"/v1/levelDetail/chargeTimesList"},{name:"chargeValueList",url:"/v1/levelDetail/chargeValueList"},{name:"levelUpTimeDistribution",url:"/v1/levelDetail/levelUpTimeDistribution"}];return e.init(t)}),define("text!templates/Level/LevelDetailed.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="levelLevelDetailedAboutGrade">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDetailed.importantGrade%></strong>\r				<a class="Cancel r minCancel" id="levelSetting"><font class="SetUp">设置</font></a>\r			</div>\r			<div class="textbox  relative">\r				<div class="Keylevel" id="importantLevelChart">\r\r				</div>\r			</div>\r		</div>\r	</div>\r	<div class="boxmax">\r		<div id="levelLevelDetailedGradeDetail">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDetailed.gradeDetail%></strong>\r			</div>\r		</div>\r		<div class="tablebox" id="levelDetailTableDiv">\r			\r		</div>\r	</div>\r</div>'}),define("text!templates/Level/LevelSetting.html",[],function(){return'<div class="Pop_line">\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=Level.LevelDetailed.levelSettingTitle%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n    	<p class="setupPop_P"><%=Level.LevelDetailed.levelSettingTip%></p>\r\n        <ul class="setupPop" id="levelStep">\r\n        	\r\n        </ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a class="l CancelonCL" id="addStepBtn">+<%=Level.LevelDetailed.addStep%></a>\r\n            <a class="timecolse r Confirm" id="saveBtn"><%=Level.LevelDetailed.saveAndClose%></a>\r\n            <a class="r Cancel" id="canelBtn"><%=Level.LevelDetailed.canel%></a>\r\n        </div>\r\n    </div>\r\n</div>	\r\n'}),define("text!templates/Level/LevelStep.html",[],function(){return'<% _.each(resultData,function(obj){\r\n	var currlevel = obj.level;\r\n	var index = resultData.indexOf(obj)+1;\r\n%>\r\n	<li class="step">\r\n		<b>step<%=index%>：</b>\r\n		<label><%=Level.LevelDetailed.chooseLevel%></label>\r\n		<select class="levelSelect" id="levelSelect<%=index%>" style="left: 100px;">\r\n			<option value="-1">-<%=Level.LevelDetailed.choose%>-</option>\r\n			<% 	\r\n				for(var i=2;i < maxLevel;i++){\r\n				 	var selected=\'\';\r\n                    if(currlevel == i) selected=\'selected\';\r\n			%>\r\n				<option <%=selected%> value="<%=i%>"><%=i%></option>\r\n			<%}%>\r\n		</select>\r\n		<label><%=Level.LevelDetailed.stageName%></label>\r\n		<input value="<%=obj.name%>" class="textinput" type="text"/>\r\n		<div class="r">\r\n			<em class="l add_em addItemtype">添加</em>\r\n			&nbsp;&nbsp;&nbsp;&nbsp;\r\n			<em class="r close_em deleteItemtype">删除</em>\r\n		</div>\r\n	</li> 	\r\n<%});%>\r\n\r\n\r\n\r\n\r\n \r\n\r\n '}),define("text!templates/Level/LevelStageChart.html",[],function(){return'<ul id="levelStageChart">\r\n<% _.each(renderData,function(obj){\r\n	var index = renderData.indexOf(obj);\r\n%>\r\n	<li>\r\n		<span><font><%=ctUnit%></font><small>SUM</small><strong><%=obj.chargeValueSum%></strong></span>\r\n		<span><small>AVG</small><strong><%=avgTime(obj.levelUpTimeAvg)%></strong><small></small></span>\r\n		<b><%=obj.endLevel%><%=GameCommon.level%></b>\r\n		<%\r\n			if(index == 0 ){\r\n		%>\r\n				<b class="left">1<%=GameCommon.level%></b>\r\n		<%}%>\r\n	</li>\r\n<%});%>\r\n</ul>\r\n\r\n'}),define("text!templates/Level/LevelDetail-Table.html",[],function(){return'<table id="levelDetailTable" border="0" width="100%" cellpadding="0" cellspacing="0" class="table_style_ope">\r\n	<thead>\r\n		<tr>\r\n			<th class="left hover-tooltip" data-th="levelGrade"><p><%=GameCommon.grade%></p></th>\r\n			<th class="hover-tooltip" data-th="levelUpgradeTime"><p><%=Level.LevelDetailed.upgradeTime%></p></th>\r\n			<th class="hover-tooltip" data-th="levelGradeStagnateRate"><p><%=Level.LevelDetailed.gradeStagnateRate%></p></th>\r\n			<th class="hover-tooltip" data-th="levelPaycount"><p><%=GameCommon.payCount%></p></th>\r\n			<th class="hover-tooltip" data-th="levelPaysum"><p><%=GameCommon.paySum%></p></th>\r\n			<th colspan="2"><p><%=GameCommon.detail%></p></th>\r\n		</tr>\r\n	</thead>\r\n	<tbody id="levelDetailTable-body">\r\n		<%_.each(tableData,function(obj){\r\n		%>\r\n			<tr>\r\n				<td class="left aroww"><span><%=obj.level%><%=GameCommon.level%></span></td>\r\n				<td><%= avgTime(obj.avgLevelUpTime)%></td>\r\n				<td><%=obj.levelStayRate%>%</td>\r\n				<td><%=obj.chargeTimes%></td>\r\n				<td><%=obj.chargeValue%></td>\r\n				<td  colspan="2"><a class="detail" data-name="upgradeTime" data-id="<%=obj.level%>"><%=Level.LevelDetailed.upgradeTime%></a><a class="detail" data-name="dailyTrend" data-id="<%=obj.level%>"><%=GameCommon.dailyTrend%></a></td>\r\n			</tr>\r\n		<%})%>\r\n	</tbody>\r\n</table>'}),define("text!templates/Level/LevelDailyTrend.html",[],function(){return'<tr class="itempointdetail">\r	<td colspan="6" width="100%" >\r		<div class="mintdbox mintable">\r			<div class="title">\r				<strong id="chartTitle_<%=curLevel%>"></strong>\r			</div>\r			<div class="textbox">\r				<div id="levelDetailCode<%=curLevel%>">\r					<div class="box_top" role="tabbar">\r						<a data-tab="levelUpTime_<%=curLevel%>" class="tab hover"><%=Level.LevelDetailed.upgradeTime%></a>\r						<a data-tab="levelStayRate_<%=curLevel%>" class="tab"><%=Level.LevelDetailed.gradeStagnateRate%></a>\r						<a data-tab="chargeTimes_<%=curLevel%>" class="tab"><%=GameCommon.payCount%></a>\r						<a data-tab="chargeValue_<%=curLevel%>" class="tab"><%=GameCommon.paySum%></a>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="levelDetailCode<%=curLevel%>-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="levelDetailCode<%=curLevel%>-table" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r						<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a> \r						<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r					</div>\r				</div>\r			</div>\r		</div>\r	</td>\r</tr>'}),define("text!templates/Level/LevelUpgradeTime.html",[],function(){return'<tr class="itempointdetail">\r	<td colspan="6" width="100%" >\r		<div class="mintdbox mintable">\r			<div class="title">\r				<strong id="chartTitle_<%=curLevel%>"></strong>\r			</div>\r			<div class="textbox">\r				<div id="levelDetailCode<%=curLevel%>">\r					<div role="picbox_chart_table">\r						<div id="levelDetailCode<%=curLevel%>-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="levelDetailCode<%=curLevel%>-table" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r						<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a> \r						<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r					</div>\r				</div>\r			</div>\r		</div>\r	</td>\r</tr>'}),define("views/Level/LevelDetailedView",["jquery","backbone","mustache","utils/ModelBox","utils/dataTableUtil","utils/HighchartUtil","utils/excelDataUtil","utils/CurrencyUtil","utils/RegexUtil","utils/UnitMappingUtil","models/level/LevelDetail","text!templates/Level/LevelDetailed.html","text!templates/Level/LevelSetting.html","text!templates/Level/LevelStep.html","text!templates/Level/LevelStageChart.html","text!templates/Level/LevelDetail-Table.html","text!templates/Level/LevelDailyTrend.html","text!templates/Level/LevelUpgradeTime.html","text!templates/public/excelExport.html","text!templates/public/loading.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=t.View.extend({el:"#container",events:{"click #levelSetting":"showLevelSetting","click #levelDetailTable-body a.detail":"showDetail","click #clickToSet":"showLevelSetting"},initialize:function(){e("#container").html(_.template(c,w)),require(["views/public/DatePicker","views/public/SelectView"],function(e,t){new e({el:"#datePicker"}),new t({el:"#selectChoose"})}),this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.render()},render:function(){return this.showImportLevelStage(),this.levelDetialTable(),this},levelDetialTable:function(){var t=e('#levelLevelDetailedGradeDetail div[role="title"] a[role="excel"]').length==0;t&&e('#levelLevelDetailedGradeDetail div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),e("#levelLevelDetailedGradeDetail").tabs({indicator:!0});var n=this;e("#levelDetailTableDiv").html(_.template(b,w)),l.levelDetailList({data:Params,success:function(t){t=_.each(t,function(e){e.chargeValue=a.formatMoneyDigit(e.chargeValue,Params.displayCurrency)});var r={tableData:t,Level:w.Level,GameCommon:w.GameCommon};r.avgTime=n.formatSeconds,e("#levelDetailTableDiv").html(_.template(v,r));var s=e("<table></table>");s.append(e("#levelDetailTableDiv table").html()),e('#levelLevelDetailedGradeDetail div[role="title"] a[role="excel"]').click(function(){var t=w.Level.LevelDetailed.gradeDetail+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=o.tableToJson(s[0]),r=_.template(y,{excelName:t,excelArray:n});e("body").append(r),e("#excelExportForm").submit(),e("#excelExportForm").remove()}),i.dataTable({$el:e("#levelDetailTable"),sort:!1}),e("#levelDetailTable").tabs({hoverTooltip:!0})}})},showImportLevelStage:function(){e("#levelLevelDetailedAboutGrade").tabs({indicator:!0});var t=this;l.levelStageData({data:Params,success:function(n){if(!n.length){e("#importantLevelChart").html(w.Level.Tips.tip6);return}var r={ctUnit:t.ctUnit,renderData:n,GameCommon:w.GameCommon};r.avgTime=t.formatSeconds,e("#importantLevelChart").html(_.template(d,r));var i=(e("#levelStageChart").width()-15)/n.length;e("#levelStageChart").width(i*n.length),e("#levelStageChart li").width(i),e(window).bind("resize",function(){var t=e("#levelStageChart").width()/n.length;e("#levelStageChart li").width(t)})}})},showLevelSetting:function(t){var n=0,i=this;l.theMaxLevel({data:Params,success:function(t){n=t,l.levelSettingList({data:Params,success:function(t){var r={resultData:t,maxLevel:n,Level:w.Level};e("#levelStep").html(_.template(p,r)),e(".levelSelect").sSelect(),i.Pop_place(e(".Pop_line").parent())}})}}),r.confirm({message:_.template(h,w),buttons:[{"#saveBtn":function(){var t=[],n=[],s=[];e("#levelStep").find("li.step").each(function(r){var i={};i.productId=Params.productID,i.level=e(this).find("select.levelSelect").val(),i.name=e(this).find("input.textinput").val(),t.push(i),n.push(e(this).find("input.textinput").val()),s.push(e(this).find("select.levelSelect").val())});if(s.length<1){alert(w.Level.Tips.tip1);return}if(n.indexOf("")!=-1||n.indexOf(" ")!=-1||s.indexOf("-1")!=-1){alert(w.Level.Tips.tip3);return}if(i.isRepeat(s)){alert(w.Level.Tips.tip4);return}if(i.isRepeat(n)){alert(w.Level.Tips.tip5);return}l.saveLevelSetting({data:t,success:function(e){r.unblock(),i.render()}})},"#canelBtn":function(){r.unblock()},"#addStepBtn":function(){var t=e("#levelStep").find("li.step").length;if(t>=200){alert(w.Level.Tips.tip2);return}e("#levelStep").height()>=300?e("#levelStep").css({"overflow-x":"hidden","overflow-y":"auto"}):e("#levelStep").css({"overflow-x":"","overflow-y":""});var r='<li class="step"><b>step'+(t+1)+"：</b>"+"<label>"+w.Level.LevelDetailed.chooseLevel+"</label>"+'<select class="levelSelect" id="'+_.uniqueId("levels_")+'" style="left: 100px;">'+'<option value="-1">-'+w.Level.LevelDetailed.choose+"-</option>";for(var s=2;s<n;s++)r+='<option value="'+s+'">'+s+"</option>";r+="</select><label>"+w.Level.LevelDetailed.stageName+"</label>"+'<input value="" class="textinput" type="text"/>',r+='<div class="r"><em class="l add_em addItemtype">添加</em>&nbsp;&nbsp;&nbsp;&nbsp;',r+='<em class="r close_em deleteItemtype">删除</em></div></li>',e("#levelStep").append(r),e(".levelSelect").sSelect(),i.Pop_place(e(".Pop_line").parent());var o=e("#levelStep").scrollTop();e("#levelStep").scrollTop(o+45)},".addItemtype":function(t){var r=e("#levelStep").find("li.step").length;if(r>=200){alert(w.Level.Tips.tip2);return}var s='<li class="step"><b>step'+(r+1)+"：</b>"+"<label>"+w.Level.LevelDetailed.chooseLevel+"</label>"+'<select class="levelSelect" id="'+_.uniqueId("levels_")+'" style="left: 100px;">'+'<option value="-1">-'+w.Level.LevelDetailed.choose+"-</option>";for(var o=2;o<n;o++)s+='<option value="'+o+'">'+o+"</option>";s+="</select><label>"+w.Level.LevelDetailed.stageName+"</label>"+'<input value="" class="textinput" type="text"/>',s+='<div class="r"><em class="l add_em addItemtype">添加</em>&nbsp;&nbsp;&nbsp;&nbsp;',s+='<em class="r close_em deleteItemtype">删除</em></div></li>',e("#levelStep").append(s),e(".levelSelect").sSelect(),i.Pop_place(e(".Pop_line").parent());var u=e("#levelStep").scrollTop();e("#levelStep").scrollTop(u+45)},".deleteItemtype":function(t){var n=e("#levelStep").find("li.step").length;if(n<2){alert(w.Level.Tips.tip1);return}e(t.currentTarget).parent().parent("li").remove(),e("#levelStep").find("li.step").each(function(t){e(this).find("b").html("step"+(t+1)+"：")}),i.Pop_place(e(".Pop_line").parent())}}]})},Pop_place:function(t){var n=e(window).height(),r=e(document).width(),i=t.width(),s=t.height(),o=r/2-i/2,u=n/2-s/2;t.css({left:o+"px",top:u+"px"})},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},showDetail:function(t){var n=e(t.currentTarget),r=n.parent().parent(),o=n.attr("data-name"),u=n.attr("data-id"),a=n.html(),c="";r.addClass("hover"),r.next("tr.itempointdetail").remove();if(n.html()==w.GameCommon.packUp){r.find("a").each(function(t){t==0?e(this).html(w.Level.LevelDetailed.upgradeTime):t==1&&e(this).html(w.GameCommon.dailyTrend)}),r.removeClass("hover");return}r.find("a").each(function(t){t==0?e(this).html(w.Level.LevelDetailed.upgradeTime):t==1&&e(this).html(w.GameCommon.dailyTrend)}),n.html(w.GameCommon.packUp),r.addClass("hover"),w.curLevel=u,o=="dailyTrend"?(r.after(_.template(m,w)),c=u+w.GameCommon.level+" "+w.Level.LevelDistributed.levelupTimeDistribution,e("#chartTitle_"+u).html(c)):(r.after(_.template(g,w)),c=u+w.GameCommon.level,e("#chartTitle_"+u).html(c)),this.params=_.clone(Params),this.params.leveltype=u;var h=this;e("#levelDetailCode"+u).tabs(function(t){var n,r;if(!t)l.levelUpTimeDistribution({data:h.params,success:function(t){var n=_.pluck(t,"item"),t=_.pluck(t,"value"),r=_.percent(t,3,1),o=[{name:w.Level.LevelDetailed.levelUpTime,data:t}];s.chartBar({id:"levelDetailCode"+u+"-chart",x:{left:n,right:r},series:o,unitItem:[f.getAccountItem()]});var a=_.zip(n,r),l=[w.Level.LevelDetailed.levelUpTime,w.GameCommon.percentage];i.drawTable({head:l,body:a,$el:e("#levelDetailCode"+u+"-table")})}});else{switch(t){case"levelUpTime_"+u:n="levelUpTimeList",r=w.Level.LevelDetailed.upgradeTime,unitItem=f.getSecondItem();break;case"levelStayRate_"+u:n="levelStayRateList",r=w.Level.LevelDetailed.gradeStagnateRate,unitItem=f.getPercentItem();break;case"chargeTimes_"+u:n="chargeTimesList",r=w.GameCommon.payCount,unitItem=f.getTimesItem();break;case"chargeValue_"+u:n="chargeValueList",r=w.GameCommon.paySum,unitItem=f.getMoneyItem()}l[n]({data:h.params,success:function(t){var o=_.pluck(t,"item"),t=_.pluck(t,"value"),a=[{name:r,data:t}],f=_.zip(o,t),l=[w.GameCommon.date,r];n=="chargeValueList"&&(l=[w.GameCommon.date,r+"("+w.GameCommon.zhMonryUnit+")"]),n=="levelStayRateList"&&(a=[{name:r,data:t}],f=_.zip(o,t)),i.drawTable({head:l,body:f,$el:e("#levelDetailCode"+u+"-table"),headType:"date"}),s.chart({id:"levelDetailCode"+u+"-chart",x:o,series:a,xType:"date",yLeftUnit:unitItem,unitItem:[unitItem]})}})}})},formatSeconds:function(e){var t=Number(e),n=0,r=0;t>60&&(n=Number(t/60),t=Number(t%60),n>60&&(r=Number(n/60),n=Number(n%60)));var i=""+t<10?"0"+t:t;return n=parseInt(n),r=parseInt(r),n>0&&(i=""+(n<10?"0"+n:n)+":"+i),r>0&&(i=""+(r<10?"0"+r:r)+":"+i),r>0?i+=" hours":n>0?i+=" mins":i+=" secs",i}});return E}),define("models/level/Level",["models/BaseModel"],function(e){var t=[{name:"fetchLevelDistributionOfActivePlayer",url:"/v1/level/levelUniqueDistributionOfActivePlayer"},{name:"fetchLevelDistributionOfPlayTimes",url:"/v1/level/levelDistributionOfPlayTimes"},{name:"fetchLevelOfLossPlayer",url:"/v1/level/levelOfLossPlayer"},{name:"fetchLevelOfNewPlayer",url:"/v1/level/levelOfNewPlayer"},{name:"fetchLevelChangedIn7Days",url:"/v1/level/levelChangedIn7Days"}];return e.init(t)}),define("text!templates/Level/Schedule.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r	</div>\r	<div class="boxmax" id="levelOfNewPlayerCode">\r		<div class="title" role="title">\r			<strong class="l"><%=Level.Schedule.newPlayerLevel%></strong>\r		</div>\r		<div class="textbox">\r			<div class="box_top" role="tabbar">\r				<a data-tab="firstDayLevel" class="tab hover"><%=Level.Schedule.firstDayLevel%></a>\r				<a data-tab="firstWeekLevel" class="tab"><%=Level.Schedule.firstWeekLevel%></a>\r				<a data-tab="fourteenDayLevel" class="tab"><%=Level.Schedule.fourteenDayLevel%></a>\r				<div class="info l">\r                	AVG ：<font id="levelOfNewPlayerCodeAvg"></font>\r                </div>\r			</div>\r			<div role="picbox_chart_table">\r				<div id="levelOfNewPlayerCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r				<div id="levelOfNewPlayerCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r			</div>\r			<div class="after">\r        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r        	</div>\r		</div>\r	</div>\r\r	<div class="boxmax" id="levelChangeIn7DaysCode">\r		<div class="title" role="title">\r			<strong class="l"><%=Level.Schedule.levelChangeOfNewPlayerServenDays%></strong>\r		</div>\r		<div class="textbox">\r			<div role="picbox_chart_table">\r				<div id="levelChangeIn7DaysCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r				<div id="levelChangeIn7DaysCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r			</div>\r			<div class="after">\r        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r        	</div>\r		</div>\r	</div>\r</div>'}),define("views/Level/ScheduleView",["backbone","models/level/Level","utils/levelUtil","utils/HighchartUtil","utils/dataTableUtil","utils/UnitMappingUtil","utils/UnitMappingUtil","text!templates/Level/Schedule.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,s,o,u){var a=e.View.extend({el:"#container",initialize:function(){$("#container").html(_.template(o,u)),require(["views/public/DatePicker","views/public/SelectView"],function(e,t){new e({el:"#datePicker"}),new t({el:"#selectChoose"})}),this.render()},render:function(){return this.renderLevelOfNewPlayer(),this.renderLevelChangedIn7Days(),this},renderLevelOfNewPlayer:function(){var e=$("#levelOfNewPlayerCode").tabs(function(n){var o,a;switch(n){case"firstDayLevel":o=u.Level.Schedule.firstDayLevel,a=0;break;case"firstWeekLevel":o=u.Level.Schedule.firstWeekLevel,a=6;break;case"fourteenDayLevel":o=u.Level.Schedule.fourteenDayLevel,a=13}var f=_.clone(Params);f.player={days:a},t.fetchLevelOfNewPlayer({data:f,success:function(t){var n=t.avg,o=t.md,a=t.result;$("#levelOfNewPlayerCodeAvg").html("<em>"+n+u.GameCommon.level+"</em>"),r.chart({id:"levelOfNewPlayerCode-chart",type:"column",level:{name:u.GameCommon.newIncreasedPlayer,data:a},unitItem:[s.getAccountItem()]});var f=_.zip(_.pluck(a,"item"),_.pluck(a,"value")),l=[u.GameCommon.grade,u.GameCommon.newIncreasedPlayer+"("+s.getUnitByItem(s.getAccountItem())+")"];i.drawTable({head:l,body:f,$el:$("#levelOfNewPlayerCode-table")}),e.head=l,e.body=f}})})},renderLevelChangedIn7Days:function(){var e=this,o=$("#levelChangeIn7DaysCode").tabs(function(){t.fetchLevelChangedIn7Days({data:Params,success:function(t){if(t){var a=_.pluck(t,"item"),f=_.pluck(t,"value"),l,c=[],h=[],p=[],d=[];_.each(f,function(e){p.push(n.split(e,10))}),l=_.pluck(p[0],"item");for(var v=0;v<p.length;v++)c.push(e._percent(p[v])),h.push(e._percent(p[v],!0));var m=_.zip(c[0],c[1],c[2],c[3],c[4],c[5],c[6]);for(var v=0;v<l.length;v++)d.unshift({name:l[v],data:m[v]});r.chart({opacity:.6,colors:["#c490bf","#cc9900","#8957a1","#f0e53d","#00a073","#48a0fd","#60bb5d","#f7941d","#d35d03","#0068b7"],id:"levelChangeIn7DaysCode-chart",x:a,series:d,stacking:"normal",yLeftUnit:s.getPercentItem(),unitItem:[s.getPercentItem(),s.getPercentItem(),s.getPercentItem(),s.getPercentItem(),s.getPercentItem(),s.getPercentItem(),s.getPercentItem(),s.getPercentItem(),s.getPercentItem(),s.getPercentItem()],max:100});var g=a,y=_.zip(l,h[0],h[1],h[2],h[3],h[4],h[5],h[6]);g.unshift(""),i.drawTable({head:g,body:y,$el:$("#levelChangeIn7DaysCode-table")}),o.head=g,o.body=y}else $("#levelChangeIn7DaysCode-chart").html(u.GameCommon.sorryForNoData),$("#levelChangeIn7DaysCode-table").html(u.GameCommon.sorryForNoData)}})})},_percent:function(e,t){t=t||!1;var n=_.pluck(e,"item"),r=_.pluck(e,"value");return _.map(_.percent(r),function(e){return t?parseInt(e*100)+"%":parseInt(e*100)})}});return a}),define("text!templates/Level/LevelDistributed.html",[],function(){return'<div class="content r">\r\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="dateCriteria" class="relative l chooseDate" style=" z-index:99; margin-right:10px">\r				<a class="time" id="selectDateBtn"> \r					<span> <font class="calendar"><%=GameCommon.recent%></font></span>\r				</a>\r                <div style="width: 130px; right: 0px; display: none;" class="timetxt hide" id="">\r                    <ul>\r                        <li data="lately"><%=GameCommon.recent%></li>\r                        <li data="day"><%=GameCommon.day%></li>\r                        <li data="week"><%=GameCommon.week%></li>\r                        <li data="month"><%=GameCommon.month%></li>\r                    </ul>\r                </div>\r			</div>\r            \r			<div style="position:relative; float:left; cursor: pointer;" class="chooseDate" id="showLately">\r				<input id="datePicker" class="datepicker" type="text" disabled="disabled">\r				<div id="latelyDate" style="width: 160px;display:none;" class="timetxt">\r	                <ul>\r	                    <li data="2"><%=GameCommon.last3Days%></li>\r	                    <li data="6"><%=GameCommon.last7Days%></li>\r	                    <li data="13"><%=GameCommon.last14Days%></li>\r	                    <li data="29"><%=GameCommon.last30Days%></li>\r	                    <!--<li data="59"><%=GameCommon.last60Days%></li>-->\r	                    <!--<li data="89"><%=GameCommon.last90Days%></li>-->\r	                </ul>\r	            </div>\r			</div>\r\r			<!-- <div id="datePicker" class="relative l" style=" z-index:99"></div> -->\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r\r		<div id="levelDistributionOfPlayerCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDistributed.playerLevelDistribution%></strong>\r			</div>\r			<div class="textbox">\r				<div role="picbox_chart_table">\r					<div id="levelDistributionOfPlayerCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="levelDistributionOfPlayerCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r	\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="publicDatePicker" class="relative l" style=" z-index:99"></div>\r			<div class="clear"></div>\r		</div>\r		<div id="levelDistributionOfPlayTimesCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDistributed.gameTimesLevelDistribution%></strong>\r			</div>\r			<div class="textbox">\r				<div role="picbox_chart_table">\r					<div id="levelDistributionOfPlayTimesCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="levelDistributionOfPlayTimesCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>	\r\r	<div class="boxmax" id="levelOfLossPlayerCode">\r		<div class="title" role="title">\r			<strong class="l"><%=Level.LevelDistributed.lossPlayerLevel%></strong>\r		</div>\r		<div class="textbox">\r			<div class="box_top" role="tabbar">\r				<a data-tab="seven" class="tab hover"><%=Level.LevelDistributed.servenDaysNotLoginInPlayers%></a>\r				<a data-tab="fourteen" class="tab"><%=Level.LevelDistributed.fourteenDaysNotLoginInPlayers%></a>\r				<a data-tab="thirty" class="tab"><%=Level.LevelDistributed.thirtyDaysNotLoginInPlayers%></a>\r			</div>\r			<div role="picbox_chart_table">\r				<div id="levelOfLossPlayerCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r				<div id="levelOfLossPlayerCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r			</div>\r			<div class="after">\r        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r        	</div>\r		</div>\r	</div>\r</div>'}),define("views/Level/LevelDistributedView",["backbone","models/level/Level","utils/levelUtil","utils/HighchartUtil","utils/dataTableUtil","utils/UnitMappingUtil","models/Constant","text!templates/Level/LevelDistributed.html","i18n!nls/gameI18N","jquery.tabs","jquery.datepicker"],function(e,t,n,r,i,s,o,u,a){var f=e.View.extend({el:"#container",events:{"click #selectDateBtn":"toggleShow","click #dateCriteria li":"chooseCriteria","click #showLately":"showLately","click #latelyDate li":"chooseLately"},initialize:function(){$("#container").html(_.template(u,a)),require(["views/public/DatePicker","views/public/SelectView"],function(e,t){new e({el:"#publicDatePicker"}),new t({el:"#selectChoose"})}),this.dateFormat="YYMMDD",this.$dateCriteria=$("#dateCriteria"),this.$dateCriteriaItem=this.$dateCriteria.children(".timetxt"),this.$dateCriteriaTip=this.$dateCriteria.find(".calendar"),this.$latelyDate=$("#latelyDate"),this.$datepicker=$("#datePicker"),this.startTime=(new Date).add({days:-3}).toFormat(this.dateFormat),this.endTime=(new Date).add({days:-1}).toFormat(this.dateFormat),this.setInputValue((new Date).add({days:-3}),(new Date).add({days:-1})),this.render();var e=this;$("body").click(function(){e.$dateCriteriaItem.slideUp(),e.$latelyDate.slideUp()}),this.type="lately"},render:function(){return this.renderLevelDistribution(),this.renderLevelDistributionOfPlayTimes(),this.renderLevelOfLossPlayer(),this},showLately:function(e){e.stopPropagation(),this.type=="lately"?this.$latelyDate.slideToggle():this.$datepicker.focus()},toggleShow:function(e){e.stopPropagation();var t=$(e.currentTarget);t.next().slideToggle()},chooseLately:function(e){e.stopPropagation();var t=$(e.currentTarget),n=t.text();num=t.attr("data"),this.$latelyDate.slideUp();var r=Date.yesterday().add({days:-num}),i=Date.yesterday();this.startTime=r.toFormat(this.dateFormat),this.endTime=i.toFormat(this.dateFormat),this.setInputValue(r,i),this.renderLevelDistribution()},chooseCriteria:function(e){e.stopPropagation();var t=this;this.$dateCriteriaItem.slideUp();var n=$(e.currentTarget),r=n.text();this.type=n.attr("data"),this.$dateCriteriaTip.text(r),this.type=="lately"?this.$latelyDate.slideDown():(this.$latelyDate.slideUp(),this.$datepicker.datepicker({minDate:new Date(Params.productRegistTime),maxDate:(new Date).add({days:-1}),onSelect:function(e,n){var r,i;switch(t.type){case"day":r=new Date(e),i=new Date(e);break;case"week":var s=(new Date(e)).getDay(),s=s==0?7:s;r=(new Date(e)).add({days:-(s-1)}),i=(new Date(e)).add({days:7-s});break;case"month":var o=new Date(e);r=new Date((new Date(e)).setDate(1)),i=t.getLastDay(o)}var u=i.isAfter(Date.yesterday())?Date.yesterday():i.clone();t.startTime=r.toFormat(t.dateFormat),t.endTime=i.toFormat(t.dateFormat),t.setInputValue(r,u),t.renderLevelDistribution()}}).focus())},setInputValue:function(e,t){this.$datepicker.data("time",{start:e,end:t}),this.$datepicker.val(e.toFormat("YYYY-MM-DD")+"~"+t.toFormat("YYYY-MM-DD"))},yymmdd2yyyy:function(e){return(""+e).replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")},getLastDay:function(e){return e.setDate(1),e.setMonth(e.getMonth()+1),new Date(e.getTime()-864e5)},renderLevelDistribution:function(){var e=_.extend({},Params,{startTime:this.startTime,endTime:this.endTime,itemAction:this.type}),n=a.Level.LevelDistributed.playerLevelDistribution,o=this.$datepicker.data("time"),u=this,f=$("#levelDistributionOfPlayerCode").tabs(function(){t.fetchLevelDistributionOfActivePlayer({data:e,success:function(t){r.chart({id:"levelDistributionOfPlayerCode-chart",type:"column",level:{data:t,name:a.GameCommon.activePlayer,unitPosition:"last",unit:""},param:{startTime:o.start.toFormat(u.dateFormat),endTime:o.end.toFormat(u.dateFormat)},unitItem:[s.getAccountItem()]});var n=_.zip(_.pluck(t,"item"),_.pluck(t,"value")),l=[a.GameCommon.grade,a.GameCommon.activePlayer+"("+s.getUnitByItem(s.getAccountItem())+")"];i.drawTable({head:l,body:n,$el:$("#levelDistributionOfPlayerCode-table")}),f.head=l,f.body=n,f.excelName=a.Level.LevelDistributed.playerLevelDistribution+"("+e.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+e.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")"}})})},renderLevelDistributionOfPlayTimes:function(){var e=a.Level.LevelDistributed.gameTimesLevelDistribution,n=$("#levelDistributionOfPlayTimesCode").tabs(function(){t.fetchLevelDistributionOfPlayTimes({data:Params,success:function(e){r.chart({id:"levelDistributionOfPlayTimesCode-chart",type:"column",level:{data:e,name:a.Level.LevelDistributed.playTimes},yLeftUnit:s.getTimesItem(),unitItem:[s.getTimesItem()]});var t=_.zip(_.pluck(e,"item"),_.pluck(e,"value")),o=[a.GameCommon.grade,a.Level.LevelDistributed.playTimes+"("+s.getUnitByItem(s.getTimesItem())+")"];i.drawTable({head:o,body:t,$el:$("#levelDistributionOfPlayTimesCode-table")}),n.head=o,n.body=t}})})},renderLevelOfLossPlayer:function(){var e=_.extend({},Params),n=$("#levelOfLossPlayerCode").tabs(function(o){var u,f;switch(o){case"seven":f=7,u=a.Level.LevelDistributed.servenDaysNotLoginInPlayers;break;case"fourteen":f=14,u=a.Level.LevelDistributed.fourteenDaysNotLoginInPlayers;break;case"thirty":f=30,u=a.Level.LevelDistributed.thirtyDaysNotLoginInPlayers}e.churnedParameterBean={dayType:f},t.fetchLevelOfLossPlayer({data:e,success:function(e){r.chart({id:"levelOfLossPlayerCode-chart",type:"column",level:{name:u,data:e},unitItem:[s.getAccountItem()]});var t=_.zip(_.pluck(e,"item"),_.pluck(e,"value")),o=[a.GameCommon.grade,u+"("+s.getUnitByItem(s.getAccountItem())+")"];i.drawTable({head:o,body:t,$el:$("#levelOfLossPlayerCode-table")}),n.head=o,n.body=t}})})}});return f}),define("text!templates/play/tasks.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="playTasksNewHandConversionRate">\r			<div class="title"  role="title">\r				<strong class="l"><%=Play.Tasks.newHandConversionRate%></strong>\r				<a class="Cancel r minCancel" id="guideFunnelSetting"><font class="SetUp">设置</font></a>\r			</div>\r		</div>	\r		<div class="textbox">\r			<div id="guideFunelChart" class="picbox">\r				<div class="login">\r					<img src="images/loading.gif" height="25px"></img> <br>\r					<%=GameCommon.loadingData%>\r				</div>\r			</div>\r		</div>\r	</div>\r	<div class="boxmax">\r		<div id="playTasksTaskTollgateDetail">\r			<div class="titlemax"   role="title">\r				<strong class="l"><%=Play.TasksSetUp.taskTollgateDetail%></strong>\r	            <div id="indexTab" class="buttonDiv l">\r					<label class="l selectlble"><%=Play.Tasks.filterType%>：</label>\r	            	<a data="" class="but l butL hover "><%=GameCommon.all%></a>\r	            	<a data="1001" class="but l "><%=Play.TasksSetUp.newHand%></a>\r	            	<a data="1002" class="but l "><%=Play.Tasks.mainline%></a>\r	            	<a data="1003" class="but l "><%=Play.TasksSetUp.subline%></a>\r	            	<a data="-1" class="but l butR"><%=Play.TasksSetUp.other%></a>\r	            </div>\r			</div>\r		</div>\r		<div class="tablebox" id="missionInfoList">\r			<table border="0" width="100%" cellpadding="0" cellspacing="0" class="table_style_ope">\r				<thead>\r					<tr>\r						<th class="hover-tooltip" data-th="tasksMissionName" sort_name="missionName" width="15%"><p><%=GameCommon.designation%></p></th>\r						<th class="hover-tooltip" data-th="tasksMissionDisplayName" sort_name="missionDisplayName" width="10%"><p><%=GameCommon.alias%></p></th>\r						<th class="hover-tooltip" data-th="tasksMissionTypeName" sort_name="missionTypeName" width="10%"><p><%=Play.Tasks.type%></p></th>\r						<th class="hover-tooltip" data-th="tasksStartTimes" sort_name="startTimes" width="10%"><p><%=Play.Tasks.enterCount%></p></th>\r						<th class="hover-tooltip" data-th="tasksAvgFinishTime" sort_name="avgFinishTime" width="10%"><p><%=Play.Tasks.avgAccomplishTime%></p></th>\r						<th class="hover-tooltip" data-th="tasksFailedTimes" sort_name="failedTimes" width="10%"><p><%=Play.Tasks.failTime%></p></th>\r						<th class="hover-tooltip" data-th="tasksFailRate" width="10%"><p><%=Play.Tasks.failRate%></p></th>\r						<th width="15%"><%=GameCommon.detail%></th>\r					</tr>\r				</thead>\r				<tbody id="taskData" ></tbody>\r			</table>\r		</div>\r	</div>\r</div>'}),define("text!templates/play/taskTollgateDataList.html",[],function(){return'{{#resultData}}\r<tr>\r	<td width="15%" title="{{id}}">{{missionName}}</td>\r	<td width="10%" title="{{missionDisplayName}}">{{missionDisplayName}}</td>\r	<td width="10%">{{missionTypeName}}</td>\r	<td width="10%">{{startTimes}}</td>\r	<td width="10%">{{avgFinishTime}}</td>\r	<td width="10%">{{failedTimes}}</td>\r	<td width="10%">{{failedRate}}</td>\r	<td width="15%">\r	  	<a class="levelDetail detail" data-id="{{id}}" ><%=Play.TasksSetUp.failReason%></a>\r	  	<a class="missionDetail detail" data-id="{{id}}"><%=Play.TasksSetUp.playerLevel%></a>\r	</td>\r</tr>\r{{/resultData}}\r{{^resultData}}\r<tr><td colspan="8" class="noData"><%=GameCommon.noData%></td></tr>\r{{/resultData}}\r\r\r'}),define("text!templates/play/failReason.html",[],function(){return'<tr class="itempointdetail"> \r\n	<td colspan="8" width="100%" >\r\n		<div class="mintdbox mintable">\r\n			<div class="title">\r\n				<strong id="chartTitle_<%=cur_itemId%>"></strong>\r\n			</div>\r\n			<div class="textbox">\r\n				<div id="itemDetailCode<%=cur_itemId%>">\r\n					<div role="picbox_chart_table">\r\n						<div id="itemDetailCode<%=cur_itemId%>-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="itemDetailCode<%=cur_itemId%>-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n					</div>\r\n					<div class="after">\r\n						<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n						<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>'}),define("text!templates/play/playerLevel.html",[],function(){return'<tr class="itempointdetail" id="itempointdetail"> \r\n	<td colspan="8" width="100%" >\r\n		<div class="mintdbox mintable">\r\n			<div class="title">\r\n				<strong id="chartTitle_<%=cur_itemId%>"></strong>\r\n			</div>\r\n			<div class="textbox">\r\n				<div id="itemDetailCode<%=cur_itemId%>">\r\n				<div class="box_top" role="tabbar">\r\n					<a data-tab="enter_<%=cur_itemId%>" class="tab hover"><%=Play.Tasks.enterCount%></a>\r\n					<a data-tab="success_<%=cur_itemId%>" class="tab"><%=Play.Tasks.successTime%></a>\r\n					<a data-tab="fail_<%=cur_itemId%>" class="tab"><%=Play.Tasks.failTime%></a>\r\n				</div>\r\n					<div role="picbox_chart_table">\r\n						<div id="itemDetailCode<%=cur_itemId%>-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n						<div id="itemDetailCode<%=cur_itemId%>-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n					</div>\r\n					<div class="after">\r\n						<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n						<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>'}),define("text!templates/play/guideFunnelSetting.html",[],function(){return'<div class="Pop_line">\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=Play.MissionFunnel.missionFunnelSetting%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n    	<p class="setupPop_P"><%=Play.MissionFunnel.missionFunnelSettingTip%></p>\r\n        <ul class="setup_Pop" id="missionStep">\r\n        	\r\n        </ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a class="l CancelonCL" id="addStepBtn">+<%=Play.MissionFunnel.addStep%></a>\r\n            <a class="timecolse r Confirm" id="saveBtn"><%=Play.MissionFunnel.saveAndClose%></a>\r\n            <a class="r Cancel" id="canelBtn"><%=Play.MissionFunnel.canel%></a>\r\n        </div>\r\n    </div>\r\n</div>	\r\n'}),define("text!templates/play/missionFlowStep.html",[],function(){return'<% _.each(resultData,function(obj){\r\n	var missionId = obj.missionId;\r\n%>\r\n	<li class="step">\r\n		<b>step<%=obj.flowOrder%>：</b>\r\n		<label><%=Play.MissionFunnel.chooseMission%></label>\r\n		<select class="missionSelect" id="missionSelect<%=obj.flowOrder%>" style="left: 100px;">\r\n			<option value="-1"><%=Play.MissionFunnel.missionSelect%></option>\r\n			<% _.each(selectData,function(obj){\r\n				 var id = obj.item,selected=\'\';\r\n                  if(missionId == id) selected=\'selected\';\r\n			%>\r\n				<option <%=selected%> value="<%=obj.item%>"><%=obj.value%></option>\r\n			<%});%>\r\n		</select>\r\n		<label><%=Play.MissionFunnel.stepAlias%></label>\r\n		<input value="<%=obj.flowName%>" class="textinput" type="text"/>\r\n		<div class="r">\r\n			<em class="l add_em addItemtype">添加</em>\r\n			&nbsp;&nbsp;&nbsp;&nbsp;\r\n			<em class="r close_em deleteItemtype">删除</em>\r\n		</div>\r\n	</li> 	\r\n<%});%>\r\n\r\n '}),define("models/play/TaskMission",["models/BaseModel"],function(e){var t=[{name:"taskList",url:"/v1/taskMissionManage/taskList"},{name:"updateTaskName",url:"/v1/taskMissionManage/updateTaskName"},{name:"clearMission",url:"/v1/taskMissionManage/clearMission"},{name:"missionTypeList",url:"/v1/taskMissionManage/missionTypeList"},{name:"updateTaskType",url:"/v1/taskMissionManage/updateTaskType"},{name:"addTaskType",url:"/v1/taskMissionManage/addTaskType"},{name:"deleteTaskType",url:"/v1/taskMissionManage/deleteTaskType"},{name:"guideFunnel",url:"/v1/taskMission/guideFunnel"},{name:"missionIdNameList",url:"/v1/taskMission/missionIdNameList"},{name:"saveMissionFlowSetting",url:"/v1/taskMission/saveMissionFlowSetting"},{name:"missionFlowSettingList",url:"/v1/taskMission/missionFlowSettingList"},{name:"fetchTaskTollgateDataList",url:"/v1/taskMission/fetchTaskTollgateDataList"},{name:"fetchGroupedMission",url:"/v1/taskMission/fetchGroupedMission"}];return e.init(t)}),define("text!templates/public/pagination_tool.html",[],function(){return'<div class="buttonDiv l">\r\n	<div class="bottunDiv">\r\n		<b class="l"><%=i18n.perPageDisplay%></b> \r\n			<select style="margin-top:4px">\r\n				<option value="10" selected="selected">10</option>\r\n				<option value="20">20</option>\r\n				<option value="50">50</option>\r\n				<option value="100">100</option>\r\n			</select>\r\n		<b class="l"> <%=i18n.records%></b>\r\n	</div>\r\n</div>\r\n<div class="dataTables_paginate paging_full_numbers">\r\n<!-- 	<span style="display:block;float:left;margin:10px;">总计:<%=data.totalCount%>条记录</span> -->\r\n	<span class="first paginate_button" role="first" data="<%=data.currentPage!=1?1:-1%>"><%=i18n.first%></span>\r\n	<span class="previous paginate_button" role="prev" data="<%=data.currentPage-1>0?data.currentPage-1:-1%>"> <%=i18n.pre%> </span>\r\n	<span>\r\n		<%for(var i=data.start; i<=data.end; i++){%>\r\n			<span data="<%=i%>" class=<%=i==data.currentPage?"paginate_active":"paginate_button"%>><%=i%></span>\r\n		<%}%>\r\n	</span>\r\n	<span class="next paginate_button" role="next" data="<%=data.currentPage+1<=data.totalPage?data.currentPage+1:-1%>"> <%=i18n.next%> </span>\r\n	<span class="last paginate_button" role="last" data="<%=data.currentPage!=data.totalPage?data.totalPage:-1%>"> <%=i18n.last%> </span>\r\n</div>\r\n'}),define("jquery.table",["utils/ajax-utils","text!templates/public/pagination_tool.html","text!templates/public/loading.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r){$.fn.extend({drawTable:function(e){this.params=$.extend({},e),this.cacheObjects(),this.setParams(),this.bindEvents(),this.initRender()},cacheObjects:function(){this.$table=$(this).find("table"),this.containerId=$(this).attr("id"),this.paginationId=this.containerId+"_pagination",this.$thLength=this.$table.find("thead th").length,this.$searchTool=$(this).find('div[role="searchtool"]'),$(this).find("#"+this.paginationId).length?$(this).find("#"+this.paginationId).html(""):$(this).append('<div id="'+this.paginationId+'"></div>')},setParams:function(e){var t={pageLength:10,currentPage:1,sort:this.$table.find("thead th:first").attr("sort_name")+" asc"};this.pgn=$.extend(t,this.params.pagination)},bindEvents:function(){var e=this;this.find("thead th").unbind("click").bind("click",function(t){var n=$(t.currentTarget),r=n.attr("sort_name");if(!r)return;var i=e._getOppositeSortingStatus(n.attr("status"));e.params.sort=r+" "+i,e.pgn.sort=r+" "+i,e.render()}),$("#"+this.paginationId).undelegate(),$("#"+this.paginationId).delegate("span.paginate_button","click",function(t){var n=$(this).attr("data");if(n==-1)return;$("#"+e.paginationId).find("span.paginate_active").removeClass("paginate_active").addClass("paginate_button"),$(this).addClass("paginate_active"),e.pgn.currentPage=n,e.render()}),$("#"+this.paginationId).delegate("select","change",function(t){var n=$(this).val();if(n==e.pgn.pageLength)return;e.pgn.pageLength=n,e.pgn.currentPage=1,e.render()})},initRender:function(){this.render()},render:function(){if(this.requestStatus)return;var t=this;this.requestStatus=!0,this.setStyles();var n=$.extend(this.params.data,{pagination:this.pgn});e.ajax({url:this.params.action,data:n,success:function(e){t.requestStatus=!1;if(!e||!e.result||e.result.length==0){var n=r.GameCommon.noData;t.$table.find("tbody").html('<tr><td colspan="'+t.$thLength+'">"'+n+'"</td></tr>');return}t.renderPagination(e),t.params.success(e),t.$table.find("tr:even").addClass("even")}})},setStyles:function(){var e=_.template(n,r);this.$table.find("tbody").html('<tr><td colspan="'+this.$thLength+'">'+e+"</td></tr>");if(this.params&&this.params.sort){var t=this.params.sort.split(" ")[0],i=this.params.sort.split(" ")[1];this.$table.find("thead th").removeClass("sorting_asc sorting_desc");var s=this.$table.find('thead th[sort_name="'+t+'"]');s.addClass("sorting_"+i),s.attr("status",i)}},renderPagination:function(e){var n=$(this).find("#"+this.paginationId);n.addClass("page");var i=_.template(t,{data:e,i18n:r.GameCommon});n.html(i);var s=$("#"+this.paginationId).find("select");s.find('option[value="'+this.pgn.pageLength+'"]').attr("selected",!0),s.attr("id","select_"+this.paginationId),s.sSelect()},_getOppositeSortingStatus:function(e){var t={asc:"desc",desc:"asc"};return e?t[e.toLowerCase()]:"desc"}})}),define("views/play/tasksView",["backbone","mustache","utils/ModelBox","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/play/tasks.html","text!templates/play/taskTollgateDataList.html","text!templates/play/failReason.html","text!templates/play/playerLevel.html","text!templates/play/guideFunnelSetting.html","text!templates/play/missionFlowStep.html","text!templates/public/loading.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","models/play/TaskMission","models/Constant","jquery.select","jquery.table"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=e.View.extend({el:"#container",events:{"click tbody>tr>td>a":"showDetailInfo","click #indexTab>a":"changeTab","click #guideFunnelSetting":"showGuideFunnelSetting","click #clickToSet":"showGuideFunnelSetting"},initialize:function(){$("#container").html(_.template(f,g)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.missionType="",this.render()},render:function(){return this.renderToGuideFunnel(),this.renderTaskTollgateDetailTable(),this},renderTaskTollgateDetailTable:function(){var e=$('#playTasksTaskTollgateDetail div[role="title"] a[role="excel"]').length==0;e&&$('#playTasksTaskTollgateDetail div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#playTasksTaskTollgateDetail").tabs({indicator:!0});var n=_.clone(Params);n.missionTypeId=this.missionType,n.pagination={},$("#missionInfoList").drawTable({action:"/game/v1/taskMission/missionInfoList",data:n,sort:"missionName asc",success:function(e){for(var r=0,i=e.result.length;r<i;r++)e.result[r].standardAvgFinishTime==-1&&(e.result[r].avgFinishTime="--");var o={resultData:e.result};o.failedRate=function(){return this.startTimes===0?"--":(this.failedTimes/this.startTimes*100).toFixed(1)+"%"},$("#missionInfoList table>tbody").html(t.render(_.template(l,g),o));var u=$("<table></table>");u.append($("#missionInfoList table").html()),$('#playTasksTaskTollgateDetail div[role="title"] a[role="excel"]').unbind("click").click(function(){var e=$('#playTasksTaskTollgateDetail div[role="title"] a[data="'+n.missionTypeId+'"]').contents().filter(function(){return this.nodeType===3}).text()||"",t=g.Play.TasksSetUp.taskTollgateDetail+"-"+e+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",r=s.tableToJson(u[0]),i=_.template(m,{excelName:t,excelArray:r});$("body").append(i),$("#excelExportForm").submit(),$("#excelExportForm").remove()})}}),$("#missionInfoList").tabs({hoverTooltip:!0})},showDetailInfo:function(e){var t=_.clone(Params),n=$(e.currentTarget),s=n.attr("class"),u=n.attr("data-id"),a=n.parent().parent(),f=n.html();a.next("tr.itempointdetail").remove();if(n.html()==g.GameCommon.packUp){a.find("a").each(function(e){e==0?$(this).html(g.Play.TasksSetUp.failReason):e==1&&$(this).html(g.Play.TasksSetUp.playerLevel)}),a.removeClass("hover");return}a.find("a").each(function(e){e==0?$(this).html(g.Play.TasksSetUp.failReason):e==1&&$(this).html(g.Play.TasksSetUp.playerLevel)}),n.html(g.GameCommon.packUp),a.addClass("hover"),g.cur_itemId=u,f==g.Play.TasksSetUp.playerLevel?a.after(_.template(h,g)):a.after(_.template(c,g)),$("#chartTitle_"+u).html(f),a.next("tr.hide").removeClass("hide"),this.params=_.clone(Params);var l=this,p=$("#itemDetailCode"+u).tabs(function(e){f==g.Play.TasksSetUp.playerLevel?(e=e.split("_")[0],l.params.metricName=e,l.params.missionId=u,l.params.groupBy="level",e=="enter"?name=g.Play.Tasks.enterCount:e=="success"?name=g.Play.Tasks.successTime:e=="fail"&&(name=g.Play.Tasks.failTime),y.fetchGroupedMission({data:l.params,success:function(e){var t=_.pluck(e,"item"),e=_.pluck(e,"value"),n=[{name:name,data:e}];r.chart({id:"itemDetailCode"+u+"-chart",x:t,type:"column",series:n,yLeftUnit:o.getTimesItem(),unitItem:[o.getTimesItem()]});var s=_.zip(t,e),a=[g.Play.TasksSetUp.playerLevel,name+"("+o.getUnitByItem(o.getTimesItem())+")"];i.drawTable({head:a,body:s,$el:$("#itemDetailCode"+u+"-table")}),p.head=a,p.body=s}})):(l.params.missionId=u,l.params.groupBy="cause",y.fetchGroupedMission({data:l.params,success:function(e){var t=_.pluck(e,"item"),e=_.pluck(e,"value"),n=_.percent(e,3,1),s=[{name:g.Play.Tasks.failTime,data:e}];r.chartBar({id:"itemDetailCode"+u+"-chart",x:{left:t,right:n},series:s,pagination:!0,unitItem:[o.getTimesItem()]});var a=_.zip(t,e,n),f=[g.Play.TasksSetUp.failReason,g.Play.Tasks.failTime+"("+o.getUnitByItem(o.getTimesItem())+")",g.GameCommon.percentage];i.drawTable({head:f,body:a,$el:$("#itemDetailCode"+u+"-table")}),p.head=f,p.body=a}}))})},changeTab:function(e){var t=$(e.currentTarget),n=t.attr("data");this.missionType=n,$("#indexTab>a").removeClass("hover"),t.addClass("hover"),this.renderTaskTollgateDetailTable()},deleteStep:function(e){console.log($(e.currentTarget).attr("data"))},showGuideFunnelSetting:function(e){var t,r=this;y.missionIdNameList({data:Params,success:function(e){t=e,y.missionFlowSettingList({data:Params,success:function(e){var n={resultData:e,selectData:t,Play:g.Play};$("#missionStep").html(_.template(d,n)),$(".missionSelect").sSelect(),r.Pop_place($(".Pop_line").parent())}})}}),n.confirm({message:_.template(p,g),buttons:[{"#saveBtn":function(){var e=[],t=[],i=[];$("#missionStep").find("li.step").each(function(n){var r={};r.missionId=$(this).find("select.missionSelect").val(),r.flowName=$(this).find("input.textinput").val(),i.push($(this).find("input.textinput").val()),r.flowOrder=n+1,r.productId=Params.productID,e.push($(this).find("select.missionSelect").val()),t.push(r)});if(e.length<2){alert(g.Play.MissionFunnel.funelTip);return}if(i.indexOf("")!=-1||i.indexOf(" ")!=-1||e.indexOf("-1")!=-1){alert(g.Play.Tasks.tip1);return}if(r.isRepeat(e)){alert(g.Play.Tasks.tip2);return}if(r.isRepeat(i)){alert(g.Play.Tasks.tip3);return}y.saveMissionFlowSetting({data:t,success:function(e){n.unblock(),r.render()}})},"#canelBtn":function(){n.unblock()},"#addStepBtn":function(){var e=$("#missionStep").find("li.step").length;if(e>=100){alert(g.Play.Tasks.tip4);return}var n='<li class="step"><b>step'+(e+1)+"：</b>"+"<label>"+g.Play.MissionFunnel.chooseMission+"</label>"+'<select class="missionSelect" id="'+_.uniqueId("misstion_")+'" style="left: 100px;">'+'<option value="-1">'+g.Play.MissionFunnel.missionSelect+"</option>";_.each(t,function(e){n+='<option value="'+e.item+'">'+e.value+"</option>"}),n+="</select>",n+="<label>"+g.Play.MissionFunnel.stepAlias+"</label>",n+='<input value="" class="textinput" type="text"/>',n+='<div class="r"><em class="l add_em addItemtype">添加</em>&nbsp;&nbsp;&nbsp;&nbsp;',n+='<em class="r close_em deleteItemtype">删除</em></div></li>',$("#missionStep").append(n),$(".missionSelect").sSelect(),r.Pop_place($(".Pop_line").parent());var i=$("#missionStep").scrollTop();$("#missionStep").scrollTop(i+45)},".addItemtype":function(e){var n=$("#missionStep").find("li.step").length;if(n>=100){alert(g.Play.Tasks.tip4);return}var i='<li class="step"><b>step'+(n+1)+"：</b>"+"<label>"+g.Play.MissionFunnel.chooseMission+"</label>"+'<select class="missionSelect" id="'+_.uniqueId("misstion_")+'" style="left: 100px;">'+'<option value="-1">'+g.Play.MissionFunnel.missionSelect+"</option>";_.each(t,function(e){i+='<option value="'+e.item+'">'+e.value+"</option>"}),i+="</select>",i+="<label>"+g.Play.MissionFunnel.stepAlias+"</label>",i+='<input value="" class="textinput" type="text"/>',i+='<div class="r"><em class="l add_em addItemtype">添加</em>&nbsp;&nbsp;&nbsp;&nbsp;',i+='<em class="r close_em deleteItemtype">删除</em></div></li>',$("#missionStep").append(i),$(".missionSelect").sSelect(),r.Pop_place($(".Pop_line").parent());var s=$("#missionStep").scrollTop();$("#missionStep").scrollTop(s+45)},".deleteItemtype":function(e){var t=$("#missionStep").find("li.step").length;if(t<3){alert(g.Play.MissionFunnel.funelTip);return}$(e.currentTarget).parent().parent("li").remove(),$("#missionStep").find("li.step").each(function(e){$(this).find("b").html("step"+(e+1)+"：")}),r.Pop_place($(".Pop_line").parent())}}]})},Pop_place:function(e){var t=$(window).height(),n=$(document).width(),r=e.width(),i=e.height(),s=n/2-r/2,o=t/2-i/2;e.css({left:s+"px",top:o+"px"})},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},renderToGuideFunnel:function(){$("#playTasksNewHandConversionRate").tabs({indicator:!0}),y.guideFunnel({data:Params,success:function(e){if(!e.length){$("#guideFunelChart").html('<font style="line-height:24px;margin-top: 115px;display:block;">'+g.Play.MissionFunnel.funelTip2+'</font><a id="clickToSet" style=" color: #5BAC54; display: block;  font-size: 16px; margin: 0 auto; width: 100px;">'+g.Play.MissionFunnel.funelTip3+"</a>");return}var t=0,n=_.pluck(e,"value"),r=_.pluck(e,"item"),i=n[0],s=[],o=0;for(var u=0;u<n.length;u++)u==0?(o=n[u],s[u]=n[u]):(o!=0&&n[u]!=0?s[u]=Math.round(n[u]/o*1e3)/10:s[u]="0.0",o=n[u]);var a=s,f=n,l=n,c=n,h=new Highcharts.Chart({chart:{renderTo:"guideFunelChart",zoomType:"xy",backgroundColor:"#fff"},title:{text:""},xAxis:{categories:r},yAxis:{title:{text:""}},legend:{enabled:!1},tooltip:{formatter:function(){return""+this.x+": "+this.y}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}},area:{marker:{enabled:!0,states:{hover:{enabled:!0}}},dataLabels:{enabled:!0,formatter:function(){if(i!=0){var e=100;return this.y<i&&(e=Math.round(this.y/i*1e3)/10),e==0?"0.0"+g.Player.LostFunnel._rateUser:e+g.Player.LostFunnel._rateUser}}}},line:{dataLabels:{enabled:!0,x:-55,y:8,formatter:function(){var e=a[t];t+=1;if(!e)return"";if(t!=1)return e+"%"}},lineWidth:0,marker:{enabled:!1}}},series:[{name:g.Player.LostFunnel.visittimes,type:"column",data:c},{name:g.Player.LostFunnel.line,color:"#6DC5FD",type:"line",data:f},{name:g.Player.LostFunnel.funnel,color:"#6DC5FD",type:"area",data:l}]})}})}});return w}),define("text!templates/play/TasksManagement.html",[],function(){return'<div class="content r">\r	<div class="boxmax" >\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="playTasksSetUpTaskTollgateDetail">\r			<div class="title" role="title">\r				<strong class="l"><%=Play.TaskManage.missionManage%></strong>\r			</div>\r		</div>\r		<div class="tablebox" id="taskDiv">\r			\r		</div>\r	</div>\r</div>'}),define("text!templates/play/TaskManagement-table.html",[],function(){return'<table border="0" id="TasksManagementTable" width="100%" cellpadding="0" cellspacing="0" class="table_style1">\r\n	<thead>\r\n		<tr>\r\n			<th class="hover-tooltip" data-th="tasksMissionID" width="25%"><p><%=Play.TaskManage.missionID%></p></th>\r\n			<th class="hover-tooltip" data-th="tasksMissionAlias" width="40%"><p><%=Play.TaskManage.missionAlias%></p></th>\r\n			<th class="hover-tooltip" data-th="tasksMissionType" width="30%" class="left"><p><%=Play.TaskManage.missionType%></p></th>\r\n			<th class="hover-tooltip" data-th="tasksMissionOperate"  width="15%"><p><%=Play.TaskManage.missionOperate%></p></th>\r\n		</tr>\r\n	</thead>\r\n	<tbody id="taskTableBody">\r\n		{{#resultData}}\r\n		<tr class="{{trclass}}">\r\n			<td width="25%">{{missionId}}</td>\r\n			<td width="40%"><input data-id="{{id}}" data-name="{{name}}" id="editMissionName" class="notEditorput" type="text" value="{{name}}"/></td>\r\n			<td width="30%" class="left">\r\n				 <div class="l missionNameDiv" id="mission_{{id}}">{{missionTypeName}}</div>\r\n				<a class="Cancel tableToggleBut l" data-id="{{id}}"><b><%=Play.TasksSetUp.newHand%></b></a>\r\n			</td>\r\n			<td width="15%"><a data-id="{{id}}" class="clearMission"><%=GameCommon.clear%></a></td>\r\n		</tr>\r\n		{{/resultData}}\r\n		{{^resultData}}\r\n			<tr><td colspan="4" class="noData"><%=GameCommon.noData%></td></tr>\r\n		{{/resultData}}\r\n	</tbody>\r\n</table>'}),define("text!templates/play/TaskManagement-MissionType.html",[],function(){return'<div class="relative l tableToggleDIVrel">\r\n<div class="Pop_line  tableToggleDIV">\r\n    <div class="timetop">\r\n      <b class="l"><%=Play.TaskManage.missionTypeSetting%></b><a class="r close"></a>\r\n    </div>\r\n    <div class="Poptxt">\r\n      <ul class="itemtypeDiv" id="missiontypeDiv">\r\n        {{#resultData}}\r\n        <li>\r\n          <a class="changeMissiontype" data-id="{{id}}">\r\n            <strong class="l" >{{name}}</strong>\r\n            <{{display}} data-id="{{id}}" data-name="{{name}}" class="r deleteMissiontype">删除</{{display}}>\r\n          </a>\r\n        </li>\r\n        {{/resultData}}\r\n      </ul>\r\n      <div class="itemtypebut">\r\n        <!-- <input type="text" class="Editorput" /> -->\r\n      </div>\r\n      <div class="opeDiv after">\r\n			<a id="productDetailConfim" class="timecolse r Confirm"><%=VirtualEconomy.Management.affirm%></a>\r\n			<input id="missionTypeNameInput" type="text" class="Editorput r" value="<%=VirtualEconomy.Management.addNewCategory%>" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}),define("text!templates/play/clearMissionTip.html",[],function(){return'<div class="Pop_line">\r\n	<div class="timetop">\r\n    	<b class="l"><%=Play.TaskManage.tip%></b>\r\n    </div>\r\n	<div class="Poptxt">\r\n    	<p class="Prompt"><%=Play.TaskManage.clearTip%></p>\r\n        <div class="opeDiv after">\r\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/play/TasksManagementView",["backbone","mustache","utils/ModelBox","utils/excelDataUtil","text!templates/play/TasksManagement.html","text!templates/play/TaskManagement-table.html","text!templates/play/TaskManagement-MissionType.html","text!templates/play/clearMissionTip.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","models/play/TaskMission","utils/dataTableUtil"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click #editMissionName":"changeEditInputClass","blur #editMissionName":"saveMissionName","click .clearMission":"clearMission","click #taskTableBody tr a.tableToggleBut":"showMissionType","click #taskTableBody tr a.close":"hideMissionType","click #productDetailConfim":"addMissionType","click #missiontypeDiv li em.deleteMissiontype":"deleteMissionType","click #missiontypeDiv li a.changeMissiontype":"changeMissiontype","click #missionTypeNameInput":"missionTypeNameInputClick","blur #missionTypeNameInput":"missionTypeNameInputBlur"},initialize:function(){$("#container").html(_.template(i,f)),this.render()},render:function(){return this.taskList(),this},changeEditInputClass:function(e){$(e.currentTarget).attr("class","Editorput")},saveMissionName:function(e){var t=$(e.currentTarget).attr("data-id"),r=$(e.currentTarget).attr("data-name"),i=$(e.currentTarget).val();if(r==i){$(e.currentTarget).attr("class","notEditorput");return}var s={id:t,name:i,productId:Params.productID};l.updateTaskName({data:s,success:function(t){t==200?($(e.currentTarget).attr("class","notEditorput"),$(e.currentTarget).attr("data-name",i)):t==401?n.alert({message:"别名已存在"}):n.alert({message:"程序内部错误，错误码："+t})}})},clearMission:function(e){var t=this,r=$(e.currentTarget).attr("data-id");n.confirm({message:_.template(u,f),buttons:[{".Confirm":function(){n.unblock(),l.clearMission({data:{id:r,productId:Params.productID},success:function(e){e?(n.alert({message:f.Play.TaskManage.dataCleared}),t.taskList()):n.alert({message:f.VirtualEconomy.Management.programWrong})}})},".Cancel":function(){n.unblock()}}]})},showMissionType:function(e){this.id=$(e.currentTarget).attr("data-id"),l.missionTypeList({data:Params,success:function(n){var r={resultData:n,display:function(){return this.default?"i":"em"}};$(e.currentTarget).after(t.render(_.template(o,f),r));var i=$("#bottom").offset().top,s=$(e.currentTarget).offset().top+282;s>=i?$(".tableToggleDIV").css({bottom:"-8px"}):$(".tableToggleDIV").css({top:"24px"})}})},hideMissionType:function(e){$(".tableToggleDIVrel").remove()},addMissionType:function(e){var t=$.trim($("#missionTypeNameInput").val());if(t==f.VirtualEconomy.Management.addNewCategory||t==""||t==" "){n.alert({message:f.VirtualEconomy.Management.enterTypeName});return}l.addTaskType({data:{name:t,productId:Params.productID},success:function(e){if(e.code==200){var t=e.obj,r=t.name,i=t.id;$("#missiontypeDiv").append('<li><a class="changeMissiontype" data-id="'+i+'"><strong class="l" >'+r+"</strong>"+'<em data-id="'+i+'" data-name="'+r+'" class="r deleteMissiontype">删除</em></li></a>'),$("#missionTypeNameInput").val(f.VirtualEconomy.Management.addNewCategory)}else e.code==401?n.alert({message:f.VirtualEconomy.Management.thisNameExisted}):n.alert({message:f.VirtualEconomy.Management.programWrong+e})}})},deleteMissionType:function(e){var t=$(e.currentTarget).attr("data-id"),r=$(e.currentTarget).attr("data-name");$("#taskTableBody tr div.missionNameDiv").each(function(){$(this).html()==r&&$(this).html(f.GameCommon.other)}),l.deleteTaskType({data:{id:t},success:function(t){t==200?$(e.currentTarget).parent().remove():n.alert({message:f.VirtualEconomy.Management.programWrong+t})}})},changeMissiontype:function(e){$("#mission_"+this.id).html($(e.currentTarget).find("strong").html()),l.updateTaskType({data:{id:this.id,missionTypeId:$(e.currentTarget).attr("data-id"),productId:Params.productID},success:function(e){e==200?$(".tableToggleDIVrel").remove():n.alert({message:f.VirtualEconomy.Management.programWrong+e})}})},taskList:function(){var e=$('#playTasksSetUpTaskTollgateDetail div[role="title"] a[role="excel"]').length==0;e&&$('#playTasksSetUpTaskTollgateDetail div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#playTasksSetUpTaskTollgateDetail").tabs({indicator:!0}),l.taskList({data:Params,success:function(e){var n={resultData:e};n.trclass=function(){return(e.indexOf(this)+1)%2==0?"changeColor":""},$("#taskDiv").html(t.render(_.template(s,f),n));var i=$("<table></table>"),o=$("<thead></thead>"),u=$("<tbody></tbody>");o.append($("#TasksManagementTable>thead").html()),u.append($("#TasksManagementTable>tbody").html()),i.append(o).append(u),$('#playTasksSetUpTaskTollgateDetail div[role="title"] a[role="excel"]').click(function(){var e=f.Play.TaskManage.missionManage+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",t=r.tableToJson(i[0]),n=_.template(a,{excelName:e,excelArray:t});$("body").append(n),$("#excelExportForm").submit(),$("#excelExportForm").remove()}),c.dataTable({$el:$("#TasksManagementTable")}),$("#TasksManagementTable").tabs({hoverTooltip:!0})}})},missionTypeNameInputClick:function(e){var t=$(e.currentTarget).val();t==f.VirtualEconomy.Management.addNewCategory&&$(e.currentTarget).val("")},missionTypeNameInputBlur:function(e){var t=$(e.currentTarget).val();(t==""||t==" ")&&$(e.currentTarget).val(f.VirtualEconomy.Management.addNewCategory)}});return h}),define("text!templates/revenue/incomeData.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="incomeTrendCode">\r			<div class="title" role="title">\r				<strong class="l"><%=GameCommon.incomeData%></strong>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a data-tab="chargeValue" class="tab hover"><%=Revenue.IncomeData.incomeMoney%></a>\r	                <a data-tab="chargeTimes" class="tab"><%=Revenue.IncomeData.rechargeableTimes%></a>\r	                <a data-tab="chargeNums" class="tab"><%=Revenue.IncomeData.rechargeablePeopleNumber%></a>\r	                <div class="info l">\r	                	SUM：<font id="chargeSum"></font>\r	                </div>\r				</div>\r				<div class="picbox_chart_table" role="remarkBottom">\r					<div id="incomeTrendCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="incomeTrendCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r\r	</div>\r\r	<div class="boxmax">\r		<div id="chargeLevelCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.IncomeData.payLevel%></strong>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a data-tab="chargeLevelValue" class="tab hover"><%=Revenue.IncomeData.incomeMoney%></a>\r                	<a data-tab="chargeLevelNum" class="tab"><%=Revenue.IncomeData.rechargeablePersonTime%></a>\r				</div>\r				<div role="picbox_chart_table">\r					<div id="chargeLevelCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="chargeLevelCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="incomeLocationCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.regionIncome%></strong>\r					<div role="titlebar" class="buttonDiv l">\r		            	<a data-tab="globalLocation" id="globalLocation" class="but l butL hover"><%=GameCommon.globalArea%></a>\r		            	<a data-tab="chinaLocation" id="chinaLocation" class="but l butR"><%=GameCommon.chinaArea%></a>\r		            </div>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="incomeLocationCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="incomeLocationCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="incomePartnerCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.channelIncome%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="incomePartnerCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="incomePartnerCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="incomeSexCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.sexIncome%></strong>\r				</div>\r	            <div class="textbox">\r					<div role="picbox_chart_table">\r						<div class="minpicbox" id="incomeSexCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="incomeSexCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r	                <div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r            	</div>\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="incomeAgeCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.ageIncome%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="incomeAgeCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="incomeAgeCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/revenue/IncomeDataView",["backbone","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","utils/CurrencyUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/revenue/incomeData.html","text!templates/public/people.html","models/revenue/IncomeData","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c,h,p){var d=Backbone.View.extend({el:"#container",events:{'click div[role="titlebar"]>a':"renderIncomeLocation"},initialize:function(){$("#container").html(_.template(f,p)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.common=p.GameCommon,this.incomeData=p.Revenue.IncomeData,this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.render()},render:function(){return this.renderIncomeTrend(),this.renderChargeLevel(),this.renderIncomeByLocation(),this.renderIncomeByPartner(),this.renderIncomeBySex(),this.renderIncomeByAge(),this},renderIncomeTrend:function(){var e=this,i=$("#incomeTrendCode").tabs(function(u){var a,f,l="";switch(u){case"chargeValue":a="incomeNumList",f=e.incomeData.incomeMoney,l="#"+e.ctUnit;break;case"chargeTimes":a="chargeTimesList",f=e.incomeData.rechargeableTimes,l=p.GameCommon.times;break;case"chargeNums":a="chargePlayerNumList",f=e.incomeData.rechargeablePeopleNumber}c[a]({data:Params,success:function(e){var c=_.pluck(e,"item"),e=_.pluck(e,"value"),h=[{name:f,data:e}],d=null,v=null,m=null;l.indexOf("#")!=-1?(h=[{name:f,data:e}],m=[p.GameCommon.date,f+"("+o.getUnitByItem(o.getMoneyItem())+")"],v=[p.GameCommon.date,f+"("+s.getCurrencySymbol(Params.displayCurrency)+")"],$("#chargeSum").html("<em>"+l.substring(1)+n.formatDigit(_.sumForMoney(e))+"</em>"),d=_.zip(c,e)):(a=="chargePlayerNumList"?m=[p.GameCommon.date,f+"("+o.getUnitByItem(o.getAccountNumItem())+")"]:m=[p.GameCommon.date,f+"("+o.getUnitByItem(o.getTimesItem())+")"],d=_.zip(c,e),$("#chargeSum").html("<em>"+n.formatDigit(_.sum(e))+l+"</em>")),u=="chargeValue"?t.chart({id:"incomeTrendCode-chart",x:c,series:h,yLeftUnit:o.getMoneyItem(),unitItem:[o.getMoneyItem()],xType:"date"}):u=="chargeTimes"?t.chart({id:"incomeTrendCode-chart",x:c,series:h,yLeftUnit:o.getTimesItem(),unitItem:[o.getTimesItem()],xType:"date"}):t.chart({id:"incomeTrendCode-chart",x:c,series:h,xType:"date",unitItem:[o.getAccountNumItem()]}),r.drawTable({head:m,body:d,$el:$("#incomeTrendCode-table"),headType:"date"}),u=="chargeValue"?i.head=v:i.head=m,i.body=d}})})},renderChargeLevel:function(){var e=_.clone(Params),n=this,i=$("#chargeLevelCode").tabs(function(u){var a,f,l="";switch(u){case"chargeLevelValue":a="levelIncomeNumDistribution",f=n.incomeData.incomeMoney,l="#"+n.ctUnit;break;case"chargeLevelNum":a="levelChargePlayerNumDistribution",f=n.incomeData.rechargeablePersonTime,l=p.GameCommon.times}c[a]({data:e,success:function(e){var n=_.pluck(e,"item"),e=_.pluck(e,"value"),u=[{name:f,data:e}];l.indexOf("#")!=-1?(u=[{name:f,data:e}],t.chart({id:"chargeLevelCode-chart",x:n,type:"column",series:u,yLeftUnit:o.getMoneyItem(),unitItem:[o.getMoneyItem()]})):t.chart({id:"chargeLevelCode-chart",x:n,type:"column",series:u,yLeftUnit:o.getTimesItem(),unitItem:[o.getTimesItem()]});var a=null,c=null,h=null;l.indexOf("#")!=-1?(h=[p.GameCommon.grade,f+"("+o.getUnitByItem(o.getMoneyItem())+")"],c=[p.GameCommon.grade,f+"("+s.getCurrencySymbol(Params.displayCurrency)+")"],a=_.zip(n,e)):(h=[p.GameCommon.grade,f+"("+o.getUnitByItem(o.getTimesItem())+")"],a=_.zip(n,e)),r.drawTable({head:h,body:a,$el:$("#chargeLevelCode-table")}),l.indexOf("#")!=-1?i.head=c:i.head=h,i.body=a}})})},renderIncomeLocation:function(e){var t=$(e.target),n=t.attr("id");t.parent().find("a").removeClass("hover"),t.addClass("hover");var r=null;n=="globalLocation"?r="globalLocationIncomeDistribution":n=="chinaLocation"&&(r="locationIncomeDistribution"),this.request(r,this.common.region,"incomeLocationCode",!0)},renderIncomeByLocation:function(){this.request("globalLocationIncomeDistribution",this.common.region,"incomeLocationCode",!0)},renderIncomeByPartner:function(){this.request("partnerIncomeDistribution",this.common.channel,"incomePartnerCode",!0)},renderIncomeBySex:function(){var e=this,t=$("#incomeSexCode").tabs(function(){c.sexIncomeDistribution({data:Params,success:function(n){$("#incomeSexCode-chart").html(l),e.drawSex(n),t.head=[p.GameCommon.sex,p.GameCommon.percentage],t.body=_.zip([p.GameCommon.male,p.GameCommon.female],_.percent(_.pluck(n,"value"),3,1))}})})},renderIncomeByAge:function(){this.request("ageGroupIncomeDistribution",this.common.age,"incomeAgeCode")},request:function(e,n,i,u){var a=this,f=$("#"+i).tabs(function(l){c[e]({data:Params,success:function(e){var l=_.pluck(e,"item"),c=_.pluck(e,"value");series=[{name:a.common.income,data:c}];var h=null;i!="Esbox-location"&&i!="Esbox-partner"&&(h=_.percent(c,3,1)),t.chartBar({id:i+"-chart",x:{left:l,right:h},series:series,pagination:u,unitItem:[o.getMoneyItem()]});var p=_.zip(l,c,h),d=[n,a.common.income+"("+o.getUnitByItem(o.getMoneyItem())+")",a.common.percentage],v=[n,a.common.income+"("+s.getCurrencySymbol(Params.displayCurrency)+")",a.common.percentage];r.drawTable({head:d,body:p,$el:$("#"+i+"-table")}),f.head=v,f.body=p}})})},drawSex:function(e){var t=0,n=10,s=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,s=10-t,o=10-s);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(s))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var c=_.zip([this.common.male,this.common.female],f),h=[this.common.sex,this.common.percentage];r.drawTable({head:h,body:c,$el:$("#incomeSexCode-table")})}});return d}),define("text!templates/revenue/PayPermeate.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="payRateCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.PayPermeate.payRate%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="dayPayRate" class="tab hover"><%=GameCommon.dailyPayRate%></a>\r	                <a data-tab="weekPayRate" class="tab"><%=Revenue.PayPermeate.weeklyPayRate%></a>\r	                <a data-tab="monthPayRate" class="tab"><%=Revenue.PayPermeate.monthlyPayRate%></a>\r					<div class="info l">\r	                	AVG：<font id="payRateCode-avg"></font>\r	                </div>\r				</div>\r				<div class="picbox_chart_table" role="remarkBottom">\r					<div id="payRateCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="payRateCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r\r	</div>\r\r	<div class="boxmax">\r		<div id="ARPUCode">\r			<div class="title" role="title">\r				<strong class="l">ARPU</strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="dayARPU" class="tab hover">ARPU(<%=GameCommon.day%>)</a>\r	                <a data-tab="monthARPU" class="tab">ARPU(<%=GameCommon.month%>)</a>\r	                <a data-tab="dayARPPU" class="tab">ARPPU(<%=GameCommon.day%>)</a>\r	                <a data-tab="monthARPPU" class="tab">ARPPU(<%=GameCommon.month%>)</a>\r					<div class="info l">\r	                	AVG：<font id="ARPUCode-avg"></font>\r	                </div>\r				</div>\r				<div class="picbox_chart_table" role="remarkBottom">\r					<div id="ARPUCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="ARPUCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r\r	</div>\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="locationCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.regionPayPermeate%></strong>\r					<div role="titlebar" class="buttonDiv l">\r		            	<a data-tab="globalLocation" id="globalLocation" class="but l butL hover"><%=GameCommon.globalArea%></a>\r		            	<a data-tab="chinaLocation" id="chinaLocation" class="but l butR"><%=GameCommon.chinaArea%></a>\r		            </div>\r				</div>\r				<div class="textbox" id="Esbox-location">\r					<div class="box_top" role="tabbar">\r						<a data-tab="locationRate" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="locationARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="locationARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r	                		AVG：<font id="locationCode-avg"></font>\r	                	</div>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="locationCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="locationCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="partnerCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.channelPayPermeate%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a data-tab="partnerRate" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="partnerARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="partnerARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r	                		AVG：<font id="partnerCode-avg"></font>\r	                	</div>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="partnerCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="partnerCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="sexGroupCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.sexPayPermeate%></strong>\r				</div>\r	            <div class="textbox">\r					<div class="box_top" role="tabbar" id="sexTab">\r						<a data-tab="fetchDailyRateOfPay" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="fetchDailyARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="fetchDailyARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r		                	AVG：<font id="sexGroupCode-avg"></font>\r		                </div>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="sexGroupCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="sexGroupCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="ageGroupCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.agePayPermeate%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a data-tab="ageGroupRate" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="ageGroupARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="ageGroupARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r		                	AVG：<font id="ageGroupCode-avg"></font>\r		                </div>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="ageGroupCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="ageGroupCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/revenue/PayPermeateView",["backbone","utils/HighchartUtil","utils/dataTableUtil","utils/RegexUtil","utils/CurrencyUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/revenue/PayPermeate.html","models/revenue/PayPermeate","text!templates/public/loading.html","text!templates/public/people.html","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c,h,p,d){var v=Backbone.View.extend({el:"#container",events:{'click  div[role="titlebar"]>a':"renderPayPermeateLocation","click #sexTab > a":"changeSexTab"},initialize:function(){$("#container").html(_.template(f,d)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.render()},render:function(){return this.payRateRender(),this.ARPURender(),this.locationPayPermeate(),this.partnerPayPermeate(),this.sexPayPermeate("fetchDailyRateOfPay"),this.ageGroupPayPermeate(),this},payRateRender:function(){var e=_.clone(Params),i=$("#payRateCode").tabs(function(s){var u,a;switch(s){case"dayPayRate":u=d.Revenue.PayPermeate.dayPayRate,a="dayPayRateList";break;case"weekPayRate":u=d.Revenue.PayPermeate.weeklyPayRate,a="weekPayRateList";break;case"monthPayRate":u=d.Revenue.PayPermeate.monthlyPayRate,a="monthPayRateList"}e.item=s,l[a]({$entity:e,$callback:function(e,s,a){var f=_.pluck(a,"item"),a=_.pluck(a,"value"),l=[{name:u,data:a}];$("#payRateCode-avg").html("<em>"+r.formatDigit(_.avg(a))+"%</em>"),t.chart({id:"payRateCode-chart",x:f,series:l,yPercent:!0,xType:"date",yLeftUnit:o.getPercentItem(),unitItem:[o.getPercentItem()]});var c=_.zip(f,a),h=[d.GameCommon.date,u+"("+o.getUnitByItem(o.getPercentItem())+")"];n.drawTable({head:h,body:c,$el:$("#payRateCode-table"),headType:"date"}),i.head=h,i.body=c}})})},ARPURender:function(){var e=this,i=_.clone(Params),u=$("#ARPUCode").tabs(function(a){var f,c;switch(a){case"dayARPU":f="ARPU("+d.GameCommon.day+")",c="dayARPUList";break;case"monthARPU":f="ARPU("+d.GameCommon.month+")",c="monthARPUList";break;case"dayARPPU":f="ARPPU("+d.GameCommon.day+")",c="dayARPPUList";break;case"monthARPPU":f="ARPPU("+d.GameCommon.month+")",c="monthARPPUList"}i.item=a,l[c]({$entity:i,$callback:function(i,a,l){var c=_.pluck(l,"item"),l=_.pluck(l,"value");series=[{name:f,data:l}],$("#ARPUCode-avg").html("<em>"+e.ctUnit+r.formatDigit(_.avgForMoney(l))+"</em>"),t.chart({id:"ARPUCode-chart",x:c,series:series,yLeftUnit:o.getMoneyItem(),unitItem:[o.getMoneyItem()],xType:"date"});var h=_.zip(c,l),p=[d.GameCommon.date,o.getUnitByItem(o.getMoneyItem())+"   "+f];n.drawTable({head:p,body:h,$el:$("#ARPUCode-table"),headType:"date"}),u.head=[d.GameCommon.date,s.getCurrencySymbol(Params.displayCurrency)+" "+f],u.body=h}})})},renderPayPermeateLocation:function(e){var t=$(e.target),n=t.attr("id");t.parent().find("a").removeClass("hover"),t.addClass("hover");var r=null;n=="globalLocation"?r=p.GLOBALLOCATION:n=="chinaLocation"&&(r=p.LOCATION),this.locationPayPermeate(r)},locationPayPermeate:function(e){var i=this,u=_.clone(Params);e?u.groupBy=e:u.groupBy=p.GLOBALLOCATION,e=="location"&&(u.countryType=p.CHINAID);var a=$("#locationCode").tabs(function(e){var f,c,h=!1,p="";switch(e){case"locationRate":f=d.GameCommon.avgDailyPayRate,c="fetchDailyRateOfPay",h=!0,p="%";break;case"locationARPU":f=d.GameCommon.avgDaily+"ARPU",c="fetchDailyARPU",h=!1,p="#"+i.ctUnit;break;case"locationARPPU":f=d.GameCommon.avgDaily+"ARPPU",c="fetchDailyARPPU",h=!1,p="#"+i.ctUnit}l[c]({$entity:u,$callback:function(i,u,l){var c=_.pluck(l,"item"),l=_.pluck(l,"value"),h=[{name:f,data:l}];p.indexOf("#")!=-1?(h=[{name:f,data:l}],$("#locationCode-avg").html("<em>"+p.substring(1)+r.formatDigit(_.avgForMoney(l))+"</em>")):$("#locationCode-avg").html("<em>"+r.formatDigit(_.avg(l))+p+"</em>"),e=="locationRate"?t.chartBar({id:"locationCode-chart",x:{left:c},series:h,yLeftUnit:o.getPercentItem(),unitItem:[o.getPercentItem()],pagination:!0}):t.chartBar({id:"locationCode-chart",x:{left:c},series:h,unitItem:[o.getMoneyItem()],pagination:!0});var v=null,m=null,g=null;p.indexOf("#")!=-1?(m=[d.GameCommon.region,f+"("+o.getUnitByItem(o.getMoneyItem())+")"],g=[d.GameCommon.region,f+"("+s.getCurrencySymbol(Params.displayCurrency)+")"],v=_.zip(c,l)):(m=[d.GameCommon.region,f+"("+o.getUnitByItem(o.getPercentItem())+")"],g=[d.GameCommon.region,f],v=_.zip(c,_.map(l,function(e){return e}))),n.drawTable({head:m,body:v,$el:$("#locationCode-table")}),a.head=g,a.body=v}})})},partnerPayPermeate:function(){var e=this,i=_.clone(Params);i.groupBy=p.PARTNER;var u=$("#partnerCode").tabs(function(a){var f,c,h=!1,p="";switch(a){case"partnerRate":f=d.GameCommon.avgDailyPayRate,c="fetchDailyRateOfPay",p="%",h=!0;break;case"partnerARPU":f=d.GameCommon.avgDaily+"ARPU",c="fetchDailyARPU",p="#"+e.ctUnit,h=!1;break;case"partnerARPPU":f=d.GameCommon.avgDaily+"ARPPU",c="fetchDailyARPPU",p="#"+e.ctUnit,h=!1}l[c]({$entity:i,$callback:function(e,i,l){var c=_.pluck(l,"item"),l=_.pluck(l,"value");p.indexOf("#")!=-1?(h=[{name:f,data:l}],$("#partnerCode-avg").html("<em>"+p.substring(1)+r.formatDigit(_.avgForMoney(l))+"</em>")):$("#partnerCode-avg").html("<em>"+r.formatDigit(_.avg(l))+p+"</em>");var h=[{name:f,data:l}];a=="partnerRate"?t.chartBar({id:"partnerCode-chart",x:{left:c},series:h,yLeftUnit:o.getPercentItem(),unitItem:[o.getPercentItem()],pagination:!0}):t.chartBar({id:"partnerCode-chart",x:{left:c},series:h,unitItem:[o.getMoneyItem()],pagination:!0});var v=null,m=null,g=null;p.indexOf("#")!=-1?(m=[d.GameCommon.channel,f+"("+o.getUnitByItem(o.getMoneyItem())+")"],g=[d.GameCommon.channel,f+"("+s.getCurrencySymbol(Params.displayCurrency)+")"],v=_.zip(c,l)):(m=[d.GameCommon.channel,f+"("+o.getUnitByItem(o.getPercentItem())+")"],g=[d.GameCommon.channel,f],v=_.zip(c,_.map(l,function(e){return e}))),n.drawTable({head:m,body:v,$el:$("#partnerCode-table")}),u.head=g,u.body=v}})})},sexPayPermeate:function(e){var t=_.clone(Params);t.groupBy=p.SEX;var n=this,i=this,s=$("#sexGroupCode").tabs(function(o){l[e]({$entity:t,$callback:function(e,t,u){$("#sexGroupCode-chart").html(h),o=="fetchDailyRateOfPay"?$("#sexGroupCode-avg").html("<em>"+r.formatDigit(_.avg(u))+"%</em>"):$("#sexGroupCode-avg").html("<em>"+i.ctUnit+r.formatDigit(_.avgForMoney(u))+"</em>"),n.drawSex(u),s.head=[d.GameCommon.sex,d.GameCommon.percentage],s.body=_.zip([d.GameCommon.male,d.GameCommon.female],_.percent(_.pluck(u,"value"),3,1))}})})},ageGroupPayPermeate:function(){var e=this,i=_.clone(Params);i.groupBy=p.AGE;var u=$("#ageGroupCode").tabs(function(a){var f,c,h=!1,p="";switch(a){case"ageGroupRate":f=d.GameCommon.avgDailyPayRate,c="fetchDailyRateOfPay",h=!0,p="%";break;case"ageGroupARPU":f=d.GameCommon.avgDaily+"ARPU",c="fetchDailyARPU",p="#"+e.ctUnit,h=!1;break;case"ageGroupARPPU":f=d.GameCommon.avgDaily+"ARPPU",c="fetchDailyARPPU",p="#"+e.ctUnit,h=!1}l[c]({$entity:i,$callback:function(e,i,l){var c=_.pluck(l,"item"),l=_.pluck(l,"value"),h=[{name:f,data:l}];p.indexOf("#")!=-1?(h=[{name:f,data:l}],$("#ageGroupCode-avg").html("<em>"+p.substring(1)+r.formatDigit(_.avgForMoney(l))+"</em>")):$("#ageGroupCode-avg").html("<em>"+r.formatDigit(_.avg(l))+p+"</em>"),a=="ageGroupRate"?t.chartBar({id:"ageGroupCode-chart",x:{left:c},series:h,yLeftUnit:o.getPercentItem(),unitItem:[o.getPercentItem()]}):t.chartBar({id:"ageGroupCode-chart",x:{left:c},series:h,unitItem:[o.getMoneyItem()]});var v=null,m=null,g=null;p.indexOf("#")!=-1?(m=[d.GameCommon.age,f+"("+o.getUnitByItem(o.getMoneyItem())+")"],g=[d.GameCommon.age,f+"("+s.getCurrencySymbol(Params.displayCurrency)+")"],v=_.zip(c,l)):(m=[d.GameCommon.age,f+"("+o.getUnitByItem(o.getPercentItem())+")"],g=[d.GameCommon.age,f],v=_.zip(c,_.map(l,function(e){return e}))),n.drawTable({head:m,body:v,$el:$("#ageGroupCode-table")}),u.head=g,u.body=v}})})},drawSex:function(e){var t=0,r=10,s=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),r=10-t,s=10-t,o=10-s);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(r))u.append('<img src="images/malehiddle.png">');for(i in _.range(s))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var c=_.zip([d.GameCommon.male,d.GameCommon.female],f),h=[d.GameCommon.sex,d.GameCommon.percentage];n.drawTable({head:h,body:c,$el:$("#sexGroupCode-table")})},changeSexTab:function(e){$("#sexTab > a").removeClass("hover"),$(e.currentTarget).addClass("tab hover");var t=$(e.currentTarget).attr("data-tab");this.sexPayPermeate(t)}});return v}),define("models/revenue/NewPlayerValue",["models/BaseModel"],function(e){var t=[{name:"fetchXdaysAvgContributionList",url:"/v1/newPlayerValue/fetchXdaysAvgContributionList"}];return e.init(t)}),define("text!templates/revenue/newPlayerValue.html",[],function(){return'<div class="content r">\n	<div class="boxmax">\n		<div class="maintop">\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\n			<div class="clear"></div>\n			<div id="showSelectedPartners" class="Editor hide Filter" >\n				<div id="selectVersion"></div>\n			</div>\n		</div>\n		<div id="revenueNewPlayerValueCode">\n			<div class="title"  role="title">\n				<strong class="l"><%=Revenue.NewPlayerValue.newPlayerRevenueContribution%></strong>\n			</div>\n			<div class="textbox">\n				<div class="box_top" role="tabbar">\n					<a class="tab hover" data-tab="day07"><%=Revenue.NewPlayerValue.days7AvgContribution%></a>\n					<a class="tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14AvgContribution%></a>\n					<a class="tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30AvgContribution%></a>\n					<a class="tab" data-tab="day60"><%=Revenue.NewPlayerValue.days60AvgContribution%></a>\n					<a class="tab" data-tab="day90"><%=Revenue.NewPlayerValue.days90AvgContribution%></a>\n					<div class="info l">\r	                	AVG | MD：<font id="chargeAvg"></font> | <font id="chargeMd"></font>\n	                </div>\n				</div>\n				<div class="picbox_chart_table" role="remarkBottom">\n					<div id="revenueNewPlayerValueCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\n					<div id="revenueNewPlayerValueCode-table" role="table" class="picbox_chart_table_div picbox"></div>\n				</div>\n				<div class="after">\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\n	        	</div>\n			</div>\n		</div>\n	</div>\n	<ul class="Esbox">\n		<li class="contentbox l" >\n			<div id="revenueNewPlayerValueLocationCode">\n				<div class="title"  role="title">\n					<strong class="l"><%=Revenue.NewPlayerValue.locationNewPlayerValue%></strong>\n					<div role="titlebar" class="buttonDiv l">\n		            	<a data-tab="globalLocation" id="globalLocation" class="but l butL hover"><%=GameCommon.globalArea%></a>\n		            	<a data-tab="chinaLocation" id="chinaLocation" class="but l butR"><%=GameCommon.chinaArea%></a>\n		            </div>\n				</div>\n				<div class="textbox">\n					<div class="box_top" role="tabbar">\n						<a class="tab hover small-tab" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\n						<a class="tab small-tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\n						<a class="tab small-tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\n						<a class="tab small-tab" data-tab="day60"><%=Revenue.NewPlayerValue.days60Contribution%></a>\n						<a class="tab small-tab" data-tab="day90"><%=Revenue.NewPlayerValue.days90Contribution%></a>\n					</div>\n					<div role="picbox_chart_table">\n						<div id="revenueNewPlayerValueLocationCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\n						<div id="revenueNewPlayerValueLocationCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\n					</div>\n					<div class="after">\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        	</div>\n				</div>\n			</div>\n		</li>\n		<li class="contentbox r" >\n			<div id="revenueNewPlayerValuePartnerCode">\n				<div class="title"  role="title">\n					<strong class="l"><%=Revenue.NewPlayerValue.partnerNewPlayerValue%></strong>\n				</div>\n				<div class="textbox">\n					<div class="box_top" role="tabbar">\n						<a class="tab hover small-tab" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\n						<a class="tab small-tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\n						<a class="tab small-tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\n						<a class="tab small-tab" data-tab="day60"><%=Revenue.NewPlayerValue.days60Contribution%></a>\n						<a class="tab small-tab" data-tab="day90"><%=Revenue.NewPlayerValue.days90Contribution%></a>\n					</div>\n					<div role="picbox_chart_table">\n						<div id="revenueNewPlayerValuePartnerCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\n						<div id="revenueNewPlayerValuePartnerCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\n					</div>\n					<div class="after">\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        		<div id="pagination"></div>\n		        	</div>\n				</div>\n			</div>\n		</li>\n		<li class="contentbox l" >\n			<div id="revenueNewPlayerValueSexCode">\n				<div class="title"  role="title">\n					<strong class="l"><%=Revenue.NewPlayerValue.sexNewPlayerValue%></strong>\n				</div>\n	            <div class="textbox">\n	            	<div class="box_top" role="tabbar">\n						<a class="tab hover small-tab" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\n						<a class="tab small-tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\n						<a class="tab small-tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\n						<a class="tab small-tab" data-tab="day60"><%=Revenue.NewPlayerValue.days60Contribution%></a>\n						<a class="tab small-tab" data-tab="day90"><%=Revenue.NewPlayerValue.days90Contribution%></a>\n					</div>\n            		<div role="picbox_chart_table">\n            			<div class="minpicbox" id="revenueNewPlayerValueSexCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\n						<div id="revenueNewPlayerValueSexCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\n            		</div>\n	            	<div class="after">\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        	</div>\n            	</div>\n            </div>\n		</li>\n		<li class="contentbox r" >\n			<div id="revenueNewPlayerValueAgeCode">\n				<div class="title"  role="title">\n					<strong class="l"><%=Revenue.NewPlayerValue.ageNewPlayerValue%></strong>\n				</div>\n				<div class="textbox">\n					<div class="box_top" role="tabbar">\n						<a class="tab hover small-tab" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\n						<a class="tab small-tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\n						<a class="tab small-tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\n						<a class="tab small-tab" data-tab="day60"><%=Revenue.NewPlayerValue.days60Contribution%></a>\n						<a class="tab small-tab" data-tab="day90"><%=Revenue.NewPlayerValue.days90Contribution%></a>\n					</div>\n					<div role="picbox_chart_table">\n						<div id="revenueNewPlayerValueAgeCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\n						<div id="revenueNewPlayerValueAgeCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\n					</div>\n					<div class="after">\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        	</div>\n				</div>\n			</div>\n		</li>\n	</ul>\n</div>'}),define("views/revenue/NewPlayerValueView",["backbone","models/revenue/NewPlayerValue","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","utils/CurrencyUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","models/Constant","text!templates/revenue/newPlayerValue.html","text!templates/public/people.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c,h,p){var d=e.View.extend({el:"#container",events:{'click div[role="titlebar"]>a':"renderNewPlayerValueLocation"},initialize:function(){$("#container").html(_.template(c,p)),new a({el:"#datePicker"}),new f({el:"#selectChoose"}),this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.player={userType:l.NEW_PLAYER},this.render()},render:function(){return this.renderPlayerContribution(),this.renderLocation(),this.renderChannel(),this.renderGender(),this.renderAge(),this},renderPlayerContribution:function(){this.request("revenueNewPlayerValueCode",null)},renderNewPlayerValueLocation:function(e){var t=$(e.target),n=t.attr("id");t.parent().find("a").removeClass("hover"),t.addClass("hover");var r=null;n=="globalLocation"?r=l.GLOBALLOCATION:n=="chinaLocation"&&(r=l.LOCATION),this.request("revenueNewPlayerValueLocationCode",r,!0)},renderLocation:function(){this.request("revenueNewPlayerValueLocationCode",l.GLOBALLOCATION,!0)},renderChannel:function(){this.request("revenueNewPlayerValuePartnerCode","partner",!0)},renderGender:function(){this.request("revenueNewPlayerValueSexCode","sex")},renderAge:function(){this.request("revenueNewPlayerValueAgeCode","age",!0)},request:function(e,i,a){var f=this,c=_.clone(Params);c.player=this.player,c.groupBy=i,i=="location"&&(c.countryType=l.CHINAID);var d=$("#"+e).tabs(function(v){var m=null,g=null;v==="day07"?(c.daysNum=l.DAYS_07,m=p.Revenue.NewPlayerValue.days7AvgContribution):v==="day14"?(c.daysNum=l.DAYS_14,m=p.Revenue.NewPlayerValue.days14AvgContribution):v==="day30"?(c.daysNum=l.DAYS_30,m=p.Revenue.NewPlayerValue.days30AvgContribution):v==="day60"?(c.daysNum=l.DAYS_60,m=p.Revenue.NewPlayerValue.days60AvgContribution):v==="day90"&&(c.daysNum=l.DAYS_90,m=p.Revenue.NewPlayerValue.days90AvgContribution),i===l.LOCATION||i===l.GLOBALLOCATION?g=p.GameCommon.region:i==="partner"?g=p.GameCommon.channel:i==="sex"?g=p.GameCommon.sex:i==="age"&&(g=p.GameCommon.age);var y=null;e=="revenueNewPlayerValueCode"&&(y="date"),t.fetchXdaysAvgContributionList({data:c,success:function(t){if(i==="sex")$("#revenueNewPlayerValueSexCode-chart").html(h),f.drawSex(t.xdaysValue),d.head=[p.GameCommon.sex,p.GameCommon.percentage],d.body=_.zip([p.GameCommon.male,p.GameCommon.female],_.percent(_.pluck(t.xdaysValue,"value"),3,1));else{var l=_.pluck(t.xdaysValue,"item"),c=_.pluck(t.xdaysValue,"value"),v=[{name:m,data:c}],b=_.percent(c,3,1),w=null,E=null,S=null;i!=null?(w=_.zip(l,c,b),E=[g,m+"("+u.getUnitByItem(u.getMoneyItem())+")",p.GameCommon.percentage],S=[g,m+"("+o.getCurrencySymbol(Params.displayCurrency)+")",p.GameCommon.percentage],n.chartBar({id:e+"-chart",x:{left:l,right:b},series:v,pagination:a,xType:y,unitItem:[u.getMoneyItem()]})):($("#chargeAvg").html("<em>"+f.ctUnit+t.avgValue+"</em>"),$("#chargeMd").html("<em>"+f.ctUnit+r.formatDigit(_.median(c,2))+"</em>"),w=_.zip(l,c),E=[p.GameCommon.date,m+"("+u.getUnitByItem(u.getMoneyItem())+")"],S=[p.GameCommon.date,m+"("+o.getCurrencySymbol(Params.displayCurrency)+")"],n.chart({id:e+"-chart",x:l,series:v,pagination:a,yLeftUnit:u.getMoneyItem(),xType:y,unitItem:[u.getMoneyItem()]})),s.drawTable({head:E,body:w,$el:$("#"+e+"-table"),headType:y}),d.head=S,d.body=w}}})})},drawSex:function(e){var t=0,n=10,r=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,r=10-t,o=10-r);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(r))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var c=_.zip([p.GameCommon.male,p.GameCommon.female],f),h=[p.GameCommon.sex,p.GameCommon.percentage];s.drawTable({head:h,body:c,$el:$("#revenueNewPlayerValueSexCode-table")})}});return d}),define("text!templates/revenue/PayHabit.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop" style="margin-bottom:0px;">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r	</div>\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="chargeWayCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=Revenue.PayHabit.rechargeableType%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a class="hover tab" data-tab="incomeNum_charge" ><%=Revenue.IncomeData.incomeMoney%></a>\r						<a class="tab" data-tab="chargePlayerNum_charge" ><%=Revenue.IncomeData.rechargeablePersonTime%></a>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="chargeWayCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="chargeWayCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		\r		<li class="contentbox r" >\r			<div id="consumePackageCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayHabit.consumerPackingTypes%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a class="hover tab" data-tab="incomeNum_package" ><%=Revenue.IncomeData.incomeMoney%></a>\r						<a class="tab" data-tab="chargePlayerNum_package" ><%=Revenue.IncomeData.rechargeablePersonTime%></a>\r					</div>\r					<div role="picbox_chart_table">\r						<div id="consumePackageCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="consumePackageCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<div class="clear"></div>\r	</ul>\r\r	<div class="boxmax">\r		<div id="revenuePlayFrequencyCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.PayHabit.rechargeableFrequencyLimit%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a class="hover tab" data-tab="weekChargeTimes" ><%=Revenue.PayHabit.weeklyRechargeableTimes%></a>\r					<a class="tab" data-tab="monthChargeTimes" ><%=Revenue.PayHabit.monthlyRechargeableTimes%></a>\r					<a class="tab" data-tab="weekChargeNum" ><%=Revenue.PayHabit.weeklyRechargeableLimit%></a>\r					<a class="tab" data-tab="monthChargeNum" ><%=Revenue.PayHabit.monthlyRechargeableLimit%></a>\r				</div>\r				<div role="picbox_chart_table">\r					<div id="revenuePlayFrequencyCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="revenuePlayFrequencyCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r	\r	<div class="boxmax">\r		<div id="chargeIntervalCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.PayHabit.rechargeableInterval%></strong>\r			</div>\r			<div class="textbox">\r				<div role="picbox_chart_table">\r					<div id="chargeIntervalCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="chargeIntervalCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r</div>\r'}),define("models/revenue/PayHabit",["models/BaseModel"],function(e){var t=[{name:"chargeIntervalDistribution",url:"/v1/payHabit/chargeIntervalDistribution"},{name:"chargeWayDistribution",url:"/v1/payHabit/chargeWayDistribution"},{name:"consumePackgeTypeDistribution",url:"/v1/payHabit/consumePackgeTypeDistribution"},{name:"chargeFrequencyAndNumDistribution",url:"/v1/payHabit/chargeFrequencyAndNumDistribution"}];return e.init(t)}),define("views/revenue/PayHabitView",["backbone","utils/HighchartUtil","utils/dataTableUtil","utils/CurrencyUtil","utils/RegexUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/revenue/PayHabit.html","models/revenue/PayHabit","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=Backbone.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(a,c)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.render()},render:function(){return this.chargeWayRender(),this.consumePackageTypeRender(),this.chargeFrequencyAndNumRender(),this.chargeIntervalRender(),this},chargeWayRender:function(){var e=this,i=_.clone(Params),o=$("#chargeWayCode").tabs(function(u){var a,l;switch(u){case"incomeNum_charge":a=c.Revenue.IncomeData.incomeMoney,l="#"+e.ctUnit;break;case"chargePlayerNum_charge":a=c.Revenue.IncomeData.rechargeablePersonTime,l=c.GameCommon.times}i.item=u,f.chargeWayDistribution({$entity:i,$callback:function(e,i,f){var h=_.pluck(f,"item"),f=_.pluck(f,"value"),p=_.percent(f,3,1),d=[{name:a,data:f}];u=="incomeNum_charge"?t.chartBar({id:"chargeWayCode-chart",x:{left:h,right:p},series:d,pagination:!0,unitItem:[s.getMoneyItem()]}):t.chartBar({id:"chargeWayCode-chart",x:{left:h,right:p},series:d,pagination:!0,unitItem:[s.getTimesItem()]});var v=null,m=null,g=null;l.indexOf("#")!=-1?(m=[c.Revenue.PayHabit.rechargeableType,a+"("+s.getUnitByItem(s.getMoneyItem())+")",c.GameCommon.percentage],g=[c.Revenue.PayHabit.rechargeableType,a+"("+r.getCurrencySymbol(Params.displayCurrency)+")",c.GameCommon.percentage],v=_.zip(h,f,p)):(m=[c.Revenue.PayHabit.rechargeableType,a+"("+s.getUnitByItem(s.getTimesItem())+")",c.GameCommon.percentage],g=[c.Revenue.PayHabit.rechargeableType,a+"("+s.getUnitByItem(s.getTimesItem())+")",c.GameCommon.percentage],v=_.zip(h,f,p)),n.drawTable({head:m,body:v,$el:$("#chargeWayCode-table")}),o.head=g,o.body=v}})})},consumePackageTypeRender:function(){var e=this,i=$("#consumePackageCode").tabs(function(o){var u,a;switch(o){case"incomeNum_package":u=c.Revenue.IncomeData.incomeMoney,a="#"+e.ctUnit;break;case"chargePlayerNum_package":u=c.Revenue.IncomeData.rechargeablePersonTime,a=c.GameCommon.times}var l=_.clone(Params);l.item=o,f.consumePackgeTypeDistribution({$entity:l,$callback:function(e,f,l){var h=_.pluck(l,"item"),l=_.pluck(l,"value"),p=_.percent(l,3,1),d=[{name:u,data:l}];o=="incomeNum_package"?t.chartBar({id:"consumePackageCode-chart",x:{left:h,right:p},series:d,pagination:!0,unitItem:[s.getMoneyItem()]}):t.chartBar({id:"consumePackageCode-chart",x:{left:h,right:p},series:d,pagination:!0,unitItem:[s.getTimesItem()]});var v=null,m=null,g=null;a.indexOf("#")!=-1?(m=[c.Revenue.PayHabit.consumerPackingTypes,u+"("+s.getUnitByItem(s.getMoneyItem())+")",c.GameCommon.percentage],g=[c.Revenue.PayHabit.consumerPackingTypes,u+"("+r.getCurrencySymbol(Params.displayCurrency)+")",c.GameCommon.percentage],v=_.zip(h,l,p)):(m=[c.Revenue.PayHabit.consumerPackingTypes,u+"("+s.getUnitByItem(s.getTimesItem())+")",c.GameCommon.percentage],g=[c.Revenue.PayHabit.consumerPackingTypes,u+"("+s.getUnitByItem(s.getTimesItem())+")",c.GameCommon.percentage],v=_.zip(h,l,p)),n.drawTable({head:m,body:v,$el:$("#consumePackageCode-table")}),i.head=g,i.body=v}})})},chargeFrequencyAndNumRender:function(){var e=this,r=_.clone(Params),i=$("#revenuePlayFrequencyCode").tabs(function(e){var o;switch(e){case"weekChargeTimes":o=c.Revenue.PayHabit.weekRechargeableTimes;break;case"monthChargeTimes":o=c.Revenue.PayHabit.monthRechargeableTimes;break;case"weekChargeNum":o=c.Revenue.PayHabit.weekRechargeableLimit;break;case"monthChargeNum":o=c.Revenue.PayHabit.monthRechargeableLimit}r.item=e,f.chargeFrequencyAndNumDistribution({$entity:r,$callback:function(r,u,a){var f=_.pluck(a,"item"),a=_.pluck(a,"value"),l=_.percent(a,3,1),h=f,p=[{name:c.Revenue.IncomeData.payPeopleCount,data:a}],d=_.zip(f,a,l),v=[o,c.Revenue.IncomeData.payPeopleCount+"("+s.getUnitByItem(s.getAccountNumItem())+")",c.GameCommon.percentage];n.drawTable({head:v,body:d,$el:$("#revenuePlayFrequencyCode-table")}),t.chartBar({id:"revenuePlayFrequencyCode-chart",x:{left:f,right:l},series:p,unitItem:[s.getAccountNumItem()]}),e=="weekChargeNum"||e=="monthChargeNum"?i.body=_.zip(f,a,l):i.body=d,i.head=v}})})},chargeIntervalRender:function(){var e=_.clone(Params),r=$("#chargeIntervalCode").tabs(function(){f.chargeIntervalDistribution({$entity:e,$callback:function(e,i,o){var u=_.pluck(o,"item"),o=_.pluck(o,"value"),a=_.percent(o,3,1),f=[{name:c.Revenue.IncomeData.payPeopleCount,data:o}],l=_.zip(u,o,a),h=[c.Revenue.PayHabit.rechargeableInterval,c.Revenue.IncomeData.payPeopleCount+"("+s.getUnitByItem(s.getAccountNumItem())+")",c.GameCommon.percentage];n.drawTable({head:h,body:l,$el:$("#chargeIntervalCode-table")}),t.chartBar({id:"chargeIntervalCode-chart",x:{left:u,right:a},series:f,unitItem:[s.getAccountNumItem()]}),r.head=h,r.body=l}})})}});return h}),define("models/partner/Partner",["models/BaseModel"],function(e){var t=[{name:"fetchPartners",url:"/v1/partner/fetchPartners"},{name:"fetchPartnerAmount",url:"/v1/partner/partnerAmount"},{name:"fetchPartnerQuality",url:"/v1/partner/partnerQuality"},{name:"fetchPartnerRetention",url:"/v1/partner/partnerRetention"},{name:"fetchPartnerIncome",url:"/v1/partner/partnerIncome"},{name:"fetchInstallList",url:"/v1/newPlayer/installList"},{name:"fetchNewPlayerList",url:"/v1/newPlayer/newPlayerList"},{name:"fetchDauList",url:"/v1/activity/dauList"},{name:"incomeNumList",url:"/v1/incomeData/incomeNumList"},{name:"chargePlayerNumList",url:"/v1/incomeData/chargePlayerNumList"},{name:"fetchDailyARPU",url:"/v1/payPermeate/fetchDailyARPU"},{name:"fetchAllAndAutoPlayers",url:"/v1/partner/allAndAuto"},{name:"fetchPartnerRate",url:"/v1/partner/partnerRate"},{name:"validPartnerName",url:"/v1/partner/validPartnerName"},{name:"createShortUrlPartner",url:"/v1/partner/createShortUrlPartner"},{name:"downloadUrlCommit",url:"/v1/partner/downloadUrlCommit"},{name:"fetchProductUrl",url:"/v1/partner/fetchProductUrl"},{name:"editProductUrl",url:"/v1/partner/editProductUrl"},{name:"fetchProductUrlList",url:"/v1/partner/fetchProductUrlList"},{name:"fetchPartnerDetailRetention",url:"/v1/retention/retentionDetailList"}];return e.init(t)}),define("text!templates/partnerExtention/partnerData.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r            <div class="to-packTool">\r                <%=GameCommon.tdToolsRemark%>\r                <a href="http://doc.talkingdata.com/posts/194" target="_blank">\r                    &gt;&gt; <%=GameCommon.viewTdTools%>\r                </a>\r            </div>\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		\r		<div id="partnerExtentionChannelDataamount" role="_dynamicId">\r			<div class="titlemax" role="title">\r				<strong class="l"><%=GameCommon.channelData%></strong>\r	            <div id="indexTab" class="buttonDiv l">\r	            	<a data="amount" class="but l butL hover"><%=PartnerExtention.PartnerData.quantityIndicator%></a>\r	            	<a data="quality" class="but l"><%=PartnerExtention.PartnerData.qualityIndicator%></a>\r	            	<a data="income" class="but l "><%=PartnerExtention.PartnerData.incomeIndicator%></a>\r	            	<a data="retention" class="but l butR"><%=PartnerExtention.PartnerData.retentionIndicator%></a>\r	            </div>\r			</div>\r		</div>\r		<div class="tablebox">\r			<table cellpadding="0" id="partnerTable" cellspacing="0" border="0" width="100%" class="table_style_ope">\r                <thead id="partnerTableHead">\r                	<tr data="amount">\r                    	<th class="hover-tooltip" data-th="ppchannelName"  class="left aroww" width="15%"><p><span><%=PartnerExtention.PartnerData.channelName%></p></span></th>\r                        <th class="hover-tooltip" data-th="pptrackWay"  width="15%"><p><%=PartnerExtention.PartnerData.trackWay%></p></th>\r                        <th class="hover-tooltip" data-th="ppequipmentActive"  width="15%"><p><%=GameCommon.equipmentActive%></p></th>\r                        <th class="hover-tooltip" data-th="ppnewIncreasedPlayerRegister"  width="15%"><p><%=PartnerExtention.PartnerManagement.newIncreasedPlayerRegister%></p></th>\r                        <th class="hover-tooltip" data-th="ppregisterConversionRate"  width="15%"><p><%=PartnerExtention.PartnerData.registerConversionRate%></p></th>\r                        <th class="hover-tooltip" data-th="ppchannelProportion"  width="15%"><p><%=PartnerExtention.PartnerData.channelProportion%></p></th>\r                        <th class="hover-tooltip" data-th="ppdetail"  width="10%"><p><%=GameCommon.detail%></p></th>\r                    </tr>\r                    <tr data="quality" class="hide">\r                        <th class="hover-tooltip" data-th="ppchannelName"  class="left aroww" width="15%"><p><span><%=PartnerExtention.PartnerData.channelName%></p></span></th>\r                        <th class="hover-tooltip" data-th="pptrackWay"  width="15%"><p><%=PartnerExtention.PartnerData.trackWay%></p></th>\r                        <th class="hover-tooltip" data-th="ppavgDayActive"  width="15%"><p><%=PartnerExtention.PartnerData.avgDayActive%></p></th>\r                        <th class="hover-tooltip" data-th="pponeDayPlayersProportion"  width="15%"><p><%=PartnerExtention.PartnerData.oneDayPlayersProportion%></p></th>\r                        <!--<th class="hover-tooltip" data-th="ppavgMorrowRetention"  width="15%"><p><%=PartnerExtention.PartnerData.avgMorrowRetention%></p></th>-->\r                        <th class="hover-tooltip" data-th="ppfirstWeekPayRatio"  width="15%"><p><%=PartnerExtention.PartnerData.firstWeekPayRatio%></p></th>\r                        <th class="hover-tooltip" data-th="ppdetail"  width="10%"><p><%=GameCommon.detail%></p></th>\r                    </tr>\r                    <tr data="income" class="hide">\r                        <th class="hover-tooltip" data-th="ppchannelName"  width="12.5%" class="left aroww"><p><span><%=PartnerExtention.PartnerData.channelName%></p></span></th>\r                        <th class="hover-tooltip" data-th="pptrackWay"  width="12.5%"><p><%=PartnerExtention.PartnerData.trackWay%></p></th>\r                        <th class="hover-tooltip" data-th="ppincome"  width="12.5%"><p><%= GameCommon.income%></p></th>\r                        <th class="hover-tooltip" data-th="ppavgDailyPayPeopleCount"  width="12.5%"><p><%=PartnerExtention.PartnerData.avgDailyPayPeopleCount%></p></th>\r                        <th class="hover-tooltip" data-th="ppavgDailyPayRate"  width="12.5%"><p><%=GameCommon.avgDailyPayRate%></p></th>\r                        <th class="hover-tooltip" data-th="ppavgDailyarpu"  width="12.5%"><p><%=GameCommon.avgDaily%>ARPU</p></th>\r                        <th class="hover-tooltip" data-th="ppavgDailyarppu"  width="12.5%"><p><%=GameCommon.avgDaily%>ARPPU</p></th>\r                        <th class="hover-tooltip" data-th="ppdetail"  width="12.5%"><p><%=GameCommon.detail%></p></th>\r                    </tr>\r                    <tr data="retention" class="hide">\r                        <th class="hover-tooltip" data-th="ppchannelName"  width="12.5%" class="left aroww"><p><span><%=PartnerExtention.PartnerData.channelName%></p></span></th>\r                        <th class="hover-tooltip" data-th="pptrackWay"  width="12.5%"><p><%=PartnerExtention.PartnerData.trackWay%></p></th>\r                        <th class="hover-tooltip" data-th="avgDayRentionRate1"  width="12.5%"><p><%=PartnerExtention.PartnerData.avgDayRentionRate1%></p></th>\r                        <th class="hover-tooltip" data-th="avgDayRentionRate3"  width="12.5%"><p><%=PartnerExtention.PartnerData.avgDayRentionRate3%></p></th>\r                        <th class="hover-tooltip" data-th="avgDayRentionRate7"  width="12.5%"><p><%=PartnerExtention.PartnerData.avgDayRentionRate7%></p></th>\r                        <th class="hover-tooltip" data-th="avgDayRentionRate14"  width="12.5%"><p><%=PartnerExtention.PartnerData.avgDayRentionRate14%></p></th>\r                        <th class="hover-tooltip" data-th="avgDayRentionRate30"  width="12.5%"><p><%=PartnerExtention.PartnerData.avgDayRentionRate30%></p></th>\r                        <th class="hover-tooltip" data-th="ppdetail"  width="12.5%"><p><%=GameCommon.detail%></p></th>\r                    </tr>\r                </thead>\r                <tbody data="amount" ><tr><td colspan="7" style="background:none"><div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div></td></tr></tbody>\r                <tbody data="quality"><tr><td colspan="7" style="background:none"><div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div></td></tr></tbody>\r                <tbody data="income"><tr><td colspan="8" style="background:none"><div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div></td></tr></tbody>\r            	<tbody data="retention"><tr><td colspan="8" style="background:none"><div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div></td></tr></tbody>\r            </table>\r		</div>\r\r	</div>\r\r<!-- 	<div class="boxmax"> -->\r<!-- 		<div class="title"> -->\r<!-- 			<strong class="l">推广用户占比</strong> -->\r<!-- 		</div> -->\r<!-- 		<div class="textbox"> -->\r<!--         	<div class="box_top" id="partnerAndAutoTab"> -->\r<!-- 				<a class="tab hover" data-tab="partnerAndAuto">推广和自增长用户</a> -->\r<!--                 <a class="tab" data-tab="partnerRate">推广用户占比</a> -->\r<!--                 <div class="info r"> -->\r<!--                 	<font id="partnerRate">--</font>%的用户户来自推广渠道 -->\r<!--                 </div> -->\r<!--             </div> -->\r<!-- 			<div id="partnerAndAutoTabContent"> -->\r<!-- 				<div data-tab="partnerAndAuto" id="partnerAndAuto" class="picbox"> -->\r<!-- 				</div> -->\r<!-- 				<div data-tab="partnerRate" id="partnerRate" class="picbox"> -->\r<!-- 				</div> -->\r<!-- 			</div> -->\r<!-- 		</div> -->\r<!-- 	</div> -->\r\r</div>\r'}),define("views/partnerExtention/PartnerDataView",["backbone","jquery","mustache","models/partner/Partner","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","utils/CurrencyUtil","utils/RegexUtil","utils/UnitMappingUtil","views/public/DatePicker","text!templates/partnerExtention/partnerData.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=e.View.extend({el:"#container",events:{"click #indexTab>a":"changeTab","click tbody>tr>td>a":"showInfo"},initialize:function(){t("#container").html(_.template(c,p)),new l({el:"#datePicker"}),this.indexTabName="amount",this.currTitleId="partnerExtentionChannelDataamount",this.preTitleId="partnerExtentionChannelDataamount",this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",t("#partnerTable").tabs({hoverTooltip:!0}),this.render()},render:function(){return this.renderDataTable("fetchPartnerAmount","row-amount","amount"),this},renderPartnerAndAuto:function(){t("#partnerAndAutoTab").tabs("#partnerAndAutoTabContent",function(e){switch(e){case"partnerAndAuto":r.fetchAllAndAutoPlayers({data:Params,success:function(n){var r=n.all,s=n.partner,o=_.pluck(r,"item"),u=_.pluck(r,"value"),a=_.pluck(s,"value"),f=[{name:"",data:u},{name:p.GameCommon.expand,data:a}];i.chart({id:e,x:o,series:f,type:"area"}),t("#partnerRate").html(n.rate)}});break;case"partnerRate":r.fetchPartnerRate({data:Params,success:function(t){var n=_.pluck(r,"item"),r=_.pluck(r,"value"),s=[{name:name,data:r}];i.chart({id:e,x:n,series:s})}})}})},renderDataTable:function(e,n,i){var s=this;t("#"+this.currTitleId+' div[role="title"] a[role="excel"]').remove(),t("#"+this.currTitleId+' div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),t("#"+this.currTitleId).tabs({indicator:!0});var f=t('tbody[data="'+i+'"]');t(".tablebox tbody").hide(),f.show(),r[e]({data:Params,success:function(e){require(["text!templates/partnerExtention/"+n+".html"],function(n){var r="";if(e&&e.length){var l={data:e};l.GameCommon=p.GameCommon,l.ctUnit=s.ctUnit,l.CurrencyUtil=u,l.RegexUtil=a,l.PartnerExtention=p.PartnerExtention,r=_.template(n,l),f.html(r)}else{var c=f.attr("data"),d=7;c=="income"&&(d=8),f.html('<tr><td colspan="'+d+'">'+p.GameCommon.noData)+"</td></tr>"}var v=t("<table></table>"),m=t("<thead></thead>"),g=t("<tbody></tbody>"),y=t("<tr></tr>");y.append(t('#partnerTableHead tr[data="'+i+'"]').html()),m.append(y),g.append(f.html()),g.find("tr[style='display:none;']").remove(),v.append(m).append(g),t("#partnerExtentionChannelData"+i+' div[role="title"] a[role="excel"]').click(function(){var e=p.GameCommon.channelData+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=o.tableToJson(v[0]),r=_.template(h,{excelName:e,excelArray:n});t("body").append(r),t("#excelExportForm").submit(),t("#excelExportForm").remove()})})}})},showInfo:function(e){var n=t(e.currentTarget),o=n.attr("data"),u=n.parent().parent(),a,l,c=this;n.text(n.text()==p.PartnerExtention.PartnerManagement.trend?p.PartnerExtention.PartnerManagement.packUp:p.PartnerExtention.PartnerManagement.trend),u.toggleClass("hover"),$destination=u.next("tr"),$tab=$destination.find("div.tdbox"),$destination.slideToggle({duration:0,complete:function(){if(!u.hasClass("hover"))return;var e=$tab.attr("id"),n=_.clone(Params);n.partnerID=o,$tab.tabs(function(o){var u="";switch(o){case"install":a="fetchInstallList",l=p.GameCommon.equipmentActive,unitItem=f.getDeviceItem();break;case"new":a="fetchNewPlayerList",l=p.GameCommon.newIncreasedPlayer,unitItem=f.getAccountItem();break;case"active":a="fetchDauList",l=p.GameCommon.dailyActive,unitItem=f.getAccountNumItem();break;case"income":a="incomeNumList",l=p.GameCommon.income,u="#"+c.ctUnit,unitItem=f.getMoneyItem();break;case"charge":a="chargePlayerNumList",l=p.PartnerExtention.PartnerManagement.dailyPayPeopleCount,unitItem=f.getAccountNumItem();break;case"arpu":a="fetchDailyARPU",l="ARPU("+p.GameCommon.day+")",u="#"+c.ctUnit,unitItem=f.getMoneyItem();break;case"retention":a="fetchPartnerDetailRetention",console.log("api is "+a),l=p.GameCommon.retention,u="#"+c.ctUnit,unitItem=f.getMoneyItem()}r[a]({data:n,success:function(n){if(o!=="retention"){var r=_.pluck(n,"item"),n=_.pluck(n,"value"),u=[{name:l,data:n}];o==="arpu"||o==="income"?(u=[{name:l,data:n}],i.chart({id:e+"-chart",x:r,series:u,yLeftUnit:unitItem,xType:"date",unitItem:[unitItem]})):i.chart({id:e+"-chart",x:r,series:u,xType:"date",unitItem:[unitItem]});var a=null,c=[p.GameCommon.date,l];o==="arpu"?c=[p.GameCommon.date,"("+f.getUnitByItem(unitItem)+")"+"   "+l]:c=[p.GameCommon.date,l+"("+f.getUnitByItem(unitItem)+")"],a=_.zip(r,n),s.drawTable({head:c,body:a,$el:t("#"+e+"-table"),headType:"date"})}else{var r=_.pluck(n.day01,"item"),h=_.pluck(n.day01,"value"),d=_.pluck(n.day03,"value"),v=_.pluck(n.day07,"value"),m=_.pluck(n.day14,"value"),g=_.pluck(n.day30,"value"),y=t.map(h,function(e){return parseInt(e)>-1?e:null}),b=t.map(d,function(e){return parseInt(e)>-1?e:null}),w=t.map(v,function(e){return parseInt(e)>-1?e:null}),E=t.map(m,function(e){return parseInt(e)>-1?e:null}),S=t.map(g,function(e){return parseInt(e)>-1?e:null}),x=_.avg(y),T=_.avg(b),N=_.avg(w),C=_.avg(E),k=_.avg(S),u=[{name:p.Summary.Summary.morrowRetainRate,data:_.map(h,function(e){return parseInt(e)>-1?e:null})},{name:p.Summary.Summary.threeDaysRetainRate,data:_.map(d,function(e){return parseInt(e)>-1?e:null})},{name:p.Summary.Summary.sevenDaysRetainRate,data:_.map(v,function(e){return parseInt(e)>-1?e:null})},{name:p.Summary.Summary.fourteenDaysRetainRate,data:_.map(m,function(e){return parseInt(e)>-1?e:null})},{name:p.Summary.Summary.thiryDaysRetainTate,data:_.map(g,function(e){return parseInt(e)>-1?e:null})}];t("#avgday01").html(x),t("#avgday03").html(T),t("#avgday07").html(N),t("#avgday14").html(C),t("#avgday30").html(k),i.chart({id:e+"-chart",x:r,series:u,legend:!0,yPercent:!0,xType:"date",yLeftUnit:f.getPercentItem(),unitItem:[f.getPercentItem(),f.getPercentItem(),f.getPercentItem(),f.getPercentItem(),f.getPercentItem()]});var a=_.zip(r,_.map(h,function(e){return parseInt(e)>-1?e:"--"}),_.map(d,function(e){return parseInt(e)>-1?e:"--"}),_.map(v,function(e){return parseInt(e)>-1?e:"--"}),_.map(m,function(e){return parseInt(e)>-1?e:"--"}),_.map(g,function(e){return parseInt(e)>-1?e:"--"})),c=[p.GameCommon.date,p.Summary.Summary.morrowRetainRate+"(%)",p.Summary.Summary.threeDaysRetainRate+"(%)",p.Summary.Summary.sevenDaysRetainRate+"(%)",p.Summary.Summary.fourteenDaysRetainRate+"(%)",p.Summary.Summary.thiryDaysRetainTate+"(%)"];s.drawTable({head:c,body:a,$el:t("#"+e+"-table"),headType:"date"})}}})})}})},changeTab:function(e){var n=t(e.currentTarget),r=n.attr("data"),i,s;this.indexTabName=r;switch(r){case"amount":this.preTitleId=this.currTitleId,this.currTitleId="partnerExtentionChannelDataamount",i="fetchPartnerAmount",s="row-amount";break;case"quality":this.preTitleId=this.currTitleId,this.currTitleId="partnerExtentionChannelDataquality",i="fetchPartnerQuality",s="row-quality";break;case"income":this.preTitleId=this.currTitleId,this.currTitleId="partnerExtentionChannelDataincome",i="fetchPartnerIncome",s="row-income";break;case"retention":this.preTitleId=this.currTitleId,this.currTitleId="partnerExtentionChannelDataretention",i="fetchPartnerRetention",s="row-retention"}t("#"+this.preTitleId).attr("id",this.currTitleId),t("#indexTab>a").removeClass("hover"),n.addClass("hover"),t("#partnerTableHead>tr").hide(),t('#partnerTableHead>tr[data="'+r+'"]').show(),this.renderDataTable(i,s,r)}});return d}),define("models/product/Product",["models/BaseModel"],function(e){var t=[{name:"fetchProductAndPlatforms",url:"/v1/gamecenter/fetchProductAndPlatforms",type:"get"},{name:"checkProductCountLimit",url:"/v1/gamecenter/checkProductCountLimit",type:"get"},{name:"isProductCreator",url:"/v1/gamecenter/isProductCreator",type:"get"},{name:"isOnlyPartPartners",url:"/v1/gamecenter/isOnlyPartPartners"},{name:"fetchMenuInfoByPId",url:"/v1/permission/menuInfo",type:"get"},{name:"cleanHistory",url:"/v1/gamecenter/cleanHistory",type:"get"},{name:"cleanData",url:"/v1/gamecenter/cleanData",type:"get"},{name:"canClearedProductList",url:"/v1/gamecenter/canClearedProductList",type:"get"},{name:"installNum",url:"/v1/gamecenter/installNum",type:"get"},{name:"maxLevel",url:"/v1/gamecenter/maxLevel",type:"get"},{name:"insertOrUpdateCustomMaxLevel",url:"/v1/gamecenter/insertOrUpdateCustomMaxLevel",type:"get"},{name:"currencyTypeList",url:"/v1/gamecenter/currencyTypeList",type:"get"},{name:"displayCurrency",url:"/v1/gamecenter/displayCurrency",type:"get"},{name:"insertOrUpdateCurrencyDisplay",url:"/v1/gamecenter/insertOrUpdateCurrencyDisplay",type:"get"},{name:"gameSetting",url:"/v1/gamecenter/gameSetting",type:"get"},{name:"isProductNameExist",url:"/v1/gamecenter/isProductNameExist",type:"get"},{name:"fetchCurrencyRate",url:"/v1/gamecenter/fetchCurrencyRate",type:"get"},{name:"updateCurrencyRate",url:"/v1/gamecenter/updateCurrencyRate",type:"post"},{name:"sendDebugEmail",url:"/v1/gamecenter/sendDebugEmail"},{name:"fetchOneProduct",url:"/v1/gamecenter/fetchOneProduct"},{name:"fetchPlatformListWithProductId",url:"/v1/gamecenter/fetchPlatformListWithProductId"}];return e.init(t)}),define("models/partner/PartnerAccountModel",["backbone"],function(e){var t=e.Model.extend({urlRoot:"/game/v1/partner/account",toggleForbid:function(){this.save({isforbid:!this.get("isforbid"),partnertype:this.get("partnertype")})},sync:function(t,n,r){switch(t.toLowerCase()){case"delete":r.url="/game/v1/partner/account/"+this.get("partnerid")+"/"+this.get("id")}e.sync(t,n,r)}});return t}),define("collections/PartnerAccountList",["backbone","models/partner/PartnerAccountModel"],function(e,t){var n=e.Collection.extend({model:t,url:"/game/v1/partner/account",createAccount:function(e){return new t(e)}});return n}),define("models/partner/PartnerManageModel",["backbone"],function(e){var t=e.Model.extend({idAttribute:"partnerid",toggleHide:function(){this.save({isdisplay:!this.get("isdisplay")})},equals:function(e){return this.get("partnerid")==e.get("partnerid")},haveCombined:function(){return!!this.get("groupid")}});return t}),define("collections/PartnerManageList",["backbone","models/partner/PartnerManageModel"],function(e,t){var n=e.Collection.extend({model:t,url:"/game/v1/partner/manage",addPlainObject:function(e,n){n=n||{},this.add(new t(e),n)}});return n}),define("text!templates/partnerExtention/partnerItem.html",[],function(){return'<td class="left"><%= partnername %></td>\r\n<td><input id="edit" type="text" value="<%=displayname%>" class="notEditorput" /></td>\r\n<td><%=showLastModifyTime%></td>\r\n<td><a id="operate"  data="package"><%=groupid ? PartnerExtention.PartnerItem.split : PartnerExtention.PartnerItem.merge%></a></td>\r\n<td><a id="hide" class="<%=isdisplay?\'on\':\'off\'%> mauto"></a></td>\r\n<td><a id="create"><%= iscreate ? PartnerExtention.PartnerItem.startUsing : PartnerExtention.PartnerItem.create%></a></td>'}),define("views/partnerExtention/PartnerItemView",["backbone","text!templates/partnerExtention/partnerItem.html","i18n!nls/gameI18N","blockUI"],function(e,t,n){var r=e.View.extend({tagName:"tr",template:_.template(t),events:{"click #edit":"showEdit","blur #edit":"saveNickName","keypress #edit":"saveNickNameOnEnter","click #operate":"operate","click #hide":"hide","click #create":"showCreateAccountPanel"},initialize:function(){this.model.bind("change",this.render,this)},render:function(){var e=this.model.toJSON();return e.PartnerExtention=n.PartnerExtention,e.GameCommon=n.GameCommon,this.$el.html(this.template(e)),this},showEdit:function(e){$(e.currentTarget).attr("class","Editorput")},saveNickName:function(e){var t=$(e.currentTarget);t.attr("class","notEditorput"),t.val()!=this.model.get("displayname")&&this.model.save({displayname:t.val()})},saveNickNameOnEnter:function(e){e.keyCode==13&&($("#edit").blur(),this.saveNickName(e))},operate:function(){var e=this,t=!!this.model.get("groupid");if(t)this.splitPartners(this.model.get("partnerids"));else{var n=this.collection.filter(function(t){return!t.haveCombined()&&!e.model.equals(t)});this.renderCombinedPartners(n),$('#combinePartner input[type="hidden"]').val(e.model.get("partnerid")),this.pop_dialog($("#combinePartner"))}},splitPartners:function(e){var t=this;$.ajax({url:"/game/v1/partner/split",type:"get",data:{partnerIds:e},success:function(e){_.each(e,function(e){t.collection.addPlainObject(e,{merge:!0})})}})},renderCombinedPartners:function(e){if(e.length){var t="";_.each(e,function(e){t+='<li><input type="checkbox" value="'+e.get("partnerid")+'"/><label>'+e.get("partnername")+"</label></li>"}),$("#combinePartner .channelPop").html(t),$("#combinePartner").attr("partnerType","package"),$("#combinePartner .timetop>.r").show(),$("#combinePartner").removeAttr("status")}else $("#combinePartner .channelPop").html(n.PartnerExtention.PartnerItem.noNeedMergeChannel),$("#combinePartner .timetop>.r").hide(),$("#combinePartner").attr("status","none")},hide:function(){this.model.toggleHide()},showCreateAccountPanel:function(){this.model.get("iscreate")||(this.renderCreateAccountPanel(this.model),$("#createPartnerAccount").attr("partnerType","package"),this.pop_dialog($("#createPartnerAccount")))},pop_dialog:function(e,t){var n=this,r=$(window).height(),i=$(document).width(),s=e.width(),o=e.height(),u=i/2-s/2,a=r/2-o/2;$.blockUI({css:{border:"0",background:"none",width:s,left:u,top:a},message:e})},generateName:function(){return parseInt(99999999*Math.random())},generatePassword:function(){var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"),t="";for(var n=0;n<6;n++)t+=e[Math.floor(Math.random()*35)];return t},renderCreateAccountPanel:function(e){$("#account_partnername").html(e.get("partnername")),$("#account_partnerid").html(e.get("partnerid")),$("#account_name").html(this.generateName()),$("#account_pwd").html(this.generatePassword())}});return r}),define("text!templates/partnerExtention/partnerShortUrlItem.html",[],function(){return'<td class="left"><%= partnername %></td>\r\n<td class="left"><%= spreadurl %></td>\r\n<td><%=showLastModifyTime%></td>\r\n<td><a id="operate" data="shortUrl"><%=groupid ? PartnerExtention.PartnerItem.split : PartnerExtention.PartnerItem.merge%></a></td>\r\n<td><a id="hide" class="<%=isdisplay?\'on\':\'off\'%> mauto"></a></td>\r\n<td><a id="create"><%= iscreate ? PartnerExtention.PartnerItem.startUsing : PartnerExtention.PartnerItem.create%></a></td>'}),define("views/partnerExtention/PartnerShortUrlItemView",["backbone","text!templates/partnerExtention/partnerShortUrlItem.html","i18n!nls/gameI18N","blockUI"],function(e,t,n){var r=e.View.extend({tagName:"tr",template:_.template(t),events:{"click #operate":"operate","click #hide":"hide","click #create":"showCreateAccountPanel"},initialize:function(){this.model.bind("change",this.render,this)},render:function(){console.log(this.model.toJSON());var e=this.model.toJSON();return e.PartnerExtention=n.PartnerExtention,e.GameCommon=n.GameCommon,this.$el.html(this.template(e)),this},operate:function(e){var t=this,n=!!this.model.get("groupid");if(n)this.splitPartners(this.model.get("partnerids"));else{var r=this.collection.filter(function(e){return!e.haveCombined()&&!t.model.equals(e)});this.renderCombinedPartners(r),$('#combinePartner input[type="hidden"]').val(t.model.get("partnerid")),this.pop_dialog($("#combinePartner"))}},splitPartners:function(e){var t=this;$.ajax({url:"/game/v1/partner/split",type:"get",data:{partnerIds:e},success:function(e){_.each(e,function(e){t.collection.addPlainObject(e,{merge:!0})})}})},renderCombinedPartners:function(e){if(e.length){var t="";_.each(e,function(e){t+='<li><input type="checkbox" value="'+e.get("partnerid")+'"/><label>'+e.get("partnername")+"</label></li>"}),$("#combinePartner .channelPop").html(t),$("#combinePartner").attr("partnerType","shortUrl"),$("#combinePartner .timetop>.r").show(),$("#combinePartner").removeAttr("status")}else $("#combinePartner .channelPop").html(n.PartnerExtention.PartnerItem.noNeedMergeChannel),$("#combinePartner .timetop>.r").hide(),$("#combinePartner").attr("status","none")},hide:function(){this.model.toggleHide()},showCreateAccountPanel:function(){this.model.get("iscreate")||(this.renderCreateAccountPanel(this.model),$("#createPartnerAccount").attr("partnerType","shortUrl"),this.pop_dialog($("#createPartnerAccount")))},pop_dialog:function(e,t){var n=this,r=$(window).height(),i=$(document).width(),s=e.width(),o=e.height(),u=i/2-s/2,a=r/2-o/2;$.blockUI({css:{border:"0",background:"none",width:s,left:u,top:a},message:e})},generateName:function(){return parseInt(99999999*Math.random())},generatePassword:function(){var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"),t="";for(var n=0;n<6;n++)t+=e[Math.floor(Math.random()*35)];return t},renderCreateAccountPanel:function(e){$("#account_partnername").html(e.get("partnername")),$("#account_partnerid").html(e.get("partnerid")),$("#account_name").html(this.generateName()),$("#account_pwd").html(this.generatePassword())}});return r}),define("text!templates/partnerExtention/partnerAccountItem.html",[],function(){return'<td class="left"><%=partnername%></td>\r\n<td><%=partnertype%></td>\r\n<td><%=loginname%></td>\r\n<td><%=passwd%></td>\r\n<td><%=lastlogintime%></td>\r\n<td><a href="http://www.talkinggame.com/partner/page/partner_account_report.jsp" target="_blank"><%=PartnerExtention.PartnerAccountItem.enterBackground%></a> <a id="forbiddenBtn" class="<%=isforbid ? \'\' : \'red\'%>"><%=isforbid ? PartnerExtention.PartnerAccountItem.enabled: PartnerExtention.PartnerAccountItem.forbidden%><%=GameCommon.account%></a> <a id="deleteAccount"><%=GameCommon.delete%></a></td>'}),define("views/partnerExtention/PartnerAccountItemView",["backbone","i18n!nls/gameI18N","text!templates/partnerExtention/partnerAccountItem.html"],function(e,t,n){var r=e.View.extend({tagName:"tr",events:{"click #deleteAccount":"deleteAccount","click #forbiddenBtn":"forbidAccount"},initialize:function(){this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){var e=this.model.toJSON();return e.PartnerExtention=t.PartnerExtention,e.GameCommon=t.GameCommon,this.$el.html(_.template(n,e)),this},deleteAccount:function(){var e=this;confirm(t.PartnerExtention.PartnerAccountItem.confirmDeleteAccount)&&this.model.destroy({success:function(t,n){var r=e.options.partnerList.get(t.get("partnerid"));r&&r.set({iscreate:!1});var i=e.options.shortUrlPartnerList.get(t.get("partnerid"));i&&i.set({iscreate:!1})}})},forbidAccount:function(){this.model.toggleForbid()}});return r}),define("text!templates/partnerExtention/partnerManagement.html",[],function(){return'<div class="content r">\r	<!--------------增加新渠道-------------->\r    <div class="boxmax" id="addNewPartnerDiv">\r    </div>\r    \r	<!--------------链接渠道列表-------------->\r    <div class="boxmax">\r    	<div id="partnerExtentionPartnerManagementShortLinkChannelList">\r	    	<div class="title" role="title">\r				<strong class="l"><%=PartnerExtention.PartnerManagement.linkChannel%></strong>\r			</div>\r    	</div>\r        <div class="tablebox">\r			<table id="ppmShortUrlTable" cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1">\r            	<thead>\r                    <tr>\r                        <th class="hover-tooltip" data-th="ppmchannel" width=\'20%\' class="left"><p><%=GameCommon.channel%>(ID)</p></th>\r                        <th class="hover-tooltip" data-th="ppmspreadLink" width=\'20%\'><p><%=PartnerExtention.PartnerManagement.spreadLink%></p></th>\r                        <th class="hover-tooltip" data-th="ppmrecordDate" width=\'20%\'><p><%=GameCommon.recordDate%></p></th>\r                        <th class="hover-tooltip" data-th="ppmmergeChannel" width=\'15%\'><p><%=PartnerExtention.PartnerManagement.mergeChannel%></p></th>\r                        <th class="hover-tooltip" data-th="ppmhideChannel" width=\'15%\'><p><%=PartnerExtention.PartnerManagement.hideChannel%></p></th>\r                        <th class="hover-tooltip" data-th="ppmchannelQueryAccount" width=\'10%\'><p><%=PartnerExtention.PartnerManagement.channelQueryAccount%></p></th>\r                    </tr>\r                </thead>\r                <tbody id="shortUrlPartnerList"></tbody>\r            </table>\r		</div>\r    </div>\r    \r	<!--------------分包渠道列表-------------->\r    <div class="boxmax">\r    	<div id="partnerExtentionPartnerManagementChannelList">\r	    	<div class="title" role="title">\r				<strong class="l"><%=PartnerExtention.PartnerManagement.subpackageChannel%></strong>\r			</div>\r    	</div>\r        <div class="tablebox">\r			<table id="ppmChannelTable" cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1">\r            	<thead>\r                    <tr>\r                        <th class="hover-tooltip" data-th="ppmchannel" width=\'20%\' class="left"><p><%=GameCommon.channel%>(ID)</p></th>\r                        <th class="hover-tooltip" data-th="ppmalias" width=\'20%\'><p><%=GameCommon.alias%></p></th>\r                        <th class="hover-tooltip" data-th="ppmrecordDate" width=\'20%\'><p><%=GameCommon.recordDate%></p></th>\r                        <th class="hover-tooltip" data-th="ppmmergeChannel" width=\'15%\'><p><%=PartnerExtention.PartnerManagement.mergeChannel%></p></th>\r                        <th class="hover-tooltip" data-th="ppmhideChannel" width=\'15%\'><p><%=PartnerExtention.PartnerManagement.hideChannel%></p></th>\r                        <th class="hover-tooltip" data-th="ppmchannelQueryAccount" width=\'10%\'><p><%=PartnerExtention.PartnerManagement.channelQueryAccount%></p></th>\r                    </tr>\r                </thead>\r                <tbody id="partnerList"></tbody>\r            </table>\r		</div>\r    </div>\r    \r    \r    <!--------------Account-------------->\r    <div class="boxmax">\r    	<div class="title">\r			<strong class="l">Account</strong>\r		</div>\r        <div class="tablebox">\r			<table cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1">\r            	<thead>\r                    <tr>\r                        <th width="20%" class="left"><%=PartnerExtention.PartnerManagement.channelName%></th>\r                        <th width="20%"><%=PartnerExtention.PartnerManagement.channelType%></th>\r                        <th width="20%"><%=PartnerExtention.PartnerManagement.loginName%></th>\r                        <th width="20%"><%=PartnerExtention.PartnerManagement.loginPWD%></th>\r                        <th width="20%"><%=PartnerExtention.PartnerManagement.lastLoginTime%></th>\r                        <th width="20%"><%=GameCommon.operate%></th>\r                    </tr>\r                </thead>\r                <tbody id="partnerAccountList"></tbody>\r            </table>\r		</div>\r    </div>\r\r</div>\r   <!--------------创建查询账户 弹出框-------------->\r<div id="createPartnerAccount" style="display:none;">\r    <div class="timetop">\r        <b><%=PartnerExtention.PartnerManagement.createChannelQueryAccount%></b>\r    </div>\r    <div class="Poptxt">\r        <ul class="CreateChannelPop">\r            <li class="after"><label class="l"><%=PartnerExtention.PartnerManagement.channelName%>：</label><div id="account_partnername"></div></li>\r            <li class="after"><label class="l"><%=PartnerExtention.PartnerManagement.channelId%>：</label><div id="account_partnerid"></div></li>\r            <li class="after"><label class="l"><%=GameCommon.accountName%>：</label><div id="account_name"></div></li>\r            <li class="after"><label class="l"><%=GameCommon.password%>：</label><div id="account_pwd"></div></li>\r        </ul>\r        <div class="opeDiv after">\r            <a class="timecolse r Confirm" id="accountConfirmBtn"><%=GameCommon.confirm%></a>\r            <a class="r Cancel" id="accountCancelBtn"><%=GameCommon.cancel%></a>\r        </div>\r    </div>\r</div>\r   <!--------------合并渠道 弹出框-------------->\r<div id="combinePartner" style="display:none;">\r    <input type="hidden"/>\r	<div class="timetop">\r    	<b class="l"><%=PartnerExtention.PartnerManagement.selectMergeChannel%></b>\r        <span class="r"><a id="selectAllBtn"><%=GameCommon.checkAll%></a><a id="deSelectAllBtn"><%=GameCommon.invertCheck%></a></span>\r    </div>\r    <div class="Poptxt">\r    	<ul class="channelPop">\r        </ul>\r        <div class="opeDiv after">\r            <a class="timecolse r Confirm" id="partnerConfirmBtn"><%=GameCommon.confirm%></a>\r            <a class="r Cancel" id="partnerCancelBtn"><%=GameCommon.cancel%></a>\r        </div>\r    </div>\r</div>\r   <!--------------更换游戏下载地址 弹出框-------------->\r<div class="Pop_line" style="display:none;" id="changeDownloadUrlDiv">\r    <div class="EditPop_top timetop">\r        <b class="l"><%=PartnerExtention.PartnerManagement.changeGameDownloadUrl%></b>\r    </div>\r    <div class="Poptxt">\r        <p class="setupPop_P" style="width:390px"><%=PartnerExtention.PartnerManagement.changeGameDownloadUrlTip%></p>\r        <ul class="setupPop" id="levelStep">\r            <li class="step">\r                <b style="width:65px">iOS:</b>\r                <input id="iOSDownloadUrl" titledata="<%=PartnerExtention.PartnerManagement.setGameDownloadUrl%>" value="<%=PartnerExtention.PartnerManagement.setGameDownloadUrl%>" class="textinput l" type="text" style="width:265px">\r                <a class="timecolse l Confirm" id="iOSSaveBtn" data="2" style="margin:0 0 0 5px;"><%=PartnerExtention.PartnerManagement.update%></a>\r            </li>\r            <li class="step">\r                <b style="width:65px">Android:</b>\r                <input id="AndroidDownloadUrl" titledata="<%=PartnerExtention.PartnerManagement.setGameDownloadUrl%>" value="<%=PartnerExtention.PartnerManagement.setGameDownloadUrl%>" class="textinput l" type="text" style="width:265px">\r                <a class="timecolse l Confirm" id="androidSaveBtn"   data="1" style="margin:0 0 0 5px;"><%=PartnerExtention.PartnerManagement.update%></a>\r            </li>    \r        </ul>\r        <div class="opeDiv after product_opeDiv">\r            <a class="r Cancel" id="canelBtn"><%=PartnerExtention.PartnerManagement.close%></a>\r        </div>\r    </div>\r</div>\r'}),define("text!templates/partnerExtention/addNewPartner.html",[],function(){return'<a class="maxbut" id="addNewPartner"><font class="add"><%=PartnerExtention.PartnerManagement.addNewChannel%></font></a>\r\n<ul class="Editor hide" id="addNewPartnerUl">\r\n	<li class="Editor_li after" style="padding-bottom:0">\r\n		<p class="Editor_li_con">\r\n			<b><%=PartnerExtention.PartnerManagement.trackWay%></b>\r\n        	<span id="selectPartnerType">\r\n        		<input type="radio" name="partnerType" target_li="shortUrl" class="radio" checked/><label><%=PartnerExtention.PartnerManagement.linkChannel%></label>\r\n        		<input type="radio" name="partnerType" target_li="subPackage" class="radio" /><label><%=PartnerExtention.PartnerManagement.subpackageChannel%></label>\r\n        	</span>\r\n    	</p>\r\n	</li>\r\n	<li class="Editor_li after"  target_li="shortUrl">\r\n		<p class="Editor_li_con">\r\n    		<b><%=PartnerExtention.PartnerManagement.platform%></b>\r\n        	<span tag_span="platform" id="shortUrlPartnerPlatform">\r\n        		<input type="radio"  platFormIdValue="<%=GameCommon.iosPlatformId%>" name="shortUrlPlatform"  class="radio" checked/><label>iOS</label>\r\n        		<input type="radio"  platFormIdValue="<%=GameCommon.androidPlatformId%>"  name="shortUrlPlatform"   class="radio" /><label>Android</label>\r\n        	</span>\r\n    	</p>\r\n    	<p class="Editor_li_con">\r\n        	<b><%=PartnerExtention.PartnerManagement.introduction%></b>\r\n        	<span style="width:80%">\r\n        		<%=PartnerExtention.PartnerManagement.shortLinkPartnerIntroductionPre%><font shortLinkStore="store"></font><%=PartnerExtention.PartnerManagement.shortLinkPartnerIntroductionEnd%>\r\n    		</span>\r\n		</p>\r\n		<p class="Editor_li_con">\r\n    		<b><%=PartnerExtention.PartnerManagement.usePattern%></b>\r\n    		<span>\r\n        		<%=PartnerExtention.PartnerManagement.usePatternPre%><font  shortLinkStore="store"></font><%=PartnerExtention.PartnerManagement.usePatternEnd%>\r\n    		</span>\r\n		</p>\r\n		<p class="Editor_li_con">\r\n		    <b><%=PartnerExtention.PartnerManagement.channelName%></b>\r\n		    <span>\r\n		        <input type="text" id="partnerName" titledata="<%=PartnerExtention.PartnerManagement.setPartnerName%>" class="textinput" value="<%=PartnerExtention.PartnerManagement.setPartnerName%>">\r\n		    </span>\r\n		</p>\r\n		<p class="Editor_li_con">\r\n		    <b><%=PartnerExtention.PartnerManagement.downloadUrl%></b>\r\n		    <span>\r\n		         <input type="text"  style="width:380px;"id="gameDownLoadUrl"  titledata="<%=PartnerExtention.PartnerManagement.setGameDownloadUrl%>" class="textinput l" value="<%=PartnerExtention.PartnerManagement.setGameDownloadUrl%>">\r\n		    	 <a class="Confirm l txtbut" id="downloadUrlConfirm"><%=PartnerExtention.PartnerManagement.confirm%></a><a class="Confirm l txtbut" id="downloadUrlEdit" style="display:none;"><%=PartnerExtention.PartnerManagement.editUrl%></a><a class="Confirm l txtbut" id="downloadUrlCancel" style="display:none;"><%=GameCommon.cancel%></a>\r\n		    </span>\r\n        </p>\r\n    </li>\r\n	<li class="Editor_li after hide" target_li="subPackage">\r\n    	<p class="Editor_li_con">\r\n        	<b><%=PartnerExtention.PartnerManagement.platform%></b>\r\n            <span tag_span="platform">\r\n            	<input type="radio" platFormIdValue="<%=GameCommon.iosPlatformId%>" name="subPackagePlatform" class="radio" checked/><label>iOS</label>\r\n            	<input type="radio" platFormIdValue="<%=GameCommon.androidPlatformId%>" name="subPackagePlatform" class="radio" /><label>Android</label>\r\n            </span>\r\n        </p>\r\n    	<p class="Editor_li_con">\r\n        	<b><%=PartnerExtention.PartnerManagement.introduction%></b>\r\n            <span style="width:80%"><%=PartnerExtention.PartnerManagement.introductionExplain%></span>\r\n        </p>\r\n    	<p class="Editor_li_con">\r\n        	<b><%=PartnerExtention.PartnerManagement.integration%></b>\r\n            <span class="int" integrationType="IOS">\r\n            	<font>◆<%=PartnerExtention.PartnerManagement.integrationIntroductionIOS1%></font>\r\n            	<small><%=PartnerExtention.PartnerManagement.integrationIntroductionIOS2%></small>\r\n            	<font>◆<%=PartnerExtention.PartnerManagement.integrationIntroduction3%></font>\r\n            </span>\r\n            <span class="int" integrationType="Android">\r\n            	<font>◆ <%=PartnerExtention.PartnerManagement.integrationIntroductionAndroid1%> </font>\r\n            	<small>&lt;<%=PartnerExtention.PartnerManagement.integrationIntroductionAndroid2%>/&gt;</small>\r\n            	<font>◆  <%=PartnerExtention.PartnerManagement.integrationIntroduction3%></font>\r\n            </span>\r\n        </p>\r\n<!--     	<p class="Editor_li_con"> -->\r\n<!--         	<b><%=PartnerExtention.PartnerManagement.tool%></b> -->\r\n<!--             <span><%=PartnerExtention.PartnerManagement.toolExplain%><br /><a  class="button l"><font class="dow"><%=PartnerExtention.PartnerManagement.downChannelZipTool%></font></a></span> -->\r\n<!--         </p> -->\r\n    </li>\r\n	<li class="Editor_li after Editor_li_left_con" target_li="shortUrl">\r\n        <a class="Confirm l" id="shortUrlConfirm"><%=PartnerExtention.PartnerManagement.createChannel%></a><a class="Cancel l" id="shortUrlCancel"><%=GameCommon.cancel%></a>\r\n    </li>\r\n	<li class="Editor_li after Editor_li_left_con hide" target_li="subPackage">\r\n        <a class="Confirm l" id="subPackageConfirm"><%=PartnerExtention.PartnerManagement.confirm%></a>\r\n    </li>\r\n</ul>'}),define("views/partnerExtention/PartnerManagementView",["backbone","utils/ModelBox","models/partner/Partner","models/product/Product","collections/PartnerAccountList","collections/PartnerManageList","views/partnerExtention/PartnerItemView","views/partnerExtention/PartnerShortUrlItemView","views/partnerExtention/PartnerAccountItemView","text!templates/partnerExtention/partnerManagement.html","text!templates/partnerExtention/addNewPartner.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"body",events:{"click #accountConfirmBtn":"saveAccount","click #accountCancelBtn":"cancleCreateAccount","click #selectAllBtn":"selectAllPartner","click #deSelectAllBtn":"deSelectAllPartner","click #partnerConfirmBtn":"saveCombinedPartners","click #partnerCancelBtn":"cancelCombile","click #addNewPartner":"toggleAddNewPartnerUl","click #selectPartnerType input":"switchPartnerType","click #subPackageConfirm":"toggleAddNewPartnerUl","click #shortUrlCancel":"hiddeAddNewPartnerUl","click #shortUrlConfirm":"createPartnerShortUrl","focus #partnerName":"focusInput","focus #gameDownLoadUrl":"focusInput","blur #partnerName":"blurInput","blur #gameDownLoadUrl":"blurInput",'click span[tag_span="platform"] input':"switchPlatform","click #downloadUrlConfirm":"downloadUrlCommit","click #downloadUrlCancel":"downloadUrlCancel","click #downloadUrlEdit":"downloadUrlEdit","click #changeDownloadUrl":"changeDownloadUrl","click #canelBtn":"canelBtn","focus #iOSDownloadUrl":"focusInput","focus #AndroidDownloadUrl":"focusInput","blur #iOSDownloadUrl":"blurInput","blur #AndroidDownloadUrl":"blurInput","click #androidSaveBtn":"androidSaveBtn","click #iOSSaveBtn":"iOSSaveBtn"},initialize:function(){$("#container").html(_.template(f,c)),r.isOnlyPartPartners({data:Params,success:function(e){if(!e){$("#addNewPartnerDiv").html(_.template(l,c));var t='<a class="Cancel r minCancel" id="changeDownloadUrl">'+c.PartnerExtention.PartnerManagement.changeGameDownloadUrl+"</a>";$("#partnerExtentionPartnerManagementShortLinkChannelList .title").append(t)}}}),$("#partnerExtentionPartnerManagementChannelList").tabs({indicator:!0}),$("#partnerExtentionPartnerManagementShortLinkChannelList").tabs({indicator:!0}),$("#ppmChannelTable").tabs({hoverTooltip:!0}),$("#ppmShortUrlTable").tabs({hoverTooltip:!0}),this.$partnerList=$("#partnerList"),this.$shortUrlPartnerList=$("#shortUrlPartnerList"),this.$partnerAccountList=$("#partnerAccountList"),this.Partners=new s,this.PartnerShortUrl=new s,this.PartnerAccounts=new i,this.originalDownloadUrl="",this.PartnerShortUrl.bind("reset",this.addAllPartnerShortUrl,this),this.PartnerShortUrl.bind("remove",this.addAllPartnerShortUrl,this),this.PartnerShortUrl.bind("add",this.addAllPartnerShortUrl,this),this.Partners.bind("reset",this.addAllPartner,this),this.Partners.bind("remove",this.addAllPartner,this),this.Partners.bind("add",this.addAllPartner,this),this.PartnerAccounts.bind("reset",this.addAllPartnerAccount,this),this.PartnerAccounts.bind("add",this.addAllPartnerAccount,this),this.PartnerShortUrl.fetch({data:{productId:Params.productID,platformId:Params.platformID,partnerType:"shortUrl",loginUserId:Params.loginUserDeveloperID}}),this.Partners.fetch({data:{productId:Params.productID,platformId:Params.platformID,partnerType:"package",loginUserId:Params.loginUserDeveloperID}}),this.PartnerAccounts.fetch({data:{productId:Params.productID,platformId:Params.platformID,loginUserId:Params.loginUserDeveloperID}})},render:function(){return this},toggleAddNewPartnerUl:function(){this.disabledPlatformRadioInput(),$("#addNewPartnerUl").toggleClass("hide")},hiddeAddNewPartnerUl:function(){this.initAddNewPartner(),this.toggleAddNewPartnerUl()},initAddNewPartner:function(){$("#partnerName").val(c.PartnerExtention.PartnerManagement.setPartnerName),this.disabledPlatformRadioInput()},disabledPlatformRadioInput:function(e){var t=Params.platformID;e&&(t=e);var n={productId:Params.productID};t!=""?($("span[tag_span='platform']>input[platFormIdValue='"+t+"']").attr("checked","true"),e||$("span[tag_span='platform']>input[platFormIdValue!='"+t+"']").attr("disabled","true"),t==1?($("font[shortLinkStore='store']").html(c.PartnerExtention.PartnerManagement.googlePlayStore),$('span[integrationType="IOS"]').hide(),$('span[integrationType="Android"]').show()):t==2&&($('span[integrationType="Android"]').hide(),$('span[integrationType="IOS"]').show(),$("font[shortLinkStore='store']").html(c.PartnerExtention.PartnerManagement.IOSStore)),n.platformId=t):(n.platformId=2,$("span[tag_span='platform']>input[platFormIdValue='2']").attr("checked","true"),$('span[integrationType="Android"]').hide(),$('span[integrationType="IOS"]').show(),$("font[shortLinkStore='store']").html(c.PartnerExtention.PartnerManagement.IOSStore)),this.fetchDownLoadUrl(n)},fetchDownLoadUrl:function(e){n.fetchProductUrl({data:e,success:function(e){e!=null?($("#gameDownLoadUrl").val(e.downloadUrl),$("#gameDownLoadUrl").attr("disabled","true"),$("#gameDownLoadUrl").addClass("disabled"),$("#downloadUrlConfirm").hide(),$("#downloadUrlCancel").hide(),$("#downloadUrlEdit").show()):($("#gameDownLoadUrl").val(c.PartnerExtention.PartnerManagement.setGameDownloadUrl),$("#gameDownLoadUrl").removeAttr("disabled"),$("#gameDownLoadUrl").removeClass("disabled"),$("#downloadUrlEdit").hide(),$("#downloadUrlConfirm").show(),$("#downloadUrlCancel").hide())}})},switchPartnerType:function(e){var t=$(e.currentTarget),n=t.attr("target_li");n=="shortUrl"?($("li[target_li='subPackage']").hide(),$("li[target_li='shortUrl']").show()):n=="subPackage"&&($("li[target_li='shortUrl']").hide(),$("li[target_li='subPackage']").show())},switchPlatform:function(e){var t=$(e.currentTarget),n=t.attr("name"),r=t.attr("platFormIdValue");if(n=="shortUrlPlatform"){r==1?$("font[shortLinkStore='store']").html(c.PartnerExtention.PartnerManagement.googlePlayStore):r==2&&$("font[shortLinkStore='store']").html(c.PartnerExtention.PartnerManagement.IOSStore);var i={productId:Params.productID,platformId:r};this.fetchDownLoadUrl(i)}else n=="subPackagePlatform"&&(r==1?($('span[integrationType="IOS"]').hide(),$('span[integrationType="Android"]').show()):r==2&&($('span[integrationType="Android"]').hide(),$('span[integrationType="IOS"]').show()))},downloadUrlCommit:function(){var e=$("#gameDownLoadUrl").val()||"";if(e==""||e==c.PartnerExtention.PartnerManagement.setGameDownloadUrl){t.alert({message:c.PartnerExtention.PartnerManagement.pleaseEnterGameDownloadUrl});return}var r=$("#shortUrlPartnerPlatform>input:checked").attr("platFormIdValue"),i={productId:Params.productID,platformId:r,downloadUrl:e};n.editProductUrl({data:i,success:function(e){e?($("#gameDownLoadUrl").attr("disabled","true"),$("#gameDownLoadUrl").addClass("disabled"),$("#downloadUrlConfirm").hide(),$("#downloadUrlCancel").hide(),$("#downloadUrlEdit").show()):t.alert({message:c.PartnerExtention.PartnerManagement.updateFail})}})},downloadUrlEdit:function(){var e=this;t.alert({message:c.PartnerExtention.PartnerManagement.editDownloadUrl},function(){e.originalDownloadUrl=$("#gameDownLoadUrl").val(),$("#gameDownLoadUrl").removeAttr("disabled"),$("#gameDownLoadUrl").removeClass("disabled"),$("#downloadUrlEdit").hide(),$("#downloadUrlConfirm").show(),$("#downloadUrlCancel").show()})},downloadUrlCancel:function(){$("#gameDownLoadUrl").val(this.originalDownloadUrl),$("#gameDownLoadUrl").attr("disabled","true"),$("#gameDownLoadUrl").addClass("disabled"),$("#downloadUrlEdit").show(),$("#downloadUrlConfirm").hide(),$("#downloadUrlCancel").hide()},createPartnerShortUrl:function(){var e=this,r=$("#partnerName").val()||"";if(r==""||r==c.PartnerExtention.PartnerManagement.setPartnerName){t.alert({message:c.PartnerExtention.PartnerManagement.pleaseEnterPartnerName});return}var i=$("#gameDownLoadUrl").val()||"";if(i==""||i==c.PartnerExtention.PartnerManagement.setGameDownloadUrl){t.alert({message:c.PartnerExtention.PartnerManagement.pleaseEnterGameDownloadUrl});return}var s=$("#shortUrlPartnerPlatform>input:checked").attr("platFormIdValue"),o={productid:Params.productID,platformid:s,partnername:r,downloadurl:i};n.validPartnerName({data:o,success:function(r){if(r){t.alert({message:c.PartnerExtention.PartnerManagement.partnerNameHasExisted});return}n.createShortUrlPartner({data:o,success:function(n){if(n==null){t.alert({message:c.PartnerExtention.PartnerManagement.addShortUrlFail});return}e.PartnerShortUrl.add(n,{at:0}),e.initAddNewPartner(),e.toggleAddNewPartnerUl()}})}})},changeDownloadUrl:function(){var e={productId:Params.productID},t=this;n.fetchProductUrlList({data:e,success:function(e){var n=e.IOS||c.PartnerExtention.PartnerManagement.setGameDownloadUrl,r=e.Android||c.PartnerExtention.PartnerManagement.setGameDownloadUrl;$("#iOSDownloadUrl").val(n),$("#AndroidDownloadUrl").val(r),Params.platformID==1?($("#iOSDownloadUrl").attr("disabled","true"),$("#iOSDownloadUrl").addClass("disabled"),$("#iOSSaveBtn").hide(),$("#AndroidDownloadUrl").removeAttr("disabled"),$("#AndroidDownloadUrl").removeClass("disabled")):Params.platformID==2&&($("#AndroidDownloadUrl").attr("disabled","true"),$("#AndroidDownloadUrl").addClass("disabled"),$("#androidSaveBtn").hide(),$("#iOSDownloadUrl").removeAttr("disabled"),$("#iOSDownloadUrl").removeClass("disabled")),t.pop_dialog($("#changeDownloadUrlDiv"))}})},canelBtn:function(){$.unblockUI()},androidSaveBtn:function(){var e=$("#AndroidDownloadUrl").val()||"";if(e==""||e==c.PartnerExtention.PartnerManagement.setGameDownloadUrl){alert(c.PartnerExtention.PartnerManagement.pleaseEnterGameDownloadUrl);return}var t={productId:Params.productID,platformId:1,downloadUrl:e};this.updateProductDownloadUrl(t)},iOSSaveBtn:function(){var e=$("#iOSDownloadUrl").val()||"";if(e==""||e==c.PartnerExtention.PartnerManagement.setGameDownloadUrl){alert(c.PartnerExtention.PartnerManagement.pleaseEnterGameDownloadUrl);return}var t={productId:Params.productID,platformId:2,downloadUrl:e};this.updateProductDownloadUrl(t)},updateProductDownloadUrl:function(e){var t=this;n.editProductUrl({data:e,success:function(n){n?(alert(c.PartnerExtention.PartnerManagement.updateSuccess),e.platformId==1?t.disabledPlatformRadioInput(1):e.platformId==2&&t.disabledPlatformRadioInput(2)):alert(c.PartnerExtention.PartnerManagement.updateFail)}})},pop_dialog:function(e,t){var n=this,r=$(window).height(),i=$(document).width(),s=e.width(),o=e.height(),u=i/2-s/2,a=r/2-o/2;$.blockUI({css:{border:"0",background:"none",width:s,left:u,top:a},message:e})},focusInput:function(e){var t=$(e.currentTarget),n=t.val(),r=t.attr("titledata");n==r&&$(e.currentTarget).val("")},blurInput:function(e){var t=$(e.currentTarget),n=t.val(),r=t.attr("titledata");(n==""||n.replace(/^\s+,""/).replace(/^\s+$/,"")=="")&&$(e.currentTarget).val(r)},addAllPartnerShortUrl:function(){this.$shortUrlPartnerList.html(""),this.PartnerShortUrl.each(this.addOnePartnerShortUrl,this),this.$shortUrlPartnerList.find("tr:odd").addClass("changeColor")},addOnePartnerShortUrl:function(e){var t=new u({model:e,collection:this.PartnerShortUrl});this.$shortUrlPartnerList.append(t.render().el)},addAllPartner:function(){this.$partnerList.html(""),this.Partners.each(this.addOnePartner,this),this.$partnerList.find("tr:odd").addClass("changeColor")},addOnePartner:function(e){var t=new o({model:e,collection:this.Partners});this.$partnerList.append(t.render().el)},addAllPartnerAccount:function(){this.$partnerAccountList.html(""),this.PartnerAccounts.each(this.addOnePartnerAccount,this),this.$partnerAccountList.find("tr:odd").addClass("changeColor")},addOnePartnerAccount:function(e){var t=new a({model:e,partnerList:this.Partners,shortUrlPartnerList:this.PartnerShortUrl});this.$partnerAccountList.append(t.render().el)},saveAccount:function(){var e=this;$.unblockUI();var t=this.PartnerAccounts.createAccount({partnerid:parseInt($("#account_partnerid").text()),loginname:$("#account_name").text(),passwd:$("#account_pwd").text()}),n=$("#createPartnerAccount").attr("partnerType");t.save({},{success:function(t){t.set("partnername",$("#account_partnername").text());var r=null;n=="shortUrl"?(r=e.PartnerShortUrl.get($("#account_partnerid").text()),t.set("partnertype",c.PartnerExtention.PartnerManagement.linkChannel)):n=="package"&&(r=e.Partners.get($("#account_partnerid").text()),t.set("partnertype",c.PartnerExtention.PartnerManagement.subpackageChannel)),e.PartnerAccounts.add(t,{at:0}),r.set("iscreate",!0)}})},cancleCreateAccount:function(){$.unblockUI()},selectAllPartner:function(){$('#combinePartner input[type="checkbox"]').attr("checked","checked")},deSelectAllPartner:function(){$('#combinePartner input[type="checkbox"]').removeAttr("checked")},saveCombinedPartners:function(){if($("#combinePartner").attr("status")=="none")$.unblockUI();else{var e=$("#combinePartner input:checked"),t=$("#combinePartner").attr("partnerType");if(!e.length){alert(c.PartnerExtention.PartnerManagement.selectNeedMergeChannel);return}var n=[$('#combinePartner input[type="hidden"]').val()];_.each(e,function(e){n.push($(e).val())}),n=n.join(","),this.combinePartners(n,t)}},cancelCombile:function(){$.unblockUI()},combinePartners:function(e,t){var n=this;$.ajax({url:"/game/v1/partner/combine",type:"get",data:{partnerIds:e},success:function(e){if(t=="shortUrl"){n.PartnerShortUrl.addPlainObject(e,{merge:!0});var r=e.channelstr;r=r.split(","),_.each(r,function(e){n.PartnerShortUrl.remove(n.PartnerShortUrl.get(e))})}else if(t=="package"){n.Partners.addPlainObject(e,{merge:!0});var r=e.channelstr;r=r.split(","),_.each(r,function(e){n.Partners.remove(n.Partners.get(e))})}},complete:function(){$.unblockUI()}})}});return h}),define("models/virtualEconomy/VirtualEconomy",["models/BaseModel"],function(e){var t=[{name:"getPurchase",url:"/v1/virtualCurrency/virtualCurrencyPurchase"},{name:"getConsume",url:"/v1/virtualCurrency/virtualCurrencyConsume"},{name:"getConsumeTimes",url:"/v1/virtualCurrency/vcConsumeTimes"},{name:"getConsumeNumOfPeople",url:"/v1/virtualCurrency/vcConsumeNumOfPeople"},{name:"getRetention",url:"/v1/virtualCurrency/totalRetentionVirtualCurrency"},{name:"getItemsAndIncomes",url:"/v1/consumeAnalyse/itemSellAndIncomeRate"},{name:"fetchItemsAndTypes",url:"/v1/consumeAnalyse/itemAndType"},{name:"fetchConsumeHabbit",url:"/v1/consumeAnalyse/levelItemConsumePreference"}];return e.init(t)}),define("text!templates/virtualEconomy/virtualCoin.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r\r		<div id="purchaseConsumeCode">\r			<div class="title" role="title">\r				<strong class="l"><%=VirtualEconomy.VirtualCoin.dummyCoinPurchaseConsume%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="chart-staus-coin" class="tab hover"><%=GameCommon.vcStatus%></a>\r	                <a data-tab="consumeTimes" class="tab"><%=VirtualEconomy.VirtualCoin.consumeTimes%></a>\r	                <a data-tab="consumeNumOfPeople" class="tab"><%=VirtualEconomy.VirtualCoin.consumeNumOfPeople%></a>\r	                <a data-tab="chart-total-coin" class="tab"><%=VirtualEconomy.VirtualCoin.accumulativeRetainDummyCoin%></a>\r	                <div class="info l" id="sumDiv">\r	                </div>\r				</div>\r				<div class="picbox_chart_table" role="remarkBottom">\r					<div id="purchaseConsumeCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="purchaseConsumeCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r\r	<div class="boxmax">\r		<div id="consumeLevelCode">\r			<div class="title" role="title">\r				<strong class="l"><%=VirtualEconomy.VirtualCoin.levelDummyCoinConsume%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="levelDummyCoinConsume" class="tab hover"><%=VirtualEconomy.VirtualCoin.dummyCoinConsume%></a>\r	                <a data-tab="levelConsumeTimes" class="tab"><%=VirtualEconomy.VirtualCoin.consumeTimes%></a>\r	                <a data-tab="levelConsumeNumOfPeople" class="tab"><%=VirtualEconomy.VirtualCoin.consumeNumOfPeople%></a>\r				</div>\r				<div role="picbox_chart_table">\r					<div id="consumeLevelCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r					<div id="consumeLevelCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r				</div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="consumeMissionCode">\r				<div class="title" role="title">\r					<strong class="l"><%=VirtualEconomy.VirtualCoin.tollgateDummyCoinConsume%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="consumeMissionCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="consumeMissionCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="consumeItemCode">\r				<div class="title" role="title">\r					<strong class="l"><%=VirtualEconomy.VirtualCoin.propsDummyConsume%></strong>\r				</div>\r				<div class="textbox">\r					<div role="picbox_chart_table">\r						<div id="consumeItemCode-chart" class="minpicbox" role="chart" class="picbox_chart_table_div picbox"></div>\r						<div id="consumeItemCode-table" class="minpicbox" role="table" class="picbox_chart_table_div picbox"></div>\r					</div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/virtualEconomy/VirtualCoinView",["backbone","models/virtualEconomy/VirtualEconomy","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","text!templates/virtualEconomy/virtualCoin.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#container",initialize:function(){$("#container").html(_.template(a,f)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.render()},render:function(){return this.renderPurchaseAndConsume(),this.renderConsumeByLevel(),this.renderConsumeByMission(),this.renderConsumeByItem(),this},renderPurchaseAndConsume:function(){var e,r,o=$("#purchaseConsumeCode").tabs(function(u){switch(u){case"chart-staus-coin":e="getPurchase",r=f.GameCommon.vcStatus,unitItem="";break;case"consumeTimes":e="getConsumeTimes",r=f.VirtualEconomy.VirtualCoin.consumeTimes,unitItem=s.getTimesItem();break;case"consumeNumOfPeople":e="getConsumeNumOfPeople",r=f.VirtualEconomy.VirtualCoin.consumeNumOfPeople,unitItem=s.getAccountNumItem();break;case"chart-total-coin":e="getRetention",r=f.VirtualEconomy.VirtualCoin.accumulativeRetain,unitItem=""}$("#sumDiv").html(""),t[e]({data:Params,success:function(t){var s,u,a,l,c=null,h=!1;if(e==="getPurchase"){var p=t.purchase,d=t.consume,v=t.give,m=_.pluck(p,"value"),g=_.pluck(d,"value"),y=_.pluck(v,"value");u=_.pluck(p,"item"),s=[{name:f.GameCommon.reward,data:y,stack:0},{name:f.GameCommon.purchase,data:m,stack:0},{name:f.GameCommon.expense,data:g,stack:1}],a=[f.GameCommon.date,f.GameCommon.purchase,f.GameCommon.reward,f.GameCommon.expense],l=_.zip(u,m,y,g),c="normal",h=!0,$("#sumDiv").html(f.GameCommon.purchase+":<font><em>"+_.sum(m)+"</em></font> | "+f.GameCommon.reward+":<font><em>"+_.sum(y)+"</em></font> | "+f.GameCommon.expense+":<font><em>"+_.sum(g)+"</em></font>")}else{var b=_.pluck(t,"value");u=_.pluck(t,"item"),s=[{name:r,data:b}],l=_.zip(u,b),a=[f.GameCommon.date,r]}n.chart({id:"purchaseConsumeCode-chart",x:u,series:s,stacking:c,legend:h,xType:"date",unitItem:[unitItem]}),i.drawTable({head:a,body:l,$el:$("#purchaseConsumeCode-table"),headType:"date"}),o.head=a,o.body=l}})})},renderConsumeByLevel:function(){var e=_.clone(Params);e.groupBy="level";var r=$("#consumeLevelCode").tabs(function(o){switch(o){case"levelDummyCoinConsume":api="getConsume",name=f.VirtualEconomy.VirtualCoin.dummyCoinConsume,unitItem="";break;case"levelConsumeTimes":api="getConsumeTimes",name=f.VirtualEconomy.VirtualCoin.consumeTimes,unitItem=s.getTimesItem();break;case"levelConsumeNumOfPeople":api="getConsumeNumOfPeople",name=f.VirtualEconomy.VirtualCoin.consumeNumOfPeople,unitItem=s.getAccountNumItem()}t[api]({data:e,success:function(e){n.chart({id:"consumeLevelCode-chart",type:"column",level:{data:e,name:name,unitPosition:"last",unit:""},unitItem:[unitItem]});var t=_.pluck(e,"item"),e=_.pluck(e,"value"),u=_.zip(t,e),a=[f.GameCommon.grade,name];if(o=="levelConsumeTimes"||o=="levelConsumeNumOfPeople")a=[f.GameCommon.grade,name+"("+s.getUnitByItem(unitItem)+")"];i.drawTable({head:a,body:u,$el:$("#consumeLevelCode-table")}),r.head=a,r.body=u}})})},renderConsumeByMission:function(){var e=_.clone(Params);e.groupBy="mission";var r=$("#consumeMissionCode").tabs(function(){t.getConsume({data:e,success:function(e){var t=_.pluck(e,"item"),s=_.pluck(e,"value"),o=[{name:f.VirtualEconomy.VirtualCoin.dummyCoinConsume,data:s}],u=_.percent(s,3,1),a=_.zip(t,s,u),l=[f.GameCommon.tollgate,f.VirtualEconomy.VirtualCoin.dummyCoinConsume,f.GameCommon.percentage];i.drawTable({head:l,body:a,$el:$("#consumeMissionCode-table")}),n.chartBar({id:"consumeMissionCode-chart",x:{left:t,right:u},series:o,pagination:!0}),r.head=l,r.body=a}})})},renderConsumeByItem:function(){var e=_.clone(Params);e.groupBy="itemid";var r=$("#consumeItemCode").tabs(function(){t.getConsume({data:e,success:function(e){var t=_.pluck(e,"item"),s=_.pluck(e,"value"),o=[{name:f.VirtualEconomy.VirtualCoin.dummyCoinConsume,data:s}],u=_.percent(s,3,1),a=_.zip(t,s,u),l=["道具",f.VirtualEconomy.VirtualCoin.dummyCoinConsume,f.GameCommon.percentage];i.drawTable({head:l,body:a,$el:$("#consumeItemCode-table")}),n.chartBar({id:"consumeItemCode-chart",x:{left:t,right:u},series:o,pagination:!0}),r.head=l,r.body=a}})})}});return l}),define("text!templates/virtualEconomy/consumeAnalysis.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n			<div id="showSelectedPartners" class="Editor hide Filter" >\r\n				<div id="selectVersion"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="boxmax">\r\n		<div id="saleNumsAndIncomesCode">\r\n			<div class="titlemax"  role="title">\r\n				<strong class="l"><%=VirtualEconomy.ConsumeAnalysis.categorySalesQuantityFSTS%></strong>\r\n	            <div id="vc-indexTab" class="buttonDiv l">\r\n					<label class="l selectlble"><%=VirtualEconomy.ConsumeAnalysis.classifyType%>：</label>\r\n	            	<a data="itemtype" class="but l butL"><%=VirtualEconomy.ConsumeAnalysis.oneleveClassify%></a>\r\n	            	<a data="itemid" class="but l butR hover"><%=VirtualEconomy.ConsumeAnalysis.allitems%></a>\r\n	            </div>\r\n			</div>\r\n			<div class="textbox">\r\n				<div role="picbox_chart_table">\r\n					<div id="saleNumsAndIncomesCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="saleNumsAndIncomesCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="boxmax">\r\n		<div id="consumeHabbitAnalasisCode">\r\n			<div class="titlemax" role="title">\r\n				<strong class="l"><%=VirtualEconomy.ConsumeAnalysis.levelConsumerPreferences%></strong>\r\n				<div id="habbit-indexTab" class="buttonDiv l">\r\n					<label class="l selectlble"><%=VirtualEconomy.ConsumeAnalysis.classifyType%>：</label>\r\n	            	<a data="itemtype" class="but l butL"><%=VirtualEconomy.ConsumeAnalysis.oneleveClassify%></a>\r\n	            	<a data="itemid" class="but l butR hover"><%=VirtualEconomy.ConsumeAnalysis.allitems%></a>\r\n	            </div>\r\n			</div>\r\n			<div class="textbox">\r\n				<div class="Condition after condition_min">\r\n					<div id="selectGroups"></div>\r\n					<a id="addSelect" class="Cancel l hide"><img src="images/add_min.png" /></a>\r\n				</div>\r\n				<div class="box_top">\r\n					<div class="buttonDiv l" id="puchaseOrConsume">\r\n						<a class="tab hover" data="itemPurchase"><%=VirtualEconomy.ConsumeAnalysis.propsPurchase%></a>\r\n						<a class="tab" data="itemUse"><%=GameCommon.propsConsume%></a>\r\n					</div>\r\n					<div class="buttonDiv l" id="amountOrCoin">\r\n						<a class="tab hover" data="number"><%=VirtualEconomy.ConsumeAnalysis.quantity%></a>\r\n						<a class="tab" data="vc"><%=GameCommon.dummyCoin%></a>\r\n					</div>\r\n				</div>\r\n				<div role="picbox_chart_table">\r\n					<div id="consumeHabbitAnalasisCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="consumeHabbitAnalasisCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("views/virtualEconomy/ConsumeAnalysisView",["backbone","models/virtualEconomy/VirtualEconomy","models/Constant","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","utils/ModelBox","text!templates/virtualEconomy/consumeAnalysis.html","text!templates/public/loading.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=e.View.extend({el:"#container",events:{"click #vc-indexTab>a":"renderSales","click #habbit-indexTab>a":"switchItemTab","click #puchaseOrConsume>a":"switchPuchaseOrConsumeTab","click #amountOrCoin>a":"switchAmountOrCoin","click #addSelect":"addSelect","change #selectGroups select":"selectItem","click #selectGroups .closeselect":"removeSelect"},initialize:function(){$("#container").html(_.template(l,p)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.render()},render:function(){return this.renderSaleNumsAndIncomes("itemid"),this.renderConsumeHabbit(),this},renderSaleNumsAndIncomes:function(e){var n=_.clone(Params);n.groupBy=e;var s=$("#saleNumsAndIncomesCode").tabs(function(){t.getItemsAndIncomes({data:n,success:function(t){var n=t.times,u=t.income,a=_.pluck(n,"item"),f=_.pluck(n,"value"),l=_.pluck(u,"value"),c=_.map(_.percent(f,3),function(e){return parseFloat((e*100).toFixed(1))}),h=_.map(_.percent(l,3),function(e){return parseFloat((e*100).toFixed(1))}),d=[{name:p.VirtualEconomy.ConsumeAnalysis.consumptionNumber,data:c},{name:p.VirtualEconomy.ConsumeAnalysis.Purchases,data:h}],v=null,m=null;e=="itemid"&&(v=-30,m="right"),r.chart({id:"saleNumsAndIncomesCode-chart",type:"column",series:d,x:a,legend:!0,rotation:v,align:m,yLeftUnit:o.getPercentItem(),unitItem:[o.getPercentItem(),o.getPercentItem()]});var g=_.zip(a,f,_.map(c,function(e){return e+"%"}),l,_.map(h,function(e){return e+"%"})),y=[p.GameCommon.goodsName,p.VirtualEconomy.ConsumeAnalysis.consumptionNumber,p.VirtualEconomy.ConsumeAnalysis.consumptionNumber+"-"+p.GameCommon.percentage,p.VirtualEconomy.ConsumeAnalysis.Purchases,p.VirtualEconomy.ConsumeAnalysis.Purchases+"-"+p.GameCommon.percentage];i.drawTable({head:y,body:g,$el:$("#saleNumsAndIncomesCode-table")}),s.head=y,s.body=g}})})},renderSales:function(e){var t=$(e.currentTarget);$("#vc-indexTab>a").removeClass("hover"),t.addClass("hover"),this.renderSaleNumsAndIncomes(t.attr("data"))},switchItemTab:function(e){var t=$(e.currentTarget);$("#habbit-indexTab>a").removeClass("hover"),t.addClass("hover"),this.habbit.category=t.attr("data"),this.addDefaultSelects()},switchPuchaseOrConsumeTab:function(e){var t=$(e.currentTarget);$("#puchaseOrConsume>a").removeClass("hover"),t.addClass("hover"),this.habbit.mode=t.attr("data");var n=t.attr("data");n=="itemUse"?($('#amountOrCoin>a[data="vc"]').removeClass("hover").hide(),$('#amountOrCoin>a[data="number"]').addClass("hover"),this.habbit.dimension="number"):$('#amountOrCoin>a[data="vc"]').show(),this.requestHabbitData()},switchAmountOrCoin:function(e){var t=$(e.currentTarget);$("#amountOrCoin>a").removeClass("hover"),t.addClass("hover"),this.habbit.dimension=t.attr("data"),this.requestHabbitData()},renderConsumeHabbit:function(){this.habbit={category:"itemid",mode:"itemPurchase",dimension:"number",items:[],types:[],getDrawList:function(){return this.category=="itemid"?this.items:this.types}},$('#consumeHabbitAnalasisCode div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#consumeHabbitAnalasisCode").tabs(function(){}),this.fetchItemsAndTypes()},fetchItemsAndTypes:function(){var e=this;t.fetchItemsAndTypes({data:Params,success:function(t){e.habbit.items=t.item,e.habbit.types=t.type,e.addDefaultSelects()}})},addDefaultSelects:function(){var e=this.habbit.getDrawList();$("#selectGroups").html("");if(e.length<2){console.log(p.VirtualEconomy.ConsumeAnalysis.noDataToCompare),$("#consumeHabbitAnalasisCode-chart").html(""),$("#consumeHabbitAnalasisCode-table").html("");return}var t=this,n=_.first(e,2);_.each(n,function(e){t.addSelect(e.item)}),this.requestHabbitData(),e.length>2&&$("#addSelect").show()},addSelect:function(e){var t=this.habbit.getDrawList().length,n=$("#selectGroups select").length;if(n>=t||n>=5){f.alert({message:p.VirtualEconomy.ConsumeAnalysis.cannotAdd});return}var e=e||"-1",r='<a class="relative l"><select id="select'+(n+1)+'" style="left:100px;position: absolute">						<option value="-1">--'+p.VirtualEconomy.ConsumeAnalysis.pleaseSelect+'--</option>						<%_.each(list,function(o){							var item = o.item,s = "";							if(item == value) s = "selected";						%>							<option <%= s%> value="<%=o.item%>"><%=o.value%></option>						<%})%>					</select><span class="closeselect"></span></a>';$("#selectGroups").append(_.template(r,{list:this.habbit.getDrawList(),value:e})),$("#selectGroups select").sSelect()},selectItem:function(e){var t=$(e.currentTarget),n=$("#selectGroups select"),r=t.val();if(r=="-1")return;var i=this.getAllSelectValues(),s=i.length;if(s!=_.uniq(i).length){f.alert({message:p.VirtualEconomy.ConsumeAnalysis.pleaseSelectAgain}),t.val("-1");return}this.requestHabbitData()},getAllSelectValues:function(){var e=$("#selectGroups select");return _.without(_.map(e,function(e){return $(e).val()}),"-1")},requestHabbitData:function(){var e=this.getAllSelectValues(),n=_.clone(Params);n.itemAction=this.habbit.mode,n.itemActionNumOrVC=this.habbit.dimension,n[this.habbit.category=="itemid"?"itemIdStr":"itemTypeIdStr"]=e.join(",");var o=this;$("#consumeItemCode").tabs(function(){t.fetchConsumeHabbit({data:n,success:function(e){var t=[],n=[],u=[],a=[p.GameCommon.grade],f=[];for(attr in e){t&&t.length==0&&(t=_.pluck(e[attr],"item"),f[0]=t);var l=o.findNamebyId(attr),c=_.pluck(e[attr],"value");n.push({name:l,data:c}),a.push(l),f.push(c)}r.chart({id:"consumeHabbitAnalasisCode-chart",type:"column",series:n,x:t,legend:!0});var d=f[0].length,v;for(var m=0;m<d;m++){v=[];for(var g=0;g<f.length;g++){var y=f[g][m]||0;v.push(y)}u.push(v)}i.drawTable({head:a,body:u,$el:$("#consumeHabbitAnalasisCode-table")}),$('#consumeHabbitAnalasisCode div[role="title"] a[role="excel"]').click(function(){var e=$("#habbit-indexTab a[data='"+o.habbit.category+"']").contents().filter(function(){return this.nodeType===3}).text()||"",t=p.VirtualEconomy.ConsumeAnalysis.levelConsumerPreferences+e+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=s.buildArray({head:a,body:u}),r=_.template(h,{excelName:t,excelArray:n});$("body").append(r),$("#excelExportForm").submit(),$("#excelExportForm").remove()})}})})},findNamebyId:function(e){var t=_.find(this.habbit.getDrawList(),function(t){return t.item==e});return t?t.value:e},removeSelect:function(e){var t=$(e.currentTarget),n=t.parent(),r=n.find("select");if(r.val()=="-1"){n.remove();return}var i=this.getAllSelectValues();if(i.length<3){f.alert({message:p.VirtualEconomy.ConsumeAnalysis.cannotDelete});return}n.remove(),this.requestHabbitData()}});return d}),define("models/virtualEconomy/ConsumePoint",["models/BaseModel"],function(e){var t=[{name:"fetchItemPointList",url:"/v1/consumePoint/fetchItemPointList"},{name:"fetchPurchaseItemNumberList",url:"/v1/consumePoint/fetchPurchaseItemNumberList"},{name:"fetchPurchaseVirtualCurrencyList",url:"/v1/consumePoint/fetchPurchaseVirtualCurrencyList"},{name:"fetchUseinfoItemNumberList",url:"/v1/consumePoint/fetchUseinfoItemNumberList"},{name:"fetchConsumeNumOfPeople",url:"/v1/virtualCurrency/vcConsumeNumOfPeople"}];return e.init(t)}),define("text!templates/virtualEconomy/consumePoint.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		\r		<div id="virtualEconomyConsumePointtopItems">\r			<div class="titlemax" role="title">\r				<strong class="l"><%=VirtualEconomy.ConsumePoint.topItems%></strong>\r	            <div id="indexTab" class="buttonDiv l">\r	            	<a data="itemtype" class="but l butL itemtab"><%=VirtualEconomy.ConsumePoint.byCategory%></a>\r	            	<a data="itemid" class="but l butR hover itemtab"><%=VirtualEconomy.ConsumePoint.byConsumePoint%></a>\r	            </div>\r			</div>\r		</div>\r		<div class="tablebox" id="itemDiv">\r			\r		</div>\r\r	</div>\r\r</div>'}),define("text!templates/virtualEconomy/consumePoint-table.html",[],function(){return'<table id=\'itemTable\' cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style_ope">\r      <thead id="itemTableHead">\r      	<tr data="amount">\r          	<th class="left aroww hover-tooltip" data-th="cpGoodsname" width="15%"><p><span><%=GameCommon.goodsName%></span></p></th>\r              <th class="hover-tooltip" data-th="cpQuantityPurchase" width="15%"><p><%=VirtualEconomy.ConsumePoint.quantityPurchase%></p></th>\r              <th class="hover-tooltip" data-th="cpDummyCoinTotalValue" width="15%"><p><%=GameCommon.dummyCoinTotalValue%></p></th>\r              <th class="hover-tooltip" data-th="cpQuantityConsume" width="15%"><p><%=VirtualEconomy.ConsumePoint.quantityConsume%></p></th>\r              <th class="hover-tooltip" data-th="cpDailyTrend" width="15%"><p><%=GameCommon.dailyTrend%></p></th>\r              <th class="hover-tooltip" data-th="cpLevelTollgate" width="15%"><p><%=VirtualEconomy.ConsumePoint.levelTollgate%></p></th>\r          </tr>\r      </thead>\r      <tbody data="amount" id="itemTableBody">\r      	{{#resultData}}\r      	<tr class="">\r		  <td width="15%" class="left">\r		  	{{itemName}}\r		  	{{#platformFlag}}\r		  		<img style="margin:9px 0 0 5px; height:13px" src="images/{{platformFlag}}.png">\r		  	{{/platformFlag}}\r		  </td>\r		  <td width="15%">{{showtotalItemNumber}}</td>\r		  <td width="15%">{{showtotalCurrency}}</td>\r		  <td width="15%">{{showtotalUseNumber}}</td>\r		  <td width="15%"><a class="dayDetail detail" data-id="{{itemId}}" data-name="{{itemName}}"><%=VirtualEconomy.Management.view%></a></td>\r		  <td width="10%">\r		  	<a class="levelDetail detail" data-id="{{itemId}}" data-name="{{itemName}}"><%=GameCommon.grade%></a>\r		  	<a class="missionDetail detail" data-id="{{itemId}}" data-name="{{itemName}}"><%=GameCommon.tollgate%></a>\r		  </td>\r 		</tr>\r 		{{/resultData}}\r 		\r 		{{^resultData}}\r 			<tr><td colspan="6" class="noData"><%=GameCommon.noData%></td></tr>\r 		{{/resultData}}\r      </tbody>\r  </table>\r'}),define("views/virtualEconomy/ConsumePointView",["backbone","mustache","models/virtualEconomy/ConsumePoint","models/Constant","utils/HighchartUtil","utils/dataTableUtil","utils/RegexUtil","utils/excelDataUtil","views/public/DatePicker","views/public/SelectView","text!templates/public/loading.html","text!templates/virtualEconomy/consumePoint.html","text!templates/virtualEconomy/consumePoint-table.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=e.View.extend({el:"#container",events:{"click #indexTab a.itemtab":"tabSelect","click #itemTableBody a.detail":"showDetail"},initialize:function(){$("#container").html(_.template(c,d)),new a({el:"#datePicker"}),new f({el:"#selectChoose"}),this.groupBy="itemid",this.render()},render:function(){return this.renderItemList(),this},renderItemList:function(){$('#virtualEconomyConsumePointtopItems div[role="title"] a[role="excel"]').remove(),$('#virtualEconomyConsumePointtopItems div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#virtualEconomyConsumePointtopItems").tabs({indicator:!0});var e=_.clone(Params);e.groupBy=this.groupBy,$("#itemDiv").html(_.template(l,d)),n.fetchItemPointList({data:e,success:function(n){var r=null;e.groupBy==="itemid"?r={resultData:n,platformFlag:function(){return this.platformId==1?"Android":this.platformId==2?"IOS":this.platformId==4?"win7":"Android"}}:r={resultData:n,platformFlag:function(){return!1}},r.showtotalCurrency=function(){return o.formatDigit(this.totalCurrency)},r.showtotalItemNumber=function(){return o.formatDigit(this.totalItemNumber)},r.showtotalUseNumber=function(){return o.formatDigit(this.totalUseNumber)},$("#itemDiv").html(t.render(_.template(h,d),r));var i=$("<table></table>");i.append($("#itemDiv table").html()),$('#virtualEconomyConsumePointtopItems div[role="title"] a[role="excel"]').click(function(){var t=$('#virtualEconomyConsumePointtopItems div[role="title"] a[data="'+e.groupBy+'"]').contents().filter(function(){return this.nodeType===3}).text()||"",n=d.VirtualEconomy.ConsumePoint.topItems+"-"+t+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",r=u.tableToJson(i[0]),s=_.template(p,{excelName:n,excelArray:r});$("body").append(s),$("#excelExportForm").submit(),$("#excelExportForm").remove()}),n.length&&s.dataTable({$el:$("#itemTable")}),$("#itemTable").tabs({hoverTooltip:!0})}})},tabSelect:function(e){$("#indexTab a").removeClass("hover"),$(e.currentTarget).addClass("hover"),this.groupBy=$(e.currentTarget).attr("data"),this.render()},showDetail:function(e){var t=_.clone(Params),r=$(e.currentTarget),o=r.attr("class"),u=r.attr("data-id"),a=r.attr("data-name"),f=r.parent().parent(),l,c='<tr class="itempointdetail"><td colspan="6"><div class="mintdbox mintable"><div class="title"><strong id="chartTitle_'+u+'"></strong></div>'+'<div id="itemDetailCode'+u+'" class="textbox">'+'<div class="box_top" role="tabbar">'+'<a data-tab="purchaseNum_'+u+'" class="tab hover">'+d.VirtualEconomy.ConsumePoint.quantityPurchase+"</a>"+'<a data-tab="vcNum_'+u+'" class="tab">'+d.GameCommon.dummyCoinTotalValue+"</a>"+'<a data-tab="useNum_'+u+'" class="tab">'+d.VirtualEconomy.ConsumePoint.quantityConsume+"</a>"+'<a data-tab="userNum_'+u+'" class="tab">'+d.VirtualEconomy.VirtualCoin.purchaseItemUserNums+"</a>"+"</div>"+'<div role="picbox_chart_table">'+'<div id="itemDetailCode'+u+'-chart" role="chart" class="minpicbox"></div>'+'<div id="itemDetailCode'+u+'-table" role="table" class="minpicbox"></div>'+"</div>"+'<div class="after">'+'<a role="chartBtn" class="pic_but l hover"><font class="pic_icon">'+d.GameCommon.chart+"</font></a>"+'<a role="tableBtn" class="pic_but l"><font class="table_icon">'+d.GameCommon.grid+"</font></a>"+"</div>"+"</div>"+"</div>"+"</td>"+"</tr>";f.next("tr.itempointdetail").remove();if(r.html()==d.GameCommon.packUp){f.find("a").each(function(e){e==0?$(this).html(d.VirtualEconomy.Management.view):e==1?$(this).html(d.GameCommon.grade):e==2&&$(this).html(d.GameCommon.tollgate)}),f.removeClass("hover");return}f.find("a").each(function(e){e==0?$(this).html(d.VirtualEconomy.Management.view):e==1?$(this).html(d.GameCommon.grade):e==2&&$(this).html(d.GameCommon.tollgate)}),r.html(d.GameCommon.packUp),f.addClass("hover"),f.after(c),t.itemId=null,t.itemtypeId=null,this.groupBy=="itemid"?t.itemId=u:this.groupBy=="itemtype"&&(t.itemtypeId=u);var h;o=="levelDetail detail"?(t.groupBy="level",t.pageSize=10,h="-"+d.VirtualEconomy.ConsumePoint.groupbyLevel):o=="missionDetail detail"?(t.groupBy="mission",t.pageSize=10,h="-"+d.VirtualEconomy.ConsumePoint.groupbyTollgate):(t.groupBy="",t.pageSize=null,h="-"+d.GameCommon.dailyTrend),$("#chartTitle_"+u).html(a+h),f.next("tr.hide").removeClass("hide"),$("#itemDetailCode"+u).tabs(function(e){var r="",a;switch(e){case"purchaseNum_"+u:o=="levelDetail detail"?t.groupBy="level":o=="missionDetail detail"?t.groupBy="mission":t.groupBy="",r="fetchPurchaseItemNumberList",a=d.VirtualEconomy.ConsumePoint.quantityPurchase;break;case"vcNum_"+u:o=="levelDetail detail"?t.groupBy="level":o=="missionDetail detail"?t.groupBy="mission":t.groupBy="",r="fetchPurchaseVirtualCurrencyList",a=d.GameCommon.dummyCoinTotalValue;break;case"useNum_"+u:o=="levelDetail detail"?t.groupBy="level":o=="missionDetail detail"?t.groupBy="mission":t.groupBy="",r="fetchUseinfoItemNumberList",a=d.VirtualEconomy.ConsumePoint.quantityConsume;break;case"userNum_"+u:o=="levelDetail detail"?t.groupBy="PurchaseLevel":o=="missionDetail detail"?t.groupBy="PurchaseMission":t.groupBy="",r="fetchConsumeNumOfPeople",a=d.VirtualEconomy.VirtualCoin.purchaseItemUserNums}n[r]({data:t,success:function(e){if(t.groupBy==""){var n=_.pluck(e,"item"),e=_.pluck(e,"value"),r=[{name:a,data:e}],o=_.zip(n,e),f=[d.GameCommon.date,a];s.drawTable({head:f,body:o,$el:$("#itemDetailCode"+u+"-table"),headType:"date"}),i.chart({id:"itemDetailCode"+u+"-chart",x:n,series:r,xType:"date"})}else{var n=_.pluck(e,"item"),l=_.pluck(e,"value"),r=[{name:a,data:l}],c=_.percent(l,3,1),h="";if(t.groupBy=="PurchaseLevel"||t.groupBy=="level")h=d.GameCommon.grade;else if(t.groupBy=="PurchaseMission"||t.groupBy=="mission")h=d.GameCommon.tollgate;var o=_.zip(n,l,c),f=[h,a,d.GameCommon.percentage];s.drawTable({head:f,body:o,$el:$("#itemDetailCode"+u+"-table")}),i.chartBar({id:"itemDetailCode"+u+"-chart",x:{left:n,right:c},series:r,pagination:!0})}}})})}});return v}),define("models/virtualEconomy/ConsumePointManage",["models/BaseModel"],function(e){var t=[{name:"fetchItemList",url:"/v1/consumePointManage/fetchItemList"},{name:"fetchItemTypeList",url:"/v1/consumePointManage/fetchItemTypeList"},{name:"updateItemName",url:"/v1/consumePointManage/updateItemName"},{name:"hideOrShowItem",url:"/v1/consumePointManage/hideOrShowItem"},{name:"updateItemType",url:"/v1/consumePointManage/updateItemType"},{name:"addItemType",url:"/v1/consumePointManage/addItemType"},{name:"deleteItemType",url:"/v1/consumePointManage/deleteItemType"}];return e.init(t)}),define("text!templates/virtualEconomy/management.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div id="virtualEconomyConsumePointManage">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=GameCommon.consumePointManage%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox" id="itemManage_div">\r\n			\r\n		</div>\r\n\r\n	</div>\r\n\r\n</div>'}),define("text!templates/virtualEconomy/management_table.html",[],function(){return'<table id="itemManage_table" cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1">\r      <thead id="partnerTableHead">\r      	<tr data="amount">\r          	<th class="hover-tooltip" data-th="cpmdesignation" width="25%"><p><%=GameCommon.designation%></p></th>\r              <th class="hover-tooltip" data-th="cpmsetAlias" width="40%"><p><%=GameCommon.setAlias%></p></th>\r              <th class="hover-tooltip" data-th="cpmconsumePointCategory" width="30%" class="left"><p><%=VirtualEconomy.Management.consumePointCategory%></p></th>\r              <th class="hover-tooltip" data-th="cpmoperate" width="15%"><p><%=GameCommon.operate%></p></th>\r          </tr>\r      </thead>\r      <tbody data="amount" id="itemManageData">\r      	{{#resultData}}\r   		<tr class="{{trclass}}">\r   	     <td width="25%" >{{itemId}}<img style="margin:9px 0 0 5px; height:13px" src="images/{{platformFlag}}.png"></td> \r		 <td width="40%"><input data-id="{{id}}" data-name="{{name}}" id="editItemName" class="notEditorput" type="text" value="{{name}}"/></td>\r		  <td width="30%" class="left">\r          <div class="l itemnameDiv" id="item_{{id}}">{{itemtypeName}}</div>\r          <a class="Cancel tableToggleBut l" data-id="{{id}}"><b><%=VirtualEconomy.Management.category%></b></a>\r      </td>\r		  <td width="15%"><a class="ishidden" data="{{id}}" ishidden="{{ishidden}}">{{ishidden_format}}</a></td>\r		</tr>\r		{{/resultData}}\r		{{^resultData}}\r			<tr><td colspan="4" class="noData"><%=GameCommon.noData%></td></tr>\r		{{/resultData}}\r	 </tbody>\r</table>\r'}),define("text!templates/virtualEconomy/management_itemtype.html",[],function(){return'<div class="relative l tableToggleDIVrel">\r\n  <div class="Pop_line  tableToggleDIV">\r\n    <div class="timetop">\r\n      <b class="l"><%=VirtualEconomy.Management.setConsumePointCategory%></b><a class="r close"></a>\r\n    </div>\r\n    <div class="Poptxt">\r\n      <ul class="itemtypeDiv" id="itemtypeDiv">\r\n        {{#resultData}}\r\n        <li>\r\n          <a class="changeItemtype" data-id="{{id}}">\r\n            <strong class="l">{{name}}</strong>\r\n            <{{display}} data-id="{{id}}" data-name="{{name}}" class="r deleteItemtype"><%=GameCommon.delete%></{{display}}>\r\n          </a>\r\n        </li>\r\n        {{/resultData}}\r\n      </ul>\r\n      <div class="itemtypebut">\r\n        <!-- <input type="text" class="Editorput" /> -->\r\n      </div>\r\n      <div class="opeDiv after">\r\n          <a id="productDetailConfim" class="timecolse r Confirm"><%=VirtualEconomy.Management.affirm%></a>\r\n          <input id="itemNameInput" type="text" class="Editorput r" value="<%=VirtualEconomy.Management.addNewCategory%>" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}),define("views/virtualEconomy/ManagementView",["backbone","mustache","models/virtualEconomy/ConsumePointManage","utils/ModelBox","utils/excelDataUtil","utils/dataTableUtil","text!templates/public/loading.html","text!templates/virtualEconomy/management.html","text!templates/virtualEconomy/management_table.html","text!templates/virtualEconomy/management_itemtype.html","text!templates/public/excelExport.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click #itemManageData tr a.ishidden":"showOrHiddenItem","click #itemManageData tr a.tableToggleBut":"showItemType","click #itemManageData tr a.close":"hideItemType","click #editItemName":"changeEditInputClass","blur #editItemName":"saveItemName","click #itemtypeDiv li a.changeItemtype":"changeItemType","click #itemtypeDiv li em.deleteItemtype":"deleteItemType","click #productDetailConfim":"addItemType","click #itemNameInput":"itemNameInputClick","blur #itemNameInput":"itemNameInputBlur"},initialize:function(){$("#container").html(_.template(u,c)),this.itemid=0,this.render()},changeEditInputClass:function(e){$(e.currentTarget).attr("class","Editorput")},saveItemName:function(e){var t=$(e.currentTarget).attr("data-id"),i=$(e.currentTarget).attr("data-name"),s=$(e.currentTarget).val();if(i==s){$(e.currentTarget).attr("class","notEditorput");return}var o={id:t,name:s,productId:Params.productID};n.updateItemName({data:o,success:function(t){t==200?($(e.currentTarget).attr("class","notEditorput"),$(e.currentTarget).attr("data-name",s)):t==401?r.alert({message:c.VirtualEconomy.Management.thisNameExisted}):r.alert({message:c.VirtualEconomy.Management.programWrong+t})}})},render:function(){return this.renderTOItemManageList(),this},renderTOItemManageList:function(){$('#virtualEconomyConsumePointManage div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#virtualEconomyConsumePointManage").tabs({indicator:!0}),n.fetchItemList({data:Params,success:function(e){var n={resultData:e,platformFlag:function(){return this.platformId==1?"Android":this.platformId==2?"IOS":this.platformId==4?"win7":"Android"}};n.trclass=function(){return(e.indexOf(this)+1)%2==0?"changeColor":""},n.ishidden_format=function(){return this.ishidden?c.GameCommon.display:c.GameCommon.hide},$("#itemManage_div").html(t.render(_.template(a,c),n));var r=$("<table></table>"),o=$("<thead></thead>"),u=$("<tbody></tbody>");o.append($("#itemManage_table>thead").html()),u.append($("#itemManage_table>tbody").html()),r.append(o).append(u),$('#virtualEconomyConsumePointManage div[role="title"] a[role="excel"]').click(function(){if(e.length){var t=c.GameCommon.consumePointManage+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=i.tableToJson(r[0]),s=_.template(l,{excelName:t,excelArray:n});$("body").append(s),$("#excelExportForm").submit(),$("#excelExportForm").remove()}}),s.dataTable({$el:$("#itemManage_table")}),$("#itemManage_table").tabs({hoverTooltip:!0})}})},showOrHiddenItem:function(e){var t=$(e.currentTarget),i=t.attr("data"),s=t.attr("ishidden"),o=!1;s=="false"?(t.attr("ishidden","true"),t.html(c.GameCommon.display),o=!0):s=="true"&&(t.attr("ishidden","false"),t.html(c.GameCommon.hide),o=!1);var u={id:i,ishidden:o};n.hideOrShowItem({data:u,success:function(e){e!=200&&r.alert({message:c.VirtualEconomy.Management.programWrong+e})}})},showItemType:function(e){this.itemid=$(e.currentTarget).attr("data-id"),n.fetchItemTypeList({data:Params,success:function(n){var r={resultData:n};r.display=function(){return this.default?"i":"em"},$(e.currentTarget).after(t.render(_.template(f,c),r));var i=$("#bottom").offset().top,s=$(e.currentTarget).offset().top+282;s>=i?$(".tableToggleDIV").css({bottom:"-8px"}):$(".tableToggleDIV").css({top:"24px"})}})},hideItemType:function(e){$(".tableToggleDIVrel").remove()},changeItemType:function(e){$("#item_"+this.itemid).html($(e.currentTarget).find("strong").html()),n.updateItemType({data:{id:this.itemid,itemtypeId:$(e.currentTarget).attr("data-id")},success:function(e){e==200?$(".tableToggleDIVrel").remove():r.alert({message:c.VirtualEconomy.Management.programWrong+e})}})},deleteItemType:function(e){var t=$(e.currentTarget).attr("data-id"),i=$(e.currentTarget).attr("data-name");$("#itemManageData tr div.itemnameDiv").each(function(){$(this).html()==i&&$(this).html(c.GameCommon.other)}),n.deleteItemType({data:{id:t},success:function(t){t==200?$(e.currentTarget).parent().remove():r.alert({message:c.VirtualEconomy.Management.programWrong+t})}})},addItemType:function(e){var t=$.trim($("#itemNameInput").val());if(t==c.VirtualEconomy.Management.addNewCategory||t==""||t==" "){r.alert({message:c.VirtualEconomy.Management.enterTypeName});return}n.addItemType({data:{name:t,productId:Params.productID},success:function(e){if(e.code==200){var t=e.obj,n=t.name,i=t.id;$("#itemtypeDiv").append('<li><a class="changeItemtype" data-id="'+i+'"><strong class="l">'+n+"</strong>"+'<em data-id="'+i+'" data-name="'+n+'" class="r deleteItemtype">'+c.GameCommon.delte+"</em></li></a>"),$("#itemNameInput").val(c.VirtualEconomy.Management.addNewCategory)}else e.code==401?r.alert({message:c.VirtualEconomy.Management.thisNameExisted}):r.alert({message:c.VirtualEconomy.Management.programWrong+e})}})},itemNameInputClick:function(e){var t=$(e.currentTarget).val();t==c.VirtualEconomy.Management.addNewCategory&&$(e.currentTarget).val("")},itemNameInputBlur:function(e){var t=$(e.currentTarget).val();(t==""||t==" ")&&$(e.currentTarget).val(c.VirtualEconomy.Management.addNewCategory)}});return h}),define("text!templates/whale/whaleUser.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="whaleWhaleUserRechargeableUser">\r			<div class="titlemax" role="title">\r				<strong class="l"><%=Whale.WhaleUser.rechargeableUser%></strong>				\r				<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>\r				<div class="r">\r					<input type=\'input\' id=\'userIdSearchInput\'placeholder="<%=Whale.WhaleUser.userIDToSearch%>" class="input-condition" />\r					<input type=\'button\' id=\'searchBtn\' value=\'<%=GameCommon.seek%>\' class="btn-search"></input>\r					<input type=\'button\' id=\'clearSearchBtn\' value=\'<%=GameCommon.clear%>\' class="btn-search btn-clear"></input>\r				</div>\r			</div>\r		</div>\r		<div class="tablebox" id="whaleUserList">\r			<table border="0" width="100%" cellpadding="0" cellspacing="0" class="table_style1">\r				<thead>\r					<tr>\r						<th class="hover-tooltip" data-th="wwranking" ><p><%=Whale.WhaleUser.ranking%></p></th>\r						<th class="hover-tooltip" data-th="wwaccountNumber" ><p><%=Whale.WhaleUser.accountNumber%></p></th>\r						<th class="hover-tooltip" data-th="wwrechargeableLimit" ><p><%=Whale.WhaleUser.rechargeableLimit%></p></th>\r						<th class="hover-tooltip" data-th="wwrechargeDummyCoin" ><p><%=Whale.WhaleDetail.rechargeDummyCoin%></p></th>\r						<th class="hover-tooltip" data-th="wwcosumeSum" ><p><%=Whale.WhaleUser.cosumeSum%></p></th>\r						<th class="hover-tooltip" data-th="wwnewIncreasedDate" ><p><%=Whale.WhaleUser.newIncreasedDate%></p></th>\r						<th class="hover-tooltip" data-th="wwcurrentLevel" ><p><%=Whale.WhaleUser.currentLevel%></p></th>\r					</tr>\r				</thead>\r				<tbody>\r				</tbody>\r			</table>\r		</div>\r	</div>\r</div>\r'}),define("text!templates/whale/whaleUser-table.html",[],function(){return'<%_.each(list,function(o,index){%>\r\n	<tr>\r\n		<td><%=offset+index+1%></td>\r\n		<td title="<%=o.userId%>"><a data="<%=o.uid%>" userId="<%=o.userId%>"><%=o.accountName%></a></td>\r\n<!-- 		<td><%=ctUnit%><%= RegexUtil.formatMoneyDigit(CurrencyUtil.standardCash2SepicalCurrency(o.chargeValue,Params.displayCurrency))%></td> -->\r\n		<td><%=ctUnit%><%= RegexUtil.formatMoneyDigit(o.chargeValue)%></td>\r\n		<!--<td><%=ctUnit%><%= o.chargeValue%></td>-->\r\n		<td><%=o.totalVirtualCurrency%></td>\r\n		<td><%=o.totalpurchasecurrency%></td>\r\n		<td><%=o.registerTimeStr%></td>\r\n		<td><%=o.level%></td>\r\n	</tr>\r\n<%});%>\r\n	\r\n'}),define("models/whaleuser/WhaleUser",["models/BaseModel"],function(e){var t=[{name:"chargeUserList",url:"/v1/whaleUser/chargeUserList"},{name:"userProfileInfo",url:"/v1/whaleUser/userProfileInfo"},{name:"chargeInfo",url:"/v1/whaleUser/chargeInfo"},{name:"purchaseInfo",url:"/v1/whaleUser/purchaseInfo"},{name:"itemUseInfo",url:"/v1/whaleUser/itemUseInfo"},{name:"userBehaviorRecord",url:"/v1/whaleUser/userBehaviorRecord"},{name:"userBehaviorDetail",url:"/v1/whaleUser/userBehaviorDetail"},{name:"searchUser",url:"/v1/whaleUser/searchUser"}];return e.init(t)}),define("views/whale/WhaleUserView",["backbone","mustache","utils/dataTableUtil","utils/urlUtil","utils/excelDataUtil","utils/CurrencyUtil","utils/RegexUtil","views/public/DatePicker","views/public/SelectView","text!templates/whale/whaleUser.html","text!templates/whale/whaleUser-table.html","text!templates/public/loading.html","models/whaleuser/WhaleUser","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.table"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=e.View.extend({el:"#container",events:{"click #whaleUserList table a":"toDetail","click #searchBtn":"searchUser","click #clearSearchBtn":"clearSearch"},initialize:function(){$("#container").html(_.template(f,d)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.render()},render:function(){return this.renderChargeUserList(),this},toDetail:function(e){$target=$(e.currentTarget),Params.uid=$target.attr("data"),Params.userId=$target.attr("userId"),location.hash="#page/whale-whaleUserDetail_whaleUser/"+r.parse2Str(Params)},renderChargeUserList:function(){$("#whaleWhaleUserRechargeableUser").tabs({indicator:!0}),Params.uid="",this.showResult("/game/v1/whaleUser/whaleuserList",Params)},searchUser:function(){var e=$("#userIdSearchInput").val();if(e.trim()=="")return alert(d.Whale.WhaleUser.searchEmptyAlert),!1;$("#whaleWhaleUserRechargeableUser").tabs({indicator:!0}),Params.userId=e,this.showResult("/game/v1/whaleUser/searchUser",Params)},clearSearch:function(){$("#userIdSearchInput").val(""),this.renderChargeUserList()},showResult:function(e,t){$("#whaleUserList").drawTable({action:e,data:_.clone(t),success:function(e){var t="<small class='"+Params.displayCurrency+"'></small>",n=_.template(l,{list:e.result,offset:e.offset,ctUnit:t,CurrencyUtil:s,RegexUtil:o});$("#whaleUserList").find("tbody").html(n),$('#whaleWhaleUserRechargeableUser div[role="title"] a[role="excel"]').click(function(){var e=$("<table></table>");e.html($("#whaleUserList").find("table").html());var t=d.Whale.WhaleUser.rechargeableUser+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=i.tableToJson(e[0]),r=_.template(p,{excelName:t,excelArray:n});$("body").append(r),$("#excelExportForm").submit(),$("#excelExportForm").remove()})}}),$("#whaleUserList").tabs({hoverTooltip:!0})}});return v}),define("text!templates/whale/whaleDetail.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax after">\r\n	<div id="accountChangeDiv" class="maintop after">\r\n			<div  class="relative l selectlist">\r\n				<div class="dropselect l">\r\n				<h4 title="<%=Whale.WhaleDetail.accountName%>" class="over"><%=Whale.WhaleDetail.accountName%></h4>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="contentbox l">\r\n			<div id="whaleWhaleDetailAccountNumberInfo">\r\n				<div class="title" role="title">\r\n					<strong><%=Whale.WhaleDetail.accountNumberInfo%></strong>\r\n				</div>\r\n			</div>\r\n			<table id="whale_account" class="table_style2" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n			</table>\r\n		</div>\r\n		<div class="contentbox r">\r\n			<div id="whaleWhaleDetailRechargeableInfo">\r\n				<div class="title" role="title">\r\n					<strong><%=Whale.WhaleDetail.rechargeableInfo%></strong>\r\n				</div>\r\n			</div>\r\n			<table id="whale_charge" class="table_style2" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n			</table>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n		</div>\r\n		<div id="whaleWhaleDetailConsumeOverview">\r\n			<div class="title" role="title">\r\n				<strong><%=Whale.WhaleDetail.consumeOverview%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="textbox">\r\n			<div id="spendSummaryCode">\r\n				<div class="box_top" role="tabbar">\r\n					<a data-tab="chargeInfo" class="tab hover"><%=Whale.WhaleDetail.rechargeable%></a>\r\n	               <a data-tab="purchaseInfo" class="tab"><%=Whale.WhaleDetail.dummyCoinExpense%></a>\r\n	               <a data-tab="itemUseInfo" class="tab"><%=GameCommon.propsConsume%></a>\r\n	               <div class="info r">\r\n	               	SUM：<font id="actionSum"></font>\r\n	               </div>\r\n				</div>\r\n				<div id="chargeInfo" class="mintablebox mintablebox_box">\r\n					<div id="chargeInfo_table" class="mintablebox">\r\n						<table class="table_style1" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n							<thead>\r\n								<tr>\r\n									<th><%=GameCommon.time%></th>\r\n									<th><%=GameCommon.rechargeableType%></th>\r\n									<th><%=Whale.WhaleDetail.rechargeableLimit%></th>\r\n									<th><%=GameCommon.purchaseDummyCoin%></th>\r\n									<th><%=Whale.WhaleDetail.thatTimeLevel%></th>\r\n								</tr>\r\n							</thead>\r\n							<tbody>\r\n							</tbody>\r\n						</table>\r\n					</div>\r\n				</div>\r\n				<div id="purchaseInfo" class="mintablebox mintablebox_box" style="display: none"></div>\r\n				<div id="itemUseInfo" class="mintablebox mintablebox_box"  style="display: none">\r\n					<div class="mintablebox" id="itemUseInfo_table">\r\n						<table class="table_style1" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n							<thead>\r\n								<tr>\r\n									<th sort_name="timeflag"><%=GameCommon.date%></th>\r\n									<th sort_name="itemid"><%=GameCommon.consumePoint%>ID</th>\r\n									<th sort_name="itemname"><%=Whale.WhaleDetail.consumePointAlias%></th>\r\n									<th sort_name="itemnumber"><%=GameCommon.consumeCount%></th>\r\n									<th sort_name="leveltype"><%=Whale.WhaleDetail.thatTimeLevel%></th>\r\n								</tr>\r\n							</thead>\r\n							<tbody>\r\n							</tbody>\r\n						</table>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n\r\n\r\n	<!-- <div class="boxmax">\r\n		<div id="whaleWhaleDetailActionRecord">\r\n			<div class="title" role="title">\r\n				<strong><%=Whale.WhaleDetail.actionRecord%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox">\r\n			<table  class="table_style_ope" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n				<tbody id="whale_behavior">\r\n					\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</div> -->\r\n</div>\r\n'}),define("text!templates/whale/whale_account.html",[],function(){return'<tr>\r\n	<td class="left borno">{{Whale.WhaleDetail.accountNumber}}ID</td>\r\n	<td class="borno" width="50%" title="{{userId}}"><b>{{userId}}</b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left">{{Whale.WhaleDetail.accountNumberName}}</td>\r\n	<td width="50%" title="{{accountName}}"><b>{{accountName}}</b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left">{{Whale.WhaleDetail.sourceChannel}}</td>\r\n	<td width="50%" title="{{partner}}"><b>{{partner}}</b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left">{{GameCommon.region}}</td>\r\n	<td width="50%" title="{{location}}"><b>{{location}}</b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left">{{GameCommon.equipments}}</td>\r\n	<td width="50%" title="{{mobileModel}}"><b>{{mobileModel}}</b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left">{{Whale.WhaleDetail.language}}</td>\r\n	<td width="50%" title=">{{lang}}"><b>{{lang}}</b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left">{{GameCommon.sex}}|{{GameCommon.age}}</td>\r\n	<td width="50%" title="{{sex}}|{{age}}岁"><b><font>{{sex}}</font>|{{age}}<font class="font15">岁</font></b></td>\r\n</tr>\r\n'}),define("text!templates/whale/whale_charge.html",[],function(){return'<tr>\r\n	<td class="left borno"><%=Whale.WhaleUser.newIncreasedDate%></td>\r\n	<td class="borno" width="50%" title="<%=registTime%>"><b><%=registTime%></b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left"><%=Whale.WhaleDetail.lastLogin%></td>\r\n	<td width="50%" title="<%=lastLoginTime%>"><b><%=lastLoginTime%></b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left"><%=Whale.WhaleDetail.firstRechargeable%></td>\r\n	<td width="50%" title="<%=firstChargeTime%>"><b><%=firstChargeTime%></b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left"><%=Revenue.IncomeData.rechargeableTimes%></td>\r\n	<td width="50%" title="<%=chargeTimes%>"><b><%=chargeTimes%></b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left"><%=Whale.WhaleUser.rechargeableLimit%></td>\r\n	<td width="50%" title="<%=chargeCash%>"><b><%=ctUnit%><%=chargeCash%></b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left"><%=GameCommon.dummyCoinTotalValue%></td>\r\n	<td width="50%" title="<%=totalVirtualValue%>"><b><%=totalVirtualValue%></b></td>\r\n</tr>\r\n<tr>\r\n	<td class="left"><%=Whale.WhaleDetail.retainDummyCoin%></td>\r\n	<td width="50%" title="<%=totalRetentionVirtualValue%>"><b><%=totalRetentionVirtualValue%></b></td>\r\n</tr>\r\n'}),define("text!templates/whale/whale_behavior.html",[],function(){return'{{#resultData}}\r<tr data="{{sessionId}}" data-time="{{timeflag}}" class="behaviorList" style="cursor: pointer;">\r	<td class="left aroww"><span>{{time_format}}</span></td>\r	<td>{{GameCommon.login}}<font>{{times}}</font>{{GameCommon.times}}</td>\r</tr>\r{{/resultData}}\r{{^resultData}}\r	<tr><td colspan="2" class="noData">{{GameCommon.noData}}</td></tr>\r{{/resultData}}\r'}),define("text!templates/whale/whale_behavior_detail.html",[],function(){return'<tr class="detailTr">\r	<td colspan="2">\r		<div class="mintdbox mintable">\r			<div class="mintablebox">\r				<table id="valueinfogrid" class="table_style1" width="100%" height="100%" cellspacing="0px" cellpadding="0px" border="0">\r					<thead>\r						<tr>\r							<th>{{WhaleDetail.loginInTime}}</th>\r							<th>{{WhaleDetail.loginOutTime}}</th>\r							<th>{{WhaleDetail.action}}</th>\r							<th>{{WhaleDetail.stay}}</th>\r						</tr>\r					</thead>\r\r					<tbody id="behaviorDetail">\r					{{#resultData}}\r						<tr class="{{trclass}}" style="cursor: pointer;">\r							<td width="25%">{{logintime}}</td>\r							<td width="25%">{{logouttime}}</td>\r							<td width="25%"><p style="display: block;" class="actionOpen"><font color="blue">{{GameCommon.detail}}</font></p><p style="display: none;" class="actionDesc">{{{actionDesc}}}</p></td>\r							<td width="25%"><p style="display: block;" class="durationRate">{{durationRate}}</p><p style="display: none;" class="durationDesc">{{{durationDesc}}}</p></td>\r						</tr>\r					{{/resultData}}\r					{{^resultData}}\r						<tr><td colspan="4" class="noData">{{GameCommon.noData}}</td></tr>\r					{{/resultData}}\r					</tbody>\r				</table>\r			</div>\r		</div>\r	</td>\r</tr>'}),define("text!templates/whale/whale_charge_list.html",[],function(){return'<% _.each(resultData,function(obj){\r%>\r	<tr class="<%=trclass%>">\r		<td><%=obj.time_format%></td>\r		<td><%=obj.chargetypename%></td>\r		<td><%=ctUnit%><%=obj.cash%></td>\r		<td><%=obj.virtualCurrency%></td>\r		<td><%=obj.leveltype%></td>\r	</tr>\r<%\r});%>\r	\r\r<% if(resultData == null || resultData.length == 0){\r%>\r	<tr><td colspan="5" class="noData"><%=GameCommon.noData%></td></tr>\r<%\r}%>'}),define("text!templates/whale/whale_purchase_list.html",[],function(){return'<div class="mintablebox">\r	<table id="purchaseInfo_table" class="table_style1" width="100%" cellspacing="0" cellpadding="0" border="0">\r		<thead>\r			<tr>\r				<th>{{GameCommon.date}}</th>\r				<th>{{GameCommon.consumePoint}}ID</th>\r				<th>{{WhaleDetail.consumePointAlias}}</th>\r				<th>{{WhaleDetail.quantityExpense}}</th>\r				<th>{{GameCommon.consumeDummyCoin}}</th>\r				<th>{{WhaleDetail.thatTimeLevel}}</th>\r			</tr>\r		</thead>\r		<tbody>\r		{{#resultData}}\r			<tr class="{{trclass}}">\r				<td>{{time_format}}</td>\r				<td>{{itemId}}</td>\r				<td>{{itemName}}</td>\r				<td>{{itemNumber}}</td>\r				<td>{{virtualCurrency}}</td>\r				<td>{{leveltype}}</td>\r			</tr>\r		{{/resultData}}\r		{{^resultData}}\r			<tr><td colspan="6" class="noData">{{GameCommon.noData}}</td></tr>\r		{{/resultData}}\r		</tbody>\r	</table>\r</div>'}),define("text!templates/whale/whale_itemuse_list.html",[],function(){return'{{#resultData}}\r	<tr class="{{trclass}}">\r		<td>{{time_format}}</td>\r		<td>{{itemId}}</td>\r		<td>{{itemName}}</td>\r		<td>{{itemNumber}}</td>\r		<td>{{leveltype}}</td>\r	</tr>\r{{/resultData}}\r{{^resultData}}\r	<tr><td colspan="5" class="noData">{{GameCommon.noData}}</td></tr>\r{{/resultData}}\r'}),define("text!templates/whale/whale_behavior_detail_loading.html",[],function(){return'<tr class="detailTr">\r\n	<td colspan="2">\r\n		<div class="mintdbox mintable">\r\n			<div class="mintablebox">\r\n				<table id="valueinfogrid" class="table_style1" width="100%" height="100%" cellspacing="0px" cellpadding="0px" border="0">\r\n					<thead>\r\n						<tr>\r\n							<th><%=Whale.WhaleDetail.loginInTime%></th>\r\n							<th><%=Whale.WhaleDetail.loginOutTime%></th>\r\n							<th><%=Whale.WhaleDetail.action%></th>\r\n							<th><%=Whale.WhaleDetail.stay%></th>\r\n						</tr>\r\n					</thead>\r\n						<tr><td colspan="4"><div class="login"><img src="images/loading.gif" height="25px"></img> <br><%=GameCommon.loadingData%></div></td></tr>\r\n					</tbody>\r\n				</table>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>'}),define("views/whale/WhaleDetailView",["backbone","mustache","views/public/DatePicker","models/whaleuser/WhaleUser","utils/dataTableUtil","utils/CurrencyUtil","utils/RegexUtil","utils/urlUtil","utils/excelDataUtil","text!templates/public/loading.html","text!templates/whale/whaleDetail.html","text!templates/whale/whale_account.html","text!templates/whale/whale_charge.html","text!templates/whale/whale_behavior.html","text!templates/whale/whale_behavior_detail.html","text!templates/whale/whale_charge_list.html","text!templates/whale/whale_purchase_list.html","text!templates/whale/whale_itemuse_list.html","text!templates/whale/whale_behavior_detail_loading.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.tabs","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=e.View.extend({el:"#container",events:{"click #whale_behavior tr.behaviorList":"showBehaviorDetail","click #behaviorDetail tr":"showSessionDetail","click #spendSummaryCode>a":"changeTab","change #accountChange":"accountChange"},initialize:function(){$("#container").html(_.template(l,w)),new n({el:"#datePicker"}),$("#whale_account").html(_.template(f,w)),$("#whale_charge").html(_.template(f,w)),$("#whale_behavior").html(_.template(f,w)),this.ctUnit="<small class='"+Params.displayCurrency+"'></small>",this.render()},render:function(){return this.renderAccountAndCharge(),this.renderSpendSummary(),this.renderAccountChange(),this},renderAccountChange:function(){r.chargeUserList({data:Params,success:function(e){var t='<select id="accountChange" style="height:38px;"><option value="-1">'+w.GameCommon.accountName+"</option>";for(var n=0;n<e.length;n++)Params.uid==e[n].uid?t+='<option value="'+e[n].uid+"_"+e[n].userId+'" selected="selected">'+e[n].accountName+"</option>":t+='<option value="'+e[n].uid+"_"+e[n].userId+'" >'+e[n].accountName+"</option>";t+="</select>",$("#accountChangeDiv").html(t),$("#accountChange").sSelect()}})},renderAccountAndCharge:function(){var e=this;$("#whaleWhaleDetailAccountNumberInfo").tabs({indicator:!0}),$("#whaleWhaleDetailRechargeableInfo").tabs({indicator:!0}),r.userProfileInfo({data:Params,success:function(n){n.sex?n.sex=n.sex==1?w.GameCommon.male:w.GameCommon.female:n.sex=w.GameCommon.unknown,n.age=n.age==-1?0:n.age,n.registTime=(new Date(n.registTime)).toFormat("YYYY-MM-DD"),n.lastLoginTime=(new Date(n.lastLoginTime)).toFormat("YYYY-MM-DD"),n.firstChargeTime=(new Date(n.firstChargeTime)).toFormat("YYYY-MM-DD"),n.Whale=w.Whale,n.Revenue=w.Revenue,n.GameCommon=w.GameCommon,$("#whale_account").html(t.render(c,n)),n.ctUnit=e.ctUnit,$("#whale_charge").html(_.template(h,n))}})},changeTab:function(e){var t=$(e.currentTarget),n=t.attr("data");this.taskTollgateType=n,$("#indexTab>a").removeClass("hover"),t.addClass("hover"),$("#taskDetailTableDiv").html(_.template(LodingTempl,w)),this.renderSpendSummary()},renderSpendSummary:function(){var e=this,n=$('#whaleWhaleDetailConsumeOverview div[role="title"] a[role="excel"]').length==0;n&&$('#whaleWhaleDetailConsumeOverview div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#whaleWhaleDetailConsumeOverview").tabs({indicator:!0}),$("#spendSummaryCode").tabs(function(n){var s="";if(n=="chargeInfo")s=v,$("#chargeInfo").show(),$("#purchaseInfo").hide(),$("#itemUseInfo").hide(),$("#chargeInfo table>tbody").html(_.template(f,w));else if(n=="purchaseInfo")s=m,$("#purchaseInfo").show(),$("#chargeInfo").hide(),$("#itemUseInfo").hide(),$("#purchaseInfo").html(_.template(f,w));else if(n="itemUseInfo")s=g,$("#itemUseInfo").show(),$("#chargeInfo").hide(),$("#purchaseInfo").hide(),$("#itemUseInfo table>tbody").html(_.template(f,w));var o=_.clone(Params);n=="chargeInfo"?$("#chargeInfo_table").drawTable({action:"/game/v1/whaleUser/chargeInfo",data:o,success:function(t){var n=t.result;_.each(n,function(e){e.time_format=(new Date(e.time)).toFormat("YYYY-MM-DD HH24:MI:SS"),e.cash=Math.round(e.cash*100)/100});var r={resultData:n};r.ctUnit=e.ctUnit,r.trclass=function(){return(n.indexOf(this)+1)%2==0?"changeColor":""},r.WhaleDetail=w.Whale.WhaleDetail,r.GameCommon=w.GameCommon,$("#actionSum").html(t.totalCount),$("#chargeInfo table>tbody").html(_.template(s,r))}}):n=="itemUseInfo"?$("#itemUseInfo_table").drawTable({action:"/game/v1/whaleUser/itemUseInfo",sort:"timeflag asc",data:o,success:function(n){var r=n.result;_.each(r,function(e){e.time_format=e.timeflag.toString().replace(/^(1\d)([01]\d)([0123][0-9])([012][0-9])$/,"20$1-$2-$3")});var i={resultData:r};i.ctUnit=e.ctUnit,i.trclass=function(){return(r.indexOf(this)+1)%2==0?"changeColor":""},i.WhaleDetail=w.Whale.WhaleDetail,i.GameCommon=w.GameCommon,$("#actionSum").html(n.totalCount),$("#itemUseInfo table>tbody").html(t.render(s,i))}}):r.purchaseInfo({data:o,success:function(n){_.each(n,function(e){e.time_format=e.timeflag.toString().replace(/^(1\d)([01]\d)([0123][0-9])([012][0-9])$/,"20$1-$2-$3")});var r={resultData:n};r.ctUnit=e.ctUnit,r.trclass=function(){return(n.indexOf(this)+1)%2==0?"changeColor":""},r.WhaleDetail=w.Whale.WhaleDetail,r.GameCommon=w.GameCommon,$("#actionSum").html(n.length),$("#purchaseInfo").html(t.render(s,r)),i.dataTable({$el:$("#purchaseInfo_table"),sort:!0})}}),$('#whaleWhaleDetailConsumeOverview div[role="title"] a[role="excel"]').unbind("click").click(function(){var e=$("<table></table>");e.html($("#"+n).find("table").html());var t=$("a[data-tab='"+n+"']").contents().filter(function(){return this.nodeType===3}).text()||"",r=t+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",i=a.tableToJson(e[0]),s=_.template(b,{excelName:r,excelArray:i});$("body").append(s),$("#excelExportForm").submit(),$("#excelExportForm").remove()})})},renderBehaviorRecord:function(){$("#whaleWhaleDetailActionRecord").tabs({indicator:!0}),r.userBehaviorRecord({data:Params,success:function(e){var n={resultData:e};n.WhaleDetail=w.Whale.WhaleDetail,n.GameCommon=w.GameCommon,n.time_format=function(){return this.timeflag.replace(/(\d{2})(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")},$("#whale_behavior").html(t.render(p,n))}})},showBehaviorDetail:function(e){var n=$(e.currentTarget).next("tr.detailTr"),i=$(n).attr("class");$(e.currentTarget).toggleClass("hover");if(!i){var s=$(e.currentTarget).attr("data"),o=$(e.currentTarget).attr("data-time"),u=_.clone(Params);u.sessionId=s,u.startTime=o/100,$(e.currentTarget).after(y),r.userBehaviorDetail({data:u,success:function(n){$(e.currentTarget).next("tr.detailTr").remove();var r={resultData:n};r.trclass=function(){return(n.indexOf(this)+1)%2==0?"changeColor":""},r.actionDesc=function(){var e=[];this.actionDescribe&&(e=this.actionDescribe.split(","));var t="";for(var n=0;n<e.length;n++)t+=n+1+"."+w.Whale.WhaleDetail.userDoing+e[n]+"<br/>";return t},r.durationDesc=function(){var e=[];this.actionDescribe&&(e=this.duration.split(","));var t="";for(var n=0;n<e.length;n++)t+=e[n]+" S<br/>";return t},r.durationRate=function(){var e=_.sum(_.pluck(n,"sumDuration"));return e==0?"0.0%":_.toPercent(this.sumDuration/e,1)},r.WhaleDetail=w.Whale.WhaleDetail,r.GameCommon=w.GameCommon,$(e.currentTarget).after(t.render(d,r))}})}else $(n).toggle()},showSessionDetail:function(e){$(e.currentTarget).find("p.actionDesc").toggle(),$(e.currentTarget).find("p.durationRate").toggle(),$(e.currentTarget).find("p.durationDesc").toggle(),$(e.currentTarget).find("p.actionOpen").toggle()},accountChange:function(e){if($(e.currentTarget).val()!="-1"){var t=$(e.currentTarget).val(),n=t.indexOf("_");Params.uid=t.substr(0,n),Params.userId=t.substr(n+1),location.hash="#page/whale-whaleUserDetail_whaleUser/"+u.parse2Str(Params)}}});return E}),define("utils/FunnelUtil",["highcharts","underscore"],function(e,t){return{chart:function(n){var r=n.id,i=t.pluck(n.data,"tag"),s=t.pluck(n.data,"longCount"),o=0,u=s[0],a=[],f=function(e,t){return t==0?"0.0":Math.round(e/t*1e3)/10};for(var l=0;l<s.length;l++)if(l===0)a.push("");else{var c=s[l],h=s[l-1];a.push(f(c,h))}new e.Chart({chart:{renderTo:r,zoomType:"xy",backgroundColor:"#fff"},title:{text:""},xAxis:{categories:i},yAxis:{title:{text:""}},legend:{enabled:!1},tooltip:{formatter:function(){return""+this.x+": "+this.y}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}},area:{marker:{enabled:!0,states:{hover:{enabled:!0}}},dataLabels:{enabled:!0,formatter:function(){return f(this.y,u)+"%"}}},line:{dataLabels:{enabled:!0,x:-56,y:20,formatter:function(){var e=a[o];return o+=1,e?o==1?"":e+"%":""}},lineWidth:0,marker:{enabled:!1}}},series:[{name:"",type:"column",data:s},{name:"",color:"#6DC5FD",type:"line",data:s},{name:"",color:"#6DC5FD",type:"area",data:s}]})}}}),define("models/customEvent/CustomEvent",["models/BaseModel"],function(e){var t=[{name:"fetchCustomeventDescList",url:"/v1/customevent/list"},{name:"eventNumList",url:"/v1/customevent/eventNumList"},{name:"perActiveUserEventNumList",url:"/v1/customevent/perActiveUserEventNumList"},{name:"perStartupEventNumList",url:"/v1/customevent/perStartupEventNumList"},{name:"getCustomEventParamList",url:"/v1/customevent/paramList"},{name:"getCustomEventParamValueList",url:"/v1/customevent/paramValue"},{name:"fetchCustomeventList",url:"/v1/customevent/customEventList"},{name:"fetchEventSummaryList",url:"/v1/customevent/fetchEventSummaryList"},{name:"paramNoSumValue",url:"/v1/customevent/paramNoSumValue"},{name:"fetchEventByEventIdOrDisplayName",url:"/v1/customevent/fetchEventByEventIdOrDisplayName"}];return e.init(t)}),define("models/customEvent/Funnel",["models/BaseModel"],function(e){var t=[{name:"fetchFunnelList",url:"/v1/customeventfunnel/list",type:"get"},{name:"fetchFunnelData",url:"/v1/customeventfunnel/funnelData"},{name:"saveOrUpdateFunnel",url:"/v1/customeventfunnel/saveOrUpdate"},{name:"deleteFunnel",url:"/v1/customeventfunnel/delete"},{name:"fetchCustomEventFunnel",url:"/v1/customeventfunnel/funnel",type:"get"},{name:"canCreate",url:"/v1/customeventfunnel/check",type:"get"}];return e.init(t)}),define("text!templates/customEvent/eventData.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n			<div id="showSelectedPartners" class="Editor hide Filter" >\r\n				<div id="selectVersion"></div>\r\n			</div>\r\n		</div>\r\n		<div id="customEventEventDataEventOverview">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=CustomEvent.EventData.eventOverview%></strong>\r\n<!-- 				<div id="excelbtn"></div> -->\r\n				<div class="r event_filter">\r\n					<input type=\'input\' id=\'eventIdOrNameSearchInput\'placeholder="<%=CustomEvent.EventData.g%>" class="input-condition" />\r\n					<input type=\'button\' id=\'eventSearchBtn\' value=\'<%=CustomEvent.EventData.h%>\' class="btn-search"></input>\r\n					<input type=\'button\' id=\'eventClearSearchBtn\' value=\'<%=CustomEvent.EventData.i%>\' class="btn-search btn-clear"></input>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox" id="customEventList">\r\n			<table width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1">\r\n                <thead>\r\n                	<tr>\r\n                    	<th class="hover-tooltip" data-th="edeventdisplayname"  width="15%" class="left" sort_name="eventdisplayname"><p><%=CustomEvent.EventData.eventDisplayName%></p></th>\r\n                        <th class="hover-tooltip" data-th="edeventnum" width="15%"  sort_name="eventnum"><p><%=CustomEvent.EventData.eventCounts%></p></th>\r\n                        <th class="hover-tooltip" data-th="edeventusers"  width="15%"  sort_name="eventusers"><p><%=CustomEvent.EventData.eventUsers%></p></th>\r\n                        <th class="hover-tooltip" data-th="edoccuredTimesPerLogin"  width="15%"  sort_name="occuredTimesPerLogin"><p><%=CustomEvent.EventData.initiateHappenCounts%></p></th>\r\n                        <th class="hover-tooltip" data-th="edoperate"  width="15%"><p><%=GameCommon.operate%></p></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n<!--                 	<tr class="login_tr"> -->\r\n<!-- 						<td colspan="5"> -->\r\n<!-- 							<div class="login"> -->\r\n<!-- 								<img src="images/loading.gif" height="25px"></img> <br> -->\r\n<!-- 							<%=GameCommon.loadingData%> -->\r\n<!-- 							</div> -->\r\n<!-- 						</td> -->\r\n<!-- 					</tr> -->\r\n                </tbody>\r\n            </table>\r\n		</div>\r\n\r\n	</div>\r\n	\r\n	<div id="funnels"></div>\r\n	\r\n	<div class="boxmax">\r\n		<a class="maxbut" id="addFunnelBtn"><font class="add"><%=CustomEvent.EventData.addFunnel%></font></a>\r\n	</div>\r\n	\r\n</div>\r\n\r\n\r\n\r\n\r\n'}),define("text!templates/customEvent/eventList.html",[],function(){return'{{#events}}\r\n<tr>\r\n    <td width="30%"><span><a data="{{id}}" title="{{displayName}}">{{displayName}}</a></span></td>\r\n    <td width="25%">{{num}}</td>\r\n    <td width="15%">{{usernum}}</td>\r\n    <td width="30%">{{loginTimes}}</td>\r\n    <td width="15%"><a data="{{id}}"><%=GameCommon.detail%></a></td>\r\n</tr>\r\n{{/events}}\r\n{{^events}}\r\n<tr><td colspan="5" class="noData"><%=GameCommon.noData%></td></tr>\r\n{{/events}}\r\n'}),define("text!templates/customEvent/addFunnel.html",[],function(){return'<div class="Pop_line" style="width: 580px" >\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=i18n.CustomEvent.EventData.setting%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n    	<p class="setupPop_P"><%=i18n.CustomEvent.EventData.tip%></p>\r\n        <ul class="setup_Pop" id="stepContainer">\r\n        	<li>\r\n				<b style="letter-spacing: 2px;"><%=i18n.CustomEvent.EventData.name%>：</b>\r\n				<input value="<%=funnel.name%>" id="customEventNameInput" class="textinput" style="width:200px; margin-left:10px;" type="text">\r\n			</li>\r\n			<%if(funnel.flowList){%>\r\n				<input type="hidden" value="<%=funnel.id%>" id="funnelIdInput"/>\r\n				<%_.each(funnel.flowList,function(flow){%>\r\n					<li class="step">\r\n						<b>step<%=flow.step%>：</b>\r\n						<label><%=i18n.CustomEvent.EventData.criteria%></label>\r\n						<select style="left: 100px;" class="selectEl" id="step<%=flow.step%>">\r\n							<option value="-1"><%=i18n.Level.LevelDetailed.choose%></option>\r\n							<%\r\n								_.each(eventList,function(event){\r\n									var selected = \'\';\r\n									if(flow.eventId == event.id) selected = \'selected\';\r\n							%>\r\n									<option value="<%=event.id%>" <%=selected%> ><%=event.eventdisplayname ? event.eventdisplayname : event.eventid%></option>\r\n							<% });%>\r\n						</select>\r\n						<label><%=i18n.CustomEvent.EventData.stepName%></label>\r\n						<input class="textinput" type="text" value="<%=flow.stepName%>" role="nickname">\r\n						<div class="r">\r\n							<em class="l add_em addItemtype">添加</em>&nbsp;&nbsp;&nbsp;&nbsp;\r\n							<em class="r close_em deleteItemtype">删除</em>\r\n						</div>\r\n					</li> \r\n			<%	});\r\n			}else{%>\r\n				<li class="step">\r\n					<b>step1：</b>\r\n					<label><%=i18n.CustomEvent.EventData.criteria%></label>\r\n					<select style="left: 100px;" class="selectEl" id="step">\r\n						<option value="-1"><%=i18n.Level.LevelDetailed.choose%></option>\r\n						<%_.each(eventList,function(event){%>\r\n							<option value="<%=event.id%>"><%=event.eventdisplayname ? event.eventdisplayname : event.eventid%></option>\r\n						<%});%>\r\n					</select>\r\n					<label><%=i18n.CustomEvent.EventData.stepName%></label>\r\n					<input class="textinput" type="text" role="nickname">\r\n					<div class="r">\r\n						<em class="l add_em addItemtype">添加</em>&nbsp;&nbsp;&nbsp;&nbsp;\r\n						<em class="r close_em deleteItemtype">删除</em>\r\n					</div>\r\n				</li> \r\n			<%}%>\r\n			\r\n		</ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a class="l CancelonCL" id="addStepBtn">+<%=i18n.Level.LevelDetailed.addStep%></a>\r\n            <a class="timecolse r Confirm" id="saveBtn"><%=i18n.Level.LevelDetailed.saveAndClose%></a>\r\n            <a class="r Cancel" id="canelBtn"><%=i18n.Level.LevelDetailed.canel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/customEvent/funnel.html",[],function(){return'<%\r\n	_.each(list,function(o){\r\n%>\r\n		<div class="boxmax">\r\n			<div class="title">\r\n				<strong class="l"><%=i18n.CustomEvent.EventData.conversionFunnel%>-<span data="funnelName-<%=o.id%>"><%=o.name%></span></strong>\r\n				<a class="Cancel r minCancel delete" data="<%=o.id%>">\r\n					<font class="indicator">×</font>\r\n				</a>\r\n				<a class="Cancel r minCancel edit" data="<%=o.id%>">\r\n					<font class="SetUp"></font>\r\n				</a>\r\n			</div>\r\n			<div class="textbox">\r\n				<div class="funnels_style" id="funnel-<%=o.id%>">\r\n					<div class="login"><img src="images/loading.gif" height="25px"></img> <br><%=i18n.GameCommon.loadingData%></div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n<%	\r\n	});\r\n%>\r\n'}),define("text!templates/customEvent/funnelData.html",[],function(){return'<p>\r\n	<span class="l">\r\n		<strong><%=data.first%></strong><%=CustomEvent.EventData.playerEnter%><strong><%=data.last%></strong><%=CustomEvent.EventData.playerComplete%>\r\n	</span>\r\n	<span class="r">\r\n		<%=CustomEvent.EventData.totalRate%><strong><%=data.totalRate%>%</strong>\r\n	</span>\r\n</p>\r\n<ul>\r\n	<%\r\n		_.each(data.detail,function(o){\r\n	%>	\r\n		<li class="<%=o.last?\'Final\':\'\'%> after" >\r\n			<div class="Schedule_txt after">\r\n				<small><%=o.id%></small>\r\n				<b title="<%=o.name%>"><%=o.name%></b>\r\n				<font style="display:<%=o.last?\'none\':\'block\'%>"><%=o.rateOnPre%>%</font>\r\n			</div>\r\n			<div class="Schedule_bg">\r\n				<div class="<%=o.isZero?\'\':\'Schedule\'%>" style="width:<%=o.isZero?\'\':o.rateOnFirst+\'%\'%>"><%=o.num%><%=CustomEvent.EventData.player%> &nbsp;</div>\r\n			</div>\r\n		</li>\r\n	<%	\r\n		});\r\n	%>\r\n</ul>\r\n'}),define("text!templates/customEvent/customEventStep.html",[],function(){return'<li class="step">\r\n	<b>step<%=num%>：</b>\r\n	<label><%=i18n.CustomEvent.EventData.criteria%></label>\r\n	<select style="left: 100px;" class="selectEl" id="<%=uniqueStepId%><%=num%>">\r\n		<option value="-1">-<%=i18n.Level.LevelDetailed.choose%></option>\r\n		<%_.each(list,function(event){%>\r\n			<option value="<%=event.id%>"><%=event.eventdisplayname ? event.eventdisplayname : event.eventid%></option>\r\n		<%});%>\r\n	</select>\r\n	<label><%=i18n.CustomEvent.EventData.stepName%></label>\r\n	<input class="textinput" type="text" role="nickname">\r\n	<div class="r">\r\n		<em class="l add_em addItemtype">添加</em>&nbsp;&nbsp;&nbsp;&nbsp;\r\n		<em class="r close_em deleteItemtype">删除</em>\r\n	</div>\r\n\r\n</li>'}),define("views/customEvent/EventDataView",["backbone","mustache","views/public/DatePicker","views/public/SelectView","utils/dataTableUtil","utils/urlUtil","utils/RegexUtil","utils/ModelBox","utils/excelDataUtil","utils/FunnelUtil","models/customEvent/CustomEvent","models/customEvent/Funnel","text!templates/customEvent/eventData.html","text!templates/customEvent/eventList.html","text!templates/customEvent/addFunnel.html","text!templates/customEvent/funnel.html","text!templates/customEvent/funnelData.html","text!templates/customEvent/customEventStep.html","text!templates/public/excelExport.html","text!templates/public/loading.html","i18n!nls/gameI18N","jquery.select","jquery.table"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E=e.View.extend({el:"#container",events:{"click #addFunnelBtn":"addOrEditFunnel","click #customEventList tbody a":"toDetail","click #funnels .title>a.delete":"deleteFunnel","click #funnels .title>a.edit":"editFunnel","click #eventSearchBtn":"eventSearch","click #eventClearSearchBtn":"eventClear"},initialize:function(){$("#container").html(_.template(h,w)),new n({el:"#datePicker"}),new r({el:"#selectChoose"}),this.tipObj=w.CustomEvent.EventData,this.render()},render:function(){var e=this;return l.fetchCustomeventList({data:Params,success:function(t){e.customEventList=t}}),this.renderTable("/game/v1/customevent/fetchEventSummaryList",_.cloneDeep(Params)),this.renderFunnels(),this},eventSearch:function(){var e=$("#eventIdOrNameSearchInput").val(),t=_.cloneDeep(Params);t.eventIdOrName=e,this.renderTable("/game/v1/customevent/fetchEventByEventIdOrDisplayName",t)},eventClear:function(){var e=$("#eventIdOrNameSearchInput").val();$("#eventIdOrNameSearchInput").val(""),this.renderTable("/game/v1/customevent/fetchEventSummaryList",_.cloneDeep(Params))},addOrEditFunnel:function(e){var t=this,e=e||{},n=_.template(d,{funnel:e,eventList:this.customEventList,i18n:w});e.flowList?this.showFunnelSettingBox(n,t):c.canCreate({data:{productId:Params.productID},success:function(e){e?t.showFunnelSettingBox(n,t):u.alert({message:t.tipObj.tip8})}})},showFunnelSettingBox:function(e,t){var n=this;u.confirm({message:e,buttons:[{"#addStepBtn":function(){var e=$("#stepContainer").find("li.step").length;if(e===200){alert(t.tipObj.tip1);return}var n=_.template(g,{list:t.customEventList,num:e+1,uniqueStepId:_.uniqueId("step_"),i18n:w});$("#stepContainer").append(n),t.Pop_place($(".Pop_line").parent()),$(".selectEl").sSelect();var r=$("#stepContainer").scrollTop();$("#stepContainer").scrollTop(r+45)},"#saveBtn":function(){var e=$("#stepContainer").find("li.step").length;if(e<=1){alert(t.tipObj.tip2);return}var r=$("#customEventNameInput"),i=$('input[role="nickname"]'),s=$("#stepContainer select"),o=r.val(),a=_.map(i,function(e){return $(e).val()}),f=_.map(s,function(e){return $(e).val()});if(!o||a.indexOf("")!=-1||f.indexOf("-1")!=-1){alert(t.tipObj.tip3);return}if(a.length!=_.uniq(a).length){alert(t.tipObj.tip4);return}if(f.length!=_.uniq(f).length){alert(t.tipObj.tip5);return}var l={name:o,productId:Params.productID},h=[];for(var p=0;p<e;p++){var d=p+1;h.push({stepName:a[p],step:d,eventId:f[p]})}l.flowList=h,l.id=$("#funnelIdInput").val(),c.saveOrUpdateFunnel({data:l,success:function(e){u.unblock();if(e){l.id?($('span[data="funnelName-'+l.id+'"]').html(l.name),$("funnel-"+l.id).html(_.template(b,w))):$("#funnels").append(_.template(v,{list:[e],i18n:w}));var r=_.clone(Params);r.id=e.id,c.fetchFunnelData({data:r,success:function(t){n.renderFunnelDetail(e.id,t)}})}else u.alert({message:t.tipObj.tip6})}})},".addItemtype":function(e){var n=$("#stepContainer").find("li.step").length;if(n===200){alert(t.tipObj.tip1);return}var r=_.template(g,{list:t.customEventList,num:n+1,uniqueStepId:_.uniqueId("step_"),i18n:w});$("#stepContainer").append(r),t.Pop_place($(".Pop_line").parent()),$(".selectEl").sSelect();var i=$("#stepContainer").scrollTop();$("#stepContainer").scrollTop(i+45)},".deleteItemtype":function(e){var n=$("#stepContainer").find("li.step").length;if(n<=1){alert(t.tipObj.tip7);return}$(e.currentTarget).parent().parent().remove(),$("#stepContainer").find("li.step").each(function(e){$(this).find("b").html("step"+(e+1)+"：")}),t.Pop_place($(".Pop_line").parent())}}]}),$(".selectEl").sSelect()},Pop_place:function(e){var t=$(window).height(),n=$(document).width(),r=e.width(),i=e.height(),s=n/2-r/2,o=t/2-i/2;e.css({left:s+"px",top:o+"px"})},renderTable:function(e,n){var r=$('#customEventEventDataEventOverview div[role="title"] a[role="excel"]').length==0;r&&$("#customEventEventDataEventOverview .title .event_filter").before('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#customEventEventDataEventOverview").tabs({indicator:!0}),$("#customEventList").drawTable({action:e,sort:"eventdisplayname asc",data:n,success:function(e){var n={events:e.result};n.displayName=function(){return this.eventdisplayname?this.eventdisplayname:this.eventid},n.num=function(){return o.formatDigit(this.eventnum)},n.loginTimes=function(){return o.formatDigit(this.occuredTimesPerLogin)},$("#customEventList table>tbody").html(t.render(_.template(p,w),n));var r=$("<table></table>");r.append($("#customEventList table").html()),$('#customEventEventDataEventOverview .title>a[role="excel"]').unbind("click").click(function(){var e=w.CustomEvent.EventData.eventOverview+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",t=a.tableToJson(r[0]),n=_.template(y,{excelName:e,excelArray:t});$("body").append(n),$("#excelExportForm").submit(),$("#excelExportForm").remove()})}}),$("#customEventList").tabs({hoverTooltip:!0})},renderFunnels:function(){var e=this;c.fetchFunnelList({data:{productId:Params.productID},success:function(t){if(t&&t.length){$("#funnels").html(_.template(v,{list:t,i18n:w}));var n=_.pluck(t,"id");_.each(n,function(t){var n=_.clone(Params);n.id=t,c.fetchFunnelData({data:n,success:function(n){e.renderFunnelDetail(t,n)}})})}}})},renderFunnelDetail:function(e,t){var n={first:null,last:null,totalRate:null,detail:null},r=_.pluck(t,"tag"),i=_.pluck(t,"longCount");n.first=i[0],n.last=i[i.length-1];var s=function(e,t){return t==0?"0.0":Math.round(e/t*1e3)/10};n.totalRate=s(n.last,n.first);var o=new Array;for(var u=0;u<i.length;u++){var a={id:u+1,name:r[u],num:i[u],rateOnFirst:s(i[u],i[0]),rateOnPre:null,last:u==i.length-1,isZero:!i[u]};u<i.length-1&&(a.rateOnPre=s(i[u+1],i[u])),o.push(a)}n.detail=o,$("#funnel-"+e).html(_.template(m,{data:n,CustomEvent:w.CustomEvent}))},deleteFunnel:function(e){u.confirm({buttons:[{".Confirm":function(){u.unblock();var t=$(e.currentTarget),n=t.attr("data");c.deleteFunnel({data:{id:n,productId:Params.productID},success:function(e){e&&t.parent().parent().remove()}})}}]})},editFunnel:function(e){var t=$(e.currentTarget),n=t.attr("data"),r=this;c.fetchCustomEventFunnel({data:{funnelId:n},success:function(e){r.addOrEditFunnel(e)}})},toDetail:function(e){$target=$(e.currentTarget),Params.userId=$target.attr("data"),location.hash="#page/customEvent-detail_data/"+s.parse2Str(Params)}});return E}),define("text!templates/customEvent/eventDataDetail.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="eventIDChangeDiv" class="l marginright">\r\n				<div  class="relative l selectlist">\r\n					<div class="dropselect l">\r\n					<h4 title="<%=CustomEvent.EventDetail.eventId%>" class="over"><%=CustomEvent.EventDetail.eventId%></h4>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n			<div id="showSelectedPartners" class="Editor hide Filter" >\r\n				<div id="selectVersion"></div>\r\n			</div>\r\n		</div>\r\n		<div id="eventTrendCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=CustomEvent.EventDetail.eventTendency%></strong>\r\n			</div>\r\n			<div class="textbox">\r\n				<div role="tabbar" class="box_top">\r\n					<a data-tab="eventNum" class="tab hover"><%=CustomEvent.EventData.eventCounts%></a>\r\n					<a data-tab="activeUserNum" class="tab"><%=CustomEvent.EventDetail.everyActiveUserHappen%></a>\r\n					<a data-tab="startUpNum" class="tab"><%=CustomEvent.EventDetail.everyInitiateHappen%></a>\r\n				</div>\r\n				<div class="picbox_chart_table" role="remarkBottom">\r\n					<div id="eventTrendCode-chart" role="chart" class="picbox_chart_table_div picbox"></div>\r\n					<div id="eventTrendCode-table" role="table" class="picbox_chart_table_div picbox"></div>\r\n				</div>\r\n				<div class="after">\r\n	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n	        	</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="boxmax">\r\n		<div id="customEventEventDetailParameters">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=CustomEvent.EventDetail.parameters%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox">\r\n			<div class="dataTables_wrapper">\r\n				<table id="paramsTable" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style_ope">\r\n					\r\n				</table>\r\n			</div>\r\n		</div>\r\n		\r\n	</div>\r\n</div>\r\n'}),define("text!templates/customEvent/paramsList.html",[],function(){return'{{#list}}\r\n	<tr data="{{name}}&{{sum}}&{{num}}" status="parent" dataValue="{{name}}">\r\n		<td class="aroww left">\r\n			<span class="after">\r\n				<strong>{{name}}\r\n				{{#displaySum}}\r\n					<img class="sum" src="images/sum.png">\r\n				{{/displaySum}}</strong>\r\n			</span>\r\n		</td>\r\n	</tr>\r\n{{/list}}\r\n{{^list}}\r\n	<tr>\r\n		<td class="noData">\r\n			{{GameCommon.noData}}\r\n		</td>\r\n	</tr>\r\n{{/list}}'}),define("text!templates/customEvent/paramsDetail.html",[],function(){return'<tr status="sub">\r	<td class="details">\r		<div class="mintdbox mintable">\r			<div class="mintablebox">\r				<table height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style1">\r					<thead>\r						<tr>\r							<th  sort_name="valueinfo" class="center">Value</th>\r							<th  sort_name="value" class="center"><%=CustomEvent.EventDetail.messageCounts%></th>\r							<th  sort_name="valuePercent" class="center"><%=CustomEvent.EventDetail.proportion%></th>\r						</tr>\r					</thead>\r					<tbody>\r						<tr>\r							<td colspan="3">\r								<div class="login">\r									<img src="images/loading.gif" height="25px"></img> <br>\r								<%=GameCommon.loadingData%>\r								</div>\r							</td>\r						</tr>\r					</tbody>\r				</table>\r			</div>\r		</div>\r	</td>\r</tr>'}),define("text!templates/customEvent/value-sum.html",[],function(){return'<tr status="sub">\r\n	<td class="details">\r\n		<div class="mintdbox mintable">\r\n			<div class="mintablebox">\r\n				<table height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style1">\r\n					<thead>\r\n						<tr>\r\n							<th class="center borno"><%=CustomEvent.EventDetail.messageCounts%></th>\r\n							<th class="center borno">Total Value</th>\r\n						</tr>\r\n					</thead>\r\n					<tbody>\r\n						<tr>\r\n							<td colspan="2">\r\n								<div class="login">\r\n									<img src="images/loading.gif" height="25px"></img> <br>\r\n								<%=GameCommon.loadingData%>\r\n								</div>\r\n							</td>\r\n						</tr>\r\n					</tbody>\r\n				</table>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>'}),define("views/customEvent/EventDetailView",["jquery","backbone","mustache","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","utils/UnitMappingUtil","views/public/DatePicker","views/public/SelectView","models/customEvent/CustomEvent","models/Constant","text!templates/customEvent/eventDataDetail.html","text!templates/customEvent/paramsList.html","text!templates/customEvent/paramsDetail.html","text!templates/customEvent/value-sum.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.tabs","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=t.View.extend({el:"#container",events:{'click #paramsTable>tbody>tr[status="parent"]':"toggleParamTr","change #eventIDChange":"eventIDChange"},initialize:function(){e("#container").html(_.template(c,m)),new u({el:"#datePicker"}),new a({el:"#selectChoose"}),this.params=_.clone(Params),this.params.eventId=this.params.userId,this.render()},render:function(){return this.renderEvnetIDChange(),this.renderEventTrend(),this.renderEventParams(),this},eventIDChange:function(t){var n=e(t.currentTarget).val();n!="-1"&&(this.params.eventId=n,this.renderEventTrend(),this.renderEventParams())},renderEvnetIDChange:function(){var t=this.params.eventId;f.fetchCustomeventDescList({data:this.params,success:function(n){if(!n)return;var r='<select id="eventIDChange" style="height:38px;"><option value="-1">'+m.CustomEvent.EventDetail.eventId+"</option>";for(var i=0;i<n.length;i++){var s=n[i].eventdisplayname?n[i].eventdisplayname:n[i].eventid;t==n[i].id?r+='<option value="'+n[i].id+'" selected="selected">'+s+"</option>":r+='<option value="'+n[i].id+'">'+s+"</option>"}r+="</select>",e("#eventIDChangeDiv").html(r),e("#eventIDChange").sSelect()}})},renderEventTrend:function(){var t=this,n=e("#eventTrendCode").tabs(function(s){var u,a;switch(s){case"eventNum":u="eventNumList",a=m.CustomEvent.EventData.eventCounts;break;case"activeUserNum":u="perActiveUserEventNumList",a=m.CustomEvent.EventDetail.everyActiveUserHappen;break;case"startUpNum":u="perStartupEventNumList",a=m.CustomEvent.EventDetail.everyInitiateHappen}f[u]({data:t.params,success:function(t){var s=_.pluck(t,"item"),t=_.pluck(t,"value"),u=[{name:a,data:t}],f=_.zip(s,t),l=[m.GameCommon.date,a+"("+o.getUnitByItem(o.getTimesItem())+")"];i.drawTable({head:l,body:f,$el:e("#eventTrendCode-table"),headType:"date"}),r.chart({id:"eventTrendCode-chart",x:s,series:u,yLeftUnit:o.getTimesItem(),unitItem:[o.getTimesItem()],xType:"date"}),n.head=l,n.body=f}})})},renderEventParams:function(){e("#customEventEventDetailParameters").tabs({indicator:!0}),e("#paramsTable").html(_.template(this.loading(),{GameCommon:m.GameCommon})),f.getCustomEventParamList({data:this.params,success:function(t){var r={list:t};r.GameCommon=m.GameCommon,r.displaySum=function(){return this.sum?this.sum:null},e("#paramsTable>tbody").html(n.render(h,r))}})},toggleParamTr:function(t){var r=e(t.currentTarget),i=r.attr("data").split("&"),o=r.next('tr[status="sub"]'),u=r.find('td span a[role="excel"] '),a=e("#paramsTable>tbody").find('td span a[role="excel"] '),l=o.prevAll('tr[status="sub"]'),c=o.nextAll('tr[status="sub"]'),h=r.prevAll('tr[status="parent"]'),g=r.nextAll('tr[status="parent"]'),y=e("#paramsTable>tbody").find('tr[status="sub"]'),b=this.params;b.keyinfo=i[0],b.sum=i[1]=="true"?!0:!1,a.hide(),u.length||r.find("td span").append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),r.toggleClass("hover"),o.toggle(),l.hide(),c.hide(),h.removeClass("hover"),g.removeClass("hover"),r.hasClass("hover")&&u.show();if(!o.length){y.hide(),r.after(b.sum?_.template(d,m):_.template(p,m));var w='{{#list}}							<tr>								<td>{{value}}</td>								<td>{{num}}</td>								<td><div class="ProgressBar relative"><span style="width:{{percent}}"></span><font>{{percent}}</font></div></td>							</tr>						{{/list}}',E="{{#list}}<tr><td>{{num}}</td><td>{{value}}</td></tr>{{/list}}",S=new RegExp("[`~!@#$%^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）&;|{}【】‘；：”“'。，、？]"),x="";for(var T=0;T<i[0].length;T++)x+=i[0].substr(T,1).replace(S,"");var N=x.replace(/\s/g,""),C="";for(var T=0;T<N.length;T++)C+=N.substr(T,1).charCodeAt(0);var k=b.userId+C;if(b.sum){var L=r.next("tr").find("table");L.attr("id",k),f.getCustomEventParamValueList({data:b,success:function(t){if(t&&t.length){t[0].num=i[2];var o=n.render(E,{list:t});L.find("tbody").html(o),L.find("tr:even").addClass("changeColor");var u=e("<table></table>");u.append(L.find("thead").html()),u.append(o),r.find('td span a[role="excel"]').click(function(t){var n=r.attr("dataValue")+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",i=s.tableToJson(u[0]),o=_.template(v,{excelName:n,excelArray:i});e("body").append(o),e("#excelExportForm").submit(),e("#excelExportForm").remove(),t.stopPropagation()})}else L.find("tbody").html('<tr><td class="noData">'+m.GameCommon.noData+"</td></tr>")}})}else{console.log("paramNoSumValue");var L=r.next("tr").find(".mintablebox");L.attr("id",k),e("#"+k).drawTable({action:"/game/v1/customevent/paramNoSumValue",data:b,sort:"valueinfo asc",success:function(t){console.log("paramNoSumValue success");if(t&&t.result){console.log("paramNoSumValue have data"),console.log(t),console.log(k),console.log(e("#"+k+" table>tbody"),11111),e("#"+k+" table>tbody").html(n.render(w,{list:t.result}));var i=e("<table></table>");i.append(e("#"+k+" table").html()),r.find('td span a[role="excel"]').click(function(t){var n=r.attr("dataValue")+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",o=s.tableToJson(i[0]),u=_.template(v,{excelName:n,excelArray:o});e("body").append(u),e("#excelExportForm").submit(),e("#excelExportForm").remove(),t.stopPropagation()}),console.log("paramNoSumValue finished")}else console.log("paramNoSumValue have no data"),L.find("tbody").html('<tr><td class="noData">'+m.GameCommon.noData+"</td></tr>")}})}}},loading:function(){return'<tbody>						<tr status="loading">							<td>								<div class="login">									<img src="images/loading.gif" height="25px"></img> <br>										<%=GameCommon.loadingData%>								</div>							</td>						</tr>					</tbody>'}});return g}),define("models/customEvent/EventManagement",["models/BaseModel"],function(e){var t=[{name:"fetchCustomeventManageList",url:"/v1/customeventManage/eventManageList"},{name:"clearEvent",url:"/v1/customeventManage/clearEvent"},{name:"suspendEvent",url:"/v1/customeventManage/suspendEvent"},{name:"fetchSuspendEventList",url:"/v1/customeventManage/fetchSuspendEventList"},{name:"updateEventDisplayName",url:"/v1/customeventManage/updateEventDisplayName"},{name:"updateVisible",url:"/v1/customeventManage/updateVisible"}];return e.init(t)}),define("text!templates/customEvent/eventManagement.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div id="eventManagementTableTitle">\r\n			<div class="title"  role="title">\r\n				<strong class="l"><%=CustomEvent.EventManagement.eventManage%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox" id="eventManagementTableDiv">\r\n			<div class="login">\r\n				<img src="images/loading.gif" height="25px"></img> <br>\r\n				<%=GameCommon.loadingData%>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="boxmax">\r\n		<div class="title">\r\n			<strong class="l"><%=CustomEvent.EventManagement.eliminateEvent%></strong>\r\n		</div>\r\n		<div class="tablebox"  id="suspendEventTableDiv">\r\n			<div class="login">\r\n				<img src="images/loading.gif" height="25px"></img> <br>\r\n				<%=GameCommon.loadingData%>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n</div>'}),define("text!templates/customEvent/eventManageList.html",[],function(){return'<table width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1" id="eventManagementTable">\r\n	<thead id="eventManagementTableHead">\r\n		<tr>\r\n	    	<th class="hover-tooltip" data-th="edmeventName" width="25%"><p><%=CustomEvent.EventManagement.eventName%>(Event ID)</p></th>\r\n	        <th class="hover-tooltip" data-th="edmdisplayName" width="25%"><p><%=CustomEvent.EventManagement.displayName%></p></th>\r\n	        <th class="hover-tooltip" data-th="edmrecordDate" width="15%"><p><%=GameCommon.recordDate%></p></th>\r\n	        <th class="hover-tooltip" data-th="edmhidingEvent" width="15%"><p><%=CustomEvent.EventManagement.hidingEvent%></p></th>\r\n	        <th class="hover-tooltip" data-th="edmoperate" width="20%"><p><%=GameCommon.operate%></p></th>\r\n	    </tr>\r\n	</thead>\r\n    <tbody id="eventManagementTableBody">\r\n		{{#resultData}}\r\n		<tr>\r\n			<td >{{eventid}}</td>\r\n			<td><input type="text" data-id="{{id}}" data-name="{{eventdisplayname}}"  value="{{eventdisplayname}}" class="notEditorput" id="edit"></td>\r\n			<td>{{displayDateTime}}</td>\r\n			<td>\r\n				<a id="hide" data-id="{{id}}" class="{{visibleFlag}} mauto" isvisible="{{visible}}"></a>\r\n			</td>\r\n			<td>\r\n				<a data-id="{{id}}" data-event-id="{{eventid}}" class="clearEvent"><%=CustomEvent.EventManagement.eliminate%></a>\r\n				<a data-id="{{id}}" data-event-id="{{eventid}}" class="suspendEvent"><%=CustomEvent.EventManagement.stopUsing%></a>\r\n			</td>\r\n		</tr>\r\n		{{/resultData}}\r\n		{{^resultData}}\r\n		<tr>\r\n			<td colspan="5" class="noData"><%=GameCommon.noData%></td>\r\n		</tr>\r\n		{{/resultData}}\r\n    </tbody>\r\n</table>\r\n'}),define("text!templates/customEvent/suspendEventList.html",[],function(){return'<table width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1" id="suspendEventTable">\r\n     <thead id="suspendEventThead">\r\n     	<tr>\r\n         	<th width="25%"><%=CustomEvent.EventManagement.eliminateEvent%>(Event ID)</th>\r\n             <th width="25%"><%=CustomEvent.EventManagement.displayName%></th>\r\n             <th width="25%"><%=CustomEvent.EventManagement.stopUsingDate%></th>\r\n             <th width="25%"><%=GameCommon.operate%></th>\r\n         </tr>\r\n     </thead>\r\n     <tbody id="suspendEventTbody">\r\n		{{#resultData}}\r\n		<tr>\r\n			<td >{{eventid}}</td>\r\n			<td>{{eventdisplayname}}</td>\r\n			<td>{{displayDateTime}}</td>\r\n			<td>\r\n				<a data-id="{{id}}" data-event-id="{{eventid}}" class="recoverEvent"><%=CustomEvent.EventManagement.recoverUse%></a>\r\n			</td>\r\n		</tr>\r\n		{{/resultData}}\r\n		{{^resultData}}\r\n		<tr>\r\n			<td colspan="4" class="noData"><%=GameCommon.noData%></td>\r\n		</tr>\r\n		{{/resultData}}\r\n     </tbody>\r\n </table>'}),define("text!templates/customEvent/clearEventTip.html",[],function(){return'<div class="Pop_line">\r\n	<div class="timetop">\r\n    	<b class="l"><%=CustomEvent.EventManagement.tip%></b>\r\n    </div>\r\n	<div class="Poptxt">\r\n    	<p class="Prompt"><%=CustomEvent.EventManagement.clearTip%></p>\r\n        <div class="opeDiv after">\r\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/customEvent/EventManagementView",["backbone","mustache","utils/ModelBox","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","models/customEvent/EventManagement","text!templates/customEvent/eventManagement.html","text!templates/customEvent/eventManageList.html","text!templates/customEvent/suspendEventList.html","text!templates/customEvent/clearEventTip.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click .clearEvent":"clearEvent","click .suspendEvent":"suspendEvent","click .recoverEvent":"recoverEvent","click #eventManagementTableBody>tr>td>#edit":"showEdit","blur #eventManagementTableBody>tr>td>#edit":"saveDisplayName","click #eventManagementTableBody>tr>td>#hide":"toggleHide"},initialize:function(){$("#container").html(_.template(u,c)),this.render()},render:function(){return this.renderEventManageTable(),this.renderSuspendEventTable(),this},renderSuspendEventTable:function(){o.fetchSuspendEventList({data:Params,success:function(e){var n={resultData:e};$("#suspendEventTableDiv").html(t.render(_.template(f,c),n)),e&&e.length&&r.dataTable({$el:$("#suspendEventTable")})}})},renderEventManageTable:function(){$("#eventManagementTableTitle").tabs({indicator:!0}),o.fetchCustomeventManageList({data:Params,success:function(e){var n={resultData:e,visibleFlag:function(){return this.visible?"off":"on"}};$("#eventManagementTableDiv").html(t.render(_.template(a,c),n)),e&&e.length&&r.dataTable({$el:$("#eventManagementTable")}),$("#eventManagementTable").tabs({hoverTooltip:!0})}})},showEdit:function(e){$(e.currentTarget).attr("class","Editorput")},saveDisplayName:function(e){var t=$(e.currentTarget),r=t.attr("data-id"),i=t.attr("data-name"),s=t.val()||"";if(i===s){t.attr("class","notEditorput");return}o.updateEventDisplayName({data:{id:r,productid:Params.productID,eventdisplayname:s},success:function(e){e?e.isexsit?n.alert({message:c.CustomEvent.EventManagement.nameIsExsit}):(t.attr("class","notEditorput"),t.attr("data-name",e.eventdisplayname),t.attr("value",e.eventdisplayname),t.parent().next("td").html(e.displayDateTime)):n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})},toggleHide:function(e){var t=$(e.currentTarget),r=t.attr("data-id"),i=t.attr("isvisible"),s=!0;"false"===i?s=!0:"true"===i&&(s=!1),o.updateVisible({data:{id:r,productid:Params.productID,visible:s},success:function(e){e?(t.parent().prev("td").html(e.displayDateTime),t.attr("isvisible",e.visible),s?t.attr("class","off mauto"):t.attr("class","on mauto")):n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})},clearEvent:function(e){var t=this,r=$(e.currentTarget).attr("data-id"),i=$(e.currentTarget).attr("data-event-id");n.confirm({message:_.template(l,c),buttons:[{".Confirm":function(){n.unblock(),o.clearEvent({data:{id:r,productid:Params.productID},success:function(e){if(e){var r=c.CustomEvent.EventManagement;currentLocale==="zh_cn"?n.alert({message:r.eventId+" ( "+i+" ) "+r.clearSuccess}):n.alert({message:r.eventId+r.clearSuccess}),t.renderEventManageTable(),t.renderSuspendEventTable()}else n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})},".Cancel":function(){n.unblock()}}]})},recoverEvent:function(e){var t=!1,n=this;n.suspend(n,e,t)},suspendEvent:function(e){var t=!0,n=this;n.suspend(n,e,t)},suspend:function(e,t,r){var i=$(t.currentTarget).attr("data-id"),s=$(t.currentTarget).attr("data-event-id");o.suspendEvent({data:{id:i,productid:Params.productID,suspend:r},success:function(t){if(t){var i=c.CustomEvent.EventManagement;r?(currentLocale==="zh_cn"?n.alert({message:i.eventId+" ( "+s+" ) "+i.stopUsed}):n.alert({message:i.eventId+i.stopUsed}),e.renderEventManageTable(),e.renderSuspendEventTable()):(currentLocale==="zh_cn"?n.alert({message:i.eventId+" ( "+s+" ) "+i.recoverUsed}):n.alert({message:i.eventId+i.recoverUsed}),e.renderSuspendEventTable(),e.renderEventManageTable())}else n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})}});return h}),define("models/analysisTools/ChartRemarkModel",["backbone"],function(e){var t=e.Model.extend({});return t}),define("collections/ChartRemarkList",["backbone","models/analysisTools/ChartRemarkModel"],function(e,t){var n=e.Collection.extend({model:t,url:"/game/v1/chartRemark/fetchRemarkList",addObject:function(e,n){n=n||{},this.add(new t(e))}});return n}),define("text!templates/analysisTools/chartRemark.html",[],function(){return'<div class="content r">\r\n	<!--------------增加备注项目-------------->\r\n    <div class="boxmax">\r\n    	<a class="maxbut" id="addRemark"><font class="add"><%=AnalysisTools.ChartRemark.addRemark%></font></a>\r\n    </div>\r\n    \r\n	<!--------------图表备注列表-------------->\r\n	<div class="boxmax">\r\n    	<div id="milestone">\r\n	    	<div class="title" role="title">\r\n				<strong class="l"><%=AnalysisTools.ChartRemark.milestone%></strong>\r\n			</div>\r\n    	</div>\r\n        <div class="tablebox" id="reamrkListDiv">\r\n             <div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div>\r\n		</div>\r\n    </div>\r\n</div>\r\n'}),define("text!templates/analysisTools/remarkList.html",[],function(){return'<table cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1" id="remarkListTable">\r\n	<thead>\r\n       <tr>\r\n<!--        	<th width="5%">&nbsp;</th> -->\r\n           <th width="15%">{{AnalysisTools.ChartRemark.remarkDate}}</th>\r\n           <th width="20%">{{AnalysisTools.ChartRemark.remarkTitle}}</th>\r\n           <th width="50%">{{AnalysisTools.ChartRemark.remarkContent}}</th>\r\n           <th width="15%">{{AnalysisTools.ChartRemark.remarkOperate}}</th>\r\n       </tr>\r\n   </thead>\r\n   <tbody id="remarkList">\r\n   		{{#list}}\r\n			<tr>\r\n<!-- 			    <td width="5%"></td> -->\r\n			    <td width="15%">{{remarkDate}}</td>\r\n			    <td width="20%" title="{{remarkTitle}}">{{remarkTitle}}</td>\r\n			    <td width="50%" title="{{remarkContent}}">{{remarkContent}}</td>\r\n			    <td width="15%">\r\n			    	<a id="edit" data-id="{{id}}">{{AnalysisTools.ChartRemark.edit}}</a>\r\n					<a id="delete" data-id="{{id}}">{{AnalysisTools.ChartRemark.delete}}</a>\r\n			    </td>\r\n			</tr>\r\n		{{/list}}\r\n		{{^list}}\r\n			<tr><td colspan="4" class="noData">{{GameCommon.noData}}</td></tr>\r\n		{{/list}}\r\n    </tbody>\r\n</table>\r\n\r\n'}),define("views/analysisTools/ChartRemarkView",["backbone","mustache","utils/ModelBox","utils/remarkUtil","utils/dataTableUtil","models/analysisTools/ChartRemark","collections/ChartRemarkList","text!templates/analysisTools/chartRemark.html","text!templates/analysisTools/remarkList.html","text!templates/analysisTools/addRemark.html","text!templates/analysisTools/editRemark.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click #addRemark":"addRemark","click #delete":"deleteRemark","click #edit":"editRemark"},initialize:function(){$("#container").html(_.template(u,c)),this.render()},addAllRemarkList:function(){var e=this;s.fetchRemarkList({data:"productid="+Params.productID,success:function(e){e&&_.each(e,function(e){e.remarkDate=e.remarkDate.toString().replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")});var n={list:e,AnalysisTools:c.AnalysisTools};$("#reamrkListDiv").html(t.render(a,n)),i.dataTable({$el:$("#remarkListTable")})}})},render:function(){this.addAllRemarkList()},addRemark:function(){r.popRemarkDiv(_.template(f,c),null,this.addAllRemarkList)},editRemark:function(e){var t=this,n=$(e.currentTarget),i=n.attr("data-id");s.queryRemark({data:"id="+i,success:function(e){e&&(e.remarkDate=e.remarkDate.toString().replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3"),e.AnalysisTools=c.AnalysisTools,r.popRemarkDiv(_.template(l,e),null,t.addAllRemarkList))}})},deleteRemark:function(e){r.deleteRemarkById(e,this.addAllRemarkList)}});return h}),define("models/warning/Warning",["models/BaseModel"],function(e){var t=[{name:"warningList",url:"/v1/warning/warningList"},{name:"updateWarningStatus",url:"/v1/warning/updateWarningStatus"},{name:"deleteWarning",url:"/v1/warning/deleteWarning"},{name:"updateWarning",url:"/v1/warning/updateWarning"},{name:"eventList",url:"/v1/warning/eventList"},{name:"partnerList",url:"/v1/warning/partnerList"},{name:"addWarning",url:"/v1/warning/addWarning"},{name:"fetchWarningById",url:"/v1/warning/fetchWarningById"}];return e.init(t)}),define("models/warning/WarningNotify",["models/BaseModel"],function(e){var t=[{name:"deleteWarningNotify",url:"/v1/warningNotify/deleteWarningNotify"},{name:"warningNotifyList",url:"/v1/warningNotify/warningNotifyList"}];return e.init(t)}),define("text!templates/analysisTools/warning.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax" id="addNewWarningDiv">\r\n		<a class="maxbut" id="addFunnelBtn"><font class="add"><%=Warning.addWarning%></font></a>\r\n		\r\n	</div>\r\n	<div class="boxmax">\r\n		<div id="customEventEventDataEventOverview">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=Warning.createdWarning%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox" id="warningDiv">\r\n			<table id="customEventList" width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1">\r\n                <thead>\r\n                	<tr>\r\n                    	<th width="10" class="left"><%=Warning.warningName%></th>\r\n			            <th width="37">IF</th>\r\n			            <th width="37">THEN</th>\r\n			            <th width="5"><%=Warning.warningStatus%></th>\r\n			            <th width="10"><%=Warning.operator%></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                	<tr class="login_tr">\r\n						<td colspan="5">\r\n							<div class="login">\r\n								<img src="images/loading.gif" height="25px"></img> <br>\r\n							<%=GameCommon.loadingData%>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n                </tbody>\r\n            </table>\r\n		</div>\r\n\r\n\r\n		<div class="boxmax">\r\n		<div id="customEventEventDataEventOverview">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=Warning.warningNotify%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox" id="warningNotifyDiv">\r\n			<table id="customEventList" width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1">\r\n                <thead>\r\n                	<tr>\r\n                    	<th><%=Warning.warningTime%></th>\r\n			            <th><%=Warning.warningName%></th>\r\n			            <th><%=Warning.warningReason%></th>\r\n			            <th><%=Warning.operator%></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                	<tr class="login_tr">\r\n						<td colspan="4">\r\n							<div class="login">\r\n								<img src="images/loading.gif" height="25px"></img> <br>\r\n							<%=GameCommon.loadingData%>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n                </tbody>\r\n            </table>\r\n		</div>\r\n	</div>	\r\n</div>\r\n\r\n<script>\r\n	$("select").sSelect();\r\n</script>'}),define("text!templates/analysisTools/warning-table.html",[],function(){return'<table id="warningListTable" width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1">\r\n    <thead>\r\n    	<tr>\r\n        	<th width="10" class="left"><%=Warning.warningName%></th>\r\n            <th width="37">IF</th>\r\n            <th width="37">THEN</th>\r\n            <th width="5"><%=Warning.warningStatus%></th>\r\n            <th width="10"><%=Warning.operator%></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n        {{#resultData}}\r\n        <tr class="{{trclass}} ">\r\n            <td class="left" title=\'{{warningName}}\'>{{warningName}}</td>\r\n            <td title="{{ifStr}}" class="left">{{ifStr}}</td>\r\n            <td title="发送邮件通知：{{mails}}" class="left"><%=Warning.sendEmail%>:{{mails}}</td>\r\n            <td >\r\n                <a href="javascript:void(0);" class="status" data-id="{{id}}" data-value="{{warningStatus}}">{{status}}</a>\r\n            </td>\r\n            <td ><a href="javascript:void(0);" data-id="{{id}}" class="edit"><%=Warning.edit%></a><a href="javascript:void(0);" data-id="{{id}}" class="delete"><%=Warning.delete%></a></td>\r\n        </tr>\r\n        {{/resultData}}\r\n        {{^resultData}}\r\n            <tr><td colspan="5" class="noData"><%=GameCommon.noData%></td></tr>\r\n        {{/resultData}}\r\n    </tbody>\r\n</table>'}),define("text!templates/analysisTools/warning-notify-table.html",[],function(){return'<table id="warningNotifyListTable" width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1">\r\n    <thead>\r\n    	<tr>\r\n        	<th><%=Warning.warningTime%></th>\r\n            <th><%=Warning.warningName%></th>\r\n            <th><%=Warning.warningReason%></th>\r\n            <th><%=Warning.operator%></th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n    	{{#resultData}}\r\n         <tr class="{{trclass}}">\r\n            <td width="25%">{{notifyTimeStr}}</td>\r\n            <td width="25%" title="{{warningBean.warningName}}">{{warningBean.warningName}}</td>\r\n            <td width="25%" title="{{warningBean.ifStr}}">{{warningBean.ifStr}}</td>\r\n            <td width="25%">\r\n                <a href="javascript:void(0);" data-id="{{id}}" class="delete"><%=Warning.delete%></a>\r\n            </td>\r\n        </tr>\r\n        {{/resultData}}\r\n        {{^resultData}}\r\n            <tr><td colspan="4" class="noData"><%=GameCommon.noData%></td></tr>\r\n        {{/resultData}}\r\n    </tbody>\r\n</table>'}),define("text!templates/analysisTools/add-warning.html",[],function(){return'<div class="Pop_line" id="editNewWarning">\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=i18n.Warning.addWarning%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n        <ul class="setupPop">\r\n			<li class="warningli after">\r\n				<b><%=i18n.Warning.warningName%>：</b>\r\n				<input value="" id=\'warningName\' class="textinput" type="text">\r\n			</li>\r\n			<li class="warningli after">\r\n				<b>IF：</b>\r\n				<label><%=i18n.Warning.someDay%></label>\r\n        		<select id="metricsName">\r\n        			<option value="1"><%=i18n.Warning.metricsName.install%></option>\r\n        			<option value="2"><%=i18n.Warning.metricsName.newPlayer%></option>\r\n        			<option value="3"><%=i18n.Warning.metricsName.partnerInstall%></option>\r\n        			<option value="4"><%=i18n.Warning.metricsName.DAU%></option>\r\n        			<option value="5"><%=i18n.Warning.metricsName.registerConvert%></option>\r\n        			<option value="6"><%=i18n.Warning.metricsName.customNum%></option>\r\n        			<option value="7"><%=i18n.Warning.metricsName.charge%></option>\r\n        			<option value="8"><%=i18n.Warning.metricsName.purchase%></option>\r\n        		</select>\r\n        		<label><%=i18n.Warning.value%></label>\r\n        		<select id="compareType">\r\n        			<option value="1"><%=i18n.Warning.compareType.prevDay%></option>\r\n        			<option value="2"><%=i18n.Warning.compareType.prevWeek%></option>\r\n        			<option value="3"><%=i18n.Warning.compareType.dataValue%></option>\r\n        		</select>\r\n        		<select id="compareOperator">\r\n        			<option value="1"><%=i18n.Warning.compareOperator.overtop%></option>\r\n        			<option value="2"><%=i18n.Warning.compareOperator.greatThan%></option>\r\n        			<option value="3"><%=i18n.Warning.compareOperator.lessThan%></option>\r\n        		</select>\r\n        		<select id="unit">\r\n        			<option value="1"><%=i18n.Warning.unit.precent%></option>\r\n        			<option value="2"><%=i18n.Warning.unit.dataValue%></option>\r\n        		</select>\r\n        		<input class="textinput" style="width:50px" id="warningValue" value="">\r\n        		<small id="warningValueUnit" style="display:block;float:left;">%</small>\r\n			</li> \r\n			<li class="warningli" id=\'metricsItemDiv\'  style="display:none;">\r\n				\r\n			</li>\r\n			<li class="warningli after">\r\n				<b>THEN：</b>\r\n				<label><%=i18n.Warning.sendEmail%></label>\r\n				<ol class=\'email\'>\r\n					<li class="emailInput l relative"><input class="textinput"><a href="javascript:void(0);">删除</a></li>\r\n        			<a href="javascript:void(0);" id="addEmailBtn">添加</a >\r\n        		</ol>\r\n			</li>	\r\n 		</ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a class="timecolse r Confirm" id="saveBtn"><%=i18n.Warning.save_close%></a>\r\n            <a class="r Cancel" id="canelBtn"><%=i18n.Warning.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/analysisTools/edit-warning.html",[],function(){return'<div class="Pop_line" id="editNewWarning">\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=i18n.Warning.editWarning%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n        <ul class="setupPop">\r\n			<li class="warningli after">\r\n				<b><%=i18n.Warning.warningName%>：</b>\r\n				<input value="<%=warningBean.warningName%>" id=\'warningName\' class="textinput" type="text">\r\n			</li>\r\n			<li class="warningli after">\r\n				<b>IF：</b>\r\n				<label><%=i18n.Warning.someDay%></label>\r\n                <select id="metricsName">\r\n                    <option value="1"><%=i18n.Warning.metricsName.install%></option>\r\n                    <option value="2"><%=i18n.Warning.metricsName.newPlayer%></option>\r\n                    <option value="3"><%=i18n.Warning.metricsName.partnerInstall%></option>\r\n                    <option value="4"><%=i18n.Warning.metricsName.DAU%></option>\r\n                    <option value="5"><%=i18n.Warning.metricsName.registerConvert%></option>\r\n                    <option value="6"><%=i18n.Warning.metricsName.customNum%></option>\r\n                    <option value="7"><%=i18n.Warning.metricsName.charge%></option>\r\n                    <option value="8"><%=i18n.Warning.metricsName.purchase%></option>\r\n                </select>\r\n        		<label><%=i18n.Warning.value%></label>\r\n                <select id="compareType">\r\n                    <option value="1"><%=i18n.Warning.compareType.prevDay%></option>\r\n                    <option value="2"><%=i18n.Warning.compareType.prevWeek%></option>\r\n                    <option value="3"><%=i18n.Warning.compareType.dataValue%></option>\r\n                </select>\r\n        		<select id="compareOperator">\r\n                    <option value="1"><%=i18n.Warning.compareOperator.overtop%></option>\r\n                    <option value="2"><%=i18n.Warning.compareOperator.greatThan%></option>\r\n                    <option value="3"><%=i18n.Warning.compareOperator.lessThan%></option>\r\n                </select>\r\n                <select id="unit">\r\n                    <option value="1"><%=i18n.Warning.unit.precent%></option>\r\n                    <option value="2"><%=i18n.Warning.unit.dataValue%></option>\r\n                </select>\r\n        		<input class="textinput" style="width:50px;" id="warningValue" value="<%=warningBean.warningValue%>">\r\n        		<small id="warningValueUnit" style="display:block;float:left;">%</small>\r\n			</li> \r\n			<li class="warningli after" id=\'metricsItemDiv\'  style="display:none;">\r\n				<b>&nbsp;</b>\r\n				<label>选择渠道：</label>\r\n				<select>\r\n        			<option value="1">百分比</option>\r\n        			<option value="2">数据值</option>\r\n        		</select>\r\n			</li>\r\n			<li class="warningli after">\r\n				<b>THEN：</b>\r\n				<label><%=i18n.Warning.sendEmail%></label>\r\n				<ol class=\'email after\'>\r\n        			<a href="javascript:void(0);" id="addEmailBtn">添加</a >\r\n        		</ol>\r\n			</li>	\r\n 		</ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a class="timecolse r Confirm" id="saveBtn"><%=i18n.Warning.save_close%></a>\r\n            <a class="r Cancel" id="canelBtn"><%=i18n.Warning.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/analysisTools/WarningView",["backbone","mustache","utils/ModelBox","utils/dataTableUtil","models/warning/Warning","models/warning/WarningNotify","text!templates/analysisTools/warning.html","text!templates/analysisTools/warning-table.html","text!templates/analysisTools/warning-notify-table.html","text!templates/analysisTools/add-warning.html","text!templates/analysisTools/edit-warning.html","utils/RegexUtil","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{"click #warningListTable a.status":"updateWarningStatus","click #warningListTable a.delete":"deleteWarning","click #warningListTable a.edit":"editWarning","click #warningNotifyListTable a.delete":"deleteWarningNotify","click #addFunnelBtn":"addWarning"},addWarning:function(e){this.Pop_dailog(),$("select").sSelect()},editWarning:function(e){var t=$(e.currentTarget).attr("data-id"),n=this;i.fetchWarningById({data:{id:t},success:function(e){var t=e,r=t.warningName;n.Pop_dailog(e),$("#compareOperator").find("option[value='"+e.compareOperator+"']").attr("selected",!0),$("#compareType").find("option[value='"+e.compareType+"']").attr("selected",!0),e.compareType==3?($("#unit").find("option[value='2']").attr("selected",!0),$("#warningValueUnit").html("")):($("#unit").find("option[value='1']").attr("selected",!0),$("#warningValueUnit").html("%")),$("#metricsName").find("option[value='"+e.metricsId+"']").attr("selected",!0),$("#metricsItemDiv").show(),$("#metricsItemDiv").html(""),e.metricsId==3?($("#metricsItemDiv").html("<b>&nbsp;</b><label>"+h.Warning.choosePartner+'：</label><select id="partnerSelect"><option value="-1">'+h.Warning.partner+"</option></select>"),i.partnerList({data:Params,success:function(e){for(var n=0;n<e.length;n++){var r="";t.metricsItemId==e[n].item&&(r="selected"),$("#partnerSelect").append('<option value="'+e[n].item+'" '+r+">"+e[n].value+"</option>")}$("select").sSelect()}})):e.metricsId==6?($("#metricsItemDiv").html("<b>&nbsp;</b><label>"+h.Warning.chooseEvent+'：</label><select id="eventSelect"><option value="-1">'+h.Warning.event+"</option></select>"),i.eventList({data:Params,success:function(e){for(var n=0;n<e.length;n++){var r="";t.metricsItemId==e[n].item&&(r="selected"),$("#eventSelect").append('<option value="'+e[n].item+'" '+r+">"+e[n].value+"</option>")}}})):$("#metricsItemDiv").hide(),$("select").sSelect();for(var s=0;s<e.mailList.length;s++)$("#addEmailBtn").before('<li class="emailInput l relative"><input class="textinput" value="'+e.mailList[s]+'"><a href="javascript:void(0);">删除</a></li>')}})},Pop_dailog:function(e){var t="",r="",s=0;e?(t=_.template(l,{warningBean:e,i18n:h}),r="updateWarning",s=e.id):(t=_.template(f,{i18n:h}),r="addWarning");var o=this;n.confirm({message:t,buttons:[{"#saveBtn":function(){var t=$("#warningName").val();if(t==""){alert(h.Warning.notice.warningNameIsNull);return}var u=$("#metricsName").val(),a="";if(u==3){a=$("#partnerSelect").val();if(a==-1||a==""){alert(h.Warning.notice.mustChoosePartner);return}}if(u==6){a=$("#eventSelect").val();if(a==-1||a==""){alert(h.Warning.notice.mustChooseEvent);return}}var f=$("#warningValue").val();if(f==""||f==h.Warning.addWarningValue){alert(h.Warning.notice.warningValueIsNull);return}if(!c.isNum($("#warningValue").val())){alert(h.Warning.notice.warningValueIsNotNum);return}var l=!0,p=[];$("#editNewWarning .emailInput").find("input").each(function(){if($(this).val()=="")return alert(h.Warning.notice.emailIsNull),l=!1,!1;if(!c.isEmail($(this).val()))return alert(h.Warning.notice.mailFormatError),l=!1,!1;p.push($(this).val())});if(l&&o.isRepeat(p))return alert(h.Warning.notice.emailRepeat),l=!1,!1;if(l){var d=$("#compareType").val(),v=$("#compareOperator").val(),m=!1;e&&e.warningName!=t&&(m=!0);var g={developerId:Params.developerID,nameChanged:m,id:s,warningName:t,productId:Params.productID,platformId:Params.platformID==""?0:Params.platformID,metricsId:u,metricsItemId:a==""?0:a,compareType:d,compareOperator:v,warningValue:f,mailList:p};i[r]({data:g,success:function(e){var t=e.code;t==401?alert(h.Warning.notice.nameExist):t==500?alert(h.Warning.notice.innerError):(n.unblock(),o.fetchWarningList())}})}},"#canelBtn":function(){n.unblock()},"#addEmailBtn":function(){if($("#editNewWarning .emailInput").length>=5)return alert(h.Warning.notice.mailNumOverTop),!1;$("#addEmailBtn").before('<li class="emailInput l relative"><input class="textinput"><a href="javascript:void(0);">删除</a></li>')},".emailInput":{event:"mouseover",callback:function(e){$(".emailInput").length>1&&$(e.currentTarget).find("a").show()}},"#editNewWarning .emailInput":{event:"mouseout",callback:function(e){$(".emailInput").length>1&&$(e.currentTarget).find("a").hide()}},"#editNewWarning li.emailInput a":function(e){$(e.currentTarget).parent().remove()},"#compareType":{event:"change",callback:function(e){var t=$(e.currentTarget).val();$("#compareOperator").find("option").each(function(){$(this).attr("selected",!1)}),$("#unit").find("option").each(function(){$(this).attr("selected",!1)}),t!=3?($("#compareOperator").find("option[value='1']").attr("selected",!0),$("#unit").find("option[value='1']").attr("selected",!0),$("#warningValueUnit").html("%")):($("#compareOperator").find("option[value='2']").attr("selected",!0),$("#unit").find("option[value='2']").attr("selected",!0),$("#warningValueUnit").html("")),$("select").sSelect()}},"#compareOperator":{event:"change",callback:function(e){var t=$(e.currentTarget).val();$("#compareType").find("option").each(function(){$(this).attr("selected",!1)}),$("#unit").find("option").each(function(){$(this).attr("selected",!1)}),t==1?($("#compareType").find("option[value='1']").attr("selected",!0),$("#unit").find("option[value='1']").attr("selected",!0),$("#warningValueUnit").html("%")):($("#compareType").find("option[value='3']").attr("selected",!0),$("#unit").find("option[value='2']").attr("selected",!0),$("#warningValueUnit").html("")),$("select").sSelect()}},"#unit":{event:"change",callback:function(e){var t=$(e.currentTarget).val();$("#compareType").find("option").each(function(){$(this).attr("selected",!1)}),$("#compareOperator").find("option").each(function(){$(this).attr("selected",!1)}),t==1?($("#compareType").find("option[value='1']").attr("selected",!0),$("#compareOperator").find("option[value='1']").attr("selected",!0),$("#warningValueUnit").html("%")):($("#compareType").find("option[value='3']").attr("selected",!0),$("#compareOperator").find("option[value='2']").attr("selected",!0),$("#warningValueUnit").html("")),$("select").sSelect()}},"#metricsName":{event:"change",callback:function(e){$("#metricsItemDiv").show(),$("#metricsItemDiv").html("");var t=$(e.currentTarget).val();t==3?($("#metricsItemDiv").html("<b>&nbsp;</b><label>"+h.Warning.choosePartner+'：</label><select id="partnerSelect"><option value="-1">'+h.Warning.partner+"</option></select>"),i.partnerList({data:Params,success:function(e){for(var t=0;t<e.length;t++)$("#partnerSelect").append('<option value="'+e[t].item+'">'+e[t].value+"</option>")}})):t==6?($("#metricsItemDiv").html("<b>&nbsp;</b><label>"+h.Warning.choseEvent+'：</label><select id="eventSelect"><option value="-1">'+h.Warning.event+"</option></select>"),i.eventList({data:Params,success:function(e){for(var t=0;t<e.length;t++)$("#eventSelect").append('<option value="'+e[t].item+'">'+e[t].value+"</option>")}})):$("#metricsItemDiv").hide(),$("select").sSelect()}}}]})},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},initialize:function(){$("#container").html(_.template(o,h)),this.render()},render:function(){return this.fetchWarningList(),this.fetchWarningNotifyList(),this},fetchWarningList:function(){i.warningList({data:Params,success:function(e){var n={resultData:e};n.trclass=function(){return(e.indexOf(this)+1)%2==0?"changeColor":""},n.status=function(){return this["warningStatus"]=="1"?h.Warning.warningNormal:h.Warning.warningStoping},n.mails=function(){return this.mailList.join(",")},$("#warningDiv").html(t.render(_.template(u,h),n)),r.dataTable({$el:$("#warningListTable")})}})},updateWarningStatus:function(e){var t=$(e.currentTarget).attr("data-id"),n=$(e.currentTarget).attr("data-value");i.updateWarningStatus({data:{warningStatus:n==0?1:0,id:t},success:function(t){t==1&&(n==0?($(e.currentTarget).html(h.Warning.warningNormal),$(e.currentTarget).attr("data-value","1")):($(e.currentTarget).html(h.Warning.warningStoping),$(e.currentTarget).attr("data-value","0")))}})},deleteWarning:function(e){var t=$(e.currentTarget).attr("data-id");i.deleteWarning({data:{id:t},success:function(t){t==1&&$(e.currentTarget).parent().parent().remove()}})},fetchWarningNotifyList:function(){var e=this;s.warningNotifyList({data:Params,success:function(e){console.log(e);var n={resultData:e};n.trclass=function(){return(e.indexOf(this)+1)%2==0?"changeColor":""},n.notifyTimeStr=function(){return(new Date(this.notifyTime)).toFormat("YYYY-MM-DD")},$("#warningNotifyDiv").html(t.render(_.template(a,h),n)),r.dataTable({$el:$("#warningNotifyListTable")})}})},deleteWarningNotify:function(e){var t=$(e.currentTarget).attr("data-id");s.deleteWarningNotify({data:{id:t},success:function(t){t==1&&$(e.currentTarget).parent().parent().remove()}})}});return p}),define("text!templates/operations/campaigns.html",[],function(){return'<div class="main-box">\r\n	<div class="contents">\r\n		<div class="steps">\r\n			<ul id="steps">\r\n				<li id="step1" data="1" class="on-choose">\r\n					<span class="wrong">1</span>\r\n					<font><%=Operations.campaigns.toWhom %></font>\r\n					<img src="images/icon-step-green.png" />\r\n				</li>\r\n				<li id="step2" data="2" >\r\n					<span class="wrong">2</span>\r\n					<font><%=Operations.campaigns.what %></font>\r\n					<img src="images/icon-step-grey.png" />\r\n				</li>\r\n				<li id="step3" data="3" >\r\n					<span class="wrong">3</span>\r\n					<font><%=Operations.campaigns.readyToSend %></font>\r\n				</li>\r\n			</ul>\r\n		</div>\r\n		<div  class="main-content clearfix">\r\n			<div id="whoToSend">\r\n                <div class="choose-platform">\r\n                     <div class="operate">\r\n                     	<h2><%=Operations.campaigns.activityName %></h2>\r\n                         <input type="text" class="input-active-name" id="_operations_name" placeholder="<%=Operations.campaigns.newPromotion %>" value="<%=msgName%>"/>\r\n                         <span></span>\r\n                     </div>\r\n                     <div class="operate">    \r\n                         <h2><%=Operations.campaigns.choosePlatform %></h2>\r\n                         <div class="operate-choosePlatform">\r\n                         	<%=_platformTpl%>\r\n                         	<span></span>\r\n                         </div>\r\n                     </div>\r\n                </div>\r\n                <h2><%=Operations.campaigns.chooseUserSegment %></h2>\r\n                <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table-userGroup">\r\n                  <tr class="on-choose" data="0">\r\n                    <th scope="row"><input name="userGroup" type="radio" value="" checked/></th>\r\n                    <td><font><%=Operations.campaigns.allPlayers %></font><span><%=Operations.campaigns.toPushMessage %></span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr class="precise" data="1">\r\n                    <th scope="row"><input name="userGroup" type="radio" value="" /></th>\r\n                    <td><font><%=Operations.campaigns.precisionSegment %></font><span><%=Operations.campaigns.toPushMessageToThe %></span>\r\n<!--                         <div class="numbers" id="_segmentDeviceNum" style="display:none;"> -->\r\n<!-- 							<em>图标</em><b class="_segmentDeviceNum"></b><strong>三角图标</strong> -->\r\n<!-- 						</div> -->\r\n                    </td>\r\n                  </tr>\r\n                </table>\r\n				<div class="template-detail" style="display:none;">\r\n					<div class="login">\r\n						<img src="images/loading.gif" height="25px"></img> \r\n						<br><%=GameCommon.loadingData%>\r\n					</div>\r\n				</div>\r\n				<div class="operate-save">\r\n					<a href="javascript:void(0)" class="save" id="whoToSendSaveBtn"><%=Operations.buttons.saveAndNext %></a>\r\n					<a href="javascript:void(0)" class="cancel" id="whoToSendCancelBtn"><%=Operations.buttons.cancel %></a>\r\n				</div>\r\n			</div>\r\n			<div id="whatToSend"  style="display:none;">\r\n				<div class="login">\r\n					<img src="images/loading.gif" height="25px"></img> \r\n				<br> <%=GameCommon.loadingData%>\r\n			</div>\r\n			</div>\r\n			<div id="prepareToSend"  style="display:none;">\r\n				<div class="login">\r\n					<img src="images/loading.gif" height="25px"></img> \r\n				<br> <%=GameCommon.loadingData%>\r\n			</div>\r\n			</div>\r\n			<div class="send-content-right" id="_phone_preview"  style="display:none;">\r\n				<div class="preview-phone">\r\n				</div>  \r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!templates/operations/accurateGroup.html",[],function(){return'<h5><%=Operations.accurateGroup.groupsTemplates %>(<%=Operations.accurateGroup.groupsTemplatesRemark %>)</h5>\r\n<div class="userGroup-list">\r\n	<a class="abtn aleft" href="#left"><div class="ico-pre">pre<%=Operations.msg.icon %></div></a>\r\n	<div class="templateList">\r\n		<ul id="templateList">\r\n			<li _templateExpression="" _templateId="-1" class="on-choose" id="_custom_defined">\r\n				<span class="icon-add-self"><%=Operations.buttons.addIcons %></span>\r\n				<%=Operations.buttons.custom %>\r\n				<em><%=Operations.prepareToSend.triangleIcon %></em>\r\n			</li>\r\n			<%_.each(list,function(obj,index){\r\n			%>\r\n				<li _system="<%=obj.system%>" _forecast="<%=obj.forcast%>" _templateId="<%=obj.id%>" _segmentName="<%=obj.labelName%>" _templateExpression="<%=obj.forcast ? \'\' : obj.expression%>">\r\n					<span class="<%=obj._className%>"><%=Operations.buttons.predictionIcon %></span>\r\n					<%=obj.labelName%><em><%=Operations.prepareToSend.triangleIcon %></em>\r\n				<%if(!obj.system){%>\r\n					<strong><%=Operations.buttons.deleteIcon %></strong>\r\n				<%}%>\r\n				</li>\r\n			<%})%>\r\n		</ul>\r\n	</div>\r\n	<a class="abtn aright" href="#right"><div class="ico-next">next<%=Operations.msg.icon %></div></a>\r\n</div>\r\n<div class="conditions clearfix">\r\n	<div class="condition-self clearfix">\r\n		<h4><%=Operations.buttons.playersAre %></h4>\r\n		<font><%=Operations.accurateGroup.groupsTemplatesRemark1 %></font>\r\n<!-- 		<a href="javascript:void(0)" class="_saveNewTemplate">保存为模板</a> -->\r\n	</div>\r\n	\r\n	<div id="conditionList">\r\n	</div>\r\n	<div class="increase-condition">\r\n	</div>\r\n</div>\r\n'}),define("text!templates/operations/segmentConditions.html",[],function(){return'<a href="javascript:void(0)" class="add-condition">+<%=Operations.buttons.addConditions %>\r\n	<em><%=Operations.prepareToSend.triangleIcon %></em>\r\n</a>\r\n<div class="conditions-list">\r\n	<div class="operate-search">\r\n		<input name="" type="text" class="input-search" />\r\n		<em><img src="images/icon-search.png" /></em>\r\n	</div>\r\n	<div class="content-conditions">\r\n		<span><%=Operations.segmentConditions.gameBehavior %><em><%=Operations.prepareToSend.triangleIcon %></em></span>\r\n		<ol style="display: block">\r\n			<li class="_show"  data="lostUser"><%=Operations.conditions.churnStatus %></li>\r\n			<li	class="_show" data="loginUser"><%=Operations.segmentConditions.activeSituation %></li>\r\n			<li	class="_show" data="loginTimes"><%=Operations.segmentConditions.gameFrequency %></li>\r\n			<li	class="_show" data="useTime"><%=Operations.segmentConditions.gameDuration %></li>\r\n			<li class="_show" data="accountRegister"><%=Operations.segmentConditions.accountRegistration %></li>\r\n<!-- 			<li	class="_show" data="appVersion">游戏版本</li> -->\r\n		</ol>\r\n		<span><%=Operations.segmentConditions.paidSituation %><em><%=Operations.prepareToSend.triangleIcon %></em></span>\r\n		<ol style="display: block">\r\n			<li	class="_show" data="chargeAmount"><%=Operations.segmentConditions.payCredit %></li>\r\n			<li	class="_show" data="chargeTimes"><%=Operations.segmentConditions.payNumber %></li>\r\n			<li	class="_show" data="chargeAmountRank"><%=Operations.segmentConditions.paidPlacement %></li>\r\n		</ol>\r\n		<span><%=Operations.segmentConditions.gameSchedule %><em><%=Operations.prepareToSend.triangleIcon %></em></span>\r\n		<ol style="display: block">\r\n			<li	class="_show" data="level"><%=Operations.segmentConditions.ratingsRange %></li>\r\n			<li	class="_show" data="mission"><%=Operations.segmentConditions.levelTask %></li>\r\n		</ol>\r\n		<span><%=Operations.segmentConditions.sourcesAndProperties %><em><%=Operations.prepareToSend.triangleIcon %></em></span>\r\n		<ol style="display: block">\r\n			<li	class="_show" data="newuser"><%=Operations.segmentConditions.newTime %></li>\r\n			<li	class="_show" data="partner"><%=Operations.segmentConditions.channelSource %></li>\r\n			<li	class="_show" data="sex"><%=Operations.segmentConditions.sex %></li>\r\n			<li	class="_show" data="country"><%=Operations.segmentConditions.country %></li>\r\n		</ol>\r\n		<span><%=Operations.segmentConditions.equipment %><em><%=Operations.prepareToSend.triangleIcon %></em></span>\r\n		<ol style="display: block">\r\n			<li	style="display:none;" data="platform" ><%=Operations.segmentConditions.platform %></li>\r\n			<li	class="_show" data="model"><%=Operations.segmentConditions.model %></li>\r\n			<li	class="_show" data="os"><%=Operations.segmentConditions.operatingSystem %></li>\r\n<!-- 			<li	class="_show" data="jailbreak">越狱破解</li> -->\r\n		</ol>\r\n	</div>\r\n</div>'}),define("text!templates/operations/whatToSend.html",[],function(){return'<div class="send-content-left">\r\n	<div class="title-step">\r\n		<h4><%=Operations.whatToSend.sendContent %></h4>\r\n		<ul id="checkNoticeType" style="display:<%=displayFlag?\'block\':\'none\'%>;">\r\n			<li data="top" class="<%=_type==4 ?\'\':\'on-choose\'%>"><%=Operations.whatToSend.notifiationOnTop %></li>\r\n			<li data="popup" class="<%=_type==4 ?\'on-choose\':\'\'%>"><%=Operations.whatToSend.popUpNotification %></li>\r\n		</ul>\r\n		<span><%=Operations.whatToSend.remark %></span>\r\n	</div>\r\n	<div class="content-detail clearfix">\r\n		<div id="contentDetail">\r\n		</div>\r\n		<div class="operate-add-abTest" >+<%=Operations.whatToSend.add %>A/B Test</div>\r\n	</div>\r\n	<div class="operate-save">\r\n		<a href="javascript:void(0)" class="save" id="whatToSendSaveBtn"><%=Operations.buttons.saveAndNext %></a>\r\n		<a href="javascript:void(0)" class="cancel" id="whatToSendCancelBtn"><%=Operations.buttons.back %></a>\r\n	</div>\r\n</div>'}),define("text!templates/operations/prepareToSend.html",[],function(){return"<div class=\"send-content-left\">\r\n	<div class=\"title-step\">\r\n		<h3><%=Operations.prepareToSend.userSegment %></h3>\r\n	</div>\r\n	<div class=\"prepare-detail clearfix _prepare_send_segment\">\r\n		<ui>\r\n			<div class=\"login\">\r\n				<img src=\"images/loading.gif\" height=\"25px\"></img> \r\n			</div>\r\n		</ui>\r\n	</div>\r\n	<div class=\"title-step\" style=\"display:<%=_notice_tip==1 ? 'block' : 'none'%> ;\">\r\n		<h3><%=Operations.prepareToSend.notificationFeature %></h3>\r\n	</div>\r\n	<div class=\"prepare-detail clearfix _clickActions\">\r\n		<div class=\"login\">\r\n				<img src=\"images/loading.gif\" height=\"25px\"></img> \r\n		</div>\r\n	</div>\r\n	<div class=\"title-step\">\r\n		<h4><%=Operations.prepareToSend.sendTime %></h4>\r\n	</div>\r\n	<div class=\"prepare-detail clearfix\">\r\n		<ol class=\"clearfix\">\r\n			<li class=\"clearfix\">\r\n				<span><%=Operations.prepareToSend.setTime %></span>\r\n				<div class=\"operate _setTime\">\r\n					<font class=\"<%=sendtime.isFixed ? '' : 'on-choose'%>\" _sendTag=\"immediately\"><%=Operations.prepareToSend.sendImmediately %></font>\r\n					<font class=\"<%=sendtime.isFixed ? 'on-choose' : ''%>\" _sendTag=\"delay\"><%=Operations.prepareToSend.sendOnShcedule %></font>\r\n				</div>\r\n			</li>\r\n			<li class=\"clearfix\">\r\n				<span><%=Operations.prepareToSend.offlineWaiting %></span>\r\n				<div class=\"select\">\r\n					<ul>\r\n						<strong id=\"_send_duration\" data=\"<%=sendtime.duration%>\"><%=sendtime.duration%><%=Operations.prepareToSend.hour %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n						<div style=\"max-height:120px; overflow:auto;\">\r\n						<li data='1'>1<%=Operations.prepareToSend.hour %></li> \r\n						<li data='2'>2<%=Operations.prepareToSend.hour %></li> \r\n						<li data='3'>3<%=Operations.prepareToSend.hour %></li> \r\n						<li data='4'>4<%=Operations.prepareToSend.hour %></li> \r\n						<li data='5'>5<%=Operations.prepareToSend.hour %></li> \r\n						<li data='6'>6<%=Operations.prepareToSend.hour %></li> \r\n						<li data='7'>7<%=Operations.prepareToSend.hour %></li> \r\n						<li data='8'>8<%=Operations.prepareToSend.hour %></li> \r\n						<li data='9'>9<%=Operations.prepareToSend.hour %></li> \r\n						<li data='10'>10<%=Operations.prepareToSend.hour %></li> \r\n						<li data='11'>11<%=Operations.prepareToSend.hour %></li> \r\n						<li data='12'>12<%=Operations.prepareToSend.hour %></li> \r\n						<li data='13'>13<%=Operations.prepareToSend.hour %></li> \r\n						<li data='14'>14<%=Operations.prepareToSend.hour %></li> \r\n						<li data='15'>15<%=Operations.prepareToSend.hour %></li> \r\n						<li data='16'>16<%=Operations.prepareToSend.hour %></li> \r\n						<li data='17'>17<%=Operations.prepareToSend.hour %></li> \r\n						<li data='18'>18<%=Operations.prepareToSend.hour %></li> \r\n						<li data='19'>19<%=Operations.prepareToSend.hour %></li> \r\n						<li data='20'>20<%=Operations.prepareToSend.hour %></li> \r\n						<li data='21'>21<%=Operations.prepareToSend.hour %></li> \r\n						<li data='22'>22<%=Operations.prepareToSend.hour %></li> \r\n						<li data='23'>23<%=Operations.prepareToSend.hour %></li> \r\n						<li data='24'>24<%=Operations.prepareToSend.hour %></li> \r\n						<li data='25'>25<%=Operations.prepareToSend.hour %></li> \r\n						<li data='26'>26<%=Operations.prepareToSend.hour %></li> \r\n						<li data='27'>27<%=Operations.prepareToSend.hour %></li> \r\n						<li data='28'>28<%=Operations.prepareToSend.hour %></li> \r\n						<li data='29'>29<%=Operations.prepareToSend.hour %></li> \r\n						<li data='30'>30<%=Operations.prepareToSend.hour %></li> \r\n						<li data='31'>31<%=Operations.prepareToSend.hour %></li> \r\n						<li data='32'>32<%=Operations.prepareToSend.hour %></li> \r\n						<li data='33'>33<%=Operations.prepareToSend.hour %></li> \r\n						<li data='34'>34<%=Operations.prepareToSend.hour %></li> \r\n						<li data='35'>35<%=Operations.prepareToSend.hour %></li> \r\n						<li data='36'>36<%=Operations.prepareToSend.hour %></li> \r\n						<li data='37'>37<%=Operations.prepareToSend.hour %></li> \r\n						<li data='38'>38<%=Operations.prepareToSend.hour %></li> \r\n						<li data='39'>39<%=Operations.prepareToSend.hour %></li> \r\n						<li data='40'>40<%=Operations.prepareToSend.hour %></li> \r\n						<li data='41'>41<%=Operations.prepareToSend.hour %></li> \r\n						<li data='42'>42<%=Operations.prepareToSend.hour %></li> \r\n						<li data='43'>43<%=Operations.prepareToSend.hour %></li> \r\n						<li data='44'>44<%=Operations.prepareToSend.hour %></li> \r\n						<li data='45'>45<%=Operations.prepareToSend.hour %></li> \r\n						<li data='46'>46<%=Operations.prepareToSend.hour %></li> \r\n						<li data='47'>47<%=Operations.prepareToSend.hour %></li> \r\n						<li data='48'>48<%=Operations.prepareToSend.hour %></li> \r\n						<li data='49'>49<%=Operations.prepareToSend.hour %></li> \r\n						<li data='50'>50<%=Operations.prepareToSend.hour %></li> \r\n						<li data='51'>51<%=Operations.prepareToSend.hour %></li> \r\n						<li data='52'>52<%=Operations.prepareToSend.hour %></li> \r\n						<li data='53'>53<%=Operations.prepareToSend.hour %></li> \r\n						<li data='54'>54<%=Operations.prepareToSend.hour %></li> \r\n						<li data='55'>55<%=Operations.prepareToSend.hour %></li> \r\n						<li data='56'>56<%=Operations.prepareToSend.hour %></li> \r\n						<li data='57'>57<%=Operations.prepareToSend.hour %></li> \r\n						<li data='58'>58<%=Operations.prepareToSend.hour %></li> \r\n						<li data='59'>59<%=Operations.prepareToSend.hour %></li> \r\n						<li data='60'>60<%=Operations.prepareToSend.hour %></li> \r\n						<li data='61'>61<%=Operations.prepareToSend.hour %></li> \r\n						<li data='62'>62<%=Operations.prepareToSend.hour %></li> \r\n						<li data='63'>63<%=Operations.prepareToSend.hour %></li> \r\n						<li data='64'>64<%=Operations.prepareToSend.hour %></li> \r\n						<li data='65'>65<%=Operations.prepareToSend.hour %></li> \r\n						<li data='66'>66<%=Operations.prepareToSend.hour %></li> \r\n						<li data='67'>67<%=Operations.prepareToSend.hour %></li> \r\n						<li data='68'>68<%=Operations.prepareToSend.hour %></li> \r\n						<li data='69'>69<%=Operations.prepareToSend.hour %></li> \r\n						<li data='70'>70<%=Operations.prepareToSend.hour %></li> \r\n						<li data='71'>71<%=Operations.prepareToSend.hour %></li> \r\n						<li data='72'>72<%=Operations.prepareToSend.hour %></li> \r\n						</div>\r\n					</ul>\r\n				</div>\r\n				<div class=\"choose-time _choose_time\" style=\"display:<%=sendtime.isFixed ? 'block' : 'none'%>;\">\r\n					<font><%=Operations.prepareToSend.specifiedTime %></font>\r\n					<input type=\"text\" id=\"_delaySendTime\" readonly class=\"_input_operatorValue\" value=\"<%=sendtime.fixedTime==0 ? '' : (new Date(sendtime.fixedTime).toFormat('YYYY-MM-DD HH24:MI'))%>\">\r\n<!-- 					 <strong><img src=\"images/icon-time.png\" /><font></strong> -->\r\n				</div>\r\n			</li>\r\n			<li id=\"_push_sendtime_tip\"><%=Operations.prepareToSend.remark %></li>\r\n		</ol>\r\n	</div>\r\n<!-- 	<div class=\"title-step\"> -->\r\n<!-- 		<h4>发送测试</h4> -->\r\n<!-- 	</div> -->\r\n<!-- 	<div class=\"send-test clearfix\"> -->\r\n<!-- 		<h5> -->\r\n<!-- 			<span>1</span><font>将集成好SDK的游戏安装到您的移动设备上</font> -->\r\n<!-- 		</h5> -->\r\n<!-- 		<div class=\"contents-send clearfix\"> -->\r\n<!-- 			- 一定要同时集成统计SDK和至少一个三方推送SDK<br />- 只有在SDK集成器参与过调试的移动设备才能收到测试通知 -->\r\n<!-- 		</div> -->\r\n<!-- 		<h5> -->\r\n<!-- 			<span>2</span><font>选择所要发送的测试通知</font> -->\r\n<!-- 		</h5> -->\r\n<!-- 		<div class=\"contents-send clearfix\"> -->\r\n<!-- 			<span><input name=\"\" type=\"radio\" value=\"\" /> 活动A</span> <span><input -->\r\n<!-- 				name=\"\" type=\"radio\" value=\"\" /> 活动A</span> <span><input name=\"\" -->\r\n<!-- 				type=\"radio\" value=\"\" /> 活动A</span> -->\r\n<!-- 		</div> -->\r\n<!-- 		<h5> -->\r\n<!-- 			<span>3</span><font>点击发送测试活动</font> -->\r\n<!-- 		</h5> -->\r\n<!-- 		<div class=\"contents-send clearfix\"> -->\r\n<!-- 			<span><a href=\"javascript:void(0)\" class=\"send-active\">发送测试活动</a></span> -->\r\n<!-- 			<font>- 配置未完成，不能发送。完善配置后 <a href=\"javascript\">重新发送</a></font> -->\r\n<!-- 		</div> -->\r\n<!-- 	</div> -->\r\n	<div class=\"operate-save\">\r\n		<a href=\"javascript:void(0)\" class=\"save\" id=\"prepareToSendSaveBtn\"><%=Operations.buttons.confirmedSend %></a>\r\n		<a href=\"javascript:void(0)\" class=\"cancel\" id=\"prepareToSendCancelBtn\"><%=Operations.buttons.back %></a>\r\n	</div>\r\n</div>"}),define("text!templates/operations/iosMsg.html",[],function(){return'<div class="ab-text">\r\n	<div class="proportion" style="display:none;">\r\n		<h3><%=Operations.msg.activity %><em></em><%=Operations.msg.sendProportion %></h3>\r\n		<h3 class="abtestSliderValue"></h3>\r\n		<div class="abtestSlider"></div>\r\n		<div class="operate-delete"><a href="javascript:void(0)" class="_deleteABTest"><%=Operations.msg.deleteThisEvent %></a></div>\r\n	</div>\r\n	<ul>\r\n		<li class="clearfix">\r\n			<span><%=Operations.msg.activityContent %></span>\r\n			<input value=\'<%=obj.title.val=="" ? "" : obj.title.val%>\' placeholder="<%=Operations.msg.newActivityContent50 %>" type="text" class="input-activeTitle" />\r\n			<span style="color:#d2652c;"></span>\r\n		</li>\r\n<!-- 		<li class="clearfix"> -->\r\n<!-- 			<span>数字标注</span> -->\r\n<!-- 			<ol class="_config _notice" data="notice"> -->\r\n<!-- 				<font class=\'<%=obj.config.notice=="1" ? "on-choose" : ""%>\' data="1">打开</font> -->\r\n<!-- 				<font class=\'<%=obj.config.notice=="0" ? "on-choose" : ""%>\' data="0">关闭</font> -->\r\n<!-- 			</ol> -->\r\n<!-- 		</li> -->\r\n<!-- 		<li id="_push_ios_tip">选中状态下，成功收到推送消息时，应用图标右上角数字将自动+1。</li> -->\r\n	</ul>\r\n</div>'}),define("text!templates/operations/androidMsg.html",[],function(){return'<div class="ab-text">\r\n	<div class="proportion" style="display:none;">\r\n		<h3><%=Operations.msg.activity %><em></em><%=Operations.msg.sendProportion %></h3>\r\n		<h3 class="abtestSliderValue"></h3>\r\n		<div class="abtestSlider"></div>\r\n		<div class="operate-clearable"><a href="javascript:void(0)" class="_deleteABTest"><%=Operations.msg.deleteThisEvent %></a></div>\r\n	</div>\r\n	<ul>\r\n		<li class="clearfix">\r\n			<span><%=Operations.msg.activityTitle %></span>\r\n			<input name="" type="text" class="input-activeTitle" placeholder="<%=Operations.msg.activityTitle20 %>" value=\'<%=obj.title.val=="" ? "" : obj.title.val%>\'/>\r\n			<span style="color:#d2652c;"></span>\r\n		</li>\r\n		<li class="clearfix">\r\n			<span><%=Operations.msg.activityContent %></span>\r\n			<textarea name="" cols="" rows="" placeholder="<%=Operations.msg.newActivityContent100 %>" class="textarea-activeDetail" ><%=obj.content.val=="" ? "" : obj.content.val%></textarea>\r\n			<span style="color:#d2652c;"></span>\r\n		</li>\r\n		<li class="clearfix topOnly _border_setting" style="display:<%=_classObj._type==4?\'block\':\'none\'%>;">\r\n			<span><%=Operations.msg.borderOfActivity %></span>\r\n			<ol>\r\n				<font data="_none" class="_click <%=_classObj._border_class==\'border-none\' ? \'on-choose\' : \'\'%>"><%=Operations.msg.noBorder %></font>\r\n				<font data="_white" class="_click <%=_classObj._border_class==\'border-white\' ? \'on-choose\' : \'\'%>"><%=Operations.msg.whiteBorder %></font>\r\n				<font data="_black" class="_click <%=_classObj._border_class==\'border-black\' ? \'on-choose\' : \'\'%>"><%=Operations.msg.blackBorder %></font>\r\n				<font data="_activeBorder" class="_activeBorder <%=_classObj._border_class==\'\' ? \'on-choose\' : \'\'%>"><%=Operations.msg.customBorder %></font>\r\n			</ol>\r\n		</li>\r\n		<li class="clearfix topOnlyColor" id="_activeBorder" style="display:none;">\r\n			<span>&nbsp;</span> \r\n			<strong><%=Operations.msg.borderColor %></strong>\r\n			<div class="choose-color">\r\n				<a href="javascript:void(0)" data="_bdcolor" style="background: <%=_classObj._bordercolor%>;"><%=Operations.msg.patches %></a><em><%=_classObj._bordercolor%></em>\r\n			</div>\r\n		</li>\r\n		<li class="clearfix topOnly _background_setting" style="display:<%=_classObj._type==4?\'block\':\'none\'%>;">\r\n			<span><%=Operations.msg.background %></span>\r\n			<ol>\r\n				<font data="_white" class="_click <%=_classObj._bg_class==\'bg-white\' ? \'on-choose\' : \'\'%>"><%=Operations.msg.whiteBackground %></font>\r\n				<font data="_black" class="_click <%=_classObj._bg_class==\'bg-black\' ? \'on-choose\' : \'\'%>"><%=Operations.msg.blackBackground %></font>\r\n				<font data="_grey" class="_click  <%=_classObj._bg_class==\'bg-grey\' ? \'on-choose\'  : \'\'%>"><%=Operations.msg.greyBackground %></font>\r\n				<font data="_background" class=" _background <%=_classObj._bg_class==\'\' ? \'on-choose\'  : \'\'%>"><%=Operations.msg.customGround %></font>\r\n			</ol>\r\n		</li>\r\n		<li class="clearfix topOnlyColor" id="_background" style="display:none;">\r\n			<span>&nbsp;</span> \r\n			<strong><%=Operations.msg.backGroundValue %></strong>\r\n			<div class="choose-color _bgcolor">\r\n				<a href="javascript:void(0)" data="_bgcolor" style="background: <%=_classObj._bgcolor%>;"><%=Operations.msg.patches %></a><em><%=_classObj._bgcolor%></em>\r\n			</div> \r\n			<strong><%=Operations.msg.fontColorValues %></strong>\r\n			<div class="choose-color _fontcolor" >\r\n				<a href="javascript:void(0)" data="_fontcolor" style="background: <%=_classObj._fontcolor%>;"><%=Operations.msg.patches %></a><em><%=_classObj._fontcolor%></em>\r\n			</div>\r\n		</li>\r\n		<li class="clearfix">\r\n			<span><%=Operations.msg.wakeUpTheScreen %></span>\r\n			<ol class="_config _wakeup" data="wakeup">\r\n				<font class=\'<%=obj.config.wakeup=="1" ? "on-choose" : ""%>\' data="1"><%=Operations.msg.wakeUp %></font>\r\n				<font class=\'<%=obj.config.wakeup=="0" ? "on-choose" : ""%>\' data="0" ><%=Operations.msg.notToWakeUp %></font>\r\n			</ol>\r\n		</li>\r\n		<li class="clearfix">\r\n			<span><%=Operations.msg.messageRingtone %></span>\r\n			<ol class="_config _sound" data="sound">\r\n				<font class=\'<%=obj.config.sound=="1" ? "on-choose" : ""%>\' data="1"><%=Operations.msg.ringtone %></font>\r\n				<font class=\'<%=obj.config.sound=="0" ? "on-choose" : ""%>\' data="0" ><%=Operations.msg.noRingtone %></font>\r\n			</ol>\r\n		</li>\r\n		<li class="clearfix">\r\n			<span><%=Operations.msg.vibrateOnMessage %></span>\r\n			<ol class="_config _vibrate" data="vibrate">\r\n				<font class=\'<%=obj.config.vibrate=="1" ? "on-choose" : ""%>\' data="1"><%=Operations.msg.vibrate %></font>\r\n				<font class=\'<%=obj.config.vibrate=="0" ? "on-choose" : ""%>\' data="0" ><%=Operations.msg.notVibrate %></font>\r\n			</ol>\r\n		</li>\r\n		<li class="clearfix">\r\n			<span><%=Operations.msg.deleteMessage %></span>\r\n			<ol class="_config _clearable" data="clearable">\r\n				<font class=\'<%=obj.config.clearable=="1" ? "on-choose" : ""%>\' data="1"><%=Operations.msg.toDelete %></font>\r\n				<font class=\'<%=obj.config.clearable=="0" ? "on-choose" : ""%>\'  data="0"><%=Operations.msg.notToDelete %></font>\r\n			</ol>\r\n		</li>\r\n	</ul>\r\n</div>\r\n'}),define("text!templates/operations/phoneAndroid.html",[],function(){return'<div class="active-title" style="display:none;">\r\n	<ul>\r\n		<li data="A" class="_active_a" style="display:none;"><a href="javascript:void(0)"><%=Operations.msg.activity %>A</a></li>\r\n	    <li data="B" class="_active_b" style="display:none;"><a href="javascript:void(0)"><%=Operations.msg.activity %>B</a></li>\r\n	    <li data="C" class="_active_c" style="display:none;"><a href="javascript:void(0)"><%=Operations.msg.activity %>C</a></li>\r\n	</ul>\r\n</div> \r\n<div class="phone-android">\r\n	<div bddata="<%=_classObj._border_class ? _classObj._border_class : \'\'%>" \r\n	bgdata="<%=_classObj._bg_class ? _classObj._bg_class : \'\'%>" \r\n class="popup-box _phone_class_pop <%=_classObj._bg_class ? _classObj._bg_class : \'\'%> <%=_classObj._border_class ? _classObj._border_class : \'\'%>" \r\n style="display:<%=_classObj._type==4?\'block\':\'none\'%>; <%=_classObj._border ? _classObj._border+\';\' : \'\'%> <%=_classObj._bg ? _classObj._bg+\';\' : \'\'%> <%=_classObj._font ? _classObj._font+\';\' : \'\'%> ">\r\n		<div class="close-box">\r\n			<img class="_closeBtn" src="images/icon-close.png" />\r\n		</div>\r\n		<h3 class="_phoneTitle"><%=obj.title.val=="" ? "" : obj.title.val%></h3>\r\n		<h5 class="_phoneContent"><%=obj.content.val=="" ? "" : obj.content.val%></h5>\r\n		<span class="_confirmBtn"><%=Operations.msg.view %></span>\r\n	</div>\r\n	<div class="_phone_class_top message-box"  style="display:<%=_classObj._type==4?\'none\':\'block\'%>;">\r\n	    <span><%=Operations.msg.image %></span>\r\n	    <div class="contents-message">\r\n	        <em><img src="images/icon-close.png" /></em>\r\n	        <h3 class="_phoneTitle"><%=obj.title.val=="" ? "" : obj.title.val%></h3>\r\n			<h5 class="_phoneContent"><%=obj.content.val=="" ? "" : obj.content.val%></h5>\r\n	    </div>\r\n	</div>\r\n</div>\r\n'}),define("text!templates/operations/phoneIos.html",[],function(){return'<div class="active-title" style="display:none;" >\r\n	<ul>\r\n		<li data="A" class="_active_a" style="display:none;"><a href="javascript:void(0)"><%=Operations.msg.activity %>A</a></li>\r\n	    <li data="B" class="_active_b" style="display:none;"><a href="javascript:void(0)"><%=Operations.msg.activity %>B</a></li>\r\n	    <li data="C" class="_active_c" style="display:none;"><a href="javascript:void(0)"><%=Operations.msg.activity %>C</a></li>\r\n	</ul>\r\n</div> \r\n<div class="phone-ios">\r\n	<div class="ios-contentBox">\r\n		<ul>\r\n			<li>\r\n				<div class="message-box">\r\n					<span><%=Operations.msg.image %></span>\r\n					<h5 class="_phoneTitle"><%=obj.title.val=="" ? "" : obj.title.val%></h5>\r\n				</div>\r\n			</li>\r\n			<li>\r\n				<div class="ios-lockScreen">\r\n					<div class="message-lockScreen">\r\n						<span><%=Operations.msg.image %></span>\r\n						<div class="contents-message">\r\n							<h4 class="_phoneTitle"><%=obj.title.val=="" ? "" : obj.title.val%></h4>\r\n						</div>\r\n					</div>\r\n					<div class="unlock">\r\n						<font><%=Operations.msg.icon %></font><span><%=Operations.msg.slideToUnlock %></span>\r\n					</div>\r\n				</div>\r\n			</li>\r\n			<li>\r\n				<div class="start-game">\r\n					<h4><%=Operations.msg.gameName %></h4>\r\n					<h5 class="_phoneTitle"><%=obj.title.val=="" ? "" : obj.title.val%></h5>\r\n                    <span>Cancel</span><strong>OK</strong>\r\n				</div>\r\n			</li>\r\n		</ul>\r\n	</div>\r\n	<a class="prev abtn aleft" href="#left">Previous</a>\r\n	<a class="next abtn aright" href="#right">Next</a>\r\n</div>\r\n'}),define("text!templates/operations/conditions/accountRegisterCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="accountRegister">\r\n	<span><%=Operations.conditions.accountRegistration %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	条件 进行账户注册的玩家 -->\r\n		<conditionTag _columnName="register" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$eq" _operatorValue="true">\r\n						<%=Operations.conditions.had %>\r\n						<font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n						<li _operatorKey="$eq" _operatorValue="true" _liType="keyvalue">\r\n							<%=Operations.conditions.had %>\r\n						</li>\r\n						<li _operatorKey="$eq" _operatorValue="false" _liType="keyvalue">\r\n							<%=Operations.conditions.hadNo %>\r\n						</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.registratedAnAccount %></em>\r\n	</div>\r\n	<div data="accountRegister" class="operate-del">\r\n		<%=Operations.buttons.deleteIcon %>\r\n	</div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/appVersionCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="appVersion">\r\n	<span><%=Operations.conditions.gameVersion %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	当前安装的游戏版本 条件 版本号 -->\r\n		<em><%=Operations.conditions.installedVersion %></em>\r\n		<conditionTag  _columnName="version" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$ge">\r\n						&gt; = <font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$ge" _liType="key">&gt; =</li>\r\n					<li _operatorKey="$eq" _liType="key">=</li>\r\n					<li _operatorKey="$le" _liType="key">&lt; =</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorValue="1">1<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorValue="1" _liType="value">1</li>\r\n					<li _operatorValue="2" _liType="value">2</li>\r\n					<li _operatorValue="3" _liType="value">3</li>\r\n					<li _operatorValue="4" _liType="value">4</li>\r\n					<li _operatorValue="5" _liType="value">5</li>\r\n					<li _operatorValue="6" _liType="value">6</li>\r\n					<li _operatorValue="7" _liType="value">7</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n	</div>\r\n	<div	data="appVersion" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/chargeAmountCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="chargeAmount">\r\n	<span><%=Operations.conditions.paymentAmount %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	在 时间周期，付费金额 条件 额度 的玩家 -->\r\n		<em><%=Operations.conditions.during %></em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$wholeTime" _operatorValue="true" >\r\n						<%=Operations.conditions.theWholeLifetime %>\r\n						<font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$wholeTime" _operatorValue="true" _liType="keyvalue">\r\n						<%=Operations.conditions.theWholeLifetime %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="3" _liType="keyvalue">\r\n						<%=Operations.conditions.last3Days %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="7" _liType="keyvalue">\r\n						<%=Operations.conditions.last7Days %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="14" _liType="keyvalue">\r\n						<%=Operations.conditions.last14Days %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="30" _liType="keyvalue">\r\n						<%=Operations.conditions.last30Days %>\r\n					</li>\r\n					<li  _operatorKey="$recentDays" _operatorValue="90" _liType="keyvalue">\r\n						<%=Operations.conditions.last90Days %>\r\n					</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.thePayAmountOfPlayerIs %></em>\r\n		<conditionTag  _columnName="amount" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$ge">\r\n						&gt; = <font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$ge" _liType="key">&gt; =</li>\r\n					<li _operatorKey="$eq" _liType="key">=</li>\r\n					<li _operatorKey="$le" _liType="key">&lt; =</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<input class="_input_operatorValue" style="margin-left:60px" type="text" placeholder="<%=Operations.prepareToSend.triangleIcon %>"/><strong _operatorValue=""></strong>\r\n		</conditionTag>\r\n		<conditionTag  _columnName="currency" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul style="width:40px;margin-left:-206px;">\r\n					<strong _operatorKey="$eq" _operatorValue="CNY">￥<font><%=Operations.conditions.rangefrom %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$eq" _operatorValue="CNY" _liType="keyvalue">￥</li>\r\n					<li _operatorKey="$eq" _operatorValue="USD" _liType="keyvalue">$</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n	</div>\r\n	<div	data="chargeAmount" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/chargeAmountRankCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="chargeAmountRank">\r\n	<span><%=Operations.conditions.paymentRanking %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	在 时间周期，付费金额排名 条件 Top百分比数值 的玩家 -->\r\n		<em></em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$wholeTime" _operatorValue="true" >\r\n						<%=Operations.conditions.theWholeLifetime %>\r\n						<font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$wholeTime" _operatorValue="true" _liType="keyvalue">\r\n						<%=Operations.conditions.theWholeLifetime %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="3" _liType="keyvalue">\r\n						<%=Operations.conditions.last3Days %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="7" _liType="keyvalue">\r\n						<%=Operations.conditions.last7Days %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="14" _liType="keyvalue">\r\n						<%=Operations.conditions.last14Days %>\r\n					</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="30" _liType="keyvalue">\r\n						<%=Operations.conditions.last30Days %>\r\n					</li>\r\n					<li  _operatorKey="$recentDays" _operatorValue="90" _liType="keyvalue">\r\n						<%=Operations.conditions.last90Days %>\r\n					</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.revenueOfThePlayersIsOnThe %></em>\r\n		<conditionTag  _columnName="topPercent" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$ge">\r\n						&gt; = <font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$ge" _liType="key">&gt; =</li>\r\n					<li _operatorKey="$eq" _liType="key">=</li>\r\n					<li _operatorKey="$le" _liType="key">&lt; =</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorValue="5" >5%<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorValue="5" _liType="value">5%</li>\r\n					<li _operatorValue="10" _liType="value">10%</li>\r\n					<li _operatorValue="15" _liType="value">15%</li>\r\n					<li _operatorValue="20" _liType="value">20%</li>\r\n					<li _operatorValue="25" _liType="value">25%</li>\r\n					<li _operatorValue="30" _liType="value">30%</li>\r\n					<li _operatorValue="35" _liType="value">35%</li>\r\n					<li _operatorValue="40" _liType="value">40%</li>\r\n					<li _operatorValue="45" _liType="value">45%</li>\r\n					<li _operatorValue="50" _liType="value">50%</li>\r\n					<li _operatorValue="55" _liType="value">55%</li>\r\n					<li _operatorValue="60" _liType="value">60%</li>\r\n					<li _operatorValue="65" _liType="value">65%</li>\r\n					<li _operatorValue="70" _liType="value">70%</li>\r\n					<li _operatorValue="75" _liType="value">75%</li>\r\n					<li _operatorValue="80" _liType="value">80%</li>\r\n					<li _operatorValue="85" _liType="value">85%</li>\r\n					<li _operatorValue="90" _liType="value">90%</li>\r\n					<li _operatorValue="95" _liType="value">95%</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n<!-- 			<div class="select"> -->\r\n<!-- 				<ul> -->\r\n<!-- 					<strong _operatorKey="$between" _operatorValue="[0,5]" >0~5%<font><%=Operations.prepareToSend.triangleIcon %></font></strong> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[0,5]" _liType="keyvalue">0~5%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[6,10]" _liType="keyvalue">6~10%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[11,15]" _liType="keyvalue">11~15%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[16,20]" _liType="keyvalue">16~20%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[21,25]" _liType="keyvalue">21~25%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[26,30]" _liType="keyvalue">26~30%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[31,35]" _liType="keyvalue">31~35%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[36,40]" _liType="keyvalue">36~40%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[41,45]" _liType="keyvalue">41~45%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[46,50]" _liType="keyvalue">46~50%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[51,55]" _liType="keyvalue">51~55%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[56,60]" _liType="keyvalue">56~60%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[61,65]" _liType="keyvalue">61~65%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[66,70]" _liType="keyvalue">66~70%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[71,75]" _liType="keyvalue">71~75%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[76,80]" _liType="keyvalue">76~80%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[81,85]" _liType="keyvalue">81~85%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[86,90]" _liType="keyvalue">86~90%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[91,95]" _liType="keyvalue">91~95%</li> -->\r\n<!-- 					<li _operatorKey="$between" _operatorValue="[96,100]" _liType="keyvalue">96~100%</li> -->\r\n<!-- 				</ul> -->\r\n<!-- 			</div> -->\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.players %></em>\r\n	</div>\r\n	<div	data="chargeAmountRank" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/chargeTimesCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="chargeTimes">\r\n	<span><%=Operations.conditions.rechargeTimes %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	在 时间周期，付费次数 条件 次数 的玩家 -->\r\n		<em><%=Operations.conditions.during %></em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$wholeTime" _operatorValue="true" ><%=Operations.conditions.theWholeLifetime %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$wholeTime" _operatorValue="true" _liType="keyvalue"><%=Operations.conditions.theWholeLifetime %></li>\r\n					<li _operatorKey="$recentDays" _operatorValue="3" _liType="keyvalue"><%=Operations.conditions.last3Days %></li>\r\n					<li _operatorKey="$recentDays" _operatorValue="7" _liType="keyvalue"><%=Operations.conditions.last7Days %></li>\r\n					<li _operatorKey="$recentDays" _operatorValue="14" _liType="keyvalue"><%=Operations.conditions.last14Days %></li>\r\n					<li _operatorKey="$recentDays" _operatorValue="30" _liType="keyvalue"><%=Operations.conditions.last30Days %></li>\r\n					<li  _operatorKey="$recentDays" _operatorValue="90" _liType="keyvalue"><%=Operations.conditions.last90Days %></li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.rechargeTimes %></em>\r\n		<conditionTag  _columnName="times" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$ge">\r\n						&gt; = <font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$ge" _liType="key">&gt; =</li>\r\n					<li _operatorKey="$eq" _liType="key">=</li>\r\n					<li _operatorKey="$le" _liType="key">&lt; =</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<input class="_input_operatorValue" type="text" placeholder="<%=Operations.conditions.IntegerRangefrom %>"></input><strong _operatorValue=""></strong>\r\n		</conditionTag>\r\n		<em><%=Operations.prepareToSend.players %></em>\r\n	</div>\r\n	<div	data="chargeTimes" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/countryCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="country">\r\n	<span><%=Operations.conditions.playerRegion %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	玩家国家是 多选国家 -->\r\n		<em><%=Operations.conditions.thePlayersRegionIs %></em>\r\n		<conditionTag  _columnName="countryId" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$in" _operatorValue="" ><%=Operations.conditions.countryOfPlayers %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n						<li _operatorKey="$in" _operatorValue="558" _liType="keyvalue"><%=Operations.country.China %></li>\r\n						<li _operatorKey="$in" _operatorValue="523" _liType="keyvalue"><%=Operations.country.Afghanistan %></li>\r\n						<li _operatorKey="$in" _operatorValue="524" _liType="keyvalue"><%=Operations.country.Anguilla %></li>\r\n						<li _operatorKey="$in" _operatorValue="525" _liType="keyvalue"><%=Operations.country.Armenia %></li>\r\n						<li _operatorKey="$in" _operatorValue="526" _liType="keyvalue"><%=Operations.country.Argentina %></li>\r\n						<li _operatorKey="$in" _operatorValue="527" _liType="keyvalue"><%=Operations.country.Aruba %></li>\r\n						<li _operatorKey="$in" _operatorValue="528" _liType="keyvalue"><%=Operations.country.Australia %></li>\r\n						<li _operatorKey="$in" _operatorValue="529" _liType="keyvalue"><%=Operations.country.Austria %></li>\r\n						<li _operatorKey="$in" _operatorValue="530" _liType="keyvalue"><%=Operations.country.Azerbaijan %></li>\r\n						<li _operatorKey="$in" _operatorValue="531" _liType="keyvalue"><%=Operations.country.Bahamas %></li>\r\n						<li _operatorKey="$in" _operatorValue="532" _liType="keyvalue"><%=Operations.country.Bahrain %></li>\r\n						<li _operatorKey="$in" _operatorValue="533" _liType="keyvalue"><%=Operations.country.Bangladesh %></li>\r\n						<li _operatorKey="$in" _operatorValue="534" _liType="keyvalue"><%=Operations.country.Barbados %></li>\r\n						<li _operatorKey="$in" _operatorValue="535" _liType="keyvalue"><%=Operations.country.Belarus %></li>\r\n						<li _operatorKey="$in" _operatorValue="536" _liType="keyvalue"><%=Operations.country.Belgium %></li>\r\n						<li _operatorKey="$in" _operatorValue="537" _liType="keyvalue"><%=Operations.country.Belize %></li>\r\n						<li _operatorKey="$in" _operatorValue="538" _liType="keyvalue"><%=Operations.country.Benin %></li>\r\n						<li _operatorKey="$in" _operatorValue="539" _liType="keyvalue"><%=Operations.country.Bermuda %></li>\r\n						<li _operatorKey="$in" _operatorValue="540" _liType="keyvalue"><%=Operations.country.Bhutan %></li>\r\n						<li _operatorKey="$in" _operatorValue="541" _liType="keyvalue"><%=Operations.country.Bolivia %></li>\r\n						<li _operatorKey="$in" _operatorValue="542" _liType="keyvalue"><%=Operations.country.Bouvet %></li>\r\n						<li _operatorKey="$in" _operatorValue="543" _liType="keyvalue"><%=Operations.country.Brazil %></li>\r\n						<li _operatorKey="$in" _operatorValue="544" _liType="keyvalue"><%=Operations.country.British %></li>\r\n						<li _operatorKey="$in" _operatorValue="545" _liType="keyvalue"><%=Operations.country.VirginIslands %></li>\r\n						<li _operatorKey="$in" _operatorValue="546" _liType="keyvalue"><%=Operations.country.Brunei %></li>\r\n						<li _operatorKey="$in" _operatorValue="547" _liType="keyvalue"><%=Operations.country.Bulgaria %></li>\r\n						<li _operatorKey="$in" _operatorValue="548" _liType="keyvalue"><%=Operations.country.BurkinaFaso %></li>\r\n						<li _operatorKey="$in" _operatorValue="549" _liType="keyvalue"><%=Operations.country.Burundi %></li>\r\n						<li _operatorKey="$in" _operatorValue="550" _liType="keyvalue"><%=Operations.country.Cambodia %></li>\r\n						<li _operatorKey="$in" _operatorValue="551" _liType="keyvalue"><%=Operations.country.Cameroon %></li>\r\n						<li _operatorKey="$in" _operatorValue="552" _liType="keyvalue"><%=Operations.country.Canada %></li>\r\n						<li _operatorKey="$in" _operatorValue="553" _liType="keyvalue"><%=Operations.country.CapeVerde %></li>\r\n						<li _operatorKey="$in" _operatorValue="554" _liType="keyvalue"><%=Operations.country.CaymanIslands %></li>\r\n						<li _operatorKey="$in" _operatorValue="555" _liType="keyvalue"><%=Operations.country.CentralAfrica %></li>\r\n						<li _operatorKey="$in" _operatorValue="556" _liType="keyvalue"><%=Operations.country.Chad %></li>\r\n						<li _operatorKey="$in" _operatorValue="557" _liType="keyvalue"><%=Operations.country.Chile %></li>\r\n						<li _operatorKey="$in" _operatorValue="559" _liType="keyvalue"><%=Operations.country.Columbia %></li>\r\n						<li _operatorKey="$in" _operatorValue="560" _liType="keyvalue"><%=Operations.country.Comoros %></li>\r\n						<li _operatorKey="$in" _operatorValue="561" _liType="keyvalue"><%=Operations.country.Congo %></li>\r\n						<li _operatorKey="$in" _operatorValue="562" _liType="keyvalue"><%=Operations.country.CostaRica %></li>\r\n						<li _operatorKey="$in" _operatorValue="563" _liType="keyvalue"><%=Operations.country.CotedIvoire %></li>\r\n						<li _operatorKey="$in" _operatorValue="564" _liType="keyvalue"><%=Operations.country.Croatia %></li>\r\n						<li _operatorKey="$in" _operatorValue="565" _liType="keyvalue"><%=Operations.country.Cyprus %></li>\r\n						<li _operatorKey="$in" _operatorValue="566" _liType="keyvalue"><%=Operations.country.Czech %></li>\r\n						<li _operatorKey="$in" _operatorValue="567" _liType="keyvalue"><%=Operations.country.Denmark %></li>\r\n						<li _operatorKey="$in" _operatorValue="568" _liType="keyvalue"><%=Operations.country.Djibouti %></li>\r\n						<li _operatorKey="$in" _operatorValue="569" _liType="keyvalue"><%=Operations.country.Dominica %></li>\r\n						<li _operatorKey="$in" _operatorValue="570" _liType="keyvalue"><%=Operations.country.Dominican %></li>\r\n						<li _operatorKey="$in" _operatorValue="571" _liType="keyvalue"><%=Operations.country.Egypt %></li>\r\n						<li _operatorKey="$in" _operatorValue="572" _liType="keyvalue"><%=Operations.country.ElSalvador %></li>\r\n						<li _operatorKey="$in" _operatorValue="573" _liType="keyvalue"><%=Operations.country.Ecuador %></li>\r\n						<li _operatorKey="$in" _operatorValue="574" _liType="keyvalue"><%=Operations.country.Equatorial %></li>\r\n						<li _operatorKey="$in" _operatorValue="575" _liType="keyvalue"><%=Operations.country.Eritrea %></li>\r\n						<li _operatorKey="$in" _operatorValue="576" _liType="keyvalue"><%=Operations.country.Estonia %></li>\r\n						<li _operatorKey="$in" _operatorValue="577" _liType="keyvalue"><%=Operations.country.Ethiopia %></li>\r\n						<li _operatorKey="$in" _operatorValue="578" _liType="keyvalue"><%=Operations.country.FalklandIslands %></li>\r\n						<li _operatorKey="$in" _operatorValue="579" _liType="keyvalue"><%=Operations.country.FaroeIslands %></li>\r\n						<li _operatorKey="$in" _operatorValue="580" _liType="keyvalue"><%=Operations.country.Micronesia %></li>\r\n						<li _operatorKey="$in" _operatorValue="581" _liType="keyvalue"><%=Operations.country.Fiji %></li>\r\n						<li _operatorKey="$in" _operatorValue="582" _liType="keyvalue"><%=Operations.country.Finland %></li>\r\n						<li _operatorKey="$in" _operatorValue="583" _liType="keyvalue"><%=Operations.country.France %></li>\r\n						<li _operatorKey="$in" _operatorValue="584" _liType="keyvalue"><%=Operations.country.Guiana %></li>\r\n						<li _operatorKey="$in" _operatorValue="585" _liType="keyvalue"><%=Operations.country.Polynesia %></li>\r\n						<li _operatorKey="$in" _operatorValue="586" _liType="keyvalue"><%=Operations.country.Gabon %></li>\r\n						<li _operatorKey="$in" _operatorValue="587" _liType="keyvalue"><%=Operations.country.Gambia %></li>\r\n						<li _operatorKey="$in" _operatorValue="588" _liType="keyvalue"><%=Operations.country.Georgia %></li>\r\n						<li _operatorKey="$in" _operatorValue="589" _liType="keyvalue"><%=Operations.country.Germany %></li>\r\n						<li _operatorKey="$in" _operatorValue="590" _liType="keyvalue"><%=Operations.country.Ghana %></li>\r\n						<li _operatorKey="$in" _operatorValue="591" _liType="keyvalue"><%=Operations.country.Gibraltar %></li>\r\n						<li _operatorKey="$in" _operatorValue="592" _liType="keyvalue"><%=Operations.country.Greece %></li>\r\n						<li _operatorKey="$in" _operatorValue="593" _liType="keyvalue"><%=Operations.country.Greenland %></li>\r\n						<li _operatorKey="$in" _operatorValue="594" _liType="keyvalue"><%=Operations.country.Grenada %></li>\r\n						<li _operatorKey="$in" _operatorValue="595" _liType="keyvalue"><%=Operations.country.Guadeloupe %></li>\r\n						<li _operatorKey="$in" _operatorValue="596" _liType="keyvalue"><%=Operations.country.Guam %></li>\r\n						<li _operatorKey="$in" _operatorValue="597" _liType="keyvalue"><%=Operations.country.Guatemala %></li>\r\n						<li _operatorKey="$in" _operatorValue="598" _liType="keyvalue"><%=Operations.country.Guinea %></li>\r\n						<li _operatorKey="$in" _operatorValue="599" _liType="keyvalue"><%=Operations.country.Guineabissau %></li>\r\n						<li _operatorKey="$in" _operatorValue="600" _liType="keyvalue"><%=Operations.country.Guyana %></li>\r\n						<li _operatorKey="$in" _operatorValue="601" _liType="keyvalue"><%=Operations.country.Haiti %></li>\r\n						<li _operatorKey="$in" _operatorValue="602" _liType="keyvalue"><%=Operations.country.Honduras %></li>\r\n						<li _operatorKey="$in" _operatorValue="603" _liType="keyvalue"><%=Operations.country.HongKong %></li>\r\n						<li _operatorKey="$in" _operatorValue="604" _liType="keyvalue"><%=Operations.country.Hungary %></li>\r\n						<li _operatorKey="$in" _operatorValue="605" _liType="keyvalue"><%=Operations.country.Iceland %></li>\r\n						<li _operatorKey="$in" _operatorValue="606" _liType="keyvalue"><%=Operations.country.India %></li>\r\n						<li _operatorKey="$in" _operatorValue="607" _liType="keyvalue"><%=Operations.country.Indonesia %></li>\r\n						<li _operatorKey="$in" _operatorValue="608" _liType="keyvalue"><%=Operations.country.Ireland %></li>\r\n						<li _operatorKey="$in" _operatorValue="609" _liType="keyvalue"><%=Operations.country.Israel %></li>\r\n						<li _operatorKey="$in" _operatorValue="610" _liType="keyvalue"><%=Operations.country.Italy %></li>\r\n						<li _operatorKey="$in" _operatorValue="611" _liType="keyvalue"><%=Operations.country.Jamaica %></li>\r\n						<li _operatorKey="$in" _operatorValue="612" _liType="keyvalue"><%=Operations.country.Japan %></li>\r\n						<li _operatorKey="$in" _operatorValue="613" _liType="keyvalue"><%=Operations.country.Jordan %></li>\r\n						<li _operatorKey="$in" _operatorValue="614" _liType="keyvalue"><%=Operations.country.Kazakstan %></li>\r\n						<li _operatorKey="$in" _operatorValue="615" _liType="keyvalue"><%=Operations.country.Kenya %></li>\r\n						<li _operatorKey="$in" _operatorValue="616" _liType="keyvalue"><%=Operations.country.Kiribati %></li>\r\n						<li _operatorKey="$in" _operatorValue="617" _liType="keyvalue"><%=Operations.country.Kuwait %></li>\r\n						<li _operatorKey="$in" _operatorValue="618" _liType="keyvalue"><%=Operations.country.Kyrgyzstan %></li>\r\n						<li _operatorKey="$in" _operatorValue="619" _liType="keyvalue"><%=Operations.country.Lao %></li>\r\n						<li _operatorKey="$in" _operatorValue="620" _liType="keyvalue"><%=Operations.country.Latvia %></li>\r\n						<li _operatorKey="$in" _operatorValue="621" _liType="keyvalue"><%=Operations.country.Lebanon %></li>\r\n						<li _operatorKey="$in" _operatorValue="622" _liType="keyvalue"><%=Operations.country.Lesotho %></li>\r\n						<li _operatorKey="$in" _operatorValue="623" _liType="keyvalue"><%=Operations.country.Liberia %></li>\r\n						<li _operatorKey="$in" _operatorValue="624" _liType="keyvalue"><%=Operations.country.Liechtenstein %></li>\r\n						<li _operatorKey="$in" _operatorValue="625" _liType="keyvalue"><%=Operations.country.Lithuania %></li>\r\n						<li _operatorKey="$in" _operatorValue="626" _liType="keyvalue"><%=Operations.country.Luxembourg %></li>\r\n						<li _operatorKey="$in" _operatorValue="627" _liType="keyvalue"><%=Operations.country.Macau %></li>\r\n						<li _operatorKey="$in" _operatorValue="628" _liType="keyvalue"><%=Operations.country.Madagascar %></li>\r\n						<li _operatorKey="$in" _operatorValue="629" _liType="keyvalue"><%=Operations.country.Malawi %></li>\r\n						<li _operatorKey="$in" _operatorValue="630" _liType="keyvalue"><%=Operations.country.Malaysia %></li>\r\n						<li _operatorKey="$in" _operatorValue="631" _liType="keyvalue"><%=Operations.country.Maldives %></li>\r\n						<li _operatorKey="$in" _operatorValue="632" _liType="keyvalue"><%=Operations.country.Mali %></li>\r\n						<li _operatorKey="$in" _operatorValue="633" _liType="keyvalue"><%=Operations.country.Malta %></li>\r\n						<li _operatorKey="$in" _operatorValue="634" _liType="keyvalue"><%=Operations.country.Marshall %></li>\r\n						<li _operatorKey="$in" _operatorValue="635" _liType="keyvalue"><%=Operations.country.Martinique %></li>\r\n						<li _operatorKey="$in" _operatorValue="636" _liType="keyvalue"><%=Operations.country.Mauritania %></li>\r\n						<li _operatorKey="$in" _operatorValue="637" _liType="keyvalue"><%=Operations.country.Mayotte %></li>\r\n						<li _operatorKey="$in" _operatorValue="638" _liType="keyvalue"><%=Operations.country.FrenchPolynesia %></li>\r\n						<li _operatorKey="$in" _operatorValue="639" _liType="keyvalue"><%=Operations.country.Mexico %></li>\r\n						<li _operatorKey="$in" _operatorValue="640" _liType="keyvalue"><%=Operations.country.Moldova %></li>\r\n						<li _operatorKey="$in" _operatorValue="641" _liType="keyvalue"><%=Operations.country.Mongolia %></li>\r\n						<li _operatorKey="$in" _operatorValue="642" _liType="keyvalue"><%=Operations.country.Morocco %></li>\r\n						<li _operatorKey="$in" _operatorValue="643" _liType="keyvalue"><%=Operations.country.Mozambique %></li>\r\n						<li _operatorKey="$in" _operatorValue="644" _liType="keyvalue"><%=Operations.country.Namibia %></li>\r\n						<li _operatorKey="$in" _operatorValue="645" _liType="keyvalue"><%=Operations.country.Nauru %></li>\r\n						<li _operatorKey="$in" _operatorValue="646" _liType="keyvalue"><%=Operations.country.Nepal %></li>\r\n						<li _operatorKey="$in" _operatorValue="647" _liType="keyvalue"><%=Operations.country.NetherlandsAntilles %></li>\r\n						<li _operatorKey="$in" _operatorValue="648" _liType="keyvalue"><%=Operations.country.Netherlands %></li>\r\n						<li _operatorKey="$in" _operatorValue="649" _liType="keyvalue"><%=Operations.country.NewCaledonia %></li>\r\n						<li _operatorKey="$in" _operatorValue="650" _liType="keyvalue"><%=Operations.country.NewZealand %></li>\r\n						<li _operatorKey="$in" _operatorValue="651" _liType="keyvalue"><%=Operations.country.Nicaragua %></li>\r\n						<li _operatorKey="$in" _operatorValue="652" _liType="keyvalue"><%=Operations.country.Niger %></li>\r\n						<li _operatorKey="$in" _operatorValue="653" _liType="keyvalue"><%=Operations.country.Nigeria %></li>\r\n						<li _operatorKey="$in" _operatorValue="654" _liType="keyvalue"><%=Operations.country.NorthernMarianasIslands %></li>\r\n						<li _operatorKey="$in" _operatorValue="655" _liType="keyvalue"><%=Operations.country.Norway %></li>\r\n						<li _operatorKey="$in" _operatorValue="656" _liType="keyvalue"><%=Operations.country.Oman %></li>\r\n						<li _operatorKey="$in" _operatorValue="657" _liType="keyvalue"><%=Operations.country.Pakistan %></li>\r\n						<li _operatorKey="$in" _operatorValue="658" _liType="keyvalue"><%=Operations.country.Palau %></li>\r\n						<li _operatorKey="$in" _operatorValue="659" _liType="keyvalue"><%=Operations.country.Panama %></li>\r\n						<li _operatorKey="$in" _operatorValue="660" _liType="keyvalue"><%=Operations.country.PapuaNewGuinea %></li>\r\n						<li _operatorKey="$in" _operatorValue="661" _liType="keyvalue"><%=Operations.country.Paraguay %></li>\r\n						<li _operatorKey="$in" _operatorValue="662" _liType="keyvalue"><%=Operations.country.Peru %></li>\r\n						<li _operatorKey="$in" _operatorValue="663" _liType="keyvalue"><%=Operations.country.Philippines %></li>\r\n						<li _operatorKey="$in" _operatorValue="664" _liType="keyvalue"><%=Operations.country.Pitcairn %></li>\r\n						<li _operatorKey="$in" _operatorValue="665" _liType="keyvalue"><%=Operations.country.Poland %></li>\r\n						<li _operatorKey="$in" _operatorValue="666" _liType="keyvalue"><%=Operations.country.Portugal %></li>\r\n						<li _operatorKey="$in" _operatorValue="667" _liType="keyvalue"><%=Operations.country.PuertoRico %></li>\r\n						<li _operatorKey="$in" _operatorValue="668" _liType="keyvalue"><%=Operations.country.Qatar %></li>\r\n						<li _operatorKey="$in" _operatorValue="669" _liType="keyvalue"><%=Operations.country.KoreaofRepublic %></li>\r\n						<li _operatorKey="$in" _operatorValue="670" _liType="keyvalue"><%=Operations.country.Macedonia %></li>\r\n						<li _operatorKey="$in" _operatorValue="671" _liType="keyvalue"><%=Operations.country.Reunion %></li>\r\n						<li _operatorKey="$in" _operatorValue="672" _liType="keyvalue"><%=Operations.country.Romania %></li>\r\n						<li _operatorKey="$in" _operatorValue="673" _liType="keyvalue"><%=Operations.country.Russia %></li>\r\n						<li _operatorKey="$in" _operatorValue="674" _liType="keyvalue"><%=Operations.country.SaoTomeandPrincipe %></li>\r\n						<li _operatorKey="$in" _operatorValue="675" _liType="keyvalue"><%=Operations.country.SaudiArabia %></li>\r\n						<li _operatorKey="$in" _operatorValue="676" _liType="keyvalue"><%=Operations.country.Senegal %></li>\r\n						<li _operatorKey="$in" _operatorValue="677" _liType="keyvalue"><%=Operations.country.Seychelles %></li>\r\n						<li _operatorKey="$in" _operatorValue="678" _liType="keyvalue"><%=Operations.country.Singapore %></li>\r\n						<li _operatorKey="$in" _operatorValue="679" _liType="keyvalue"><%=Operations.country.Slovakia %></li>\r\n						<li _operatorKey="$in" _operatorValue="680" _liType="keyvalue"><%=Operations.country.Slovenia %></li>\r\n						<li _operatorKey="$in" _operatorValue="681" _liType="keyvalue"><%=Operations.country.SolomonIslands %></li>\r\n						<li _operatorKey="$in" _operatorValue="682" _liType="keyvalue"><%=Operations.country.Somalia %></li>\r\n						<li _operatorKey="$in" _operatorValue="683" _liType="keyvalue"><%=Operations.country.SouthAfrica %></li>\r\n						<li _operatorKey="$in" _operatorValue="684" _liType="keyvalue"><%=Operations.country.Spain %></li>\r\n						<li _operatorKey="$in" _operatorValue="685" _liType="keyvalue"><%=Operations.country.SriLanka %></li>\r\n						<li _operatorKey="$in" _operatorValue="686" _liType="keyvalue"><%=Operations.country.SaintHelena %></li>\r\n						<li _operatorKey="$in" _operatorValue="687" _liType="keyvalue"><%=Operations.country.SaintKittsandNevis %></li>\r\n						<li _operatorKey="$in" _operatorValue="688" _liType="keyvalue"><%=Operations.country.SaintLucia %></li>\r\n						<li _operatorKey="$in" _operatorValue="689" _liType="keyvalue"><%=Operations.country.SaintVincentandGrenadines %></li>\r\n						<li _operatorKey="$in" _operatorValue="690" _liType="keyvalue"><%=Operations.country.Sudan %></li>\r\n						<li _operatorKey="$in" _operatorValue="691" _liType="keyvalue"><%=Operations.country.Suriname %></li>\r\n						<li _operatorKey="$in" _operatorValue="692" _liType="keyvalue"><%=Operations.country.SvalbardandJanMayen %></li>\r\n						<li _operatorKey="$in" _operatorValue="693" _liType="keyvalue"><%=Operations.country.Swaziland %></li>\r\n						<li _operatorKey="$in" _operatorValue="694" _liType="keyvalue"><%=Operations.country.Sweden %></li>\r\n						<li _operatorKey="$in" _operatorValue="695" _liType="keyvalue"><%=Operations.country.Switzerland %></li>\r\n						<li _operatorKey="$in" _operatorValue="696" _liType="keyvalue"><%=Operations.country.Syria %></li>\r\n						<li _operatorKey="$in" _operatorValue="697" _liType="keyvalue"><%=Operations.country.Taiwan %></li>\r\n						<li _operatorKey="$in" _operatorValue="698" _liType="keyvalue"><%=Operations.country.Tajikistan %></li>\r\n						<li _operatorKey="$in" _operatorValue="699" _liType="keyvalue"><%=Operations.country.Tanzania %></li>\r\n						<li _operatorKey="$in" _operatorValue="700" _liType="keyvalue"><%=Operations.country.Thailand %></li>\r\n						<li _operatorKey="$in" _operatorValue="701" _liType="keyvalue"><%=Operations.country.Togo %></li>\r\n						<li _operatorKey="$in" _operatorValue="702" _liType="keyvalue"><%=Operations.country.Tonga %></li>\r\n						<li _operatorKey="$in" _operatorValue="703" _liType="keyvalue"><%=Operations.country.TrinidadandTobago %></li>\r\n						<li _operatorKey="$in" _operatorValue="704" _liType="keyvalue"><%=Operations.country.Turkey %></li>\r\n						<li _operatorKey="$in" _operatorValue="705" _liType="keyvalue"><%=Operations.country.Turkmenstan %></li>\r\n						<li _operatorKey="$in" _operatorValue="706" _liType="keyvalue"><%=Operations.country.TurksandCaicosIslands %></li>\r\n						<li _operatorKey="$in" _operatorValue="707" _liType="keyvalue"><%=Operations.country.Tuvalu %></li>\r\n						<li _operatorKey="$in" _operatorValue="708" _liType="keyvalue"><%=Operations.country.Uganda %></li>\r\n						<li _operatorKey="$in" _operatorValue="709" _liType="keyvalue"><%=Operations.country.Ukraine %></li>\r\n						<li _operatorKey="$in" _operatorValue="710" _liType="keyvalue"><%=Operations.country.UnitedArabEmirates %></li>\r\n						<li _operatorKey="$in" _operatorValue="711" _liType="keyvalue"><%=Operations.country.UnitedKingdom %></li>\r\n						<li _operatorKey="$in" _operatorValue="712" _liType="keyvalue"><%=Operations.country.UnitedStates %></li>\r\n						<li _operatorKey="$in" _operatorValue="713" _liType="keyvalue"><%=Operations.country.Uruguay %></li>\r\n						<li _operatorKey="$in" _operatorValue="714" _liType="keyvalue"><%=Operations.country.Uzbekistan %></li>\r\n						<li _operatorKey="$in" _operatorValue="715" _liType="keyvalue"><%=Operations.country.Vanuatu %></li>\r\n						<li _operatorKey="$in" _operatorValue="716" _liType="keyvalue"><%=Operations.country.Vatican %></li>\r\n						<li _operatorKey="$in" _operatorValue="717" _liType="keyvalue"><%=Operations.country.Venezuela %></li>\r\n						<li _operatorKey="$in" _operatorValue="718" _liType="keyvalue"><%=Operations.country.VietNam %></li>\r\n						<li _operatorKey="$in" _operatorValue="719" _liType="keyvalue"><%=Operations.country.WesternSahara %></li>\r\n						<li _operatorKey="$in" _operatorValue="720" _liType="keyvalue"><%=Operations.country.Yemen %></li>\r\n						<li _operatorKey="$in" _operatorValue="721" _liType="keyvalue"><%=Operations.country.Yugoslavia %></li>\r\n						<li _operatorKey="$in" _operatorValue="722" _liType="keyvalue"><%=Operations.country.Zaire %></li>\r\n						<li _operatorKey="$in" _operatorValue="723" _liType="keyvalue"><%=Operations.country.Zambia %></li>\r\n						<li _operatorKey="$in" _operatorValue="724" _liType="keyvalue"><%=Operations.country.Zimbabwe %></li>\r\n						<li _operatorKey="$in" _operatorValue="725" _liType="keyvalue"><%=Operations.country.Korea %></li>\r\n						<li _operatorKey="$in" _operatorValue="726" _liType="keyvalue"><%=Operations.country.Albania %></li>\r\n						<li _operatorKey="$in" _operatorValue="727" _liType="keyvalue"><%=Operations.country.Angola %></li>\r\n						<li _operatorKey="$in" _operatorValue="728" _liType="keyvalue"><%=Operations.country.Algeria %></li>\r\n						<li _operatorKey="$in" _operatorValue="729" _liType="keyvalue"><%=Operations.country.Iraq %></li>\r\n						<li _operatorKey="$in" _operatorValue="730" _liType="keyvalue"><%=Operations.country.Iran %></li>\r\n						<li _operatorKey="$in" _operatorValue="731" _liType="keyvalue"><%=Operations.country.Libya %></li>\r\n						<li _operatorKey="$in" _operatorValue="732" _liType="keyvalue"><%=Operations.country.Myanmar %></li>\r\n						<li _operatorKey="$in" _operatorValue="733" _liType="keyvalue"><%=Operations.country.Mauritius %></li>\r\n						<li _operatorKey="$in" _operatorValue="734" _liType="keyvalue"><%=Operations.country.Rwanda %></li>\r\n						<li _operatorKey="$in" _operatorValue="735" _liType="keyvalue"><%=Operations.country.Tunisia %></li>\r\n\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n	</div>\r\n	<div data="country" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/jailbreakCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="jailbreak">\r\n	<span><%=Operations.conditions.jailbreak %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	设备 条件 越狱设备的玩家 -->\r\n		<em><%=Operations.segmentConditions.equipment %></em>\r\n		<conditionTag  _columnName="broken" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$eq" _operatorValue="true"><%=Operations.conditions.is %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$eq" _operatorValue="true" _liType="keyvalue">是<%=Operations.conditions.is %></li>\r\n					<li _operatorKey="$eq" _operatorValue="false" _liType="keyvalue"><%=Operations.conditions.isNot %></li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.playersJailbreak %></em>\r\n	</div>\r\n	<div	data="jailbreak" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/levelCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="level">\r\n	<span><%=Operations.conditions.level %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	当前等级 条件 数值 的玩家 -->\r\n		<em><%=Operations.conditions.LevelIs %></em>\r\n		<conditionTag  _columnName="level" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$ge">\r\n						&gt; = <font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$ge" _liType="key">&gt; =</li>\r\n					<li _operatorKey="$eq" _liType="key">=</li>\r\n					<li _operatorKey="$le" _liType="key">&lt; =</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<input class="_input_operatorValue" type="text" placeholder="<%=Operations.conditions.IntegerRangefrom %>"></input><strong _operatorValue=""></strong>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.players %></em>\r\n	</div>\r\n	<div data="level" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/loginTimesCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName=loginTimes>\r\n		<span><%=Operations.conditions.playerFrequency %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	在最近的 x 天平均每天玩游戏 条件 N次 的玩家 -->\r\n		<em><%=Operations.conditions.duringLast %></em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$recentDays" _operatorValue="1">1<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$recentDays" _operatorValue="1" _liType="keyvalue">1</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="2" _liType="keyvalue">2</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="3" _liType="keyvalue">3</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="4" _liType="keyvalue">4</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="5" _liType="keyvalue">5</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="6" _liType="keyvalue">6</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="7" _liType="keyvalue">7</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="14" _liType="keyvalue">14</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.gamePlayTime %></em>\r\n		<conditionTag  _columnName="times" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$ge">\r\n						&gt; = <font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$ge" _liType="key">&gt; =</li>\r\n					<li _operatorKey="$eq" _liType="key">=</li>\r\n					<li _operatorKey="$le" _liType="key">&lt; =</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorValue="1">1<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorValue="1" _liType="value">1</li>\r\n					<li _operatorValue="2" _liType="value">2</li>\r\n					<li _operatorValue="3" _liType="value">3</li>\r\n					<li _operatorValue="4" _liType="value">4</li>\r\n					<li _operatorValue="5" _liType="value">5</li>\r\n					<li _operatorValue="10" _liType="value">10</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.players %></em>\r\n	</div>\r\n	<div	data="loginTimes" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/loginUserCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="loginUser">\r\n	<span><%=Operations.conditions.activeStatus %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 在最近的 N天 中，共 X天 有登录游戏的玩家 -->\r\n		<em><%=Operations.conditions.duringLast %></em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong  _operatorKey="$recentDays"  _operatorValue="1">1<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$recentDays" _operatorValue="1" _liType="keyvalue">1</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="2" _liType="keyvalue">2</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="3" _liType="keyvalue">3</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="4" _liType="keyvalue">4</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="5" _liType="keyvalue">5</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="6" _liType="keyvalue">6</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="7" _liType="keyvalue">7</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="14" _liType="keyvalue">14</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.daysPlay %></em>\r\n		<conditionTag  _columnName="loginDays" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$eq" _operatorValue="1">1<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$eq" _operatorValue="1" _liType="keyvalue">1</li>\r\n					<li _operatorKey="$eq" _operatorValue="2" _liType="keyvalue">2</li>\r\n					<li _operatorKey="$eq" _operatorValue="3" _liType="keyvalue">3</li>\r\n					<li _operatorKey="$eq" _operatorValue="4" _liType="keyvalue">4</li>\r\n					<li _operatorKey="$eq" _operatorValue="5" _liType="keyvalue">5</li>\r\n					<li _operatorKey="$eq" _operatorValue="6" _liType="keyvalue">6</li>\r\n					<li _operatorKey="$eq" _operatorValue="7" _liType="keyvalue">7</li>\r\n					<li _operatorKey="$eq" _operatorValue="14" _liType="keyvalue">14</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.days %></em>\r\n	</div>\r\n	<div	data="loginUser" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/lostUserCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="lostUser">\r\n	<span><%=Operations.conditions.churnStatus %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	至今已经连续 N天 以上没登录游戏的玩家 -->\r\n		<em><%=Operations.conditions.noLoginInPassed %></em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$recentDays" _operatorValue="1">1<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$recentDays" _operatorValue="1" _liType="keyvalue">1</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="2" _liType="keyvalue">2</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="3" _liType="keyvalue">3</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="4" _liType="keyvalue">4</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="5" _liType="keyvalue">5</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="6" _liType="keyvalue">6</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="7" _liType="keyvalue">7</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="14" _liType="keyvalue">14</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.notLoggedGamers %></em>\r\n	</div>\r\n	<div data="lostUser" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/missionCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="mission">\r\n	<span><%=Operations.conditions.stageAndMission %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	状态 关卡任务 关卡名称 的玩家 -->\r\n		<conditionTag  _columnName="status" _operatorOptionality="false">\r\n			<div class="select" style="display:none;">\r\n				<ul>\r\n					<strong _operatorKey="$eq" _operatorValue="2"><%=Operations.conditions.churnStatus %>进行过<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$eq" _operatorValue="1" _liType="keyvalue"><%=Operations.conditions.conducted %></li>\r\n					<li _operatorKey="$eq" _operatorValue="0" _liType="keyvalue"><%=Operations.conditions.notConduct %></li>\r\n					<li _operatorKey="$eq" _operatorValue="2" _liType="keyvalue"><%=Operations.conditions.successfully %></li>\r\n					<li _operatorKey="$eq" _operatorValue="3" _liType="keyvalue"><%=Operations.conditions.notBy %></li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.PlayersWhoseFinishedTheStage %></em>\r\n		<conditionTag  _columnName="missionId" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$eq" _operatorValue="<%=list[0].item%>" title="<%=list[0].value%>"><%=list[0].value%><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n						<%_.each(list,function(obj,index){\r\n						%>\r\n							<li  _operatorKey="$eq" _operatorValue="<%=obj.item%>" _liType="keyvalue" title="<%=obj.value%>"><%=obj.value%></li>\r\n						<%})%>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.players %></em>\r\n	</div>\r\n	<div	data="mission" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/modelCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="model">\r\n	<span><%=Operations.conditions.device %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	设备型号 条件 型号 -->\r\n		<em><%=Operations.conditions.usingDevice %></em>\r\n		<conditionTag  _columnName="modelId" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong  _operatorKey="$in" ><%=Operations.conditions.is %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$in" _liType="key"><%=Operations.conditions.is %></li>\r\n					<li _operatorKey="$notIn" _liType="key"><%=Operations.conditions.isNot %></li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<div class="select">\r\n				<ul>\r\n					<strong  _operatorValue="" title="" ><%=Operations.conditions.selectDevice %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<%_.each(list,function(obj,index){\r\n					%>\r\n						<li _operatorValue="<%=obj.item%>" _liType="value" title="<%=obj.value%>"><%=obj.value%></li>\r\n					<%})%>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n	</div>\r\n	<div	data="model" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/newuserCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="newuser">\r\n	<span><%=Operations.conditions.acquisitionTime %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	玩家新增时期是 时间范围 -->\r\n		<em><%=Operations.conditions.acquiredFrom %> </em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<strong _operatorKey="$between" _operatorValue="">\r\n				<input type="text" id="_startTime" class="Timeinput" /> <%=Operations.conditions.to %>\r\n				<input type="text" id="_endTime" class="Timeinput mrnone" />\r\n			</strong>\r\n		</conditionTag>\r\n	</div>\r\n	<div data="newuser" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/osCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="os">\r\n	<span><%=Operations.conditions.os %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	设备操作系统 条件 系统 -->\r\n		<em><%=Operations.conditions.deviceOS %></em>\r\n		<conditionTag  _columnName="osId" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong  _operatorKey="$in" ><%=Operations.conditions.is %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$in" _liType="key"><%=Operations.conditions.is %></li>\r\n					<li _operatorKey="$notIn" _liType="key"><%=Operations.conditions.isNot %></li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<div class="select">\r\n				<ul>\r\n					<strong  _operatorValue="" title="" ><%=Operations.conditions.selectOperatingSystem %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<%_.each(list,function(obj,index){\r\n					%>\r\n						<li _operatorValue="<%=obj.item%>" _liType="value" title="<%=obj.value%>" ><%=obj.value%></li>\r\n					<%})%>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n	</div>\r\n	<div data="os" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/partnerCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="partner">\r\n	<span><%=Operations.conditions.channels %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	玩家的来源渠道 条件 渠道名多选 -->\r\n		<em><%=Operations.conditions.theNewPlayerAcquired %></em>\r\n		<conditionTag  _columnName="partnerId" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong  _operatorKey="$in" ><%=Operations.conditions.is %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$in" _liType="key"><%=Operations.conditions.is %></li>\r\n					<li _operatorKey="$notIn" _liType="key"><%=Operations.conditions.isNot %></li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<div class="select">\r\n				<ul>\r\n					<strong  _operatorValue="<%=list[0].item%>" title="<%=list[0].value%>"><%=list[0].value%><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<%_.each(list,function(obj,index){\r\n					%>\r\n						<li _operatorValue="<%=obj.item%>" _liType="value" title="<%=obj.value%>"><%=obj.value%></li>\r\n					<%})%>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n	</div>\r\n	<div	data="partner" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/platformCondition.html",[],function(){return'<div class="condition-list clearfix">\r\n	<span><%=Operations.conditions.platform %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	设备平台是 平台名 -->\r\n		<em><%=Operations.conditions.platform %></em>\r\n		<div class="select">\r\n			<ul>\r\n				<strong>ios<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n				<div>\r\n				<li>ios</li>\r\n				<li>android</li>\r\n				</div>\r\n			</ul>\r\n		</div>\r\n	</div>\r\n	<div	data="platform" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>'}),define("text!templates/operations/conditions/sexCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="sex">\r\n	<span><%=Operations.conditions.gender %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	性别为 性别 的玩家 -->\r\n		<em><%=Operations.conditions.genderIs %></em>\r\n		<conditionTag  _columnName="sex" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$eq" _operatorValue="1"><%=Operations.conditions.male %><font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$eq" _operatorValue="1" _liType="keyvalue"><%=Operations.conditions.male %></li>\r\n					<li _operatorKey="$eq" _operatorValue="0" _liType="keyvalue"><%=Operations.conditions.female %></li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.players %></em>\r\n	</div>\r\n	<div data="sex" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/conditions/useTimeCondition.html",[],function(){return'<div class="condition-list clearfix" _conditionName="useTime">\r\n	<span><%=Operations.conditions.gender %>：</span>\r\n	<div class="operate-user-defined">\r\n<!-- 	在最近的 x 天平均每天玩游戏 条件 时长 的玩家 -->\r\n		<em><%=Operations.conditions.duringLast %></em>\r\n		<conditionTag  _columnName="timeflag" _operatorOptionality="false">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$recentDays" _operatorValue="1">1<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorKey="$recentDays" _operatorValue="1" _liType="keyvalue">1</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="2" _liType="keyvalue">2</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="3" _liType="keyvalue">3</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="4" _liType="keyvalue">4</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="5" _liType="keyvalue">5</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="6" _liType="keyvalue">6</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="7" _liType="keyvalue">7</li>\r\n					<li _operatorKey="$recentDays" _operatorValue="14" _liType="keyvalue">14</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.gamePlayTime %></em>\r\n		<conditionTag  _columnName="durationPerDay" _operatorOptionality="true">\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorKey="$ge">\r\n						&gt; = <font><%=Operations.prepareToSend.triangleIcon %></font>\r\n					</strong>\r\n					<div>\r\n					<li _operatorKey="$ge" _liType="key">&gt; =</li>\r\n					<li _operatorKey="$eq" _liType="key">=</li>\r\n					<li _operatorKey="$le" _liType="key">&lt; =</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n			<div class="select">\r\n				<ul>\r\n					<strong _operatorValue="300">5<font><%=Operations.prepareToSend.triangleIcon %></font></strong>\r\n					<div>\r\n					<li _operatorValue="300" _liType="value">5</li>\r\n					<li _operatorValue="600" _liType="value">10</li>\r\n					<li _operatorValue="1200" _liType="value">20</li>\r\n					<li _operatorValue="1800" _liType="value">30</li>\r\n					<li _operatorValue="3600" _liType="value">60</li>\r\n					<li _operatorValue="7200" _liType="value">120</li>\r\n					</div>\r\n				</ul>\r\n			</div>\r\n		</conditionTag>\r\n		<em><%=Operations.conditions.minutes %></em>\r\n	</div>\r\n	<div	data="useTime" class="operate-del"><%=Operations.buttons.deleteIcon %></div>\r\n</div>\r\n'}),define("text!templates/operations/clickAndroidActions.html",[],function(){return'<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table-response">\r\n	<%if(data.titleArray.length>1){%>\r\n	<tr>\r\n		<th scope="row">&nbsp;</th>\r\n		<%_.each(data.titleArray,function(obj){%>\r\n			<td><%=obj%></td>\r\n		<%});%>\r\n	</tr>\r\n	<%}%>\r\n	<tr>\r\n		<th scope="row"><%=Operations.prepareToSend.wakeUpTheScreen %></th>\r\n		<%_.each(data.wakeupArray,function(obj){%>\r\n			<td><em class="<%=obj==1 ? \'icon-open\' : \'icon-close\'%>"><%=obj==1 ? Operations.prepareToSend.open : Operations.prepareToSend.close%></em></td>\r\n		<%});%>\r\n	</tr>\r\n	<tr>\r\n		<th scope="row"><%=Operations.prepareToSend.ringOnNotification %></th>\r\n		<%_.each(data.soundArray,function(obj){%>\r\n			<td><em class="<%=obj==1 ? \'icon-open\' : \'icon-close\'%>"><%=obj==1 ? Operations.prepareToSend.open : Operations.prepareToSend.close%></em></td>\r\n		<%});%>\r\n	</tr>\r\n	<tr>\r\n		<th scope="row"><%=Operations.prepareToSend.vibrateOnNotification %></th>\r\n		<%_.each(data.vibrateArray,function(obj){%>\r\n			<td><em class="<%=obj==1 ? \'icon-open\' : \'icon-close\'%>"><%=obj==1 ? Operations.prepareToSend.open : Operations.prepareToSend.close%></em></td>\r\n		<%});%>\r\n	</tr>\r\n	<tr>\r\n		<th scope="row"><%=Operations.prepareToSend.deleteMessage %></th>\r\n		<%_.each(data.clearableArray,function(obj){%>\r\n			<td><em class="<%=obj==1 ? \'icon-open\' : \'icon-close\'%>"><%=obj==1 ? Operations.prepareToSend.open : Operations.prepareToSend.close%></em></td>\r\n		<%});%>\r\n	</tr>\r\n</table>'}),define("text!templates/operations/clickIosActions.html",[],function(){return'<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table-response">\r\n	<%if(data.titleArray.length>1){%>\r\n	<tr>\r\n		<th scope="row">&nbsp;</th>\r\n		<%_.each(data.titleArray,function(obj){%>\r\n			<td><%=obj%></td>\r\n		<%});%>\r\n	</tr>\r\n	<%}%>\r\n	<tr>\r\n		<th scope="row"><%=Operations.prepareToSend.numerals %></th>\r\n		<%_.each(data.noticeArray,function(obj){%>\r\n			<td><em class="<%=obj==1 ? \'icon-open\' : \'icon-close\'%>"><%=obj==1 ? Operations.prepareToSend.open : Operations.prepareToSend.close%></em></td>\r\n		<%});%>\r\n	</tr>\r\n</table>'}),define("text!templates/operations/segmentDisplayForPrepareSend/accountRegisterCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.segmentConditions.accountRegistration %>：</span>\r\n    <font><%=data.accountRegister.register._value%><%=Operations.segmentConditions.registratedAnAccount %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/appVersionCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.gameVersion %>：</span>\r\n    <font> <%=Operations.conditions.installedVersion %>\r\n        <%=data.appVersion.version._key%>\r\n        <%=data.appVersion.version._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/chargeAmountCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.paymentAmount %>：</span>\r\n    <font><%=Operations.conditions.during %><%=data.chargeAmount.timeflag._value%>\r\n        <%=Operations.conditions.thePayAmountOfPlayerIs %><%=data.chargeAmount.amount._key%>\r\n        &nbsp;\r\n        <%=data.chargeAmount.currency._value%>\r\n        <%=data.chargeAmount.amount._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/chargeAmountRankCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.paymentRanking %>：</span>\r\n    <font><%=data.chargeAmountRank.timeflag._value%>\r\n        <%=Operations.conditions.revenueOfThePlayersIsOnThe %> <%=data.chargeAmountRank.topPercent._key%>\r\n        <%=data.chargeAmountRank.topPercent._value%>\r\n        <%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/chargeTimesCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.rechargeTimes %>：</span>\r\n    <font><%=Operations.conditions.during %><%=data.chargeTimes.timeflag._value%>\r\n        <%=Operations.conditions.thePayAmountOfPlayerIs %><%=data.chargeTimes.times._key%>\r\n        <%=data.chargeTimes.times._value%>\r\n\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/countryCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.segmentConditions.country %>：</span>\r\n    <font>\r\n        <%=Operations.conditions.thePlayersRegionIs %> <%=data.country.countryId._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/jailbreakCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.jailbreak %>：</span>\r\n    <font>\r\n        <%=Operations.segmentConditions.equipment %><%=data.jailbreak.broken._value%>\r\n        <%=Operations.conditions.playersJailbreak %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/levelCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.segmentConditions.ratingsRange %>：</span>\r\n    <font><%=Operations.conditions.LevelIs %> <%=data.level.level._key%>\r\n        <%=data.level.level._value%><%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/loginTimesCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.playerFrequency %>：</span>\r\n    <font><%=Operations.conditions.duringLast %><%=data.loginTimes.timeflag._value%>\r\n        <%=Operations.conditions.gamePlayTime %><%=data.loginTimes.times._key%>\r\n        <%=data.loginTimes.times._value%>\r\n        <%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/loginUserCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.activeStatus %>：</span>\r\n    <font><%=Operations.conditions.duringLast %>\r\n        <%=data.loginUser.timeflag._value%>\r\n        <%=Operations.conditions.daysPlay %><%=data.loginUser.loginDays._value%>\r\n        <%=Operations.conditions.days %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/lostUserCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.churnStatus %>：</span>\r\n    <font><%=Operations.conditions.noLoginInPassed %>\r\n        <%=data.lostUser.timeflag._value%>\r\n        <%=Operations.conditions.notLoggedGamers %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/missionCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.stageAndMission %>：</span>\r\n    <font><%=data.mission.status._value%>\r\n        <%=Operations.conditions.stageAndMission %><%=data.mission.missionId._value%>\r\n        <%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/modelCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.device %>：</span>\r\n    <font><%=Operations.conditions.usingDevice %>\r\n        <%=data.model.modelId._key%>\r\n        <%=data.model.modelId._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/newuserCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.acquisitionTime %>：</span>\r\n    <font><%=Operations.conditions.acquiredFrom %>\r\n        <%=data.newuser.timeflag._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/osCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.os %>：</span>\r\n    <font><%=Operations.conditions.deviceOS %>\r\n        <%=data.os.osId._key%><%=data.os.osId._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/partnerCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.channels %>：</span>\r\n    <font><%=Operations.conditions.theNewPlayerAcquired %>\r\n        <%=data.partner.partnerId._key%>\r\n        <%=data.partner.partnerId._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/platformCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.segmentConditions.platform %>：</span>\r\n    <font><%=Operations.prepareToSend.deviceIs %><%=data.platform.platformId._value%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/sexCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.gender %>：</span>\r\n    <font><%=Operations.conditions.genderIs %><%=data.sex.sex._value%><%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/segmentDisplayForPrepareSend/useTimeCondition.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.playerDuration %>：</span>\r\n    <font><%=Operations.conditions.duringLast %>\r\n        <%=data.useTime.timeflag._value%>\r\n        <%=Operations.conditions.gamePlayTime %>\r\n        <%=data.useTime.durationPerDay._key%>\r\n        <%=data.useTime.durationPerDay._value%>\r\n        <%=Operations.conditions.minutes %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/androidChannelTip.html",[],function(){return'<div class="EditPop_top timetop">\r\n    <b class="l"><%=Operations.tips.tips %></b>\r\n</div>\r\n<div class="Poptxt">\r\n    <ul class="EditPop ChartNotes_Pop">\r\n		<li style="font-size:16px;">\r\n            <%=Operations.tips.bindingNow %>\r\n		</li>\r\n			<h5><%=Operations.tips.tips %></h5>\r\n			<h5><%=Operations.tips.pushingService %></h5>\r\n	</ul>\r\n     <div class="opeDiv after product_opeDiv">\r\n         <a id="uploadNow" class="timecolse r Confirm"><%=Operations.tips.bindingNow %></a>\r\n     </div>\r\n </div>'}),define("text!templates/operations/iosChannelTip.html",[],function(){return'<div class="EditPop_top timetop">\r\n    <b class="l"><%=Operations.tips.tips %></b>\r\n</div>\r\n<div class="Poptxt">\r\n    <ul class="EditPop ChartNotes_Pop">\r\n		<li style="font-size:16px;">\r\n            <%=Operations.tips.content2 %>\r\n		</li>\r\n			<h4><%=Operations.tips.content3 %></h4>\r\n			<h5><%=Operations.tips.content4 %></h5>\r\n	</ul>\r\n     <div class="opeDiv after product_opeDiv">\r\n         <a id="uploadNow" class="timecolse r Confirm"><%=Operations.tips.bindingNow %></a>\r\n     </div>\r\n </div>'}),define("models/operations/Campaigns",["models/BaseModel"],function(e){var t=[{name:"fetchSegmentTemplate",url:"/v1/campaigns/fetchSegmentTemplate"},{name:"deleteSegmentTemplate",url:"/v1/campaigns/deleteSegmentTemplate"},{name:"createSegmentTemplate",url:"/v1/campaigns/createSegmentTemplate"},{name:"fetchCampaignList",url:"/v1/campaigns/fetchCampaignList",type:"get"},{name:"fetchCampaignSummary",url:"/v1/campaigns/fetchCampaignSummary",type:"get"},{name:"fetchSendDetail",url:"/v1/campaigns/fetchSendDetail",type:"get"},{name:"deleteCampaign",url:"/v1/campaigns/deleteCampaign"},{name:"retrySendCampaign",url:"/v1/campaigns/retrySendCampaign"},{name:"clickData",url:"/v1/campaigns/clickData",type:"get"},{name:"arriveData",url:"/v1/campaigns/arriveData",type:"get"},{name:"commitSegment",url:"/v1/campaigns/commitSegment"},{name:"commitPush",url:"/v1/campaigns/commitPush"},{name:"checkMsgName",url:"/v1/campaigns/checkMsgName",type:"get"},{name:"checkSegmentTemplateName",url:"/v1/campaigns/checkSegmentTemplateName",type:"get"},{name:"segmentDeviceTokenNum",url:"/v1/campaigns/segmentDeviceTokenNum",type:"get"},{name:"fetchResultDataByFilterType",url:"/v1/campaigns/fetchResultDataByFilterType",type:"get"},{name:"segmentFilterIdsForNames",url:"/v1/campaigns/segmentFilterIdsForNames",type:"get"},{name:"fetchClickConversion",url:"/v1/campaigns/fetchClickConversion",type:"get"},{name:"fetchMessageChannelStatus",url:"/v1/campaigns/fetchMessageChannelStatus",type:"get"},{name:"commitForecastSegment",url:"/v1/campaigns/commitForecastSegment",type:"get"}];return e.init(t)}),function(){function r(e){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,e.apply(t,arguments)}}var e={},t,n;t=this,t!=null&&(n=t.async),e.noConflict=function(){return t.async=n,e};var i=Object.prototype.toString,s=Array.isArray||function(e){return i.call(e)==="[object Array]"},o=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},u=function(e,t){if(e.map)return e.map(t);var n=[];return o(e,function(e,r,i){n.push(t(e,r,i))}),n},a=function(e,t,n){return e.reduce?e.reduce(t,n):(o(e,function(e,r,i){n=t(n,e,r,i)}),n)},f=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};typeof process=="undefined"||!process.nextTick?typeof setImmediate=="function"?(e.nextTick=function(e){setImmediate(e)},e.setImmediate=e.nextTick):(e.nextTick=function(e){setTimeout(e,0)},e.setImmediate=e.nextTick):(e.nextTick=process.nextTick,typeof setImmediate!="undefined"?e.setImmediate=function(e){setImmediate(e)}:e.setImmediate=e.nextTick),e.each=function(e,t,n){function s(t){t?(n(t),n=function(){}):(i+=1,i>=e.length&&n())}n=n||function(){};if(!e.length)return n();var i=0;o(e,function(e){t(e,r(s))})},e.forEach=e.each,e.eachSeries=function(e,t,n){n=n||function(){};if(!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n():i())})};i()},e.forEachSeries=e.eachSeries,e.eachLimit=function(e,t,n,r){var i=l(t);i.apply(null,[e,n,r])},e.forEachLimit=e.eachLimit;var l=function(e){return function(t,n,r){r=r||function(){};if(!t.length||e<=0)return r();var i=0,s=0,o=0;(function u(){if(i>=t.length)return r();while(o<e&&s<t.length)s+=1,o+=1,n(t[s-1],function(e){e?(r(e),r=function(){}):(i+=1,o-=1,i>=t.length?r():u())})})()}},c=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.each].concat(n))}},h=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l(e)].concat(n))}},p=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.eachSeries].concat(n))}},d=function(e,t,n,r){t=u(t,function(e,t){return{index:t,value:e}});if(!r)e(t,function(e,t){n(e.value,function(e){t(e)})});else{var i=[];e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})}};e.map=c(d),e.mapSeries=p(d),e.mapLimit=function(e,t,n,r){return v(t)(e,n,r)};var v=function(e){return h(e,d)};e.reduce=function(t,n,r,i){e.eachSeries(t,function(e,t){r(n,e,function(e,r){n=r,t(e)})},function(e){i(e,n)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(t,n,r,i){var s=u(t,function(e){return e}).reverse();e.reduce(s,n,r,i)},e.foldr=e.reduceRight;var m=function(e,t,n,r){var i=[];t=u(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(u(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.filter=c(m),e.filterSeries=p(m),e.select=e.filter,e.selectSeries=e.filterSeries;var g=function(e,t,n,r){var i=[];t=u(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(u(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.reject=c(g),e.rejectSeries=p(g);var y=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};e.detect=c(y),e.detectSeries=p(y),e.some=function(t,n,r){e.each(t,function(e,t){n(e,function(e){e&&(r(!0),r=function(){}),t()})},function(e){r(!1)})},e.any=e.some,e.every=function(t,n,r){e.each(t,function(e,t){n(e,function(e){e||(r(!1),r=function(){}),t()})},function(e){r(!0)})},e.all=e.every,e.sortBy=function(t,n,r){e.map(t,function(e,t){n(e,function(n,r){n?t(n):t(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);var n=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};r(null,u(t.sort(n),function(e){return e.value}))})},e.auto=function(t,n){n=n||function(){};var r=f(t),i=r.length;if(!i)return n();var u={},l=[],c=function(e){l.unshift(e)},h=function(e){for(var t=0;t<l.length;t+=1)if(l[t]===e){l.splice(t,1);return}},p=function(){i--,o(l.slice(0),function(e){e()})};c(function(){if(!i){var e=n;n=function(){},e(null,u)}}),o(r,function(r){var i=s(t[r])?t[r]:[t[r]],l=function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]);if(t){var s={};o(f(u),function(e){s[e]=u[e]}),s[r]=i,n(t,s),n=function(){}}else u[r]=i,e.setImmediate(p)},d=i.slice(0,Math.abs(i.length-1))||[],v=function(){return a(d,function(e,t){return e&&u.hasOwnProperty(t)},!0)&&!u.hasOwnProperty(r)};if(v())i[i.length-1](l,u);else{var m=function(){v()&&(h(m),i[i.length-1](l,u))};c(m)}})},e.retry=function(t,n,r){var i=5,s=[];typeof t=="function"&&(r=n,n=t,t=i),t=parseInt(t,10)||i;var o=function(i,o){var u=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},o)}};while(t)s.push(u(n,!(t-=1)));e.series(s,function(e,t){t=t[t.length-1],(i||r)(t.err,t.result)})};return r?o():o},e.waterfall=function(t,n){n=n||function(){};if(!s(t)){var r=new Error("First argument to waterfall must be an array of functions");return n(r)}if(!t.length)return n();var i=function(t){return function(r){if(r)n.apply(null,arguments),n=function(){};else{var s=Array.prototype.slice.call(arguments,1),o=t.next();o?s.push(i(o)):s.push(n),e.setImmediate(function(){t.apply(null,s)})}}};i(e.iterator(t))()};var b=function(e,t,n){n=n||function(){};if(s(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(f(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};e.parallel=function(t,n){b({map:e.map,each:e.each},t,n)},e.parallelLimit=function(e,t,n){b({map:v(t),each:l(t)},e,n)},e.series=function(t,n){n=n||function(){};if(s(t))e.mapSeries(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.eachSeries(f(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};e.concat=c(w),e.concatSeries=p(w),e.whilst=function(t,n,r){t()?n(function(i){if(i)return r(i);e.whilst(t,n,r)}):r()},e.doWhilst=function(t,n,r){t(function(i){if(i)return r(i);var s=Array.prototype.slice.call(arguments,1);n.apply(null,s)?e.doWhilst(t,n,r):r()})},e.until=function(t,n,r){t()?r():n(function(i){if(i)return r(i);e.until(t,n,r)})},e.doUntil=function(t,n,r){t(function(i){if(i)return r(i);var s=Array.prototype.slice.call(arguments,1);n.apply(null,s)?r():e.doUntil(t,n,r)})},e.queue=function(t,n){function i(t,n,r,i){t.started||(t.started=!0),s(n)||(n=[n]);if(n.length==0)return e.setImmediate(function(){t.drain&&t.drain()});o(n,function(n){var s={data:n,callback:typeof i=="function"?i:null};r?t.tasks.unshift(s):t.tasks.push(s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)})}n===undefined&&(n=1);var u=0,a={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){i(a,e,!1,t)},kill:function(){a.drain=null,a.tasks=[]},unshift:function(e,t){i(a,e,!0,t)},process:function(){if(!a.paused&&u<a.concurrency&&a.tasks.length){var e=a.tasks.shift();a.empty&&a.tasks.length===0&&a.empty(),u+=1;var n=function(){u-=1,e.callback&&e.callback.apply(e,arguments),a.drain&&a.tasks.length+u===0&&a.drain(),a.process()},i=r(n);t(e.data,i)}},length:function(){return a.tasks.length},running:function(){return u},idle:function(){return a.tasks.length+u===0},pause:function(){if(a.paused===!0)return;a.paused=!0},resume:function(){if(a.paused===!1)return;a.paused=!1;for(var t=1;t<=a.concurrency;t++)e.setImmediate(a.process)}};return a},e.priorityQueue=function(t,n){function r(e,t){return e.priority-t.priority}function i(e,t,n){var r=-1,i=e.length-1;while(r<i){var s=r+(i-r+1>>>1);n(t,e[s])>=0?r=s:i=s-1}return r}function u(t,n,u,a){t.started||(t.started=!0),s(n)||(n=[n]);if(n.length==0)return e.setImmediate(function(){t.drain&&t.drain()});o(n,function(n){var s={data:n,priority:u,callback:typeof a=="function"?a:null};t.tasks.splice(i(t.tasks,s,r)+1,0,s),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),e.setImmediate(t.process)})}var a=e.queue(t,n);return a.push=function(e,t,n){u(a,e,t,n)},delete a.unshift,a},e.cargo=function(t,n){var r=!1,i=[],a={tasks:i,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){s(t)||(t=[t]),o(t,function(e){i.push({data:e,callback:typeof r=="function"?r:null}),a.drained=!1,a.saturated&&i.length===n&&a.saturated()}),e.setImmediate(a.process)},process:function f(){if(r)return;if(i.length===0){a.drain&&!a.drained&&a.drain(),a.drained=!0;return}var e=typeof n=="number"?i.splice(0,n):i.splice(0,i.length),s=u(e,function(e){return e.data});a.empty&&a.empty(),r=!0,t(s,function(){r=!1;var t=arguments;o(e,function(e){e.callback&&e.callback.apply(null,t)}),f()})},length:function(){return i.length},running:function(){return r}};return a};var E=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(t?console.error&&console.error(t):console[e]&&o(n,function(t){console[e](t)}))}]))}};e.log=E("log"),e.dir=E("dir"),e.memoize=function(t,n){var r={},i={};n=n||function(e){return e};var s=function(){var s=Array.prototype.slice.call(arguments),o=s.pop(),u=n.apply(null,s);u in r?e.nextTick(function(){o.apply(null,r[u])}):u in i?i[u].push(o):(i[u]=[o],t.apply(null,s.concat([function(){r[u]=arguments;var e=i[u];delete i[u];for(var t=0,n=e.length;t<n;t++)e[t].apply(null,arguments)}])))};return s.memo=r,s.unmemoized=t,s},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},e.times=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.map(i,n,r)},e.timesSeries=function(t,n,r){var i=[];for(var s=0;s<t;s++)i.push(s);return e.mapSeries(i,n,r)},e.seq=function(){var t=arguments;return function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();e.reduce(t,r,function(e,t,r){t.apply(n,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,t){i.apply(n,[e].concat(t))})}},e.compose=function(){return e.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};e.applyEach=c(S),e.applyEachSeries=p(S),e.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},typeof module!="undefined"&&module.exports?module.exports=e:typeof define!="undefined"&&define.amd?define("libs/async",[],function(){return e}):t.async=e}(),function(e){e.extend(e.easing,{easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n}}),e.fn.Xslider=function(t){t=e.extend({},e.fn.Xslider.sn.defaults,t),this.each(function(){var n=t.scrollobj?e(this).find(t.scrollobj):e(this).find("ul"),r=t.viewedSize||(t.dir=="H"?n.parent().width():n.parent().height()),i=n.find("li"),s=t.unitlen||(t.dir=="H"?i.eq(0).outerWidth():i.eq(0).outerHeight()),o=t.unitdisplayed,u=t.numtoMove>o?o:t.numtoMove,a=t.scrollobjSize||i.length*s,f=0,l=0,c=s*u,h=t.dir=="H"?"left":"top",p=!1,d=e(this).find("a.aright"),v=e(this).find("a.aleft");d.unbind("click"),v.unbind("click"),t.dir=="H"?n.css("left","0px"):n.css("top","0px"),a>r?(t.loop=="cycle"?(v.removeClass("agrayleft"),i.length<2*u+o-u&&n.find("li").clone().appendTo(n)):(v.addClass("agrayleft"),f=a-r),d.removeClass("agrayright")):(v.addClass("agrayleft"),d.addClass("agrayright")),v.click(function(){return e(this).is("[class*='agrayleft']")?!1:(p||(p=!0,t.loop=="cycle"?(n.find("li:gt("+(i.length-u-1)+")").prependTo(n),n.css(h,"-"+c+"px"),e.fn.Xslider.sn.animate(n,0,t.dir,t.speed,function(){p=!1})):(l-=c,l>s*o-r?e.fn.Xslider.sn.animate(n,-l,t.dir,t.speed,function(){p=!1}):(e.fn.Xslider.sn.animate(n,0,t.dir,t.speed,function(){p=!1}),l=0,e(this).addClass("agrayleft")),d.removeClass("agrayright"))),!1)}),d.click(function(){if(e(this).is("[class*='agrayright']"))return!1;if(!p){p=!0;if(t.loop=="cycle"){var i=function(){n.find("li:lt("+u+")").appendTo(n),n.css(h,"0px"),p=!1};e.fn.Xslider.sn.animate(n,-c,t.dir,t.speed,i)}else l+=c,l<f-(s*o-r)?e.fn.Xslider.sn.animate(n,-l,t.dir,t.speed,function(){p=!1}):(e.fn.Xslider.sn.animate(n,-f,t.dir,t.speed,function(){p=!1}),l=f,e(this).addClass("agrayright")),v.removeClass("agrayleft")}return!1}),t.autoscroll&&e.fn.Xslider.sn.autoscroll(e(this),t.autoscroll)})},e.fn.Xslider.sn={defaults:{dir:"H",speed:500},animate:function(e,t,n,r,i){n=="H"?e.animate({left:t},r,"easeInSine",i):n=="V"&&e.animate({top:t},r,"easeInSine",i)},autoscroll:function(e,t){function r(){n=="right"&&(e.find("a.agrayright").length?n="left":e.find("a.aright").trigger("click")),n=="left"&&(e.find("a.agrayleft").length?n="right":e.find("a.aleft").trigger("click"))}var n="right",i=setInterval(r,t);e.hover(function(){clearInterval(i)},function(){i=setInterval(r,t)})}}}(jQuery),define("utils/Xslider",function(){}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),define("libs/slider/jquery.ui.core",function(){}),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),define("libs/slider/jquery.ui.mouse",function(){}),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n));for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"):this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}),this.range.addClass(n+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;t==="range"&&this.options.range===!0&&(n==="min"?(this.options.value=this._values(0),this.options.values=null):n==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this.options.values&&this.options.values.length){n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),define("libs/slider/jquery.ui.slider",function(){}),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(arguments.length===1)return o[n]===t?null:o[n];o[n]=r}else{if(arguments.length===1)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),define("libs/slider/jquery.ui.widget",function(){}),function(e){var t=function(){var t='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',n={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},o=function(t,n){var r=s(t);e(n).data("colpick").fields.eq(1).val(r.r).end().eq(2).val(r.g).end().eq(3).val(r.b).end()},a=function(t,n){e(n).data("colpick").fields.eq(4).val(Math.round(t.h)).end().eq(5).val(Math.round(t.s)).end().eq(6).val(Math.round(t.b)).end()},f=function(t,n){e(n).data("colpick").fields.eq(0).val(u(t))},l=function(t,n){e(n).data("colpick").selector.css("backgroundColor","#"+u({h:t.h,s:100,b:100})),e(n).data("colpick").selectorIndic.css({left:parseInt(e(n).data("colpick").height*t.s/100,10),top:parseInt(e(n).data("colpick").height*(100-t.b)/100,10)})},c=function(t,n){e(n).data("colpick").hue.css("top",parseInt(e(n).data("colpick").height-e(n).data("colpick").height*t.h/360,10))},h=function(t,n){e(n).data("colpick").currentColor.css("backgroundColor","#"+u(t))},p=function(t,n){e(n).data("colpick").newColor.css("backgroundColor","#"+u(t))},d=function(t){var n=e(this).parent().parent(),h;this.parentNode.className.indexOf("_hex")>0?(n.data("colpick").color=h=r(_(this.value)),o(h,n.get(0)),a(h,n.get(0))):this.parentNode.className.indexOf("_hsb")>0?(n.data("colpick").color=h=O({h:parseInt(n.data("colpick").fields.eq(4).val(),10),s:parseInt(n.data("colpick").fields.eq(5).val(),10),b:parseInt(n.data("colpick").fields.eq(6).val(),10)}),o(h,n.get(0)),f(h,n.get(0))):(n.data("colpick").color=h=i(M({r:parseInt(n.data("colpick").fields.eq(1).val(),10),g:parseInt(n.data("colpick").fields.eq(2).val(),10),b:parseInt(n.data("colpick").fields.eq(3).val(),10)})),f(h,n.get(0)),a(h,n.get(0))),l(h,n.get(0)),c(h,n.get(0)),p(h,n.get(0)),n.data("colpick").onChange.apply(n.parent(),[h,u(h),s(h),n.data("colpick").el,0])},v=function(t){e(this).parent().removeClass("colpick_focus")},m=function(){e(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),e(this).parent().addClass("colpick_focus")},g=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var n=e(this).parent().find("input").focus(),r={el:e(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:t.pageY,field:n,val:parseInt(n.val(),10),preview:e(this).parent().parent().data("colpick").livePreview};e(document).mouseup(r,b),e(document).mousemove(r,y)},y=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val-e.pageY+e.data.y,10)))),e.data.preview&&d.apply(e.data.field.get(0),[!0]),!1},b=function(t){return d.apply(t.data.field.get(0),[!0]),t.data.el.removeClass("colpick_slider").find("input").focus(),e(document).off("mouseup",b),e(document).off("mousemove",y),!1},w=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var n={cal:e(this).parent(),y:e(this).offset().top};e(document).on("mouseup touchend",n,S),e(document).on("mousemove touchmove",n,E);var r=t.type=="touchstart"?t.originalEvent.changedTouches[0].pageY:t.pageY;return d.apply(n.cal.data("colpick").fields.eq(4).val(parseInt(360*(n.cal.data("colpick").height-(r-n.y))/n.cal.data("colpick").height,10)).get(0),[n.cal.data("colpick").livePreview]),!1},E=function(e){var t=e.type=="touchmove"?e.originalEvent.changedTouches[0].pageY:e.pageY;return d.apply(e.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,t-e.data.y)))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]),!1},S=function(t){return o(t.data.cal.data("colpick").color,t.data.cal.get(0)),f(t.data.cal.data("colpick").color,t.data.cal.get(0)),e(document).off("mouseup touchend",S),e(document).off("mousemove touchmove",E),!1},x=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var n={cal:e(this).parent(),pos:e(this).offset()};n.preview=n.cal.data("colpick").livePreview,e(document).on("mouseup touchend",n,N),e(document).on("mousemove touchmove",n,T);var r,i;return t.type=="touchstart"?(pageX=t.originalEvent.changedTouches[0].pageX,i=t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,i=t.pageY),d.apply(n.cal.data("colpick").fields.eq(6).val(parseInt(100*(n.cal.data("colpick").height-(i-n.pos.top))/n.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-n.pos.left)/n.cal.data("colpick").height,10)).get(0),[n.preview]),!1},T=function(e){var t,n;return e.type=="touchmove"?(pageX=e.originalEvent.changedTouches[0].pageX,n=e.originalEvent.changedTouches[0].pageY):(pageX=e.pageX,n=e.pageY),d.apply(e.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,n-e.data.pos.top)))/e.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(e.data.cal.data("colpick").height,pageX-e.data.pos.left))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]),!1},N=function(t){return o(t.data.cal.data("colpick").color,t.data.cal.get(0)),f(t.data.cal.data("colpick").color,t.data.cal.get(0)),e(document).off("mouseup touchend",N),e(document).off("mousemove touchmove",T),!1},C=function(t){var n=e(this).parent(),r=n.data("colpick").color;n.data("colpick").origColor=r,h(r,n.get(0)),n.data("colpick").onSubmit(r,u(r),s(r),n.data("colpick").el)},k=function(t){t.stopPropagation();var n=e("#"+e(this).data("colpickId"));n.data("colpick").onBeforeShow.apply(this,[n.get(0)]);var r=e(this).offset(),i=r.top+this.offsetHeight,s=r.left,o=A(),u=n.width();s+u>o.l+o.w&&(s-=u),n.css({left:s+"px",top:i+"px"}),n.data("colpick").onShow.apply(this,[n.get(0)])!=0&&n.show(),e("html").mousedown({cal:n},L),n.mousedown(function(e){e.stopPropagation()})},L=function(t){t.data.cal.data("colpick").onHide.apply(this,[t.data.cal.get(0)])!=0&&t.data.cal.hide(),e("html").off("mousedown",L)},A=function(){var e=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth)}},O=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},M=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},_=function(e){var t=6-e.length;if(t>0){var n=[];for(var r=0;r<t;r++)n.push("0");n.push(e),e=n.join("")}return e},D=function(){var t=e(this).parent(),n=t.data("colpick").origColor;t.data("colpick").color=n,o(n,t.get(0)),f(n,t.get(0)),a(n,t.get(0)),l(n,t.get(0)),c(n,t.get(0)),p(n,t.get(0))};return{init:function(s){s=e.extend({},n,s||{});if(typeof s.color=="string")s.color=r(s.color);else if(s.color.r!=undefined&&s.color.g!=undefined&&s.color.b!=undefined)s.color=i(s.color);else{if(s.color.h==undefined||s.color.s==undefined||s.color.b==undefined)return this;s.color=O(s.color)}return this.each(function(){if(!e(this).data("colpickId")){var n=e.extend({},s);n.origColor=s.color;var r="collorpicker_"+parseInt(Math.random()*1e3);e(this).data("colpickId",r);var i=e(t).attr("id",r);i.addClass("colpick_"+n.layout+(n.submit?"":" colpick_"+n.layout+"_ns")),n.colorScheme!="light"&&i.addClass("colpick_"+n.colorScheme),i.find("div.colpick_submit").html(n.submitText).click(C),n.fields=i.find("input").change(d).blur(v).focus(m),i.find("div.colpick_field_arrs").mousedown(g).end().find("div.colpick_current_color").click(D),n.selector=i.find("div.colpick_color").on("mousedown touchstart",x),n.selectorIndic=n.selector.find("div.colpick_selector_outer"),n.el=this,n.hue=i.find("div.colpick_hue_arrs"),huebar=n.hue.parent();var u=navigator.userAgent.toLowerCase(),y=navigator.appName==="Microsoft Internet Explorer",b=y?parseFloat(u.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,E=y&&b<10,S=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(E){var T,N;for(T=0;T<=11;T++)N=e("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+S[T]+", endColorstr="+S[T+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+S[T]+", endColorstr="+S[T+1]+')";'),huebar.append(N)}else stopList=S.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");i.find("div.colpick_hue").on("mousedown touchstart",w),n.newColor=i.find("div.colpick_new_color"),n.currentColor=i.find("div.colpick_current_color"),i.data("colpick",n),o(n.color,i.get(0)),a(n.color,i.get(0)),f(n.color,i.get(0)),c(n.color,i.get(0)),l(n.color,i.get(0)),h(n.color,i.get(0)),p(n.color,i.get(0)),n.flat?(i.appendTo(this).show(),i.css({position:"relative",display:"block"})):(i.appendTo(document.body),e(this).on(n.showEvent,k),i.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){e(this).data("colpickId")&&k.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("colpickId")&&e("#"+e(this).data("colpickId")).hide()})},setColor:function(t,n){n=typeof n=="undefined"?1:n;if(typeof t=="string")t=r(t);else if(t.r!=undefined&&t.g!=undefined&&t.b!=undefined)t=i(t);else{if(t.h==undefined||t.s==undefined||t.b==undefined)return this;t=O(t)}return this.each(function(){if(e(this).data("colpickId")){var r=e("#"+e(this).data("colpickId"));r.data("colpick").color=t,r.data("colpick").origColor=t,o(t,r.get(0)),a(t,r.get(0)),f(t,r.get(0)),c(t,r.get(0)),l(t,r.get(0)),p(t,r.get(0)),r.data("colpick").onChange.apply(r.parent(),[t,u(t),s(t),r.data("colpick").el,1]),n&&h(t,r.get(0))}})}}}(),n=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(e&65280)>>8,b:e&255}},r=function(e){return i(n(e))},i=function(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),i=r-n;return t.b=r,t.s=r!=0?255*i/r:0,t.s!=0?e.r==r?t.h=(e.g-e.b)/i:e.g==r?t.h=2+(e.b-e.r)/i:t.h=4+(e.r-e.g)/i:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},s=function(e){var t={},n=e.h,r=e.s*255/100,i=e.b*255/100;if(r==0)t.r=t.g=t.b=i;else{var s=i,o=(255-r)*i/255,u=(s-o)*(n%60)/60;n==360&&(n=0),n<60?(t.r=s,t.b=o,t.g=o+u):n<120?(t.g=s,t.b=o,t.r=s-u):n<180?(t.g=s,t.r=o,t.b=o+u):n<240?(t.b=s,t.r=o,t.g=s-u):n<300?(t.b=s,t.g=o,t.r=o+u):n<360?(t.r=s,t.g=o,t.b=s-u):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},o=function(t){var n=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.each(n,function(e,t){t.length==1&&(n[e]="0"+t)}),n.join("")},u=function(e){return o(s(e))};e.fn.extend({colpick:t.init,colpickHide:t.hidePicker,colpickShow:t.showPicker,colpickSetColor:t.setColor}),e.extend({colpick:{rgbToHex:o,rgbToHsb:i,hsbToHex:u,hsbToRgb:s,hexToHsb:r,hexToRgb:n}})}(jQuery),define("libs/colpick/colpick",function(){}),function(e){var t={i18n:{bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},en_us:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},zh_cn:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","ons","Tor","Fre","lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]}},value:"",lang:"en_us",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],yearOffset:0};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return(new Date(this.getFullYear(),this.getMonth()+1,0)).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var n=e(this);if(!e(this).hasClass("xdsoft_scroller_box")){var r=function(e){var t={x:0,y:0};if(e.type=="touchstart"||e.type=="touchmove"||e.type=="touchend"||e.type=="touchcancel"){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t.x=n.pageX,t.y=n.pageY}else if(e.type=="mousedown"||e.type=="mouseup"||e.type=="mousemove"||e.type=="mouseover"||e.type=="mouseout"||e.type=="mouseenter"||e.type=="mouseleave")t.x=e.pageX,t.y=e.pageY;return t},i=0,s=n.children().eq(0),o=n[0].clientHeight,u=s[0].offsetHeight,a=e('<div class="xdsoft_scrollbar"></div>'),f=e('<div class="xdsoft_scroller"></div>'),l=100,c=!1;a.append(f),n.addClass("xdsoft_scroller_box").append(a),f.on("mousedown.xdsoft_scroller",function(r){o||n.trigger("resize_scroll.xdsoft_scroller",[t]);var s=r.pageY,u=parseInt(f.css("margin-top")),c=a[0].offsetHeight;e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function h(){e([document.body,window]).off("mouseup.xdsoft_scroller",h).off("mousemove.xdsoft_scroller",i).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",i=function(e){var t=e.pageY-s+u;t<0&&(t=0),t+f[0].offsetHeight>c&&(t=c-f[0].offsetHeight),n.trigger("scroll_element.xdsoft_scroller",[l?t/l:0])})}),n.on("scroll_element.xdsoft_scroller",function(e,t){o||n.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:t<0||isNaN(t)?0:t,f.css("margin-top",l*t),s.css("marginTop",-parseInt((u-o)*t))}).on("resize_scroll.xdsoft_scroller",function(e,t,r){o=n[0].clientHeight,u=s[0].offsetHeight;var i=o/u,c=i*a[0].offsetHeight;i>1?f.hide():(f.show(),f.css("height",parseInt(c>10?c:10)),l=a[0].offsetHeight-f[0].offsetHeight,r!==!0&&n.trigger("scroll_element.xdsoft_scroller",[t?t:Math.abs(parseInt(s.css("marginTop")))/(u-o)]))}),n.mousewheel&&n.mousewheel(function(e,t,r,i){var a=Math.abs(parseInt(s.css("marginTop")));return n.trigger("scroll_element.xdsoft_scroller",[(a-t*20)/(u-o)]),e.stopPropagation(),!1}),n.on("touchstart",function(e){c=r(e)}),n.on("touchmove",function(e){if(c){var t=r(e),i=Math.abs(parseInt(s.css("marginTop")));n.trigger("scroll_element.xdsoft_scroller",[(i-(t.y-c.y))/(u-o)]),e.stopPropagation(),e.preventDefault()}}),n.on("touchend touchcancel",function(e){c=!1})}n.trigger("resize_scroll.xdsoft_scroller",[t])})},e.fn.datetimepicker=function(n){var r=48,i=57,s=96,o=105,u=17,a=46,f=13,l=27,c=8,h=37,p=38,d=39,v=40,m=9,g=116,y=65,b=67,w=86,E=90,S=89,x=!1,T=e.isPlainObject(n)||!n?e.extend(!0,{},t,n):e.extend({},t),N=0,C=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function t(n){if(e.is(":disabled")||e.is(":hidden")||!e.is(":visible")||e.data("xdsoft_datetimepicker"))return;clearTimeout(N),N=setTimeout(function(){e.data("xdsoft_datetimepicker")||k(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",t).trigger("open.xdsoft")},100)})},k=function(t){function X(){var e=T.value?T.value:t&&t.val&&t.val()?t.val():"";return e&&j.isValidDate(e=Date.parseDate(e,T.format))?n.data("changed",!0):e="",!e&&T.startDate!==!1&&(e=j.strToDateTime(T.startDate)),e?e:0}var n=e("<div "+(T.id?'id="'+T.id+'"':"")+" "+(T.style?'style="'+T.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_noselect '+T.className+'"></div>'),N=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),C=e('<div class="xdsoft_datepicker active"></div>'),k=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span></div><div class="xdsoft_label xdsoft_year"><span></span></div><button type="button" class="xdsoft_next"></button></div>'),L=e('<div class="xdsoft_calendar"></div>'),A=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),O=A.find(".xdsoft_time_box").eq(0),M=e('<div class="xdsoft_time_variant"></div>'),_=e('<div class="xdsoft_scrollbar"></div>'),D=e('<div class="xdsoft_scroller"></div>'),P=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),H=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>');k.find(".xdsoft_month span").after(P),k.find(".xdsoft_year span").after(H),k.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){k.find(".xdsoft_select").hide();var n=e(this).find(".xdsoft_select").eq(0),r=0,i=0;j.currentTime&&(r=j.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n.show();for(var s=n.find("div.xdsoft_option"),o=0;o<s.length;o++){if(s.eq(o).data("value")==r)break;i+=s[0].offsetHeight}return n.xdsoftScroller(i/(n.children()[0].offsetHeight-n[0].clientHeight)),t.stopPropagation(),!1}),k.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(t){j&&j.currentTime&&j.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),n.trigger("xchange.xdsoft"),T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,j.currentTime,n.data("input"))}),n.setOptions=function(N){T=e.extend(!0,{},T,N),N.allowTimes&&e.isArray(N.allowTimes)&&N.allowTimes.length&&(T.allowTimes=e.extend(!0,[],N.allowTimes)),N.weekends&&e.isArray(N.weekends)&&N.weekends.length&&(T.weekends=e.extend(!0,[],N.weekends)),(T.open||T.opened)&&!T.inline&&t.trigger("open.xdsoft"),T.inline&&(q=!0,n.addClass("xdsoft_inline"),t.after(n).hide()),T.inverseButton&&(T.next="xdsoft_prev",T.prev="xdsoft_next"),T.datepicker?C.addClass("active"):C.removeClass("active"),T.timepicker?A.addClass("active"):A.removeClass("active"),T.value&&(t&&t.val&&t.val(T.value),j.setCurrentTime(T.value)),isNaN(T.dayOfWeekStart)||parseInt(T.dayOfWeekStart)<0||parseInt(T.dayOfWeekStart)>6?T.dayOfWeekStart=0:T.dayOfWeekStart=parseInt(T.dayOfWeekStart),T.timepickerScrollbar||_.hide(),T.minDate&&/^-(.*)$/.test(T.minDate)&&(T.minDate=j.strToDateTime(T.minDate).dateFormat(T.formatDate)),T.maxDate&&/^\+(.*)$/.test(T.maxDate)&&(T.maxDate=j.strToDateTime(T.maxDate).dateFormat(T.formatDate)),k.find(".xdsoft_today_button").css("visibility",T.todayButton?"visible":"hidden");if(T.mask){var L,O=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},M=function(e,t){e=typeof e=="string"||e instanceof String?document.getElementById(e):e;if(!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd(t),n.moveStart(t),n.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},D=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return RegExp(n).test(t)};t.off("keydown.xdsoft");switch(!0){case T.mask===!0:T.mask=T.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59");case e.type(T.mask)=="string":D(T.mask,t.val())||t.val(T.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(n){var N=this.value,C=n.which;switch(!0){case C>=r&&C<=i||C>=s&&C<=o||C==c||C==a:var k=O(this),L=C!=c&&C!=a?String.fromCharCode(s<=C&&C<=o?C-r:C):"_";(C==c||C==a)&&k&&(k--,L="_");while(/[^0-9_]/.test(T.mask.substr(k,1))&&k<T.mask.length&&k>0)k+=C==c||C==a?-1:1;N=N.substr(0,k)+L+N.substr(k+1);if(e.trim(N)=="")N=T.mask.replace(/[0-9]/g,"_");else if(k==T.mask.length)break;k+=C==c||C==a?0:1;while(/[^0-9_]/.test(T.mask.substr(k,1))&&k<T.mask.length&&k>0)k+=C==c||C==a?-1:1;D(T.mask,N)?(this.value=N,M(this,k)):e.trim(N)==""?this.value=T.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft");break;case!!~[y,b,w,E,S].indexOf(C)&&x:case!!~[l,p,v,h,d,g,u,m,f].indexOf(C):return!0}return n.preventDefault(),!1})}}T.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){T.allowBlank&&!e.trim(e(this).val()).length?(e(this).val(null),n.data("xdsoft_datetime").empty()):Date.parseDate(e(this).val(),T.format)?n.data("xdsoft_datetime").setCurrentTime(e(this).val()):(e(this).val(j.now().dateFormat(T.format)),n.data("xdsoft_datetime").setCurrentTime(e(this).val())),n.trigger("changedatetime.xdsoft")}),T.dayOfWeekStartPrev=T.dayOfWeekStart==0?6:T.dayOfWeekStart-1,n.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},n.data("options",T).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),H.hide(),P.hide(),!1});var B=A.find(".xdsoft_time_box");B.append(M),B.xdsoftScroller(),n.on("afterOpen.xdsoft",function(){B.xdsoftScroller()}),n.append(C).append(A),T.withoutCopyright!==!0&&n.append(N),C.append(k).append(L),e("body").append(n);var j=new function(){var e=this;e.now=function(){var e=new Date;return T.yearOffset&&e.setFullYear(e.getFullYear()+T.yearOffset),e},e.currentTime=this.now(),e.isValidDate=function(e){return Object.prototype.toString.call(e)!=="[object Date]"?!1:!isNaN(e.getTime())},e.setCurrentTime=function(t){e.currentTime=typeof t=="string"?e.strToDateTime(t):e.isValidDate(t)?t:e.now(),n.trigger("xchange.xdsoft")},e.empty=function(){e.currentTime=null},e.getCurrentTime=function(t){return e.currentTime},e.nextMonth=function(){var t=e.currentTime.getMonth()+1;return t==12&&(e.currentTime.setFullYear(e.currentTime.getFullYear()+1),t=0),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,j.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),t},e.prevMonth=function(){var t=e.currentTime.getMonth()-1;return t==-1&&(e.currentTime.setFullYear(e.currentTime.getFullYear()-1),t=11),e.currentTime.setDate(Math.min(Date.daysInMonth[t],e.currentTime.getDate())),e.currentTime.setMonth(t),T.onChangeMonth&&T.onChangeMonth.call&&T.onChangeMonth.call(n,j.currentTime,n.data("input")),n.trigger("xchange.xdsoft"),t},e.strToDateTime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=[],r,i;return(n=/^(\+|\-)(.*)$/.exec(t))&&(n[2]=Date.parseDate(n[2],T.formatDate))?(r=n[2].getTime()-n[2].getTimezoneOffset()*6e4,i=new Date(j.now().getTime()+parseInt(n[1]+"1")*r)):i=t?Date.parseDate(t,T.format):e.now(),e.isValidDate(i)||(i=e.now()),i},e.strtodate=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?Date.parseDate(t,T.formatDate):e.now();return e.isValidDate(n)||(n=e.now()),n},e.strtotime=function(t){if(t&&t instanceof Date&&e.isValidDate(t))return t;var n=t?Date.parseDate(t,T.formatTime):e.now();return e.isValidDate(n)||(n=e.now()),n},e.str=function(){return e.currentTime.dateFormat(T.format)}};k.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){n.data("changed",!0),j.setCurrentTime(0),n.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(j.str()),n.trigger("close.xdsoft")}),k.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,r=!1;(function i(e){var s=j.currentTime.getMonth();t.hasClass(T.next)?j.nextMonth():t.hasClass(T.prev)&&j.prevMonth(),T.monthChangeSpinner&&!r&&(n=setTimeout(i,e?e:100))})(500),e([document.body,window]).on("mouseup.xdsoft",function s(){clearTimeout(n),r=!0,e([document.body,window]).off("mouseup.xdsoft",s)})}),A.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,r=!1,i=110;(function s(e){var o=O[0].clientHeight,u=M[0].offsetHeight,a=Math.abs(parseInt(M.css("marginTop")));t.hasClass(T.next)&&u-o-T.timeHeightInTimePicker>=a?M.css("marginTop","-"+(a+T.timeHeightInTimePicker)+"px"):t.hasClass(T.prev)&&a-T.timeHeightInTimePicker>=0&&M.css("marginTop","-"+(a-T.timeHeightInTimePicker)+"px"),O.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(M.css("marginTop"))/(u-o))]),i=i>10?10:i-10,!r&&(n=setTimeout(s,e?e:i))})(500),e([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(n),r=!0,e([document.body,window]).off("mouseup.xdsoft",o)})});var F=0;n.on("xchange.xdsoft",function(t){clearTimeout(F),F=setTimeout(function(){var t="",r=new Date(j.currentTime.getFullYear(),j.currentTime.getMonth(),1,12,0,0),i=0,s=j.now();while(r.getDay()!=T.dayOfWeekStart)r.setDate(r.getDate()-1);t+="<table><thead><tr>";for(var o=0;o<7;o++)t+="<th>"+T.i18n[T.lang].dayOfWeek[o+T.dayOfWeekStart>6?0:o+T.dayOfWeekStart]+"</th>";t+="</tr></thead>",t+="<tbody><tr>";var u=!1,a=!1;T.maxDate!==!1&&(u=j.strtodate(T.maxDate),u=new Date(u.getFullYear(),u.getMonth(),u.getDate(),23,59,59,999)),T.minDate!==!1&&(a=j.strtodate(T.minDate),a=new Date(a.getFullYear(),a.getMonth(),a.getDate()));var f,l,c,h=[];while(i<j.currentTime.countDaysInMonth()||r.getDay()!=T.dayOfWeekStart||j.currentTime.getMonth()==r.getMonth())h=[],i++,f=r.getDate(),l=r.getFullYear(),c=r.getMonth(),h.push("xdsoft_date"),(u!==!1&&r>u||a!==!1&&r<a)&&h.push("xdsoft_disabled"),j.currentTime.getMonth()!=c&&h.push("xdsoft_other_month"),(T.defaultSelect||n.data("changed"))&&j.currentTime.dateFormat(T.formatDate)==r.dateFormat(T.formatDate)&&h.push("xdsoft_current"),s.dateFormat(T.formatDate)==r.dateFormat(T.formatDate)&&h.push("xdsoft_today"),(r.getDay()==0||r.getDay()==6||~T.weekends.indexOf(r.dateFormat(T.formatDate)))&&h.push("xdsoft_weekend"),T.beforeShowDay&&typeof T.beforeShowDay=="function"&&h.push(T.beforeShowDay(r)),t+='<td data-date="'+f+'" data-month="'+c+'" data-year="'+l+'"'+' class="xdsoft_date xdsoft_day_of_week'+r.getDay()+" "+h.join(" ")+'">'+"<div>"+f+"</div>"+"</td>",r.getDay()==T.dayOfWeekStartPrev&&(t+="</tr>"),r.setDate(f+1);t+="</tbody></table>",L.html(t),k.find(".xdsoft_label span").eq(0).text(T.i18n[T.lang].months[j.currentTime.getMonth()]),k.find(".xdsoft_label span").eq(1).text(j.currentTime.getFullYear());var p="",d="",c="",v=function(t,r){var i=j.now();i.setHours(t),t=parseInt(i.getHours()),i.setMinutes(r),r=parseInt(i.getMinutes()),h=[],(T.maxTime!==!1&&j.strtotime(T.maxTime).getTime()<i.getTime()||T.minTime!==!1&&j.strtotime(T.minTime).getTime()>i.getTime())&&h.push("xdsoft_disabled"),(T.initTime||T.defaultSelect||n.data("changed"))&&parseInt(j.currentTime.getHours())==parseInt(t)&&(T.step>59||Math[T.roundTime](j.currentTime.getMinutes()/T.step)*T.step==parseInt(r))&&(T.defaultSelect||n.data("changed")?h.push("xdsoft_current"):T.initTime&&h.push("xdsoft_init_time")),parseInt(s.getHours())==parseInt(t)&&parseInt(s.getMinutes())==parseInt(r)&&h.push("xdsoft_today"),p+='<div class="xdsoft_time '+h.join(" ")+'" data-hour="'+t+'" data-minute="'+r+'">'+i.dateFormat(T.formatTime)+"</div>"};if(!T.allowTimes||!e.isArray(T.allowTimes)||!T.allowTimes.length)for(var i=0,o=0;i<(T.hours12?12:24);i++)for(o=0;o<60;o+=T.step)d=(i<10?"0":"")+i,c=(o<10?"0":"")+o,v(d,c);else for(var i=0;i<T.allowTimes.length;i++)d=j.strtotime(T.allowTimes[i]).getHours(),c=j.strtotime(T.allowTimes[i]).getMinutes(),v(d,c);M.html(p);var m="",i=0;for(i=parseInt(T.yearStart,10)+T.yearOffset;i<=parseInt(T.yearEnd,10)+T.yearOffset;i++)m+='<div class="xdsoft_option '+(j.currentTime.getFullYear()==i?"xdsoft_current":"")+'" data-value="'+i+'">'+i+"</div>";H.children().eq(0).html(m);for(i=0,m="";i<=11;i++)m+='<div class="xdsoft_option '+(j.currentTime.getMonth()==i?"xdsoft_current":"")+'" data-value="'+i+'">'+T.i18n[T.lang].months[i]+"</div>";P.children().eq(0).html(m),e(n).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(T.timepicker){var e;M.find(".xdsoft_current").length?e=".xdsoft_current":M.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time");if(e){var t=O[0].clientHeight,n=M[0].offsetHeight,r=M.find(e).index()*T.timeHeightInTimePicker+1;n-t<r&&(r=n-t),O.trigger("scroll_element.xdsoft_scroller",[parseInt(r)/(n-t)])}else O.trigger("scroll_element.xdsoft_scroller",[0])}});var I=0;L.on("click.xdsoft","td",function(r){r.stopPropagation(),I++;var i=e(this),s=j.currentTime;if(i.hasClass("xdsoft_disabled"))return!1;s.setDate(1),s.setFullYear(i.data("year")),s.setMonth(i.data("month")),s.setDate(i.data("date")),i.data("date")>(new Date).getDate()?T.minTime=!1:T.minTime=new Date,n.trigger("select.xdsoft",[s]),t.val(j.str()),(I>1||T.closeOnDateSelect===!0||T.closeOnDateSelect===0&&!T.timepicker)&&!T.inline&&n.trigger("close.xdsoft"),T.onSelectDate&&T.onSelectDate.call&&T.onSelectDate.call(n,j.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),n.trigger("changedatetime.xdsoft"),setTimeout(function(){I=0},200)}),M.on("click.xdsoft","div",function(t){t.stopPropagation();var r=e(this),i=j.currentTime;if(r.hasClass("xdsoft_disabled"))return!1;i.setHours(r.data("hour")),i.setMinutes(r.data("minute")),n.trigger("select.xdsoft",[i]),n.data("input").val(j.str()),!T.inline&&n.trigger("close.xdsoft"),T.onSelectTime&&T.onSelectTime.call&&T.onSelectTime.call(n,j.currentTime,n.data("input")),n.data("changed",!0),n.trigger("xchange.xdsoft"),n.trigger("changedatetime.xdsoft")}),n.mousewheel&&C.mousewheel(function(e,t,n,r){return T.scrollMonth?(t<0?j.nextMonth():j.prevMonth(),!1):!0}),n.mousewheel&&O.unmousewheel().mousewheel(function(e,t,n,r){if(!T.scrollTime)return!0;var i=O[0].clientHeight,s=M[0].offsetHeight,o=Math.abs(parseInt(M.css("marginTop"))),u=!0;return t<0&&s-i-T.timeHeightInTimePicker>=o?(M.css("marginTop","-"+(o+T.timeHeightInTimePicker)+"px"),u=!1):t>0&&o-T.timeHeightInTimePicker>=0&&(M.css("marginTop","-"+(o-T.timeHeightInTimePicker)+"px"),u=!1),O.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(M.css("marginTop"))/(s-i))]),e.stopPropagation(),u});var q=!1;n.on("changedatetime.xdsoft",function(){if(T.onChangeDateTime&&T.onChangeDateTime.call){var e=n.data("input");T.onChangeDateTime.call(n,j.currentTime,e),e.trigger("change")}}).on("generate.xdsoft",function(){T.onGenerate&&T.onGenerate.call&&T.onGenerate.call(n,j.currentTime,n.data("input")),q&&(n.trigger("afterOpen.xdsoft"),q=!1)}).on("click.xdsoft",function(e){e.stopPropagation()});var R=0;t.mousewheel&&t.mousewheel(function(e,r,i,s){if(!T.scrollInput)return!0;if(!T.datepicker&&T.timepicker)return R=M.find(".xdsoft_current").length?M.find(".xdsoft_current").eq(0).index():0,R+r>=0&&R+r<M.children().length&&(R+=r),M.children().eq(R).length&&M.children().eq(R).trigger("mousedown"),!1;if(T.datepicker&&!T.timepicker)return C.trigger(e,[r,i,s]),t.val&&t.val(j.str()),n.trigger("changedatetime.xdsoft"),!1});var U=function(){var t=n.data("input").offset(),r=t.top+n.data("input")[0].offsetHeight-1,i=t.left,s="absolute";T.fixed?(r-=e(window).scrollTop(),i-=e(window).scrollLeft(),s="fixed"):(r+n[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(r=t.top-n[0].offsetHeight+1),r<0&&(r=0),i+n[0].offsetWidth>e(window).width()&&(i=t.left-n[0].offsetWidth+n.data("input")[0].offsetWidth)),n.css({left:i,top:r,position:s})};n.on("open.xdsoft",function(){var t=!0;T.onShow&&T.onShow.call&&(t=T.onShow.call(n,j.currentTime,n.data("input"))),t!==!1&&(n.show(),U(),e(window).off("resize.xdsoft",U).on("resize.xdsoft",U),T.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function r(){n.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",r)}))}).on("close.xdsoft",function(e){var t=!0;T.onClose&&T.onClose.call&&(t=T.onClose.call(n,j.currentTime,n.data("input"))),t!==!1&&!T.opened&&!T.inline&&n.hide(),e.stopPropagation()}).data("input",t);var z=0,W=0;n.data("xdsoft_datetime",j),n.setOptions(T),j.setCurrentTime(X()),t.data("xdsoft_datetimepicker",n).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(e){if(t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||t.data("xdsoft_datetimepicker").is(":visible")&&T.closeOnInputClick)return;clearTimeout(z),z=setTimeout(function(){if(t.is(":disabled")||t.is(":hidden")||!t.is(":visible"))return;q=!0,j.setCurrentTime(X()),n.trigger("open.xdsoft")},100)}).on("keydown.xdsoft",function(t){var r=this.value,i=t.which;switch(!0){case!!~[f].indexOf(i):var s=e("input:visible,textarea:visible");return n.trigger("close.xdsoft"),s.eq(s.index(this)+1).focus(),!1;case!!~[m].indexOf(i):return n.trigger("close.xdsoft"),!0}})},L=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off("open.xdsoft focusin.xdsoft focusout.xdsoft mousedown.xdsoft blur.xdsoft keydown.xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())};return e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode==u&&(x=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode==u&&(x=!1)}),this.each(function(){var t;if(t=e(this).data("xdsoft_datetimepicker")){if(e.type(n)==="string")switch(n){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"destroy":L(e(this));break;case"reset":this.value=this.defaultValue,(!this.value||!t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,T.format)))&&t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value)}else t.setOptions(n);return 0}e.type(n)!=="string"&&(!T.lazyInit||T.open||T.inline?k(e(this)):C(e(this)))})},e.fn.datetimepicker.defaults=t}(jQuery),function(e){typeof define=="function"&&define.amd?define("libs/dtpicker/jquery.datetimepicker",["jquery"],e):typeof exports=="object"?module.exports=e:e(jQuery)}(function(e){function o(t){var n=t||window.event,s=[].slice.call(arguments,1),o=0,u=0,a=0,f=0,l=0,c;t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(o=n.wheelDelta),n.detail&&(o=n.detail*-1),n.deltaY&&(a=n.deltaY*-1,o=a),n.deltaX&&(u=n.deltaX,o=u*-1),n.wheelDeltaY!==undefined&&(a=n.wheelDeltaY),n.wheelDeltaX!==undefined&&(u=n.wheelDeltaX*-1),f=Math.abs(o);if(!r||f<r)r=f;l=Math.max(Math.abs(a),Math.abs(u));if(!i||l<i)i=l;return c=o>0?"floor":"ceil",o=Math[c](o/r),u=Math[c](u/i),a=Math[c](a/i),s.unshift(t,o,u,a),(e.event.dispatch||e.event.handle).apply(this,s)}var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r,i;if(e.event.fixHooks)for(var s=t.length;s;)e.event.fixHooks[t[--s]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],o,!1);else this.onmousewheel=o},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],o,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){if(e=="unixtime")return parseInt(this.getTime()/1e3);Date.formatFunctions[e]==null&&Date.createNewFormat(e);var t=Date.formatFunctions[e];return this[t]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="";for(var i=0;i<format.length;++i)ch=format.charAt(i),!special&&ch=="\\"?special=!0:special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch);eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){if(t=="unixtime")return new Date(isNaN(parseInt(e))?0:parseInt(e)*1e3);Date.parseFunctions[t]==null&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="";for(var i=0;i<format.length;++i)ch=format.charAt(i),!special&&ch=="\\"?special=!0:special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c));code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+t+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),n=7-t.getDay()+4;return String.leftPad(Math.ceil((e-n)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return(e&3)==0&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return e<0?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var r=new String(e);n==null&&(n=" ");while(r.length<t)r=n+r;return r},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"},define("views/operations/CampaignsView",["backbone","text!templates/operations/campaigns.html","text!templates/operations/accurateGroup.html","text!templates/operations/segmentConditions.html","text!templates/operations/whatToSend.html","text!templates/operations/prepareToSend.html","text!templates/operations/iosMsg.html","text!templates/operations/androidMsg.html","text!templates/operations/phoneAndroid.html","text!templates/operations/phoneIos.html","text!templates/operations/conditions/accountRegisterCondition.html","text!templates/operations/conditions/appVersionCondition.html","text!templates/operations/conditions/chargeAmountCondition.html","text!templates/operations/conditions/chargeAmountRankCondition.html","text!templates/operations/conditions/chargeTimesCondition.html","text!templates/operations/conditions/countryCondition.html","text!templates/operations/conditions/jailbreakCondition.html","text!templates/operations/conditions/levelCondition.html","text!templates/operations/conditions/loginTimesCondition.html","text!templates/operations/conditions/loginUserCondition.html","text!templates/operations/conditions/lostUserCondition.html","text!templates/operations/conditions/missionCondition.html","text!templates/operations/conditions/modelCondition.html","text!templates/operations/conditions/newuserCondition.html","text!templates/operations/conditions/osCondition.html","text!templates/operations/conditions/partnerCondition.html","text!templates/operations/conditions/platformCondition.html","text!templates/operations/conditions/sexCondition.html","text!templates/operations/conditions/useTimeCondition.html","text!templates/operations/clickAndroidActions.html","text!templates/operations/clickIosActions.html","text!templates/operations/segmentDisplayForPrepareSend/accountRegisterCondition.html","text!templates/operations/segmentDisplayForPrepareSend/appVersionCondition.html","text!templates/operations/segmentDisplayForPrepareSend/chargeAmountCondition.html","text!templates/operations/segmentDisplayForPrepareSend/chargeAmountRankCondition.html","text!templates/operations/segmentDisplayForPrepareSend/chargeTimesCondition.html","text!templates/operations/segmentDisplayForPrepareSend/countryCondition.html","text!templates/operations/segmentDisplayForPrepareSend/jailbreakCondition.html","text!templates/operations/segmentDisplayForPrepareSend/levelCondition.html","text!templates/operations/segmentDisplayForPrepareSend/loginTimesCondition.html","text!templates/operations/segmentDisplayForPrepareSend/loginUserCondition.html","text!templates/operations/segmentDisplayForPrepareSend/lostUserCondition.html","text!templates/operations/segmentDisplayForPrepareSend/missionCondition.html","text!templates/operations/segmentDisplayForPrepareSend/modelCondition.html","text!templates/operations/segmentDisplayForPrepareSend/newuserCondition.html","text!templates/operations/segmentDisplayForPrepareSend/osCondition.html","text!templates/operations/segmentDisplayForPrepareSend/partnerCondition.html","text!templates/operations/segmentDisplayForPrepareSend/platformCondition.html","text!templates/operations/segmentDisplayForPrepareSend/sexCondition.html","text!templates/operations/segmentDisplayForPrepareSend/useTimeCondition.html","text!templates/operations/androidChannelTip.html","text!templates/operations/iosChannelTip.html","models/operations/Campaigns","models/product/Product","models/Constant","utils/ModelBox","i18n!nls/gameI18N","utils/urlUtil","utils/RegexUtil","libs/async","utils/Xslider","libs/slider/jquery.ui.core","libs/slider/jquery.ui.mouse","libs/slider/jquery.ui.slider","libs/slider/jquery.ui.widget","libs/colpick/colpick","libs/dtpicker/jquery.datetimepicker","jquery.datepicker"],function(Backbone,MainTempl,AccurateGroupTempl,SegmentConditionsTempl,WhatToSendTempl,PrepareToSendTempl,IosMsgTempl,AndroidMsgTempl,PhoneAndroidTempl,PhoneIosTempl,AccountRegisterConditionTempl,AppVersionConditionTempl,ChargeAmountConditionTempl,ChargeAmountRankConditionTempl,ChargeTimesConditionTempl,CountryConditionTempl,JailbreakConditionTempl,LevelConditionTempl,LoginTimesConditionTempl,LoginUserConditionTempl,LostUserConditionTempl,MissionConditionTempl,ModelConditionTempl,NewuserConditionTempl,OsConditionTempl,PartnerConditionTempl,PlatformConditionTempl,SexConditionTempl,UseTimeConditionTempl,AndroidActionsTempl,IosActionsTempl,PrepareAccountRegisterConditionTempl,PrepareAppVersionConditionTempl,PrepareChargeAmountConditionTempl,PrepareChargeAmountRankConditionTempl,PrepareChargeTimesConditionTempl,PrepareCountryConditionTempl,PrepareJailbreakConditionTempl,PrepareLevelConditionTempl,PrepareLoginTimesConditionTempl,PrepareLoginUserConditionTempl,PrepareLostUserConditionTempl,PrepareMissionConditionTempl,PrepareModelConditionTempl,PrepareNewuserConditionTempl,PrepareOsConditionTempl,PreparePartnerConditionTempl,PreparePlatformConditionTempl,PrepareSexConditionTempl,PrepareUseTimeConditionTempl,AndroidChannelTipTempl,IosChannelTipTempl,Campaigns,Product,Constant,ModelBox,i18n,URLUtil,RegexUtil,Async){var view=Backbone.View.extend({el:"#container",events:{"click #_editMsgName":"editPushMsgTitle","blur .input-active-name":"setMsgTip","click .operate-choosePlatform a":"choosePlatform","click .table-userGroup tr":"checkUserGroup","click .templateList ul li":"checkTemplate","click .templateList ul strong":"deleteTemplate","click #whoToSendSaveBtn":"saveToWhatToSend","click #whoToSendCancelBtn":"goToCampaignList","click #whatToSendCancelBtn":"goToWhoToSend","click #whatToSendSaveBtn":"goToPrepareToSend","click #prepareToSendCancelBtn":"goToWhatToSend","click .radio-input":"checkSegmentPlatform","click ._config font":"checkConfig","click .operate-add-abTest":"addABTest","click #checkNoticeType li":"checkNoticeType","click ._deleteABTest":"deleteABTest","click ._activeBorder":"toggleCustomBorderColor","click .choose-color a":"setColor","click ._background":"toggleCustomBorderColor","click .operate-del":"deleteFilter","click .content-conditions ol li":"addFilter","click .select ul div li":"changeCondition","click .multiple-name b":"deleteCondition","keyup .input-search":"dynamicSearch","keyup .input-activeTitle":"dynamicPhoneTitle","keyup .textarea-activeDetail":"dynamicPhoneContent","click ._border_setting ol font._click":"setPhoneBorder","click ._background_setting ol font._click":"setPhoneBackground","click ._setTime font":"setSendTime","click #prepareToSendSaveBtn":"commitPush","click .active-title ul li":"displayMsgContent","keypress ._input_operatorValue":"inputOnlyNumber","blur ._input_operatorValue":"inputOperatorValue","click ._saveNewTemplate":"saveNewTemplate","click #_startTime,#_endTime":"setStartEndDate","click #_delaySendTime":"showDatePicker","click #steps li":"clickStep"},initialize:function(){this.$msgId=Params.msgId||0,this.$isUpdate=!1,this.$backstep=!1,this.$templateDatas=null,this.$segmentPlatform="",this.$editPushPlatform="",this.$segmentConditions={},this.$prepareSendSegment={},this.$pushMsg={id:-1,platform:-1,accurate:0,segmentId:-1,type:4,name:null,isFixed:!1},this.conditionTemplArray={},this.conditionTemplArray.accountRegister=AccountRegisterConditionTempl,this.conditionTemplArray.appVersion=AppVersionConditionTempl,this.conditionTemplArray.chargeAmount=ChargeAmountConditionTempl,this.conditionTemplArray.chargeAmountRank=ChargeAmountRankConditionTempl,this.conditionTemplArray.chargeTimes=ChargeTimesConditionTempl,this.conditionTemplArray.country=CountryConditionTempl,this.conditionTemplArray.jailbreak=JailbreakConditionTempl,this.conditionTemplArray.loginTimes=LoginTimesConditionTempl,this.conditionTemplArray.loginUser=LoginUserConditionTempl,this.conditionTemplArray.lostUser=LostUserConditionTempl,this.conditionTemplArray.level=LevelConditionTempl,this.conditionTemplArray.mission=MissionConditionTempl,this.conditionTemplArray.model=ModelConditionTempl,this.conditionTemplArray.newuser=NewuserConditionTempl,this.conditionTemplArray.os=OsConditionTempl,this.conditionTemplArray.partner=PartnerConditionTempl,this.conditionTemplArray.sex=SexConditionTempl,this.conditionTemplArray.useTime=UseTimeConditionTempl,this.forecastTemplArray={},this.forecastTemplArray[6]=i18n.Operations.tips.content5,this.forecastTemplArray[7]=i18n.Operations.tips.content6,this.forecastTemplArray[8]=i18n.Operations.tips.content7,this.forecastTemplArray[9]=i18n.Operations.tips.content8,this.forecastTemplArray[10]=i18n.Operations.tips.content9,this.borderClass={},this.borderClass["#464d57"]="border-black",this.borderClass["#d3d6dd"]="border-white",this.bgclass={},this.bgclass["#ecedf1"]="bg-grey",this.bgclass["#27272f"]="bg-black",this.bgclass["#ffffff"]="bg-white",this.render()},fetchPushDetail:function(e){var t=this;Campaigns.fetchSendDetail({data:{msgId:e},success:function(e){t.$pushMsg=e.msg,t.$segmentConditions=e.segment,i18n.msgName=t.$pushMsg.name||"";var n=t.$pushMsg.step;n==3?t.renderMainTemplate(!0):n==1?t.renderMainTemplate(!0,t.whatToSendPage):n==2&&(t.$segmentConditions=e.segment,t.$prepareSendSegment.pushMsg=t.$pushMsg,t.$prepareSendSegment.segmentConditions=t.$segmentConditions,t.renderMainTemplate(!0,t.whatToSendPage))}})},render:function(){return this.$msgId>0?(this.fetchPushDetail(this.$msgId),this.$isUpdate=!0):(i18n.msgName="",this.$isUpdate=!1,this.renderMainTemplate(!1)),this},renderMainTemplate:function(e,t){var n=this;Product.fetchPlatformListWithProductId({data:Params,success:function(r){if(r){var i="";r.length==1?r.indexOf("1")!=-1?(i="<a data='android' _platFormData='1' href='javascript:void(0)' class='choose-android on-choose'><em>i18n.Operations.msg.icon</em><font>Android</font></a>",n.$pushMsg.platform=1,n.$segmentPlatform="android"):r.indexOf("2")!=-1&&(i="<a data='ios' _platFormData='2' href='javascript:void(0)' class='choose-ios on-choose'><em>i18n.Operations.msg.icon</em><font>iOS</font></a>",n.$pushMsg.platform=2,n.$segmentPlatform="ios"):(i+="<a data='android' _platFormData='1' href='javascript:void(0)' class='choose-android'><em>i18n.Operations.msg.icon</em><font>Android</font></a>",i+="<a data='ios' _platFormData='2' href='javascript:void(0)' class='choose-ios'><em>i18n.Operations.msg.icon</em><font>iOS</font></a>"),i18n._platformTpl=i,$("#container").html(_.template(MainTempl,i18n));if(e){n.$pushMsg.platform==1?n.$segmentPlatform="android":n.$segmentPlatform="ios",$("a[_platFormData='"+n.$pushMsg.platform+"']").addClass("on-choose");var s=n.$pushMsg.accurate;$(".table-userGroup tr").removeClass("on-choose"),$("userGroup").removeAttr("checked"),s==1?(n.displayTemplateAndSegmentFilter(!0,JSON.stringify(n.$segmentConditions).replace(/\"/g,"'"),t),$(".table-userGroup tr[data='1']").addClass("on-choose"),$(".table-userGroup tr[data='1'] input[name='userGroup']").attr("checked",!0)):($(".table-userGroup tr[data='0']").addClass("on-choose"),$(".table-userGroup tr[data='0'] input[name='userGroup']").attr("checked",!0),t&&t(n))}}}})},choosePlatform:function(e){if(this.$isUpdate)return;$(".operate-choosePlatform span").html("");var t=$(e.currentTarget),n=t.attr("data")||"",r=t.attr("_platFormData")||"";t.siblings().removeClass("on-choose"),t.addClass("on-choose"),this.$segmentPlatform=n,this.$pushMsg.platform=parseInt(r)},clickStep:function(e){var t=$(e.currentTarget),n=parseInt(t.attr("data")),r=parseInt(t.parent().children(".on-choose").attr("data"));r-n==1&&(n==1?this.goToWhoToSend():n==2&&this.goToWhatToSend())},editPushMsgTitle:function(){$("#_editMsgName").siblings("input").val(""),$("#_editMsgName").siblings("input").focus()},setMsgTip:function(e){$(e.currentTarget).next("span").html("")},checkPushMsgTitle:function(e,t){var n=this;n.$pushMsg.name!=e?e==""?($(".input-active-name").focus(),$(".input-active-name").next("span").html(i18n.Operations.tips.activityNameNot)):RegexUtil.getStringLen(e)>50?($(".input-active-name").focus(),$(".input-active-name").next("span").html(i18n.Operations.commons.CanNot50Characters)):Campaigns.checkMsgName({data:{msgName:e,sourceKey:Params.productID},success:function(r){r?($(".input-active-name").focus(),$(".input-active-name").next("span").html(i18n.Operations.commons.alreadyExists)):(n.$pushMsg.name=e,t&&t(n))}}):(n.$pushMsg.name=e,t&&t(n))},checkSegmentPlatform:function(e){var t=$(e.currentTarget);this.$segmentPlatform=t.attr("data")||"ios",this.$segmentPlatform=="ios"?$(e.currentTarget).siblings("strong").attr("_operatorValue",2):$(e.currentTarget).siblings("strong").attr("_operatorValue",1),this.setSegmentPlatform()},checkUserGroup:function(e){var t=$(e.currentTarget),n=t.attr("data")||0;this.$pushMsg.accurate=n,t.siblings().removeClass(),t.addClass("on-choose"),$("userGroup").removeAttr("checked"),t.find("input[name='userGroup']").attr("checked",!0),n=="1"?this.$templateDatas||this.displayTemplateAndSegmentFilter(!1,null,this.templateListSlider):(this.$templateDatas=null,$(".template-detail").hide(),$("#templateList li").removeClass("on-choose"))},templateListSlider:function(){var e=103,t=$(".aleft div").width(),n=$(".aright div").width(),r=$(".userGroup-list").width(),i=r-t-n;$(".userGroup-list .templateList").css("width",i+"px");var s=parseInt(i/e);$(".userGroup-list").Xslider({unitdisplayed:s,numtoMove:1})},resetXslider:function(e){$(".templateList").find("ul:gt(0)").each(function(){$(".templateList").find("ul:eq(0)").append($(this).find("li")),$(this).remove()}),e.templateListSlider()},displayTemplateAndSegmentFilter:function(_editFlag,_expression,callback){var _this=this;this.$pushMsg.accurate=1,$(".template-detail").show(),Campaigns.fetchSegmentTemplate({data:{productID:Params.productID,segmentType:Constant.SEGMENT_TYPE_USER},success:function(data){if(data){_this.$templateDatas=data,_.each(data,function(e){e.labelName=currentLocale==="zh_cn"?e.name.zh_cn:e.name.en_US,e.system&&e.forcast?e._className="icon-forecast":e.system&&!e.forcast?e._className="icon-default":e.system||(e._className="icon-user-defined"),e.expression=JSON.stringify(e.expression).replace(/\"/g,"'")});var _curExpression=eval("("+_expression+")"),resultData={list:data,Operations:i18n.Operations};$(".template-detail").html(_.template(AccurateGroupTempl,resultData)),$("segmentPlatform").removeAttr("checked"),$(".increase-condition").html(_.template(SegmentConditionsTempl,{Operations:i18n.Operations}));if(_editFlag){_this.templateListSlider();var _templateId=_this.$pushMsg.templateId;$("#templateList li").removeClass("on-choose"),$("#templateList li[_templateId='"+_templateId+"']").addClass("on-choose");var _forecast=$("#templateList li[_templateId='"+_templateId+"']").attr("_forecast");_forecast=="true"?($(".condition-self font").html(_this.forecastTemplArray[_templateId]),$("#conditionList").hide(),$(".increase-condition").hide(),callback&&callback(_this)):_this.parseAndSetTemplateFilter(_curExpression,!1,callback)}else callback&&callback()}}})},setSegmentPlatform:function(){this.$segmentPlatform=="ios"?this.$pushMsg.platform=2:this.$pushMsg.platform=1},parseAndSetTemplateFilter:function(e,t,n){t&&$("#conditionList").empty();var r=this;Async.each(_.pairs(e),function(e,t){r.addSegmentFilterTempl(e[0],e[1],function(e,n){r.setValueForFilterTempl(e,n),t()})},function(e){n&&n(r)})},addSegmentFilterTempl:function(e,t,n){var r=$("#conditionList .condition-list:last"),i=r.length,s=999;i!=0&&(s=$(r.find("ul")[0]).css("z-index")-1);var o=this;e=="partner"||e=="mission"||e=="model"||e=="os"?Campaigns.fetchResultDataByFilterType({data:{productId:Params.productID,platform:o.$pushMsg.platform==-1?"":o.$pushMsg.platform,filterType:e},success:function(r){$("#conditionList").append(_.template(o.conditionTemplArray[e],{list:r,Operations:i18n.Operations})),$("#conditionList div[_conditionName='"+e+"']").find("ul").each(function(){$(this).css("z-index",s)}),n&&n(e,t)}}):($("#conditionList").append(_.template(o.conditionTemplArray[e],{Operations:i18n.Operations})),$("#conditionList div[_conditionName='"+e+"']").find("ul").each(function(){$(this).css("z-index",s)}),n&&n(e,t)),$(".content-conditions ol li[data='"+e+"']").hide(),$(".content-conditions ol li[data='"+e+"']").removeClass(),$(".content-conditions ol li[data='"+e+"']").addClass("_hide")},setValueForFilterTempl:function(_conditionKey,_conditionObj){for(var key in _conditionObj){var $conditionTag=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+key+"']"),_flag=$conditionTag.attr("_operatorOptionality"),_operatorObj=_conditionObj[key],_columnkey=key,_operatorKey=null,_operatorValue=null;for(key in _operatorObj)_operatorKey=key,_columnkey=="currency"?_operatorValue=_operatorObj[_operatorKey]:_operatorValue=eval(_operatorObj[key]);if(_flag=="false"){var $strong=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] strong");if(_conditionKey=="newuser")$("div[_conditionName='newuser']").find("#_startTime").val((_operatorValue[0]/100+"").replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")),$("div[_conditionName='newuser']").find("#_endTime").val((_operatorValue[1]/100+"").replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3"));else if(_conditionKey=="country"){for(var i=0;i<_operatorValue.length;i++){$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue[i]+"']").hide();var _html=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue[i]+"']").html();$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"']").prepend("<div _operatorData='"+_operatorValue[i]+"' class='multiple-name'>"+_html+"<b>i18n.Operations.msg.icon</b></div>")}$strong.attr("_operatorKey",_operatorKey),$strong.attr("_operatorValue",_operatorValue)}else{var _html=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue+"']").html()+"<font>i18n.Operations.msg.icon</font>";$strong.attr("_operatorKey",_operatorKey),$strong.attr("_operatorValue",_operatorValue),$strong.html(_html)}}else if(_flag=="true"){var $strong0=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] strong")[0],_html0=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorKey='"+_operatorKey+"']").html()+"<font>三角i18n.Operations.msg.icon</font>";$($strong0).attr("_operatorKey",_operatorKey),$($strong0).html(_html0);var $strong1=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] strong")[1];if(_conditionKey=="level"||_conditionKey=="chargeTimes"||_conditionKey=="chargeAmount")$($strong1).siblings("._input_operatorValue").val(_operatorValue);else if(_conditionKey=="os"||_conditionKey=="model")for(var i=0;i<_operatorValue.length;i++){$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue[i]+"']").hide();var _html=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue[i]+"']").html();$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"']").children(".select").last().before("<div _operatorData='"+_operatorValue[i]+"' class='multiple-name'>"+_html+"<b>关闭i18n.Operations.msg.icon</b></div>")}else{var _html1=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue+"']").html()+"<font>三角i18n.Operations.msg.icon</font>";$($strong1).html(_html1)}$($strong1).attr("_operatorValue",_operatorValue)}}},addFilter:function(e){var t=this,n=$("#conditionList .condition-list:last"),r=n.length,i=999;r!=0&&(i=$(n.find("ul")[0]).css("z-index")-1);var s=$(e.currentTarget).attr("data");s=="partner"||s=="mission"||s=="model"||s=="os"?Campaigns.fetchResultDataByFilterType({data:{productId:Params.productID,platform:t.$pushMsg.platform==-1?"":t.$pushMsg.platform,filterType:s},success:function(n){if(!(n&&n.length>0)){ModelBox.alert({message:i18n.Operations.commons.information});return}$("#conditionList").append(_.template(t.conditionTemplArray[s],{list:n,Operations:i18n.Operations})),$("#conditionList div[_conditionName='"+s+"']").find("ul").each(function(){$(this).css("z-index",i)}),$(e.currentTarget).hide(),$(e.currentTarget).removeClass(),$(e.currentTarget).addClass("_hide")}}):($("#conditionList").append(_.template(t.conditionTemplArray[s],{Operations:i18n.Operations})),$("#conditionList div[_conditionName='"+s+"']").find("ul").each(function(){$(this).css("z-index",i)}),$(e.currentTarget).hide(),$(e.currentTarget).removeClass(),$(e.currentTarget).addClass("_hide"))},changeCondition:function(e){var t=$(e.currentTarget),n=t.html(),r=t.attr("_liType"),i=t.attr("_operatorKey"),s=t.attr("_operatorValue"),o=t.parent().parent().parent().parent().parent().parent().attr("_conditionname");if(o=="country"||o=="os"||o=="model")if(r=="keyvalue"||r=="value"){var u=t.parent().parent().parent().parent("conditionTag").find(".multiple-name").length;if(parseInt(u)>=5){var a="";o=="country"?a=i18n.Operations.conditions.playerRegion:o=="os"?a=i18n.Operations.conditions.os:o=="model"&&(a=i18n.Operations.conditions.device);var f=t.parent().parent().parent().parent("conditionTag").find("span._myCountClass").length;if(f<=0){var l="<span class='_myCountClass'>等<mycount>"+(u+1)+"</mycount>个"+a+"</span>";t.parent().parent().parent().parent("conditionTag").find(".multiple-name").last().after(l)}else t.parent().parent().parent().parent("conditionTag").find(".multiple-name").last().siblings("span").find("mycount").html(u+1);t.parent().parent().parent().parent("conditionTag").find("span._myCountClass").before("<div _operatorData='"+s+"' class='multiple-name' style='display:none;'>"+n+"<b>关闭i18n.Operations.msg.icon</b></div>")}else t.parent().parent().parent().parent("conditionTag").children(".select").last().before("<div _operatorData='"+s+"' class='multiple-name'>"+n+"<b>关闭i18n.Operations.msg.icon</b></div>");var c=t.parent().siblings("strong").attr("_operatorValue")||"";c==""?c+=s:c=c+","+s,r=="keyvalue"&&t.parent().siblings("strong").attr("_operatorKey",i),t.parent().siblings("strong").attr("_operatorValue",c),t.hide()}else t.parent().siblings("strong").attr("_operatorKey",i),t.parent().siblings("strong").empty().html(n+"<font>i18n.Operations.msg.icon</font>");else r=="keyvalue"?(t.parent().siblings("strong").attr("_operatorKey",i),t.parent().siblings("strong").attr("_operatorValue",s)):r=="key"?t.parent().siblings("strong").attr("_operatorKey",i):r=="value"?t.parent().siblings("strong").attr("_operatorValue",s):t.parent().siblings("strong").attr("data",t.attr("data")||2),t.parent().siblings("strong").empty().html(n+"<font>i18n.Operations.msg.icon</font>")},deleteCondition:function(e){var t=$(e.currentTarget),n=t.parent().attr("_operatordata")||"";t.parent().siblings(".select").last().find("li[_operatorValue='"+n+"']").show();var r=t.parent().siblings(".select").last().find("strong").attr("_operatorValue").split(","),i="";for(var s=0;s<r.length;s++)r[s]!=n&&(i=i+","+r[s]);t.parent().siblings(".select").last().find("strong").attr("_operatorValue",i.toString().substring(1));var o=t.parent().parent(),u=o.find("div.multiple-name").length;u<=6?($(o.find("div.multiple-name")[5]).show(),o.find("span").remove()):($(o.find("div.multiple-name")[5]).show(),o.find("mycount").html(u-1)),t.parent().remove()},deleteFilter:function(e){var t=$(e.currentTarget);t.parent().remove(),$(".content-conditions ol li[data='"+t.attr("data")+"']").show(),$(".content-conditions ol li[data='"+t.attr("data")+"']").removeClass(),$(".content-conditions ol li[data='"+t.attr("data")+"']").addClass("_show")},checkTemplate:function(e){var $target=$(e.currentTarget);$target.siblings().removeClass(),$target.addClass("on-choose");var _forecast=$target.attr("_forecast"),_templateId=$target.attr("_templateId");if(_forecast=="true")$(".condition-self font").html(this.forecastTemplArray[_templateId]),$("#conditionList").hide(),$(".increase-condition").hide();else{$(".condition-self font").html(i18n.Operations.commons.pushConditions),$("#conditionList").show(),$(".increase-condition").show();var _templateExpression=$target.attr("_templateExpression");_templateExpression==""?($(".content-conditions ol li").show(),$(".content-conditions ol li").removeClass(),$(".content-conditions ol li").addClass("_show"),$("#conditionList").empty(),$("._template_name").val("")):($("._template_name").val($target.attr("_segmentName")),this.parseAndSetTemplateFilter(eval("("+_templateExpression+")"),!0))}},getSegmentDeviceTokenNum:function(e){var t=this;Campaigns.segmentDeviceTokenNum({data:{sourceKey:Params.productID,expression:e,platform:t.$pushMsg.platform},success:function(e){$("._segmentDeviceNum").html(e),$("#_segmentDeviceNum").show()}})},saveToWhatToSend:function(){var e=this,t=$("#_operations_name").val()||"";e.checkPushMsgTitle(t,e.gotoCommitSegment)},gotoCommitSegment:function(e){var t=e.$pushMsg.platform||-1;if(t==-1)$(".operate-choosePlatform span").html(i18n.Operations.commons.selectPlatform);else{var n=$(".table-userGroup tr.on-choose").attr("data"),r=$("#templateList li.on-choose").attr("_forecast");e.$segmentConditions={platform:{platformId:{$eq:e.$pushMsg.platform}}},r=="true"&&n=="1"?(e.$pushMsg.templateId=parseInt($("#templateList li.on-choose").attr("_templateid")||-1),Campaigns.commitForecastSegment({data:{productId:Params.productID,templateId:e.$pushMsg.templateId},success:function(t){if(t==-1)ModelBox.alert({message:"i18n.Operations.commons.serverIsBusy"});else{e.$pushMsg.segmentId=t,!e.$isUpdate&&!e.$pushMsg.step&&(e.$pushMsg.step=1,e.$isUpdate=!0);var n=e.$pushMsg.id!=-1;e.commitPushAction(e,n,e.whatToSendPage)}}})):e.checkFilterValue(n,e.commitSegment)}},checkFilterValue:function(e,t){var n=this;if(e=="1"){var r=this.checkValue();r&&this.generateSegmentExpression(n,t)}else this.$prepareSendSegment.segmentConditions=this.$segmentConditions,t&&t(n)},checkValue:function(){var e=$("div[_conditionName='newuser']").length;if(e>0){var t=$("#_startTime").val()||"",n=$("#_endTime").val()||"";if(!t||!n)$("div[_conditionName='newuser']").remove(),$(".content-conditions ol li[data='newuser']").show(),$(".content-conditions ol li[data='newuser']").removeClass(),$(".content-conditions ol li[data='newuser']").addClass("_show");else{var r=[];r.push(parseInt((new Date($("#_startTime").val())).toFormat("YYYY-MM-DD").replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"))*100),r.push(parseInt((new Date($("#_endTime").val())).toFormat("YYYY-MM-DD").replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"))*100),$("div[_conditionName='newuser'] conditiontag[_columnname='timeflag'] strong").attr("_operatorValue",r)}}e=$("div[_conditionName='level']").length;var i="";return $("div[_conditionName='level']").length>0&&(i=$("div[_conditionName='level']").find("._input_operatorValue").val()||"",i==""&&($("div[_conditionName='level']").remove(),$(".content-conditions ol li[data='level']").show(),$(".content-conditions ol li[data='level']").removeClass(),$(".content-conditions ol li[data='level']").addClass("_show"))),$("div[_conditionName='chargeTimes']").length>0&&(i=$("div[_conditionName='chargeTimes']").find("._input_operatorValue").val()||"",i==""&&($("div[_conditionName='chargeTimes']").remove(),$(".content-conditions ol li[data='chargeTimes']").show(),$(".content-conditions ol li[data='chargeTimes']").removeClass(),$(".content-conditions ol li[data='chargeTimes']").addClass("_show"))),$("div[_conditionName='chargeAmount']").length>0&&(i=$("div[_conditionName='chargeAmount']").find("._input_operatorValue").val()||"",i==""&&($("div[_conditionName='chargeAmount']").remove(),$(".content-conditions ol li[data='chargeAmount']").show(),$(".content-conditions ol li[data='chargeAmount']").removeClass(),$(".content-conditions ol li[data='chargeAmount']").addClass("_show"))),$("div[_conditionName='country']").length>0&&(i=$("div[_conditionName='country']").find("strong").attr("_operatorValue")||"",i==""&&($("div[_conditionName='country']").remove(),$(".content-conditions ol li[data='country']").show(),$(".content-conditions ol li[data='country']").removeClass(),$(".content-conditions ol li[data='country']").addClass("_show"))),$("div[_conditionName='os']").length>0&&(i=$($("div[_conditionName='os']").find("strong")[1]).attr("_operatorValue")||"",i==""&&($("div[_conditionName='os']").remove(),$(".content-conditions ol li[data='os']").show(),$(".content-conditions ol li[data='os']").removeClass(),$(".content-conditions ol li[data='os']").addClass("_show"))),$("div[_conditionName='model']").length>0&&(i=$($("div[_conditionName='model']").find("strong")[1]).attr("_operatorValue")||"",i==""&&($("div[_conditionName='model']").remove(),$(".content-conditions ol li[data='model']").show(),$(".content-conditions ol li[data='model']").removeClass(),$(".content-conditions ol li[data='model']").addClass("_show"))),!0},whatToSendPage:function(e){$("#steps li").removeClass(),$("#step1 img").attr("src","images/icon-step-green2.png"),$("#step1 span").removeClass(),$("#step1 span").addClass("right"),$("#step2").addClass("on-choose"),$("#step2 img").attr("src","images/icon-step-green.png");var t={Operations:i18n.Operations,displayFlag:e.$segmentPlatform!="ios",_type:e.$pushMsg.type};$("#whatToSend").html(_.template(WhatToSendTempl,t));var n=e.$pushMsg.step;if(!e.$isUpdate||n!=2&&n!=3)if(e.$segmentPlatform=="ios")$("#contentDetail").prepend(_.template(IosMsgTempl,{Operations:i18n.Operations,obj:e.defaultMsg()})),$(".preview-phone").html(_.template(PhoneIosTempl,{Operations:i18n.Operations,obj:e.defaultMsg()}));else{var i={_border_class:"border-white",_bg_class:"bg-grey",_border:"",_bg:"",_font:"",_bordercolor:"#d3d6dd",_bgcolor:"#ecedf1",_fontcolor:"#333333",_type:e.$pushMsg.type};$("#contentDetail").prepend(_.template(AndroidMsgTempl,{Operations:i18n.Operations,obj:e.defaultMsg(),_classObj:i})),$(".preview-phone").html(_.template(PhoneAndroidTempl,{Operations:i18n.Operations,obj:e.defaultMsg(),_classObj:i}))}else{var r=e.$pushMsg.msg;if(e.$segmentPlatform=="ios")r.length>1?e.setAbtest(r,e.setABtestValue):$("#contentDetail").prepend(_.template(IosMsgTempl,{Operations:i18n.Operations,obj:r[0]})),$(".preview-phone").html(_.template(PhoneIosTempl,{Operations:i18n.Operations,obj:r[0]}));else{var i=e.setABtestColor(r[0]);r.length>1?e.setAbtest(r,e.setABtestValue):$("#contentDetail").prepend(_.template(AndroidMsgTempl,{Operations:i18n.Operations,obj:r[0],_classObj:i})),$(".preview-phone").html(_.template(PhoneAndroidTempl,{Operations:i18n.Operations,obj:r[0],_classObj:i}))}r.length==2?($(".active-title").show(),$("._active_a").show(),$("._active_b").show(),$(".active-title").addClass("column2")):r.length==3&&($(".active-title").show(),$(".operate-add-abTest").hide(),$("._active_a").show(),$("._active_b").show(),$("._active_c").show(),$(".active-title").removeClass("column2"),$(".active-title").addClass("column3"))}$("#whoToSend").hide(),$("#whatToSend").show(),$("#_phone_preview").show(),e.$segmentPlatform=="ios"&&$(".phone-ios").Xslider({unitdisplayed:1,numtoMove:1,loop:"cycle"}),n==2&&e.$isUpdate&&!e.$backstep&&e.dispalyPreparePage(e)},setAbtest:function(e,t){var n=this;_.each(e,function(e){n.addABTest(e,!0)}),t&&t(e)},setABtestValue:function(e){_.each(e,function(e,t){$($("#contentDetail").find(".abtestSliderValue")[t]).html(e.ratio+"%"),$($("#contentDetail").find(".abtestSliderValue")[t]).attr("data",e.ratio),$($("#contentDetail").find("div.abtestSlider div.ui-corner-all")[t]).css("width",e.ratio+"%"),$($("#contentDetail").find("div.abtestSlider a.ui-corner-all")[t]).css("left",e.ratio+"%")})},setABtestColor:function(e){var t=this;if(t.$pushMsg.type==4){var n=t.borderClass[e.config.border.color],r="",i=e.config.border.color;n||(n="",r="border:6px solid "+e.config.border.color);var s=t.bgclass[e.config.background.color],o="",u="",a=e.config.background.color,f=e.title.fontColor;return s||(s="",o="background:"+e.config.background.color,u="color:"+e.title.fontColor),{_border_class:n,_bg_class:s,_border:r,_bg:o,_font:u,_bordercolor:i,_bgcolor:a,_fontcolor:f,_type:4}}return{_border_class:"border-white",_bg_class:"bg-grey",_border:"",_bg:"",_font:"",_bordercolor:"#d3d6dd",_bgcolor:"#ecedf1",_fontcolor:"#333333",_type:1}},defaultMsg:function(){var e={};return e.title={},e.title.val="",e.config={},this.$segmentPlatform=="ios"?e.config.notice="0":(e.content={},e.content.val="",e.config.wakeup="0",e.config.clearable="1",e.config.sound="0",e.config.vibrate="0"),e},commitSegment:function(e){Campaigns.commitSegment({data:{productId:Params.productID,expression:JSON.stringify(e.$segmentConditions)},success:function(t){if(t==-1)ModelBox.alert({message:i18n.Operations.commons.serverIsBusy});else{e.$pushMsg.segmentId=t,e.$isUpdate||(e.$pushMsg.step=1,e.$isUpdate=!0),e.$pushMsg.templateId=parseInt($("#templateList li.on-choose").attr("_templateid")||-1);var n=e.$pushMsg.id!=-1;e.commitPushAction(e,n,e.whatToSendPage)}}})},commitPushAction:function(e,t,n){Campaigns.commitPush({data:{pushMsg:JSON.stringify(e.$pushMsg),sourceKey:Params.productID,updateFlag:t},success:function(t){t==0?ModelBox.alert({message:i18n.Operations.commons.serverIsBusy}):(e.$pushMsg.id=t,n&&n(e))}})},generateSegmentExpression:function(_this,callback){$(".condition-list[_conditionName]").each(function(){var _conditionName=$(this).attr("_conditionName"),_columnName={};$(this).find("conditionTag[_columnName]").each(function(){var _flag=$(this).attr("_operatorOptionality"),_name=$(this).attr("_columnName"),_operator={},_operatorKey=null,_operatorValue=null;if(_flag=="false"){_operatorKey=$(this).find("strong").attr("_operatorKey");if(_conditionName=="newuser"||_conditionName=="country"){_operatorValue=$(this).find("strong").attr("_operatorValue").split(",");for(var i=0;i<_operatorValue.length;i++)_operatorValue[i]=eval(_operatorValue[i])}else _operatorValue=$(this).find("strong").attr("_operatorValue")}else if(_flag=="true"){_operatorKey=$($(this).find("strong")[0]).attr("_operatorKey");if(_conditionName=="os"||_conditionName=="model"||_conditionName=="partner"){_operatorValue=$($(this).find("strong")[1]).attr("_operatorValue").split(",");for(var i=0;i<_operatorValue.length;i++)_operatorValue[i]=eval(_operatorValue[i])}else _operatorValue=$($(this).find("strong")[1]).attr("_operatorValue")}_name=="currency"?_operator[_operatorKey]=_operatorValue:_operator[_operatorKey]=eval(_operatorValue),_columnName[_name]=_operator}),_this.$segmentConditions[_conditionName]=_columnName}),callback&&callback(_this)},goToCampaignList:function(){location.hash="#page/campaigns-list/"+URLUtil.parse2Str(Params)},goToWhoToSend:function(){this.$pushMsg.step==2&&(this.$backstep=!0),$("#steps li").removeClass(),$("#step1 span").removeClass(),$("#step1 span").addClass("wrong"),$("#step2 img").attr("src","images/icon-step-grey.png"),$("#step1 img").attr("src","images/icon-step-green.png"),$("#step1").addClass("on-choose"),$("#whatToSend").hide(),$("#_phone_preview").hide(),$("#whoToSend").show()},goToPrepareToSend:function(){var e=this.checkTitlesContents();e&&this.generateMsgParms(this.prepareToSendPage)},checkTitlesContents:function(){var e=!0,t=this;return $(".ab-text").each(function(n){var r=$(this).find(".input-activeTitle"),i=r.val().trim()||"";r.next("span").html("");if(i=="")return r.focus(),t.$segmentPlatform=="android"?r.next("span").html(i18n.Operations.tips.notBlank):r.next("span").html(i18n.Operations.tips.notBlank),e=!1,!1;if(t.$segmentPlatform=="android"&&RegexUtil.getStringLen(i)>20)return r.focus(),r.next("span").html(i18n.Operations.commons.CanNot20Characters),e=!1,!1;if(RegexUtil.getStringLen(i)>50)return r.focus(),r.next("span").html(i18n.Operations.commons.CanNot50Characters),e=!1,!1}),e&&this.$segmentPlatform=="android"&&$(".ab-text").each(function(t){var n=$(this).find(".textarea-activeDetail"),r=n.val().trim()||"";n.next("span").html("");if(r=="")return n.focus(),n.next("span").html(i18n.Operations.tips.notBlank),e=!1,!1;if(RegexUtil.getStringLen(r)>100)return n.focus(),n.next("span").html(i18n.Operations.commons.CanNot100Characters),e=!1,!1}),e},prepareToSendPage:function(e){e.$isUpdate&&e.$pushMsg.step==1&&(e.$pushMsg.step=2),e.commitPushAction(e,!0,e.dispalyPreparePage)},dispalyPreparePage:function(e){$("#steps li").removeClass(),$("#step2 span").removeClass(),$("#step2 span").addClass("right"),$("#step2 img").attr("src","images/icon-step-green2.png"),$("#step1 img").attr("src","images/icon-step-grey.png"),$("#step3").addClass("on-choose");var t={};t.isFixed=e.$pushMsg.isFixed||!1,t.fixedTime=e.$pushMsg.fixedTime||0,t.duration=e.$pushMsg.duration||2,i18n.sendtime=t,i18n._notice_tip=e.$pushMsg.platform,$("#prepareToSend").html(_.template(PrepareToSendTempl,{Operations:i18n.Operations,sendtime:i18n.sendtime,_notice_tip:i18n._notice_tip})),e.displaySendDetail(e.$prepareSendSegment),$("#whatToSend").hide(),$("#whoToSend").hide(),$("#prepareToSend").show(),$("#_phone_preview").show()},displaySendDetail:function(e){var t=e.pushMsg.msg,n=null;if(this.$pushMsg.accurate==1)this.parseDataForPrepare(e.segmentConditions);else{var r=e.segmentConditions;r.platform.platformId.$eq==2?r.platform.platformId._value="Ios":r.platform.platformId._value="Android",$("._prepare_send_segment").find("ui").html(_.template(PreparePlatformConditionTempl,{data:r,Operations:i18n.Operations}))}var i=[];t.length==2?(i.push(i18n.Operations.msg.activity+"A"),i.push(i18n.Operations.msg.activity+"B")):t.length==3&&(i.push(i18n.Operations.msg.activity+"A"),i.push(i18n.Operations.msg.activity+"B"),i.push(i18n.Operations.msg.activity+"C"));var s={};s.titleArray=i;if(this.$segmentPlatform=="ios"){var o=[];_.each(t,function(e){o.push(e.config.notice)}),s.noticeArray=o,n=""}else{var u=[],a=[],f=[],l=[];_.each(t,function(e){u.push(e.config.sound),a.push(e.config.clearable),f.push(e.config.vibrate),l.push(e.config.wakeup)}),s.soundArray=u,s.clearableArray=a,s.vibrateArray=f,s.wakeupArray=l,n=_.template(AndroidActionsTempl,{data:s,Operations:i18n.Operations})}$("._clickActions").html(n)},parseDataForPrepare:function(segData){$("._prepare_send_segment").find("ui").empty();var _forecastFlag=$("#templateList li.on-choose").attr("_forecast");if(_forecastFlag=="true"){var _platFormData=$(".operate-choosePlatform a.on-choose").attr("_platFormData")||"1",_platFormHtml=parseInt(_platFormData)==1?"Android":"Ios";$("._prepare_send_segment").find("ui").append("<li><span> i18n.Operations.segmentConditions.platform：</span><font>i18n.Operations.prepareToSend.deviceIs"+_platFormHtml+"</font></li>");var _templateId=$("#templateList li.on-choose").attr("_templateId"),_tempHtml="<li><span>  i18n.Operations.conditions.players：</span><font>"+this.forecastTemplArray[_templateId]+"</font></li>";$("._prepare_send_segment").find("ui").append(_tempHtml)}else{var _data=_.clone(segData,!0);for(var key in _data){var _conditionKey=key,_conditionObj=_data[key];if(_conditionKey=="platform")_conditionObj.platformId.$eq==2?_conditionObj.platformId._value="Ios":_conditionObj.platformId._value="Android";else for(var key in _conditionObj){var $conditionTag=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+key+"']"),_flag=$conditionTag.attr("_operatorOptionality"),_operatorObj=_conditionObj[key],_columnkey=key,_operatorKey=null,_operatorValue=null;for(key in _operatorObj)_operatorKey=key,_columnkey=="currency"?_operatorValue=_operatorObj[_operatorKey]:_operatorValue=eval(_operatorObj[key]);if(_flag=="false")if(_conditionKey=="newuser")_operatorObj._value=(_operatorValue[0]/100+"").replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")+"~"+(_operatorValue[1]/100+"").replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3");else if(_conditionKey=="country"){var _operatorObjValue="";for(var i=0;i<_operatorValue.length;i++){var temp="、"+$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue[i]+"']").html();_operatorObjValue+=temp}_operatorObj._value=_operatorObjValue.toString().substring(1)}else _operatorObj._value=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue+"']").html();else if(_flag=="true"){_operatorObj._key=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorKey='"+_operatorKey+"']").html();if(_conditionKey=="level"||_conditionKey=="chargeTimes"||_conditionKey=="chargeAmount")_operatorObj._value=_operatorValue;else if(_conditionKey=="os"||_conditionKey=="model"){var _operatorObjValue="";for(var i=0;i<_operatorValue.length;i++){var temp="、"+$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue[i]+"']").html();_operatorObjValue+=temp}_operatorObj._value=_operatorObjValue.toString().substring(1)}else _operatorObj._value=$("div[_conditionName='"+_conditionKey+"'] conditiontag[_columnname='"+_columnkey+"'] li[_operatorValue='"+_operatorValue+"']").html()}}}var _segDisplayArray={};_segDisplayArray.accountRegister=PrepareAccountRegisterConditionTempl,_segDisplayArray.appVersion=PrepareAppVersionConditionTempl,_segDisplayArray.chargeAmount=PrepareChargeAmountConditionTempl,_segDisplayArray.chargeAmountRank=PrepareChargeAmountRankConditionTempl,_segDisplayArray.chargeTimes=PrepareChargeTimesConditionTempl,_segDisplayArray.country=PrepareCountryConditionTempl,_segDisplayArray.jailbreak=PrepareJailbreakConditionTempl,_segDisplayArray.loginTimes=PrepareLoginTimesConditionTempl,_segDisplayArray.loginUser=PrepareLoginUserConditionTempl,_segDisplayArray.lostUser=PrepareLostUserConditionTempl,_segDisplayArray.level=PrepareLevelConditionTempl,_segDisplayArray.mission=PrepareMissionConditionTempl,_segDisplayArray.model=PrepareModelConditionTempl,_segDisplayArray.newuser=PrepareNewuserConditionTempl,_segDisplayArray.os=PrepareOsConditionTempl,_segDisplayArray.partner=PreparePartnerConditionTempl,_segDisplayArray.platform=PreparePlatformConditionTempl,_segDisplayArray.sex=PrepareSexConditionTempl,_segDisplayArray.useTime=PrepareUseTimeConditionTempl;for(var key in _data)$("._prepare_send_segment").find("ui").append(_.template(_segDisplayArray[key],{data:_data,Operations:i18n.Operations}))}},generateMsgParms:function(e){var t=[],n=this,r=$("#checkNoticeType li[class='on-choose']").attr("data")||"popup";$("#contentDetail .ab-text").each(function(){var e={};e.title={},e.title.val=$(this).find(".input-activeTitle").val().trim()||"",e.title.fontColor=$(this).find("a[data='_fontcolor']").siblings("em").html()||"",e.title.fontSize=16;var i=$(this).find(".abtestSliderValue").attr("data")||100;e.ratio=i,e.config={},n.$segmentPlatform=="android"?(e.content={},e.content.val=$(this).find(".textarea-activeDetail").val().trim()||"",e.content.fontColor=$(this).find("a[data='_fontcolor']").siblings("em").html()||"",e.content.fontSize=14,r=="popup"&&(e.config.border={},e.config.border.width=6,e.config.border.color=$(this).find("a[data='_bdcolor']").siblings("em").html()||"",e.config.background={},e.config.background.color=$(this).find("a[data='_bgcolor']").siblings("em").html()||""),e.config.clearable=$(this).find("._clearable font.on-choose").attr("data"),e.config.wakeup=$(this).find("._wakeup font.on-choose").attr("data"),e.config.sound=$(this).find("._sound font.on-choose").attr("data"),e.config.vibrate=$(this).find("._vibrate font.on-choose").attr("data")):n.$segmentPlatform=="ios"&&(e.config.notice=0),e.config.button=[];var s={};s.btnText=$("._confirmBtn").html()||i18n.Operations.buttons.view,s.btnColor=$("._confirmBtn").attr("data")||"#383d41",s.action=1,e.config.button.push(s),t.push(e)}),this.$pushMsg.platform==2?this.$pushMsg.type=1:r=="popup"?this.$pushMsg.type=4:this.$pushMsg.type=1,n.$pushMsg.msg=t,n.$prepareSendSegment.pushMsg=this.$pushMsg,n.$prepareSendSegment.segmentConditions=n.$segmentConditions,e&&e(n)},goToWhatToSend:function(){$("#steps li").removeClass(),$("#step1 img").attr("src","images/icon-step-green2.png"),$("#step2 span").removeClass(),$("#step2 span").addClass("wrong"),$("#step2").addClass("on-choose"),$("#step2 img").attr("src","images/icon-step-green.png"),$("#whoToSend").hide(),$("#prepareToSend").hide(),$("#whatToSend").show()},checkConfig:function(e){var t=$(e.currentTarget);t.siblings().removeClass(),t.addClass("on-choose");var n=$(e.currentTarget).parent().parent().parent().siblings(".proportion").attr("data")||"A";this.highlightCurActive(n),this.setAndroidColor(n)},addABTest:function(e,t){$(".active-title").show();var n=this,r={_border_class:"border-white",_bg_class:"bg-grey",_border:"",_bg:"",_font:"",_bordercolor:"#d3d6dd",_bgcolor:"#ecedf1",_fontcolor:"#333333",_type:4};t||(e=this.defaultMsg());if(this.$segmentPlatform=="ios")$("#contentDetail").append(_.template(IosMsgTempl,{obj:e,Operations:i18n.Operations}));else{t&&(r=n.setABtestColor(e)),$("#contentDetail").append(_.template(AndroidMsgTempl,{obj:e,_classObj:r,Operations:i18n.Operations}));var i=$("#checkNoticeType li[class='on-choose']").attr("data")||"popup";i!="popup"?($(".topOnly").hide(),$(".topOnlyColor").hide()):i=="popup"&&$(".topOnly").show()}$(".proportion").show();var s=$("#contentDetail").find("div[class='ab-text']").length||1,o=["A","B","C"];$("#contentDetail").find("div[class='ab-text']").each(function(e){$(this).find(".proportion").attr("data",o[e]),$(this).find(".proportion h3 em").html(o[e])}),parseInt(s)==2?($("._active_a").show(),$("._active_b").show(),$(".active-title").addClass("column2")):parseInt(s)==3&&($(".operate-add-abTest").hide(),$("._active_a").show(),$("._active_b").show(),$("._active_c").show(),$(".active-title").removeClass("column2"),$(".active-title").addClass("column3")),this.sliderOperate()},sliderOperate:function(){var e=$("#contentDetail").find("div.abtestSlider").length,t=$(".abtestSlider").length;$(".abtestSlider").slider({range:"min",value:100/e,min:1,max:99,animate:!0,slide:function(e,t){$(this).siblings(".abtestSliderValue").html(t.value+"%"),$(this).siblings(".abtestSliderValue").attr("data",t.value)},change:function(e,n){var r=$(this).slider("value"),i=null;if(t==2){var s=100-r;i=$(this).parent().parent().siblings(".ab-text"),i.find(".abtestSliderValue").html(s+"%"),i.find(".abtestSliderValue").attr("data",s),i.find("div.abtestSlider div.ui-corner-all").css("width",s+"%"),i.find("div.abtestSlider a.ui-corner-all").css("left",s+"%")}else if(t==3){var o=$(this).parent().parent().prev().length;i=$(this).parent().parent().nextAll();if(o==0){r==99&&(r=98,$(this).slider("value",98),$(this).siblings(".abtestSliderValue").html("98%"),$(this).siblings(".abtestSliderValue").attr("data",98));var u=0,a=0;r%2==1?(u=(100-r-1)/2,a=u+1):(u=(100-r)/2,a=u),$(i.find(".abtestSliderValue")[0]).html(a+"%"),$(i.find(".abtestSliderValue")[0]).attr("data",a),$(i.find("div.abtestSlider div.ui-corner-all")[0]).css("width",a+"%"),$(i.find("div.abtestSlider a.ui-corner-all")[0]).css("left",a+"%"),$(i.find(".abtestSliderValue")[1]).html(u+"%"),$(i.find(".abtestSliderValue")[1]).attr("data",u),$(i.find("div.abtestSlider div.ui-corner-all")[1]).css("width",u+"%"),$(i.find("div.abtestSlider a.ui-corner-all")[1]).css("left",u+"%")}else if(o==1){var f=$(this).parent().parent().prev().find(".abtestSliderValue").attr("data"),l=100-f,c=100-f-r;r>l?($(this).slider("value",l-1),$(this).siblings(".abtestSliderValue").html(l-1+"%"),$(this).siblings(".abtestSliderValue").attr("data",l-1),i.find(".abtestSliderValue").html(1),i.find("div.abtestSlider div.ui-corner-all").css("width","1%"),i.find("div.abtestSlider a.ui-corner-all").css("left","1%")):(i.find(".abtestSliderValue").html(c+"%"),i.find(".abtestSliderValue").attr("data",c),i.find("div.abtestSlider div.ui-corner-all").css("width",c+"%"),i.find("div.abtestSlider a.ui-corner-all").css("left",c+"%"))}}}}),$(".abtestSliderValue").html($(".abtestSlider").slider("value")+"%"),$(".abtestSliderValue").attr("data",$(".abtestSlider").slider("value")),t==3?($($("#contentDetail .ab-text").get(0)).find("div.abtestSlider div.ui-corner-all").css("width","34%"),$($("#contentDetail .ab-text").get(0)).find("div.abtestSlider a.ui-corner-all").css("left","34%"),$($("#contentDetail .ab-text").get(0)).find(".abtestSliderValue").html("34%"),$($("#contentDetail .ab-text").get(0)).find(".abtestSliderValue").attr("data","34"),$($("#contentDetail .ab-text").get(2)).find(".abtestSlider").slider("disable"),$($("#contentDetail .ab-text").get(2)).find("div.abtestSlider a.ui-corner-all").attr("href","javascript:void(0);")):$("#contentDetail .ab-text").each(function(){$(this).find(".abtestSlider").slider("enable")})},deleteABTest:function(e){$(e.currentTarget).parent().parent().parent().remove();var t=$("#contentDetail").find("div[class='ab-text']").length||1;parseInt(t)==2?($(".operate-add-abTest").show(),$("._active_c").hide(),$(".active-title").removeClass("column3"),$(".active-title").addClass("column2")):parseInt(t)==1&&($(".active-title").hide(),$(".proportion").hide(),$("._active_a").hide(),$("._active_b").hide(),$(".active-title").removeClass("column2"));var n=["A","B","C"];$("#contentDetail").find("div[class='ab-text']").each(function(e){$(this).find(".proportion").attr("data",n[e]),$(this).find(".proportion h3 em").html(n[e])}),this.sliderOperate()},checkNoticeType:function(e){var t=$(e.currentTarget);t.siblings().removeClass(),t.addClass("on-choose");var n=t.attr("data")||"popup";n!="popup"?(this.$pushMsg.type=1,$(".topOnly").hide(),$(".topOnlyColor").hide(),$("._phone_class_pop").hide(),$("._phone_class_top").show()):n=="popup"&&(this.$pushMsg.type=4,$("._phone_class_pop").show(),$("._phone_class_top").hide(),$(".topOnly").show(),$("#contentDetail .ab-text").each(function(){var e=$(this).find("._activeBorder.on-choose").length;e>0&&$(this).find("#_activeBorder").show();var t=$(this).find("._background.on-choose").length;t>0&&$(this).find("#_background").show()}))},toggleCustomBorderColor:function(e){var t=$(e.currentTarget);t.siblings().removeClass("on-choose"),t.addClass("on-choose"),t.parent().parent().siblings("#"+$(e.currentTarget).attr("data")).toggle();var n=$(e.currentTarget).parent().parent().parent().siblings(".proportion").attr("data")||"A";this.highlightCurActive(n),this.setAndroidColor(n)},setColor:function(e){$(e.currentTarget).colpick({layout:"hex",submit:0,colorScheme:"dark",onChange:function(t,n,r,i,s){var o=$(i).attr("data");$(i).css("background","#"+n);if(!s){$(i).siblings("em").html("#"+n);if(o=="_bdcolor"){var u=$("._phone_class_pop").attr("bddata");$("._phone_class_pop").removeClass(u),$("._phone_class_pop").css("border","6px solid #"+n)}else if(o=="_bgcolor"){var a=$("._phone_class_pop").attr("bgdata");$("._phone_class_pop").removeClass(a),$("._phone_class_pop").css("background","#"+n);var f=$(e.currentTarget).parent().parent().siblings("._border_setting").find("font[data='_none'].on-choose").length;f==1&&($(e.currentTarget).parent().parent().siblings("#_activeBorder").find("em").html("#"+n),$(e.currentTarget).parent().parent().siblings("#_activeBorder").find("a").css("background","#"+n)),$("._confirmBtn").attr("data","#383d41")}else o=="_fontcolor"&&$("._phone_class_pop").css("color","#"+n)}}});var t=$(e.currentTarget).parent().parent().parent().siblings(".proportion").attr("data")||"A";this.highlightCurActive(t),this.setAndroidColor(t)},dynamicSearch:function(e){var t=$(e.currentTarget).val();$(e.currentTarget).parent().next(".content-conditions").find("li._show").each(function(){$(this).text().search(new RegExp(t,"i"))<0?$(this).fadeOut():$(this).show()})},dynamicPhoneTitle:function(e){$("._phoneTitle").html($(e.currentTarget).val());var t=$(e.currentTarget).parent().parent().siblings(".proportion").attr("data")||"A";this.highlightCurActive(t),this.$segmentPlatform=="android"&&this.setAndroidColor(t)},dynamicPhoneContent:function(e){$("._phoneContent").html($(e.currentTarget).val());var t=$(e.currentTarget).parent().parent().siblings(".proportion").attr("data")||"A";this.highlightCurActive(t),this.$segmentPlatform=="android"&&this.setAndroidColor(t)},highlightCurActive:function(e){$(".active-title ul li").removeClass("on-choose"),$(".active-title ul li[data='"+e+"']").addClass("on-choose")},setPhoneBorder:function(e){$("._phone_class_pop").removeAttr("style");var t=$(e.currentTarget);t.parent().parent().siblings("#_activeBorder").hide(),this.setBorderColor(t),t.siblings().removeClass("on-choose"),t.addClass("on-choose");var n=$(e.currentTarget).parent().parent().parent().siblings(".proportion").attr("data")||"A";this.highlightCurActive(n),this.setAndroidColor(n)},setBorderColor:function(e){var t={};t._none="border-none",t._black="border-black",t._white="border-white";var n={};n._none=e.parent().parent().siblings("#_background").find("a[data='_bgcolor']").siblings("em").html(),n._black="#464d57",n._white="#d3d6dd";var r=e.attr("data"),i=$("._phone_class_pop").attr("bddata")||"border-white",s=t[r];$("._phone_class_pop").removeClass(i),$("._phone_class_pop").addClass(s),$("._phone_class_pop").attr("bddata",s),e.parent().parent().next("#_activeBorder").find("em").html(n[r]),e.parent().parent().next("#_activeBorder").find("a").css("background",n[r])},setPhoneBackground:function(e){$("._phone_class_pop").removeAttr("style");var t=$(e.currentTarget);t.parent().parent().siblings("#_background").hide(),this.setBackgroundColor(t),t.siblings().removeClass("on-choose"),t.addClass("on-choose");var n=$(e.currentTarget).parent().parent().parent().siblings(".proportion").attr("data")||"A";this.highlightCurActive(n),this.setAndroidColor(n)},setBackgroundColor:function(e){var t={};t._grey="bg-grey",t._black="bg-black",t._white="bg-white";var n={};n._grey="#ecedf1",n._black="#27272f",n._white="#ffffff";var r={};r._grey="#333333",r._black="#ffffff",r._white="#a1a8b2";var i=e.attr("data"),s=$("._phone_class_pop").attr("bgdata")||"bg-black",o=t[i];if(s!=o){$("._phone_class_pop").removeClass(s),$("._phone_class_pop").addClass(o),$("._phone_class_pop").attr("bgdata",o),e.parent().parent().next("#_background").find("a[data='_bgcolor']").siblings("em").html(n[i]),e.parent().parent().next("#_background").find("a[data='_bgcolor']").css("background",n[i]),e.parent().parent().next("#_background").find("a[data='_fontcolor']").siblings("em").html(r[i]),e.parent().parent().next("#_background").find("a[data='_fontcolor']").css("background",r[i]);var u=e.parent().parent().siblings("._border_setting").find("font[data='_none'].on-choose").length;u==1&&(e.parent().parent().siblings("#_activeBorder").find("em").html(n[i]),e.parent().parent().siblings("#_activeBorder").find("a").css("background",n[i])),i=="_black"?$("._confirmBtn").attr("data","#018dce"):$("._confirmBtn").attr("data","#383d41")}},setSendTime:function(e){var t=$(e.currentTarget);t.siblings().removeClass(),t.addClass("on-choose");var n=t.attr("_sendTag")||"delay";n=="delay"?$("._choose_time").show():n=="immediately"&&$("._choose_time").hide()},showDatePicker:function(){var e=$("#_delaySendTime").val(),t=new Date;e&&parseInt((new Date(e)).toFormat("YYYYMMDD"))>parseInt((new Date).toFormat("YYYYMMDD"))&&(t=!1),$("#_delaySendTime").datetimepicker({format:"Y-m-d H:i",minDate:new Date,minTime:t,lang:currentLocale})},commitPush:function(){var e=this,t=$("._setTime font.on-choose").attr("_sendTag");if(t=="immediately")this.$pushMsg.fixedTime=0;else if(t=="delay"){var n=$("#_delaySendTime").val()||"1970-01-01 08:00";this.$pushMsg.fixedTime=(new Date(n)).getTime()}this.$pushMsg.duration=$("#_send_duration").attr("data")||2,e.$isUpdate&&e.$pushMsg.step==2&&(e.$pushMsg.step=3);var r=e.$pushMsg.platform;Campaigns.fetchMessageChannelStatus({data:{sourceKey:Params.productID,platform:r},success:function(t){if(t)e.commitPushAction(e,e.$isUpdate,e.goToCampaignList);else{var n=IosChannelTipTempl,i="pushBind-list";r==1&&(n=AndroidChannelTipTempl,i="pushBind-addPushBind_list"),ModelBox.confirm({message:_.template(n,i18n),buttons:[{"#uploadNow":function(){location.hash="#page/"+i+"/"+URLUtil.parse2Str(Params),ModelBox.unblock()}}]})}}})},displayMsgContent:function(e){var t=$(e.currentTarget),n=t.attr("data")||"A";t.siblings().removeClass("on-choose"),t.addClass("on-choose");if(this.$segmentPlatform=="ios"){var r=$(".proportion[data='"+n+"']").next("ul").find(".input-activeTitle").val().trim()||"";$(".ios-contentBox").find("._phoneTitle").html(r)}else this.setAndroidColor(n)},setAndroidColor:function(e){var t=$("#contentDetail").find("div.abtestSlider").length;if(t==1){var n=$(".proportion").next("ul").find(".input-activeTitle").val().trim()||"",r=$(".proportion").next("ul").find(".textarea-activeDetail").val().trim()||"";$(".phone-android").find("._phoneTitle").html(n),$(".phone-android").find("._phoneContent").html(r);var i=$(".proportion").next("ul").find("._border_setting ol font.on-choose"),s=i.attr("data");if(s=="_activeBorder"){var o=$(".proportion").next("ul").find("#_activeBorder div em").html();$(".phone-android ._phone_class_pop").css("border","6px solid "+o)}else $(".phone-android ._phone_class_pop").css("border",""),this.setBorderColor(i);i=$(".proportion").next("ul").find("._background_setting ol font.on-choose"),s=i.attr("data");if(s=="_background"){var u=$(".proportion").next("ul").find("#_background ._bgcolor em").html();$(".phone-android ._phone_class_pop").css("background",u);var a=$(".proportion").next("ul").find("#_background ._fontcolor em").html();$(".phone-android ._phone_class_pop").css("color",a)}else $(".phone-android ._phone_class_pop").css("color",""),$(".phone-android ._phone_class_pop").css("background",""),this.setBackgroundColor(i)}else{var n=$(".proportion[data='"+e+"']").next("ul").find(".input-activeTitle").val().trim()||"",r=$(".proportion[data='"+e+"']").next("ul").find(".textarea-activeDetail").val().trim()||"";$(".phone-android").find("._phoneTitle").html(n),$(".phone-android").find("._phoneContent").html(r);var i=$(".proportion[data='"+e+"']").next("ul").find("._border_setting ol font.on-choose"),s=i.attr("data");if(s=="_activeBorder"){var o=$(".proportion[data='"+e+"']").next("ul").find("#_activeBorder div em").html();$(".phone-android ._phone_class_pop").css("border","6px solid "+o)}else $(".phone-android ._phone_class_pop").css("border",""),this.setBorderColor(i);i=$(".proportion[data='"+e+"']").next("ul").find("._background_setting ol font.on-choose"),s=i.attr("data");if(s=="_background"){var u=$(".proportion[data='"+e+"']").next("ul").find("#_background ._bgcolor em").html();$(".phone-android ._phone_class_pop").css("background",u);var a=$(".proportion[data='"+e+"']").next("ul").find("#_background ._fontcolor em").html();$(".phone-android ._phone_class_pop").css("color",a)}else $(".phone-android ._phone_class_pop").css("color",""),$(".phone-android ._phone_class_pop").css("background",""),this.setBackgroundColor(i)}},inputOnlyNumber:function(e){var t=event.keyCode;t>=48&&t<=57?event.returnValue=!0:event.returnValue=!1},inputOperatorValue:function(e){var t=$(e.currentTarget),n=t.parent().parent().parent().attr("_conditionName"),r=t.val()||"";n=="level"||n=="chargeTimes"?parseInt(r)>1e3&&(r=1e3):n=="chargeAmount"&&parseInt(r)>1e5&&(r=1e5),t.val(r),t.siblings("strong").attr("_operatorValue",r)},saveNewTemplate:function(e){this.checkFilterValue("accurate",this.createSegmentTemplate)},createSegmentTemplate:function(e){var t=$("._template_name").val()||"";if(t=="")return ModelBox.alert({message:i18n.Operations.tips.notBlank},function(){$("._template_name").focus()}),!1;if(RegexUtil.getStringLen(t)>10)return ModelBox.alert({message:i18n.Operations.commons.CanNot10Characters},function(){$("._template_name").focus()}),!1;var n=JSON.stringify(e.$segmentConditions);Campaigns.checkSegmentTemplateName({data:{productId:Params.productID,templateName:t},success:function(e){if(e)return ModelBox.alert({message:i18n.Operations.commons.alreadyExists},function(){$("._template_name").focus()}),!1;Campaigns.createSegmentTemplate({data:{expression:n,productId:Params.productID,templateName:t},success:function(e){if(e==0)ModelBox.alert({message:i18n.Operations.commons.alreadyExists});else{var r='<li _templateId="'+e+'" _system="false" _segmentName="'+t+'" _templateExpression="'+n.replace(/\"/g,"'")+'"><span class="icon-user-defined">i18n.Operations.buttons.addIcons</span>'+t+"<em>i18n.Operations.msg.icon</em><strong>i18n.Operations.buttons.deleteIcon</strong></li>";$("#_custom_defined").after(_.template(r,{Operations:i18n.Operations})),$("li[_templateId='"+e+"']").siblings().removeClass("on-choose"),$("li[_templateId='"+e+"']").addClass("on-choose")}}})}})},deleteTemplate:function(e){var t=$(e.currentTarget).parent().attr("_templateId")||0;Campaigns.deleteSegmentTemplate({data:{templateId:t},success:function(e){e?(ModelBox.alert({message:i18n.Operations.commons.deletedSuccessfully}),$("li[_templateId='"+t+"']").remove()):ModelBox.alert({message:i18n.Operations.commons.serverIsBusy})}})},setStartEndDate:function(e){var t=$(e.currentTarget);t.datepicker({minDate:new Date(Params.productRegistTime),maxDate:new Date,dateFormat:"yy-mm-dd"})}});return view}),define("text!templates/operations/campaignList.html",[],function(){return'<!-- 中间内容 开始 -->\r\n<div class="main-box">\r\n    <div class="page-title clearfix"><font style="display:block"><%=Operations.campaignList.activityOverview %></font>\r\n        <div class=\'addBtn\'>\r\n        	<a href="javascript:void(0)"  id="newCampaign"><strong>+</strong><span><%=Operations.campaignList.newActivity %></span></a>\r\n    	</div>\r\n    </div>\r\n    <div class="active-number" id="campaignSummaryDiv">\r\n        <div class="login">\r\n            <img src="images/loading.gif" height="25px"></img>\r\n        </div>\r\n    </div>\r\n    <div class="content-table-list" id="campaignlist">\r\n        <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table-active-list">\r\n          <tr>\r\n            <!-- <th scope="col">预览</th> -->\r\n            <th scope="col" class="to-left"><%=Operations.campaignList.activityTitle %></th>\r\n            <th scope="col" class="to-left"><%=Operations.campaignList.startTime %></th>\r\n            <th scope="col"><%=Operations.campaignList.reachingToUsers %></th>\r\n            <th scope="col"><%=Operations.campaignList.userClick %></th>\r\n            <th scope="col"><%=Operations.campaignList.operate %></th>\r\n            <th scope="col" width="80"><%=Operations.campaignList.status %></th>\r\n          </tr>\r\n          <tr>\r\n            <td colspan=\'6\'>\r\n                <div class="login">\r\n                    <img src="images/loading.gif" height="25px"></img> \r\n                </div>\r\n            </td>\r\n          </tr>\r\n        </table>\r\n    </div>\r\n</div>'}),define("text!templates/operations/campaignListTable.html",[],function(){return'<table id="campaignTable" width="100%" border="0" cellspacing="0" cellpadding="0" class="table-active-list">\r\n  <thead>\r\n  <tr>\r\n    <!-- <th scope="col">预览</th> -->\r\n    <th scope="col" class="to-left"><%=Operations.campaignList.activityTitle %></th>\r\n    <th scope="col" class="to-left"><%=Operations.campaignList.startTime %></th>\r\n    <th scope="col"><%=Operations.campaignList.reachingToUsers %></th>\r\n    <th scope="col"><%=Operations.campaignList.userClick %></th>\r\n    <th scope="col"><%=Operations.campaignList.operate %></th>\r\n    <th scope="col" width="80"><%=Operations.campaignList.status %></th>\r\n  </tr>\r\n</thead>\r\n\r\n <tbody>\r\n  <% \r\n     _.each(rs.result,function(msg,index){\r\n  %>\r\n     <tr id="tr_<%=msg.id%>" style="<%=msg._bgColor ? \'background:\'+msg._bgColor : \'\'%>">\r\n      <!-- <td>缩略图</td> -->\r\n      <td class="to-left">\r\n		  <%=msg.name%>\r\n	  </td>\r\n      <td class="to-left"><%=new Date(msg.startTime).toFormat(\'YYYY-MM-DD HH24:MI\')%></td>\r\n      <%\r\n        if(msg.platform == 1){\r\n      %>\r\n        <td><div class="numbers"><em style="width:<%=msg.data.receive/rs.maxReceive*100%>%"></em><font><%=msg.data.receive%></font></div></td>\r\n      <%\r\n        }else{\r\n      %>\r\n          <td>——</td>\r\n      <%\r\n        }\r\n      %>\r\n      \r\n      <td><div class="numbers"><em style="width:<%=msg.data.click/rs.maxClick*100%>%"></em><font><%=msg.data.click%></font></div></td>\r\n      <td>\r\n        <div class="operate" style="wid" msgId="<%=msg.id%>">\r\n          <% \r\n            if(msg.status == 2 || msg.status == 1){\r\n          %>\r\n            <span class="edit editMsg"><%=Operations.buttons.edit %></span>\r\n            <span class="del delMsg"><%=Operations.buttons.del %></span>\r\n          <%}else if(msg.status == 4){\r\n          %>\r\n            <span class="del delMsg"><%=Operations.buttons.del %></span>\r\n          <%}else if(msg.status == 8){\r\n          %>\r\n<!--             <span class="retry retryMsg" >重发</span> -->\r\n            <span class="retry viewchart" msgPlt=\'<%=msg.platform%>\' msgId=\'<%=msg.id%>\'>%=Operations.buttons.viewReport %></span>\r\n          	<span class="del delMsg">%=Operations.buttons.del %></span>\r\n          <%}%>\r\n          \r\n\r\n        </div>\r\n      </td>\r\n      <td>\r\n<!--         <% -->\r\n<!--           if(msg.status != 2 && msg.status != 8){ -->\r\n<!--         %> -->\r\n<!--           进行中 -->\r\n<!--         <% -->\r\n<!--           }else{ -->\r\n<!--         %> -->\r\n        <font color="<%=msg._fontColor%>">\r\n            <%\r\n                if(msg.status == 1){\r\n            %>\r\n                    <%=Operations.status.draft %>\r\n            <%\r\n                }else if(msg.status ==2){\r\n            %>\r\n                    <%=Operations.status.plan %>\r\n            <%\r\n                }else if(msg.status ==3){\r\n            %>\r\n                    <%=Operations.status.waitingInLine %>\r\n            <%\r\n                }else if(msg.status ==4){\r\n            %>\r\n                    <%=Operations.status.run %>\r\n            <%\r\n                }else if(msg.status ==7){\r\n            %>\r\n                    <%=Operations.status.partiallySuccessful %>\r\n            <%\r\n                }else if(msg.status ==8){\r\n            %>\r\n                    <%=Operations.status.complete %>\r\n            <%\r\n                }else if(msg.status ==9){\r\n            %>\r\n                    <%=Operations.status.failure %>\r\n            <%\r\n                }else if(msg.status ==10){\r\n            %>\r\n                <%=Operations.status.delete %>\r\n            <%\r\n                }\r\n            %>\r\n        </font>\r\n<!--         <% -->\r\n<!--           } -->\r\n<!--         %> -->\r\n      </td>\r\n    </tr>  \r\n  <%   \r\n      });\r\n  %>\r\n </tbody>\r\n</table>'}),define("text!templates/operations/campaignSummary.html",[],function(){return"<ul>\r\n	<%\r\n		_.each(rs,function(summary){\r\n			if(summary.item=='2'){\r\n	%>	\r\n			<li><strong><%=summary.value%>&nbsp;<%=Operations.summary.activities %></strong><span><%=Operations.summary.comingSoon %></span></li>\r\n	<%		\r\n			}		\r\n		});\r\n	%>\r\n\r\n	<%\r\n		_.each(rs,function(summary){\r\n			if(summary.item=='4'){\r\n	%>	\r\n			<li><strong><%=summary.value%>&nbsp;<%=Operations.summary.activities %></strong><span><%=Operations.summary.inProgress %></span></li>\r\n	<%		\r\n			}		\r\n		});\r\n	%>\r\n\r\n\r\n	<%\r\n		_.each(rs,function(summary){\r\n			if(summary.item=='8'){\r\n	%>	\r\n			<li class=\"no-border\"><strong><%=summary.value%>&nbsp;<%=Operations.summary.activities %></strong><span><%=Operations.summary.completed %></span></li>\r\n	<%		\r\n			}		\r\n		});\r\n	%>\r\n\r\n</ul>"}),define("text!templates/operations/welcome.html",[],function(){return'<div class="main-box">\r\n    <div class="content-welcome">\r\n     <h3><%=Operations.welcome.title %></h3>\r\n     <h5><%=Operations.welcome.content %></h5>\r\n     <div class="page-introduce">\r\n         <dl>\r\n             <dt><img src="images/pic-introduce01.png" /></dt> \r\n             <dd><h4><%=Operations.welcome.broadcasting %></h4></dd>\r\n        	 <dd><%=Operations.welcome.broadcastingContent %></dd>\r\n         </dl> \r\n         <dl>\r\n             <dt><img src="images/pic-introduce02.png" /></dt> \r\n             <dd><h4><%=Operations.welcome.promotion %></h4></dd>\r\n        	 <dd><%=Operations.welcome.promotionContent %></dd>\r\n         </dl> \r\n         <dl>\r\n             <dt><img src="images/pic-introduce03.png" /></dt> \r\n             <dd><h4><%=Operations.welcome.offering %></h4></dd>\r\n        	 <dd><%=Operations.welcome.offeringContent %></dd>\r\n         </dl> \r\n         <dl>\r\n             <dt><img src="images/pic-introduce04.png" /></dt> \r\n             <dd><h4><%=Operations.welcome.crossPromotion %></h4></dd>\r\n        	 <dd><%=Operations.welcome.crossPromotionContent %></dd>\r\n         </dl> \r\n     </div>\r\n     <a href="javascript:void(0);" class="start-now"><%=Operations.welcome.startNow %></a>\r\n    </div>\r\n</div>'}),define("views/operations/CampaignListView",["backbone","text!templates/operations/campaignList.html","text!templates/operations/campaignListTable.html","text!templates/operations/campaignSummary.html","text!templates/operations/welcome.html","text!templates/public/loading.html","views/operations/CampaignsView","models/operations/Campaigns","utils/dataTableUtil","utils/ModelBox","utils/urlUtil","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click #newCampaign":"newCampaign","click .delMsg":"deleteMsg","click .editMsg":"editMsg","click .retryMsg":"retryMsg","click .viewchart":"toCampaiginDetail","click .start-now":"newCampaign"},initialize:function(){this.fontColorArray={},this.fontColorArray[1]="#535b68",this.fontColorArray[2]="#24b0d3",this.fontColorArray[4]="#3ca565",this.fontColorArray[8]="#92949d",this.render()},render:function(){var e=this;return $("#container").html(_.template(t,c)),u.fetchCampaignList({data:{sourceKey:Params.productID},success:function(t){t.total==0?$("#container").html(_.template(i,c)):(_.each(t.result,function(t){t._fontColor=e.fontColorArray[t.status]}),t.result[0]._bgColor="#e5fef1",e.campaignList(t),e.campaignSummary())}}),this},newCampaign:function(e){Params.msgId="",location.hash="#page/campaigns-newCampaign_list/"+l.parse2Str(Params)},campaignSummary:function(){u.fetchCampaignSummary({data:{sourceKey:Params.productID},success:function(e){$("#campaignSummaryDiv").html(_.template(r,{Operations:c.Operations,rs:e.result}))}})},campaignList:function(e){$("#campaignlist").html(_.template(n,{Operations:c.Operations,rs:e})),a.dataTable({$el:$("#campaignTable"),aaSorting:[[1,"desc"]]})},toCampaiginDetail:function(e){Params.msgId=$(e.currentTarget).attr("msgId"),Params.msgPlt=$(e.currentTarget).attr("msgPlt"),location.hash="#page/campaigns-campaignDetail_list/"+l.parse2Str(Params)},deleteMsg:function(e){var t=$(e.currentTarget).parent().attr("msgId"),n=this;f.confirm({buttons:[{".Confirm":function(){u.deleteCampaign({data:t,success:function(e){$("#tr_"+t).remove(),f.unblock(),n.render()}})}}]})},editMsg:function(e){var t=$(e.currentTarget).parent().attr("msgId");Params.msgId=t,location.hash="#page/campaigns-newCampaign_list/"+l.parse2Str(Params)},retryMsg:function(e){var t=$(e.currentTarget).parent().attr("msgId");u.retrySendCampaign({data:t,success:function(e){f.alert({message:c.Operations.commons.Retransmitted})}})}});return h}),define("text!templates/operations/campaignDetail.html",[],function(){return'<div class="main-box">\r\n    <!-- <div class="maintop"> -->\r\n            \r\n            <!-- <div class="clear"></div> -->\r\n        <!-- </div> -->\r\n        \r\n    <div class="page-title clearfix">\r\n        <font style="display:block"><%=Operations.campaignDetail.marketingActivities %> &gt;\r\n            <%=Operations.campaignDetail.statisticalReport %>\r\n        </font>\r\n        <div class=\'addBtn\'>\r\n            <a href="javascript:void(0)" class="back" id="backToMsgList"><%=Operations.campaignDetail.comeBack %></a>\r\n        </div>\r\n        <div id="datePicker" class="relative r" style=" z-index:99"></div>\r\n    </div>\r\n\r\n        \r\n    <div class="boxmax" id="pushArriveBox">\r\n        <div id="pushArriveCode">\r\n            <div class="title"   role="title">\r\n                <strong class="l"><%=Operations.campaignDetail.userArrival %></strong>\r\n            </div>\r\n\r\n            <div class="textbox" id="arriveDiv">\r\n                <div class="active-dataContent">\r\n                    <div class="main-datas column3" id="arriveTitleDiv">\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div role="picbox_chart_table">\r\n                    <div id="pushArriveCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n                    <div id="pushArriveCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n                </div>\r\n                <div class="after">\r\n                    <a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n                    <a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="boxmax">\r\n        <div id="pushClickCode">\r\n            <div class="title"   role="title">\r\n                <strong class="l"><%=Operations.campaignDetail.userClicks %></strong>\r\n            </div>\r\n            <div class="textbox" id="clickDiv">\r\n                <div class="active-dataContent">\r\n                    <div class="main-datas column3" id="clickTitleDiv">\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div role="picbox_chart_table">\r\n                    <div id="pushClickCode-chart" class="picbox" role="chart" class="picbox_chart_table_div picbox"></div>\r\n                    <div id="pushClickCode-table" class="picbox" role="table" class="picbox_chart_table_div picbox"></div>\r\n                </div>\r\n                <div class="after">\r\n                    <a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n                    <a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="boxmax">\r\n        <div role="title" class="title">\r\n            <strong class="l"><%=Operations.campaignDetail.sendDetails %></strong>\r\n        </div>\r\n        <div class="textbox active-detail clearfix" id="msgSendDetail">\r\n            <div class="login">\r\n                <img src="images/loading.gif" height="25px"></img> \r\n                <br> <%=GameCommon.loadingData%>\r\n            </div>\r\n        </div>\r\n	</div>\r\n</div>'}),define("text!templates/operations/msgSendDetail.html",[],function(){return'<div class="detail-left">\r\n    <h5><%=Operations.prepareToSend.userSegment %></h5>\r\n        <ul id="segmentInfo">\r\n            \r\n        </ul>\r\n    <h5 style="display:<%=_cur_platform==1 ? \'block\':\'none\'%> ;"><%=Operations.prepareToSend.notificationFeature %></h5>\r\n    <div id="notifyFeatures">\r\n        \r\n    </div>\r\n    <h5><%=Operations.prepareToSend.sendTime %></h5>\r\n    <ul id="sendDateInfo">\r\n        \r\n    </ul>\r\n</div>\r\n<div class="detail-right" id="previewInfo">\r\n  \r\n</div>'}),define("text!templates/operations/sendDateInfo.html",[],function(){return'<li><span style="width: 150px"><%=rs.fixed?Operations.prepareToSend.sendOnShcedule :Operations.prepareToSend.sendImmediately %></span><font><%=new Date(rs.startTime).toFormat(\'YYYY-MM-DD HH24:MI\')%></font></li>\r\n<li><span  style="width: 150px"><%=Operations.prepareToSend.offlineWaiting %></span><font><%=rs.duration%><%=Operations.prepareToSend.hour %></font></li>'}),define("text!templates/operations/notifyFeatures.html",[],function(){return'<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table-response">\r\n  <%\r\n  	if(rs.abTest){\r\n  %>\r\n  		<tr>\r\n		    <th scope="row">&nbsp;</th>\r\n		    <td><%=Operations.msg.scheme %>A</td>\r\n		    <td><%=Operations.msg.scheme %>B</td>\r\n		    <%\r\n		    	if(rs.msg.length>2){\r\n		    %>\r\n		    		<td><%=Operations.msg.scheme %>C</td>\r\n		    <%\r\n		    	}\r\n		    %>\r\n		</tr>\r\n  <%\r\n  	}else{\r\n  %>\r\n  		<tr>\r\n  			<th scope="row" colspan=\'4\'>&nbsp;</th>\r\n  		</tr>\r\n  <%\r\n  	}\r\n  %>\r\n  \r\n\r\n  <%\r\n  	if(rs.platform == 2){\r\n  %>\r\n  	 <tr>\r\n		<th scope="row"><%=Operations.prepareToSend.numerals %></th>\r\n		<%\r\n	    	_.each(nfData.notices,function(val){\r\n	    %>\r\n	    		<td>\r\n	    			<%\r\n	    				if(val==1){\r\n	    			%>\r\n	    				<em class="icon-open"><%=Operations.prepareToSend.open %></em>\r\n	    			<%\r\n						}else{\r\n					%>\r\n						<em class="icon-close"><%=Operations.prepareToSend.close %></em>\r\n					<%\r\n						}\r\n	    			%>\r\n	    			\r\n	    		</td>\r\n	    <%\r\n	    	});\r\n	    %>\r\n	</tr>   \r\n  <%\r\n  	}else if(rs.platform == 1){\r\n  %>\r\n  		 <tr>\r\n		    <th scope="row"><%=Operations.prepareToSend.wakeUpTheScreen %></th>\r\n		    <%\r\n		    	_.each(nfData.wakeups,function(val){\r\n		    %>\r\n		    		<td>\r\n		    			<%\r\n		    				if(val==1){\r\n		    			%>\r\n		    				<em class="icon-open"><%=Operations.prepareToSend.open %></em>\r\n		    			<%\r\n							}else{\r\n						%>\r\n							<em class="icon-close"><%=Operations.prepareToSend.close %></em>\r\n						<%\r\n							}\r\n		    			%>\r\n		    			\r\n		    		</td>\r\n		    <%\r\n		    	});\r\n		    %>\r\n		  </tr>\r\n		  <tr>\r\n		    <th scope="row"><%=Operations.prepareToSend.ringOnNotification %></th>\r\n		    <%\r\n		    	_.each(nfData.sounds,function(val){\r\n		    %>\r\n		    		<td>\r\n		    			<%\r\n		    				if(val==1){\r\n		    			%>\r\n		    				<em class="icon-open"><%=Operations.prepareToSend.open %></em>\r\n		    			<%\r\n							}else{\r\n						%>\r\n							<em class="icon-close"><%=Operations.prepareToSend.close %></em>\r\n						<%\r\n							}\r\n		    			%>\r\n		    			\r\n		    		</td>\r\n		    <%\r\n		    	});\r\n		    %>\r\n		  </tr>\r\n		  <tr>\r\n		    <th scope="row"><%=Operations.prepareToSend.vibrateOnNotification %></th>\r\n		    <%\r\n		    	_.each(nfData.vibrates,function(val){\r\n		    %>\r\n		    		<td>\r\n		    			<%\r\n		    				if(val==1){\r\n		    			%>\r\n		    				<em class="icon-open"><%=Operations.prepareToSend.open %></em>\r\n		    			<%\r\n							}else{\r\n						%>\r\n							<em class="icon-close"><%=Operations.prepareToSend.close %></em>\r\n						<%\r\n							}\r\n		    			%>\r\n		    			\r\n		    		</td>\r\n		    <%\r\n		    	});\r\n		    %>\r\n		  </tr>\r\n		  <tr>\r\n		    <th scope="row"><%=Operations.prepareToSend.deleteMessage %></th>\r\n		    <%\r\n		    	_.each(nfData.clearables,function(val){\r\n		    %>\r\n		    		<td>\r\n		    			<%\r\n		    				if(val==1){\r\n		    			%>\r\n		    				<em class="icon-open"><%=Operations.prepareToSend.open %></em>\r\n		    			<%\r\n							}else{\r\n						%>\r\n							<em class="icon-close"><%=Operations.prepareToSend.close %></em>\r\n						<%\r\n							}\r\n		    			%>\r\n		    			\r\n		    		</td>\r\n		    <%\r\n		    	});\r\n		    %>\r\n		</tr>\r\n  <%\r\n  	}\r\n  %>\r\n \r\n</table>\r\n\r\n\r\n\r\n\r\n'}),define("text!templates/operations/pushArriveDataTitle.html",[],function(){return'<%\r\n    _.each(rs,function(data){\r\n%>\r\n    <div class="col">\r\n        <div class="data-content">\r\n            <span class="data-title">\r\n                <%\r\n                    if(rs.length>1){\r\n                        Operations.msg.scheme\r\n                    }\r\n                %>\r\n                <%=data.name%>\r\n            </span>\r\n            <%if(rs.length>1){%>\r\n                <span class="data-title"><%=Operations.msg.sendProportion %><%=data.ratio%>%</span>\r\n            <%}%>\r\n            <div class="datas">\r\n                <div class="numbers">\r\n                    <span class="bold">\r\n                        <%= (_.sum(_.pluck(data.data,\'value\'))+\'\').replace(/(?=(?:(\\d\\d\\d)+$))/g,\',\').replace(/^,/,\'\') %>\r\n                    </span>\r\n                    <span class="data-name"><%=Operations.msg.total %></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<%\r\n    });\r\n%>\r\n'}),define("text!templates/operations/pushClickDataTitle.html",[],function(){return'<%\r\n    _.each(rs,function(data){\r\n%>\r\n    <div class="col">\r\n        <div class="data-content">\r\n            <span class="data-title">\r\n                <%\r\n                    if(rs.length>1){\r\n                        Operations.msg.scheme\r\n                    }\r\n                %>\r\n                <%=data.name%>\r\n            </span>\r\n            <%if(rs.length>1){%>\r\n                <span class="data-title"><%=Operations.msg.sendProportion %><%=data.ratio%>%</span>\r\n            <%}%>\r\n            \r\n            <div class="datas">\r\n                <div class="numbers">\r\n                    <span class="bold">\r\n                         <%= (_.sum(_.pluck(data.data,\'value\'))+\'\').replace(/(?=(?:(\\d\\d\\d)+$))/g,\',\').replace(/^,/,\'\') %>\r\n                    </span>\r\n                    <span class="data-name"><%=Operations.msg.total %></span>\r\n                </div>\r\n                <%\r\n                    if(msgPlatform==1){\r\n                %>\r\n                        <div class="numbers">\r\n                            <span class="decline clickConversion">--</span>\r\n                            <span class="data-name"><%=Operations.buttons.clickConversionRate %></span>\r\n                        </div>\r\n                <%\r\n                    }\r\n                %>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<%\r\n    });\r\n%>'}),define("text!templates/operations/sendDetail/platform.html",[],function(){return'<li>\r\n    <span><%=Operations.segmentConditions.platform %>：</span>\r\n    <font><%=Operations.prepareToSend.deviceIs %> <%=data.platformId.$eq==1?"Android":"IOS"%></font>\r\n</li>'}),define("text!templates/operations/sendDetail/level.html",[],function(){return"<li>\r\n    <span><%=Operations.segmentConditions.ratingsRange %>：</span>\r\n    <font><%=Operations.conditions.LevelIs %> <%var op = fn.Option(data.level);%><%=op.val%><%=data.level[op.key]%> <%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/lostUser.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.churnStatus %>：</span>\r\n    <font><%=Operations.conditions.noLoginInPassed %>\r\n        <%=data.timeflag.$recentDays%>\r\n        <%=Operations.conditions.notLoggedGamers %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/loginUser.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.activeStatus %>：</span>\r\n    <font><%=Operations.conditions.duringLast %>\r\n        <%=data.timeflag.$recentDays%>\r\n        <%=Operations.conditions.daysPlay %>\r\n        <%=data.loginDays.$eq%>\r\n        <%=Operations.conditions.days %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/loginTimes.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.playerFrequency %>：</span>\r\n    <font><%=Operations.conditions.duringLast %>\r\n        <%=data.timeflag.$recentDays%>\r\n        <%=Operations.conditions.gamePlayTime %>\r\n        <%var op = fn.Option(data.times);%><%=op.val%><%=data.times[op.key]%>\r\n        <%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/sex.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.gender %>：</span>\r\n    <font><%=Operations.conditions.genderIs %>\r\n        <%=data.sex.$eq==1?Operations.conditions.male:Operations.conditions.female%>\r\n        <%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/useTime.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.playerDuration %>：</span>\r\n    <font><%=Operations.conditions.duringLast %> <%=data.timeflag.$recentDays%>\r\n        <%=Operations.conditions.gamePlayTime %> <%var op = fn.Option(data.durationPerDay);%><%=op.val%><%=data.durationPerDay[op.key]%>\r\n        <%=Operations.conditions.minutes %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/accountRegister.html",[],function(){return"<li>\r\n    <span><%=Operations.segmentConditions.accountRegistration %>：</span>\r\n    <font> <%=data.register?Operations.conditions.had:Operations.conditions.hadNo%> <%=Operations.segmentConditions.registratedAnAccount %></font>\r\n</li>"}),define("text!templates/operations/sendDetail/chargeTimes.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.rechargeTimes %>：</span>\r\n    <font><%=Operations.conditions.during %> <%=fn.WholeTime(data.timeflag)%>\r\n        <%=Operations.conditions.thePayAmountOfPlayerIs %>\r\n        <%var op = fn.Option(data.times);%>\r\n        <%=op.val%><%=data.times[op.key]%>\r\n\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/chargeAmountRank.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.paymentRanking %>：</span>\r\n    <font> <%=fn.WholeTime(data.timeflag)%> <%=Operations.conditions.revenueOfThePlayersIsOnThe %> <%var op = fn.Option(data.topPercent);%><%=op.val%><%=data.topPercent[op.key]%> <%=Operations.conditions.players %></font>\r\n</li>"}),define("text!templates/operations/sendDetail/chargeAmount.html",[],function(){return"<li>\r\n	<span><%=Operations.conditions.paymentAmount %>：</span>\r\n	<font><%=Operations.conditions.during %>\r\n			<%=fn.WholeTime(data.timeflag)%> <%=Operations.conditions.thePayAmountOfPlayerIs %><%var op = fn.Option(data.amount);%>\r\n	<%=op.val%>\r\n<%\r\n	if(data.currency.$eq == 'CNY'){\r\n%>\r\n		￥\r\n<%\r\n	}else if(data.currency.$eq == 'USD'){\r\n%>\r\n		$\r\n<%\r\n	}\r\n%>\r\n <%=data.amount[op.key]%></font></li>"}),define("text!templates/operations/sendDetail/newuser.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.acquisitionTime %>：</span>\r\n    <font><%=Operations.conditions.acquiredFrom %><%=fn.Time(data.timeflag.$between[0])%>~<%=fn.Time(data.timeflag.$between[1])%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/model.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.device %>：</span>\r\n    <font><%=Operations.conditions.usingDevice %> <%=dbData%></font>\r\n</li>"}),define("text!templates/operations/sendDetail/mission.html",[],function(){return"<li>\r\n    <span><%=Operations.conditions.stageAndMission %>：</span>\r\n    <font> <%=fn.Mission(data.status.$eq)%>\r\n        <%=Operations.conditions.stageAndMission %> <%=dbData%>\r\n        <%=Operations.conditions.players %>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/country.html",[],function(){return"<li>\r\n    <span><%=Operations.segmentConditions.country %>：</span>\r\n    <font>\r\n        <%=Operations.conditions.thePlayersRegionIs %> <%=dbData%>\r\n    </font>\r\n</li>"}),define("text!templates/operations/sendDetail/os.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.os %>：</span>\r\n    <font><%=Operations.conditions.deviceOS %> <%var op = fn.Option(data.osId);%> <%=op.val%><%=dbData%></font>\r\n</li>"}),define("text!templates/operations/sendDetail/partner.html",[],function(){return"<li>\r\n    <span> <%=Operations.conditions.channels %>：</span>\r\n    <font><%=Operations.conditions.theNewPlayerAcquired %> <%var op = fn.Option(data.partnerId);%> <%=op.val%> <%=dbData%></font>\r\n</li>"}),define("text!templates/operations/sendDetail/previewIos.html",[],function(){return'<div class="active-title column<%=pushObj.abtestLength%>" style="display:<%=pushObj.abtestLength>=2 ? \'block\' : \'none\'%> ;">\r\n	<ul class="iosAbTestTags">\r\n		<li data="0" class="on-choose" style="display:<%=pushObj.abtestLength>=2 ? \'block\' : \'none\'%> ;"><a href="javascript:void(0)"><%=Operations.conditions.scheme %>A</a></li>\r\n		<li data="1" style="display:<%=pushObj.abtestLength>=2 ? \'block\' : \'none\'%> ;"><a href="javascript:void(0)"><%=Operations.conditions.scheme %>B</a></li>\r\n		<li data="2" style="display:<%=pushObj.abtestLength>2 ? \'block\' : \'none\'%> ;"><a href="javascript:void(0)"><%=Operations.conditions.scheme %>C</a></li>\r\n	</ul>\r\n</div>\r\n<div class="ios-phone showPhone">\r\n	<div class="ios-contentBox-little showContent">\r\n		<ul>\r\n			<li>\r\n				<div class="message-box">\r\n					<span><%=Operations.msg.image %></span>\r\n					<h5 class="_phoneTitle"><%=pushObj.title.val%></h5>\r\n				</div>\r\n			</li>\r\n			<li>\r\n				<div class="ios-lockScreen">\r\n					<div class="message-lockScreen">\r\n						<span><%=Operations.msg.image %></span>\r\n						<div class="contents-message">\r\n							<h5 class="_phoneTitle"><%=pushObj.title.val%></h4>\r\n						</div>\r\n					</div>\r\n					<div class="unlock">\r\n						<font><%=Operations.msg.icon %></font><span><%=Operations.msg.slideToUnlock %></span>\r\n					</div>\r\n				</div>\r\n			</li>\r\n			<li>\r\n				<div class="start-game-little">\r\n					<h4><%=Operations.msg.gameName %></h4>\r\n					<h5 class="_phoneTitle"><%=pushObj.title.val%></h5>\r\n					<span>Cancel</span><strong>OK</strong>\r\n				</div>\r\n			</li>\r\n		</ul>\r\n	</div>\r\n	<a class="prev abtn aleft" href="#left">Previous</a> \r\n	<a class="next abtn aright" href="#right">Next</a>\r\n</div>\r\n\r\n'}),define("text!templates/operations/sendDetail/previewAndroid.html",[],function(){return'<%\r\n	if(rs.abTest){\r\n%>\r\n		<div class="active-title column<%=rs.msg.length%>">\r\n			<ul class="androidAbTestTags">\r\n				<li data="0" class="on-choose"><a href="javascript:void(0)"><%=Operations.conditions.scheme %>A</a></li>\r\n	    		<li data="1" ><a href="javascript:void(0)"><%=Operations.conditions.scheme %>B</a></li>\r\n			    <%\r\n			    	if(rs.msg.length>2){\r\n			    %>\r\n			    		<li data="2" ><a href="javascript:void(0)"><%=Operations.conditions.scheme %>C</a></li>\r\n			    <%\r\n			    	}\r\n			    %>\r\n			</ul>\r\n		</div> \r\n<%\r\n	}\r\n%>\r\n		<div class="android-phone showPhone">\r\n			<%\r\n				for(var i=0;i<rs.msg.length;i++){\r\n					var msg = rs.msg[i];\r\n					if(rs.type == 4){\r\n			%>\r\n					<div id="showPhone_<%=i%>" style="background:<%=msg.config.background.color%>;display:<%=i==0?\'block\':\'none\'%>;border-color:<%=msg.config.border.color%>;" \r\n						class="popup-box border-white bg-black showContent">\r\n						<div class="close-box">\r\n							<img src="images/icon-close.png" />\r\n						</div>\r\n						<h3 style="color:<%=msg.title.fontColor%>;font-size:<%=msg.title.fontSize%>"><%=msg.title.val%></h3>\r\n						<h5 style="color:<%=msg.content.fontColor%>;font-size:<%=msg.content.fontSize%>"><%=msg.content.val%></h5>\r\n						<span><%=Operations.buttons.view %></span>\r\n					</div>\r\n			<%\r\n					}else if(rs.type == 1){\r\n			%>\r\n					<div id="showPhone_<%=i%>" class="message-box showContent" style="display:<%=i==0?\'block\':\'none\'%>;">\r\n	                    <span><%=Operations.msg.image %></span>\r\n	                    <div class="contents-message">\r\n	                        <h3><%=msg.title.val%></h3>\r\n							<h5><%=msg.content.val%></h5>\r\n	                    </div>\r\n	                </div>	\r\n			<%		\r\n					}\r\n				}\r\n			%>\r\n		</div>\r\n'}),define("views/operations/CampaignDetailView",["backbone","views/public/DatePicker","text!templates/operations/campaignDetail.html","text!templates/operations/msgSendDetail.html","text!templates/operations/sendDateInfo.html","text!templates/operations/notifyFeatures.html","text!templates/operations/pushArriveDataTitle.html","text!templates/operations/pushClickDataTitle.html","text!templates/operations/sendDetail/platform.html","text!templates/operations/sendDetail/level.html","text!templates/operations/sendDetail/lostUser.html","text!templates/operations/sendDetail/loginUser.html","text!templates/operations/sendDetail/loginTimes.html","text!templates/operations/sendDetail/sex.html","text!templates/operations/sendDetail/useTime.html","text!templates/operations/sendDetail/accountRegister.html","text!templates/operations/sendDetail/chargeTimes.html","text!templates/operations/sendDetail/chargeAmountRank.html","text!templates/operations/sendDetail/chargeAmount.html","text!templates/operations/sendDetail/newuser.html","text!templates/operations/sendDetail/model.html","text!templates/operations/sendDetail/mission.html","text!templates/operations/sendDetail/country.html","text!templates/operations/sendDetail/os.html","text!templates/operations/sendDetail/partner.html","text!templates/operations/sendDetail/previewIos.html","text!templates/operations/sendDetail/previewAndroid.html","models/operations/Campaigns","utils/HighchartUtil","utils/dataTableUtil","utils/RegexUtil","utils/urlUtil","views/public/DatePicker","i18n!nls/gameI18N","utils/Xslider","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,t,D){var P=e.View.extend({el:"#container",events:{"click #backToMsgList":"backToMsgList","click .androidAbTestTags li":"switchAndroidPreview","click .iosAbTestTags li":"switchIosPreview"},initialize:function(){this.forecastTemplArray={},this.forecastTemplArray[6]=D.Operations.tips.content5,this.forecastTemplArray[7]=D.Operations.tips.content6,this.forecastTemplArray[8]=D.Operations.tips.content7,this.forecastTemplArray[9]=D.Operations.tips.content8,this.forecastTemplArray[10]=D.Operations.tips.content9,this.$pushMsg={},this.render()},render:function(){return $("#container").html(_.template(n,D)),new t({el:"#datePicker"}),Params.msgPlt==1?this.loadArriveData():$("#pushArriveBox").remove(),this.loadClickData(),this.loadSendDetail(),this},loadArriveData:function(){var e=Params.msgId,t=Params.startTime,n=Params.endTime,r=$("#pushArriveCode").tabs(function(){k.arriveData({data:{msgId:e,startTime:t,endTime:n},success:function(e){if(e.data.length==0)return $("#arriveDiv").html("no data..."),!1;$("#arriveTitleDiv").html(_.template(o,{Operations:D.Operations,rs:e.data}));var t=_.pluck(e.data[0].data,"item"),n=[],i=[t],s=[D.Operations.commons.date],u="";if(e.data.length==1){var a=_.pluck(e.data[0].data,"value");n=[{name:D.Operations.commons.numberArrival,data:a}],s.push(D.Operations.commons.numberArrival),u=_.zip(t,a)}else _.each(e.data,function(e){var t={};t.name=e.name;var r=_.pluck(e.data,"value");t.data=r,n.push(t),i.push(r),s.push(e.name)}),u=_.zip.apply(null,i);A.drawTable({head:s,body:u,$el:$("#pushArriveCode-table")}),L.chart({id:"pushArriveCode-chart",x:t,series:n,unitItem:[""],legend:!0}),r.head=s,r.body=u}})})},loadClickData:function(){var e=Params.msgId,t=Params.startTime,n=Params.endTime,r=this,i=$("#pushClickCode").tabs(function(){k.clickData({data:{msgId:e,startTime:t,endTime:n},success:function(s){if(s.data.length==0)return $("#clickDiv").html("no data..."),!1;$("#clickTitleDiv").html(_.template(u,{Operations:D.Operations,msgPlatform:Params.msgPlt,rs:s.data})),r.clickConversion(e,t,n);var o=_.pluck(s.data[0].data,"item"),a=[],f=[o],l=[D.Operations.commons.date],c="";if(s.data.length==1){var h=_.pluck(s.data[0].data,"value");a=[{name:D.Operations.commons.messageClick,data:h}],l.push(D.Operations.commons.messageClick),c=_.zip(o,h)}else _.each(s.data,function(e){var t={};t.name=e.name;var n=_.pluck(e.data,"value");t.data=n,a.push(t),f.push(n),l.push(e.name)}),c=_.zip.apply(null,f);A.drawTable({head:l,body:c,$el:$("#pushClickCode-table")}),L.chart({id:"pushClickCode-chart",x:o,series:a,unitItem:[""],legend:!0}),i.head=l,i.body=c}})})},clickConversion:function(e,t,n){k.fetchClickConversion({data:{msgId:e,startTime:t,endTime:n,granularity:"day",numeratorGoal:"click",denominatorGoal:"receive"},success:function(e){$(".clickConversion").each(function(t){$(this).html(e[t].value+"%")})}})},backToMsgList:function(){Params.msgPlt="",Params.msgId="",location.hash="#page/campaigns-list/"+M.parse2Str(Params)},loadSendDetail:function(){var e=this;k.fetchSendDetail({data:{msgId:Params.msgId},success:function(t){var n=t.segment,i=t.msg;e.$pushMsg=t.msg,$("#msgSendDetail").html(_.template(r,{_cur_platform:i.platform,Operations:D.Operations}));if(i.accurate==1&&i.templateId>=6&&i.templateId<=10){var s=parseInt(i.platform)==1?"Android":"Ios";$("#segmentInfo").append("<li><span>"+D.Operations.segmentConditions.platform+"：</span><font>"+s+"</font></li>");var o="<li><span>"+D.Operations.conditions.players+"：</span><font>"+e.forecastTemplArray[i.templateId]+"</font></li>";$("#segmentInfo").append(o)}else e.showSegmentInfo(n);e.showSendDateInfo(i),i.platform==2?e.showMsgPreviewInfo(i,e.xSliderAction):(e.showNotifyFeaturesInfo(i),e.showMsgPreviewInfo(i))}})},showMsgPreviewInfo:function(e,t){if(e.platform==2){var n=e.msg[0];n.abtestLength=e.msg.length,$("#previewInfo").html(_.template(N,{Operations:D.Operations,pushObj:n}))}else e.platform==1&&$("#previewInfo").html(_.template(C,{Operations:D.Operations,rs:e}));t&&t()},switchIosPreview:function(e){var t=$(e.currentTarget);t.siblings().removeClass("on-choose"),t.addClass("on-choose");var n=parseInt(t.attr("data"));$("._phoneTitle").html(this.$pushMsg.msg[n].title.val)},xSliderAction:function(){$(".ios-phone").Xslider({unitdisplayed:1,numtoMove:1,loop:"cycle"})},showNotifyFeaturesInfo:function(e){var t={};if(e.platform==1){var n=[],r=[],i=[],o=[];_.each(e.msg,function(e){n.push(e.config.vibrate),r.push(e.config.sound),i.push(e.config.clearable),o.push(e.config.wakeup)}),t.vibrates=n,t.sounds=r,t.clearables=i,t.wakeups=o}else if(e.platform==2){var u=[];_.each(e.msg,function(e){u.push(e.config.notice)}),t.notices=u}$("#notifyFeatures").html(_.template(s,{nfData:t,Operations:D.Operations,rs:e}))},switchAndroidPreview:function(e){$(".androidAbTestTags li").each(function(){$(this).removeClass()}),$(e.currentTarget).addClass("on-choose");var t=$(e.currentTarget).attr("data");$(".showPhone div.showContent").each(function(){$(this).hide()}),$("#showPhone_"+t).show()},showSendDateInfo:function(e){$("#sendDateInfo").html(_.template(i,{Operations:D.Operations,rs:{startTime:e.startTime,duration:e.duration,fixed:e.fixed}}))},showSegmentInfo:function(e){var t=this,n={platform:a,level:f,lostUser:l,loginUser:c,loginTimes:h,sex:p,useTime:d,accountRegister:v,chargeTimes:m,chargeAmountRank:g,chargeAmount:y,newuser:b,model:w,mission:E,country:S,os:x,partner:T};for(var r in e){var i=e[r];if(r=="model"||r=="mission"||r=="country"||r=="os"||r=="partner"){var s=r+"Id",o="";for(var u in i[s])o=i[s][u].toString();k.segmentFilterIdsForNames({data:{ids:o,productId:Params.productID,type:r},success:function(r){var i="";for(var s=0;s<r.length;s++)i+=r[s].item,s!=r.length-1&&(i+=",");$("#segmentInfo").append(_.template(n[this.data.type],{Operations:D.Operations,data:e[this.data.type],dbData:i,fn:{Option:t.parseOption,Time:t.parseTime,WholeTime:t.parseWholeTime,Mission:t.parseMission}}))}})}else $("#segmentInfo").append(_.template(n[r],{Operations:D.Operations,data:i,dbData:"",fn:{Option:t.parseOption,Time:t.parseTime,WholeTime:t.parseWholeTime,Mission:t.parseMission}}))}},parseOption:function(e){for(var t in e){var n="";return t=="$gt"?n="大于":t=="$eq"?n="等于":t=="$lt"?n="小于":t=="$ge"?n="大于等于":t=="$le"?n="小于等于":t=="$not"||t=="$notIn"?n="不是":t=="$in"&&(n="是"),{key:t,val:n}}},parseTime:function(e){return(e/100+"").replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")},parseWholeTime:function(e){return e.$wholeTime!=undefined?D.Operations.conditions.theWholeLifetime:D.Operations.conditions.last+""+e.$recentDays+""+D.Operations.conditions.days},parseMission:function(e){var t="";return e==0?t=D.Operations.conditions.notConduct:e==1?t=D.Operations.conditions.conducted:e==2?t=D.Operations.conditions.successfully:e==3&&(t=D.Operations.conditions.notBy),t}});return P}),define("text!templates/operations/pushlist.html",[],function(){return'<div id="main" style="margin-top:20px"></div>\r\n'}),define("text!templates/operations/addPushBind.html",[],function(){return'<div class="main-box">\r\n    <div class="boxmax">\r\n        <div role="title" class="title">\r\n            <strong class="l"><%=Operations.addPushBind.bindingService %></strong>\r\n            <b><%=Operations.addPushBind.content %></b>\r\n        </div>\r\n        <div class="textbox clearfix binding-service">\r\n        	<div class="content-binding">\r\n	            <div class="choose-service">\r\n	                <h4><%=Operations.addPushBind.chooseService %></h4>\r\n	                <ol>\r\n	                    <li id="nick"  class="on-choose"><%=Operations.addPushBind.mPush %></li>\r\n	                    <li id="getui"><%=Operations.addPushBind.getuiPush %></li>\r\n	                </ol>\r\n	            </div>\r\n	            <ul id="nickKey">\r\n	                <li><font>AppID</font><span><input name="appID" type="text" class="input-service" /></span></li>\r\n	                <li><font>AppKEY</font><span><input name="appKey" type="text" class="input-service" /></span></li>\r\n	            </ul>\r\n	            <ul id="getuiKey" style=\'display:none\'>\r\n	                <li><font>AppID</font><span><input name="appID" type="text" class="input-service" /></span></li>\r\n	                <li><font>AppKEY</font><span><input name="appKey" type="text" class="input-service" /></span></li>\r\n	                <li><font>MasterSecret</font><span><input name="masterSecret" type="text" class="input-service" /></span></li>\r\n	            </ul>\r\n	            \r\n	            <div class="operate-binding">\r\n					<a href="javascript:void(0);" class="confirm" id="bindPushKeyBtn"><%=Operations.addPushBind.confirmAndBind %></a>\r\n					<a href="javascript:void(0);" id="cancelPushBind" class="cancel"><%=Operations.buttons.cancel %></a></div>\r\n        	</div>\r\n	        \r\n	        <div class="quick-link">\r\n	        	<h4><%=Operations.addPushBind.pushDescription %>：</h4>\r\n	        	<h5>1.<%=Operations.addPushBind.first %></h5>\r\n	        	<h5>2.<%=Operations.addPushBind.second %></h5>\r\n	        	<h5>3.<%=Operations.addPushBind.third %></h5>\r\n	        	<h5></h5>\r\n	        	<h4 id="_pushServiceTip">\r\n					<%\r\n						if(showPushTab=="nick" ){\r\n							Operations.addPushBind.mPushNow\r\n						}else{\r\n							Operations.addPushBind.getuiPushNow\r\n						}\r\n					%>\r\n	        		<!--立即访问<%= showPushTab=="nick" ? "魔推" : "个推"%>-->\r\n	        	</h4>\r\n	        	<h5>\r\n	        		<a href="http://www.mpush.cn/" id="_nick" target="_blank" style="display:<%=showPushTab==\'nick\' ? \'block\' : \'none\'%> ;">http://www.mpush.cn/</a>\r\n	        		<a href="http://www.igetui.com/" id="_getui" target="_blank" style="display:<%=showPushTab==\'nick\' ? \'none\' : \'block\'%> ;">http://www.igetui.com/</a>\r\n	        	</h5>\r\n	        </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>'}),define("text!templates/operations/pushBindTable.html",[],function(){return'<table id=\'pushBindTable\' width="100%" border="0" cellspacing="0" cellpadding="0" class="table-service-list">\r\n  <thead>\r\n  <tr>\r\n    <th scope="col" class="to-left"><%=Operations.pushBind.serviceStatus %></th>\r\n    <th scope="col"><%=Operations.pushBind.serviceType %></th>\r\n    <th scope="col"><%=Operations.pushBind.platformSupport %></th>\r\n    <th scope="col"><%=Operations.pushBind.bindingTime %></th>\r\n    <th scope="col"><%=Operations.pushBind.notificationSubtotal %></th>\r\n    <!-- <th scope="col">累计消息</th> -->\r\n    <th scope="col"><%=Operations.pushBind.operate %></th>\r\n  </tr>\r\n  </thead>\r\n\r\n\r\n<tbody>\r\n\r\n<%\r\n  _.each(rs,function(data){\r\n      if(data.channelKey != \'tdios\'){\r\n%>\r\n        <tr id="tr_<%=data.id%>">\r\n          <td class="to-left color-execute"><%=Operations.pushBind.usage %></td>\r\n          <td>\r\n            <%\r\n              if(data.channelId ==1){\r\n            %>\r\n                <%=Operations.addPushBind.mPush %>\r\n            <%\r\n              }else if(data.channelId ==2){\r\n            %>\r\n                <%=Operations.addPushBind.getuiPush %>\r\n            <%\r\n              }else if(data.channelId ==3){\r\n            %>\r\n                <%=Operations.addPushBind.tdPush %>\r\n            <%\r\n              }\r\n            %>\r\n\r\n          </td>\r\n          <td>Android</td>\r\n          <td><%=new Date(data.createDate).toFormat(\'YYYY-MM-DD HH:MM\')%></td>\r\n          <td><%=data.totalNotification%></td>\r\n          <!-- <td><%=data.totalMsg%></td> -->\r\n          <td><div class="operate"><span class="del delPushBind" bindId="<%=data.id%>"></span><span class="edit editPushBind"  bindId="<%=data.id%>"><%=Operations.buttons.edit %></span></div></td>\r\n        </tr>\r\n<%\r\n  }\r\n    });\r\n%>\r\n</tbody>\r\n\r\n</table>'}),define("text!templates/operations/iosCertificate.html",[],function(){return'<div>\r\n    <h5><%=Operations.pushBind.ISOCertificate %></h5>\r\n    <ul>\r\n        <li><font><%=Operations.pushBind.pushEnvironment %></font>\r\n            <strong id=\'pushEnvStatusShow\'><%=rs.curr==1?Operations.pushBind.productionEnvironment:Operations.pushBind.developmentEnvironment%></strong>\r\n        <a href="javascript:void(0)" pushEnvStatus=\'<%=rs.curr%>\' bindId=\'<%=rs.id%>\' id=\'changePushEnv\'><%=Operations.pushBind.switchEnvironment %></a></li>\r\n\r\n        <li>\r\n        	<font><%=Operations.pushBind.developmentCertificate %></font>\r\n        	<strong><%=rs.dev?Operations.pushBind.configured:Operations.pushBind.notConfigured%></strong>\r\n	        	\r\n	        <input type="file" name="uploadedFile" id="uploadedFileDev" bindId=\'<%=rs.id%>\' data="Dev">\r\n	        <font color="#F00C31" >(<%=Operations.pushBind.pem %>)</font>\r\n	        <!--\r\n            <a href="javascript:void(0)"  bindId=\'<%=rs.id%>\' class="uploadPem" data="Dev">\r\n                    <%=rs.dev?\'修改证书\':\'上传证书\'%>\r\n            </a>\r\n            -->\r\n        </li>\r\n        <li>\r\n            <font><%=Operations.pushBind.productionCertificate %></font>\r\n            <strong><%=rs.prod?Operations.pushBind.configured:Operations.pushBind.notConfigured%></strong>\r\n\r\n            <input type="file" name="uploadedFile" id="uploadedFileProd"  bindId=\'<%=rs.id%>\' data="Prod" >\r\n            <font color="#F00C31" >(<%=Operations.pushBind.pem %>)</font>\r\n            <!--\r\n            <a href="javascript:void(0)"  bindId=\'<%=rs.id%>\' class="uploadPem" data="Prod">\r\n                    <%=rs.prod?\'修改证书\':\'上传证书\'%>\r\n            </a>\r\n            -->\r\n        </li>\r\n    </ul>\r\n</div>'}),define("models/operations/PushBind",["models/BaseModel"],function(e){var t=[{name:"fetchPushBindList",url:"/v1/pushBind/fetchPushBindList",type:"get"},{name:"addPushBind",url:"/v1/pushBind/addPushBind"},{name:"uploadIOSPushCertificate",url:"/v1/pushBind/uploadIOSPushCertificate"},{name:"changeIOSPushEnv",url:"/v1/pushBind/changeIOSPushEnv"},{name:"fetchIOSPushInfo",url:"/v1/pushBind/fetchIOSPushInfo",type:"get"},{name:"getPushBind",url:"/v1/pushBind/getPushBind",type:"get"},{name:"updatePushBind",url:"/v1/pushBind/updatePushBind"},{name:"deletePushBind",url:"/v1/pushBind/deletePushBind"}];return e.init(t)}),jQuery.extend({createUploadIframe:function(e,t){var n="jUploadFrame"+e,r='<iframe id="'+n+'" name="'+n+'" style="position:absolute; top:-9999px; left:-9999px"';return window.ActiveXObject&&(typeof t=="boolean"?r+=' src="javascript:false"':typeof t=="string"&&(r+=' src="'+t+'"')),r+=" />",jQuery(r).appendTo(document.body),jQuery("#"+n).get(0)},createUploadForm:function(e,t,n){var r="jUploadForm"+e,i="jUploadFile"+e,s=jQuery('<form  action="" method="POST" name="'+r+'" id="'+r+'" enctype="multipart/form-data"></form>');if(n)for(var o in n)jQuery('<input type="hidden" name="'+o+'" value="'+n[o]+'" />').appendTo(s);var u=jQuery("#"+t),a=jQuery(u).clone();return jQuery(u).attr("id",i),jQuery(u).before(a),jQuery(u).appendTo(s),jQuery(s).css("position","absolute"),jQuery(s).css("top","-1200px"),jQuery(s).css("left","-1200px"),jQuery(s).appendTo("body"),s},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),n=jQuery.createUploadForm(t,e.fileElementId,typeof e.data=="undefined"?!1:e.data),r=jQuery.createUploadIframe(t,e.secureuri),i="jUploadFrame"+t,s="jUploadForm"+t;e.global&&!(jQuery.active++)&&jQuery.event.trigger("ajaxStart");var o=!1,u={};e.global&&jQuery.event.trigger("ajaxSend",[u,e]);var a=function(t){var r=document.getElementById(i);try{r.contentWindow?(u.responseText=r.contentWindow.document.body?r.contentWindow.document.body.innerHTML:null,u.responseXML=r.contentWindow.document.XMLDocument?r.contentWindow.document.XMLDocument:r.contentWindow.document):r.contentDocument&&(u.responseText=r.contentDocument.document.body?r.contentDocument.document.body.innerHTML:null,u.responseXML=r.contentDocument.document.XMLDocument?r.contentDocument.document.XMLDocument:r.contentDocument.document)}catch(s){jQuery.handleError(e,u,null,s)}if(u||t=="timeout"){o=!0;var a;try{a=t!="timeout"?"success":"error";if(a!="error"){var f=jQuery.uploadHttpData(u,e.dataType);e.success&&e.success(f,a),e.global&&jQuery.event.trigger("ajaxSuccess",[u,e])}else jQuery.handleError(e,u,a)}catch(s){a="error",jQuery.handleError(e,u,a,s)}e.global&&jQuery.event.trigger("ajaxComplete",[u,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(u,a),jQuery(r).unbind(),setTimeout(function(){try{jQuery(r).remove(),jQuery(n).remove()}catch(t){jQuery.handleError(e,u,null,t)}},100),u=null}};e.timeout>0&&setTimeout(function(){o||a("timeout")},e.timeout);try{var n=jQuery("#"+s);jQuery(n).attr("action",e.url),jQuery(n).attr("method","POST"),jQuery(n).attr("target",i),n.encoding?jQuery(n).attr("encoding","multipart/form-data"):jQuery(n).attr("enctype","multipart/form-data"),jQuery(n).submit()}catch(f){jQuery.handleError(e,u,null,f)}return jQuery("#"+i).load(a),{abort:function(){}}},uploadHttpData:function(e,t){var n=!t;return n=t=="xml"||n?e.responseXML:e.responseText,t=="script"&&jQuery.globalEval(n),t=="json"&&(n=jQuery.parseJSON(jQuery(n).text())),t=="html"&&jQuery("<div>").html(n).evalScripts(),n}}),define("libs/ajaxfileupload",function(){}),define("views/operations/PushBindView",["backbone","text!templates/operations/pushlist.html","text!templates/operations/addPushBind.html","text!templates/operations/pushBindTable.html","text!templates/operations/iosCertificate.html","models/operations/PushBind","utils/dataTableUtil","utils/ModelBox","utils/urlUtil","i18n!nls/gameI18N","libs/ajaxfileupload"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#container",events:{"click #addPushBindBtn":"addPushBind","click #changePushEnv":"changePushEnv","click .uploadPem":"uploadIOSCer","click .delPushBind":"delPushBind","click .editPushBind":"editPushBind","change #uploadedFileProd":"uploadIOSCer","change #uploadedFileDev":"uploadIOSCer"},initialize:function(){this.render()},render:function(){return this.pushBindedList(),this},pushBindedList:function(){$("#container").html('<div class="login"><img src="images/loading.gif" height="25px"></img></div>');var e=this;$("#container").html(_.template(t,f));var n=window.localStorage.hash;n=!n||n==""||n=="PushConfigure"?"PushList":n;var r=$(".toptitle #dropdown_productList .dropselect h4").text();$("#main").html('<iframe src="/game/index.html?sk='+Params.productID+"&s=game&name="+r+"#"+n+'" width="100%" height="100%" frameborder="0" scrolling="yes"></iframe>'),$(window.parent.document).find("#main").load(function(){$(this).css("marginTop","20px")})},iosCertificate:function(){s.fetchIOSPushInfo({data:{productId:Params.productID},success:function(e){e.code==200?$("#iosCertificateDiv").html(_.template(i,{Operations:f.Operations,rs:e.val})):u.alert({message:e.val})}})},addPushBind:function(e){location.hash="#page/pushBind-addPushBind_list/"+a.parse2Str(Params)},changePushEnv:function(e){var t=$(e.currentTarget),n=t.attr("bindId"),r=t.attr("pushEnvStatus"),i=r==1?f.Operations.pushBind.developmentEnvironment:f.Operations.pushBind.productionEnvironment;u.block({message:f.Operations.pushBind.switching}),s.changeIOSPushEnv({data:{sourceKey:Params.productID,prod:r==1?0:1},success:function(e){e.code==200?(u.alert({message:f.Operations.pushBind.switchingSuccess}),$("#pushEnvStatusShow").html(i),$("#changePushEnv").attr("pushEnvStatus",r==1?0:1)):u.alert({message:f.Operations.pushBind.apns})}})},delPushBind:function(e){var t=$(e.currentTarget).attr("bindId"),n=this;u.confirm({buttons:[{".Confirm":function(){s.deletePushBind({data:{sourceKey:Params.productID,id:t},success:function(e){e.code==200?($("#tr_"+t).remove(),u.unblock(),n.pushBindedList()):u.alert({message:e.val})}})}}]})},editPushBind:function(e){$(e.currentTarget).attr("bindId"),Params.bindId=$(e.currentTarget).attr("bindId"),console.log("pushBind-updatePushBind_list"),location.hash="#page/pushBind-updatePushBind_list/"+a.parse2Str(Params)},uploadIOSCer:function(e){var t=this,n=$(e.currentTarget).attr("data");if($("#uploadedFile"+n).val()=="")return u.alert({message:f.Operations.pushBind.selectFile}),!1;u.block({message:f.Operations.pushBind.uploading}),$.ajaxFileUpload({url:"/game/v1/pushBind/uploadPem/"+Params.productID+"/"+(n=="Dev"?0:1),secureuri:!1,fileElementId:"uploadedFile"+n,dataType:"json",success:function(e,n){e.code==200?(u.alert({message:f.Operations.pushBind.uploadSuccessful}),t.iosCertificate()):u.alert({message:e.val})}})}});return l}),define("views/operations/AddPushBindView",["backbone","text!templates/operations/addPushBind.html","models/operations/PushBind","utils/urlUtil","utils/ModelBox","i18n!nls/gameI18N"],function(e,t,n,r,i,s){var o=e.View.extend({el:"#container",events:{"click #cancelPushBind":"cancelPushBind","click .choose-service ol li":"changePushTab","click #bindPushKeyBtn":"bindPushKey"},initialize:function(){this.render()},render:function(){return this.pushTab="nick",s.showPushTab="nick",$("#container").html(_.template(t,s)),this},cancelPushBind:function(e){location.hash="#page/pushBind-list/"+r.parse2Str(Params)},changePushTab:function(e){var t=$(e.currentTarget).attr("id");this.pushTab=t,t=="nick"?$("#_pushServiceTip").html(s.Operations.addPushBind.mPushNow):$("#_pushServiceTip").html(s.Operations.addPushBind.getuiPushNow),$(".choose-service ol li").each(function(){$(this).removeClass()}),$(e.currentTarget).addClass("on-choose"),$(".binding-service ul").each(function(){$(this).hide()}),$("#"+t+"Key").show(),$(".quick-link a").each(function(){$(this).hide()}),$("#_"+t).show()},bindPushKey:function(e){var t=this,o=!0,u=[];$("#"+this.pushTab+"Key .input-service").each(function(){var e={};e.key=$(this).attr("name"),e.val=$(this).attr("value").trim();if(e.val=="")return i.alert({message:e.key+s.Operations.tips.notBlank}),o=!1,!1;u.push(e)});if(!o)return;i.block({message:s.Operations.tips.checking}),n.addPushBind({data:{pushKeys:u,sourceKey:Params.productID,channelName:t.pushTab},success:function(e){e.code==200?(i.alert({message:s.Operations.tips.bindingSuccess}),location.hash="#page/pushBind-list/"+r.parse2Str(Params)):i.alert({message:e.code==400?s.Operations.tips.checkKey:s.Operations.commons.serverIsBusy})}})}});return o}),define("text!templates/operations/updatePushBind.html",[],function(){return'<div class="main-box">\r\n    <div class="boxmax">\r\n        <div role="title" class="title">\r\n            <strong class="l"><%=Operations.addPushBind.bindingService %></strong>\r\n        </div>\r\n        <div class="textbox clearfix binding-service">\r\n            <div class="choose-service">\r\n                <h4><%=Operations.addPushBind.serviceName %></h4>\r\n                <ol>\r\n                    <li id="channelKey" data="<%=rs.channelKey%>" ><%=rs.channelName%></li>\r\n                </ol>\r\n            </div>\r\n            <ul>\r\n                <%\r\n\r\n                    _.each(mapping[rs.channelKey],function(key){\r\n\r\n                %>\r\n                    <li>\r\n                        <font><%=key%></font>\r\n                        <span>\r\n                            <input name="<%=key%>" type="text" value="<%=rs.bindValue[key]%>" class="input-service" />\r\n                        </span>\r\n                    </li>\r\n\r\n                <%\r\n                    });\r\n                %>\r\n\r\n            </ul>\r\n\r\n            <div class="operate-binding">\r\n                <a href="javascript:void(0);" class="confirm" id="updateBindPushKeyBtn"><%=Operations.buttons.confirmAndUpdate %></a>\r\n                <a href="javascript:void(0);" id="cancelPushBind" class="cancel"><%=Operations.buttons.cancel %></a></div>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/operations/UpdatePushBindView",["backbone","text!templates/operations/updatePushBind.html","models/operations/PushBind","utils/urlUtil","utils/ModelBox","i18n!nls/gameI18N"],function(e,t,n,r,i,s){var o=e.View.extend({el:"#container",events:{"click #updateBindPushKeyBtn":"updateBindPushKey","click #cancelPushBind":"cancelPushBind"},initialize:function(){this.render()},render:function(){return this.bindId=Params.bindId,this.fetchPushBindInfo(),this.mapping={nick:["appID","appKey"],getui:["appID","appKey","masterSecret"]},this},fetchPushBindInfo:function(){var e=this;n.getPushBind({data:{bindId:e.bindId},success:function(n){e.PushBind=n.val,console.log("updatePushBind"),$("#container").html(_.template(t,{Operations:s.Operations,rs:n.val,mapping:e.mapping}))}})},updateBindPushKey:function(e){var t=[],o=!0,u=$("#channelKey").attr("data");$(".input-service").each(function(){var e={};e.key=$(this).attr("name"),e.val=$(this).attr("value").trim();if(e.val=="")return i.alert({message:e.key+s.Operations.tips.notBlank}),o=!1,!1;t.push(e)});if(!o)return;i.block({message:s.Operations.tips.checking});var a=this;n.updatePushBind({data:{id:a.bindId,sourceKey:Params.productID,pushKeys:t,channelName:u},success:function(e){e.code==200?(i.alert({message:s.Operations.commons.updateSuccessfully}),location.hash="#page/pushBind-list/"+r.parse2Str(Params)):i.alert({message:e.val})}})},cancelPushBind:function(e){location.hash="#page/pushBind-list/"+r.parse2Str(Params)}});return o}),define("text!templates/operations/pushconfigure.html",[],function(){return'<iframe src="/game/index.html#PushConfigure" style="margin-top:20px" width="100%" height="100%" frameborder="0" scrolling="yes" id="main"></iframe>\r\n'}),define("models/operations/pushBindconfigure",["models/BaseModel"],function(e){var t=[{name:"fetchPushBindList",url:"/v1/pushBind/fetchPushBindList",type:"get"},{name:"addPushBind",url:"/v1/pushBind/addPushBind"},{name:"uploadIOSPushCertificate",url:"/v1/pushBind/uploadIOSPushCertificate"},{name:"changeIOSPushEnv",url:"/v1/pushBind/changeIOSPushEnv"},{name:"fetchIOSPushInfo",url:"/v1/pushBind/fetchIOSPushInfo",type:"get"},{name:"getPushBind",url:"/v1/pushBind/getPushBind",type:"get"},{name:"updatePushBind",url:"/v1/pushBind/updatePushBind"},{name:"deletePushBind",url:"/v1/pushBind/deletePushBind"}];return e.init(t)}),define("views/operations/pushBindconfigureView",["backbone","text!templates/operations/pushconfigure.html","models/operations/pushBindconfigure","utils/dataTableUtil","utils/ModelBox","utils/urlUtil","i18n!nls/gameI18N","libs/ajaxfileupload"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#container",initialize:function(){this.render()},render:function(){return this.pushBindedList(),this},pushBindedList:function(){$("#container").html('<div class="login"><img src="images/loading.gif" height="25px"></img></div>');var e=this;$("#container").html(_.template(t,o));var n=$("#main").attr("src"),r=n.split("#"),i=$(".header .nav .user a").text(),s=$(".toptitle #dropdown_productList .dropselect h4").text();$("#main").attr("src",r[0]+"?sk="+Params.productID+"&s=game&name="+s+"&un="+i+"#"+r[1]),$(window.parent.document).find("#main").load(function(){$(this).css("marginTop","20px");var e=$(window.parent.document).find("#main"),t=$(document).height()+30;e.height(t)})}});return u}),define("models/operations/pushCampaigns",["models/BaseModel"],function(e){var t=[{name:"fetchSegmentTemplate",url:"/v1/campaigns/fetchSegmentTemplate"},{name:"deleteSegmentTemplate",url:"/v1/campaigns/deleteSegmentTemplate"},{name:"createSegmentTemplate",url:"/v1/campaigns/createSegmentTemplate"},{name:"fetchCampaignList",url:"/v1/campaigns/fetchCampaignList",type:"get"},{name:"fetchCampaignSummary",url:"/v1/campaigns/fetchCampaignSummary",type:"get"},{name:"fetchSendDetail",url:"/v1/campaigns/fetchSendDetail",type:"get"},{name:"deleteCampaign",url:"/v1/campaigns/deleteCampaign"},{name:"retrySendCampaign",url:"/v1/campaigns/retrySendCampaign"},{name:"clickData",url:"/v1/campaigns/clickData",type:"get"},{name:"arriveData",url:"/v1/campaigns/arriveData",type:"get"},{name:"commitSegment",url:"/v1/campaigns/commitSegment"},{name:"commitPush",url:"/v1/campaigns/commitPush"},{name:"checkMsgName",url:"/v1/campaigns/checkMsgName",type:"get"},{name:"checkSegmentTemplateName",url:"/v1/campaigns/checkSegmentTemplateName",type:"get"},{name:"segmentDeviceTokenNum",url:"/v1/campaigns/segmentDeviceTokenNum",type:"get"},{name:"fetchResultDataByFilterType",url:"/v1/campaigns/fetchResultDataByFilterType",type:"get"},{name:"segmentFilterIdsForNames",url:"/v1/campaigns/segmentFilterIdsForNames",type:"get"},{name:"fetchClickConversion",url:"/v1/campaigns/fetchClickConversion",type:"get"},{name:"fetchMessageChannelStatus",url:"/v1/campaigns/fetchMessageChannelStatus",type:"get"},{name:"commitForecastSegment",url:"/v1/campaigns/commitForecastSegment",type:"get"}];return e.init(t)}),define("views/operations/pushCampaignsView",["backbone","text!templates/operations/pushlist.html","models/operations/pushCampaigns","models/product/Product","models/Constant","utils/ModelBox","i18n!nls/gameI18N","utils/urlUtil","utils/RegexUtil","libs/async","utils/Xslider","libs/slider/jquery.ui.core","libs/slider/jquery.ui.mouse","libs/slider/jquery.ui.slider","libs/slider/jquery.ui.widget","libs/colpick/colpick","libs/dtpicker/jquery.datetimepicker","jquery.datepicker"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#container",initialize:function(){this.$msgId=Params.msgId||0,this.$isUpdate=!1,this.$backstep=!1,this.$templateDatas=null,this.$segmentPlatform="",this.$editPushPlatform="",this.$segmentConditions={},this.$prepareSendSegment={},this.$pushMsg={id:-1,platform:-1,accurate:0,segmentId:-1,type:4,name:null,isFixed:!1},this.borderClass={},this.borderClass["#464d57"]="border-black",this.borderClass["#d3d6dd"]="border-white",this.bgclass={},this.bgclass["#ecedf1"]="bg-grey",this.bgclass["#27272f"]="bg-black",this.bgclass["#ffffff"]="bg-white",this.render()},render:function(){return this.$msgId>0?(this.fetchPushDetail(this.$msgId),this.$isUpdate=!0):(o.msgName="",this.$isUpdate=!1,this.renderMainTemplate(!1)),this},renderMainTemplate:function(e,n){var i=this;r.fetchPlatformListWithProductId({data:Params,success:function(e){if(e){var n="";o._platformTpl=n,$("#container").html(_.template(t,o));var r=window.localStorage.hash;r=!r||r==""||r=="PushConfigure"||r=="CreatePush"?"PushList":r;var i=$(".toptitle #dropdown_productList .dropselect h4").text();$("#main").html('<iframe src="/game/index.html?sk='+Params.productID+"&s=game&name="+i+"#"+r+'" width="100%" height="100%" frameborder="0" scrolling="yes"></iframe>'),$(window.parent.document).find("#main").load(function(){$(this).css("marginTop","20px");var e=$(window.parent.document).find("#main"),t=$(document).height()+30;e.height(t)})}}})}});return l}),UUID.generate=function(){var e=UUID._gri,t=UUID._ha;return t(e(32),8)+"-"+t(e(16),4)+"-"+t(16384|e(12),4)+"-"+t(32768|e(14),4)+"-"+t(e(48),12)},UUID._gri=function(e){return 0>e?NaN:30>=e?0|Math.random()*(1<<e):53>=e?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<e-30)):NaN},UUID._ha=function(e,t){for(var n=e.toString(16),r=t-n.length,i="0";0<r;r>>>=1,i+=i)r&1&&(n=i+n);return n},define("uuid.core",function(){}),define("utils/AppUtil",["views/summary/SummaryView","views/summary/SummarizeDayView","views/player/NewPlayerView","views/player/ActivePlayerView","views/player/BehaviorView","views/player/DeviceView","views/player/ChurnedView","views/player/ConvertionView","views/player/RetentionView","views/player/CustomRetentionView","views/player/LostFunnelView","views/concurrent/ConcurrentUserView","views/Level/LevelDetailedView","views/Level/ScheduleView","views/Level/LevelDistributedView","views/play/tasksView","views/play/TasksManagementView","views/revenue/IncomeDataView","views/revenue/PayPermeateView","views/revenue/NewPlayerValueView","views/revenue/PayHabitView","views/partnerExtention/PartnerDataView","views/partnerExtention/PartnerManagementView","views/virtualEconomy/VirtualCoinView","views/virtualEconomy/ConsumeAnalysisView","views/virtualEconomy/ConsumePointView","views/virtualEconomy/ManagementView","views/whale/WhaleUserView","views/whale/WhaleDetailView","views/customEvent/EventDataView","views/customEvent/EventDetailView","views/customEvent/EventManagementView","views/analysisTools/ChartRemarkView","views/analysisTools/WarningView","views/operations/CampaignsView","views/operations/CampaignListView","views/operations/CampaignDetailView","views/operations/PushBindView","views/operations/AddPushBindView","views/operations/UpdatePushBindView","views/operations/pushBindconfigureView","views/operations/pushCampaignsView","jquery.cookie","uuid.core"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R){return{renderPage:function(U){$("body").undelegate(),$("#container").undelegate(),U=U||this.getCurrentPage(),_hmt.push(["_trackPageview","/game#"+U]),$.cookie.json=!1,$.cookie.raw=!0,$.cookie("visit",JSON.stringify({time:(new Date).getTime(),version:"v1",func:U,level:1,session:UUID.generate()})),console.log($.cookie("visit"));var z="";switch(U){case"summary-index":new e;break;case"summary-day":new t;break;case"summary-week":new SummarizeWeekView;break;case"summary-month":new SummarizeMonthView;break;case"player-new":new n;break;case"player-active":new r;break;case"player-behavior":new i;break;case"player-device":new s;break;case"player-churned":new o;break;case"player-convertion":new u;break;case"player-retention":new a;break;case"player-customRetention_retention":new f;break;case"player-lostFunnel_churned":new l;break;case"concurrent":new c;break;case"level-detail":new h;break;case"level-schedule":new p;break;case"level-distribute":new d;break;case"tasks":new v;break;case"dead":new DeadView;break;case"TasksManagement":new m;break;case"revenue-incomeData":new g;break;case"revenue-payPermeate":new y;break;case"revenue-newPlayerValue":new b;break;case"revenue-payHabit":new w;break;case"partnerExtention-partnerData":new E;break;case"partnerExtention-partnerManagement":new S;break;case"virtualEconomy-virtualCoin":new x;break;case"virtualEconomy-consumeAnalysis":new T;break;case"virtualEconomy-consumePoint":new N;break;case"virtualEconomy-Management":new C;break;case"whale-whaleUser":new k;break;case"whale-whaleUserDetail_whaleUser":new L;break;case"customEvent-data":new A;break;case"customEvent-detail_data":new O;break;case"customEvent-eventManagement":new M;break;case"chartRemark-data":new _;break;case"analysisTools-warning":new D;break;case"campaigns-list":new H;break;case"campaigns-newCampaign_list":new P;break;case"campaigns-campaignDetail_list":new B;break;case"pushBind-list":new j;break;case"pushBind-addPushBind_list":new F;break;case"pushBind-updatePushBind_list":new I;break;case"pushlist":new R;break;case"pushconfigure":new q}},getCurrentPage:function(){return location.hash.replace(/#page.*\/(\w+)/,"$1")},saveParamsToServer:function(e){console.log(e),$.cookie("page",e)},setHash:function(e){location.hash="#"+e}}}),define("text!templates/public/menuItem.html",[],function(){return'<div class="menu l">\r\n	<ul>\r\n		<% _.each(list,function(o){ %>\r\n			<li>\r\n				<a class="<%= o.className %>" url-data="<%= o.urlData %>">\r\n					<span><%=o.name%></span>\r\n				</a>\r\n				<% if(o.subItems.length){%>\r\n					<ol>\r\n					<% _.each(o.subItems,function(sub){ %>\r\n						<li><a url-data="<%= sub.urlData %>"><%= sub.name %></a></li>\r\n					<% }); %>\r\n					</ol>\r\n				<% } %>\r\n			</li>\r\n		<% }); %>\r\n	</ul>\r\n</div>'}),define("models/MenuConfig",["underscore","text!templates/public/menuItem.html","i18n!nls/gameI18N"],function(e,t,n){return{menuItems:[{name:n.GameCommon.overview,className:"navigate Dashboard more_icon",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.gameOverview,urlData:"summary-index",permisstion:"Summarize"},{name:n.GameCommon.dailyReport,permisstion:"SummarizePay",urlData:"summary-day"}]},{name:n.GameCommon.gamePlayer,className:"more_icon Players",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.newIncreased,permisstion:"NewPlayer",urlData:"player-new"},{name:n.GameCommon.activing,permisstion:"ActivePlayer",urlData:"player-active"},{name:n.GameCommon.retain,permisstion:"KeepPlayer",urlData:"player-retention"},{name:n.GameCommon.transform,permisstion:"NewPlayConversion",urlData:"player-convertion"},{name:n.GameCommon.loss,permisstion:"Loss",urlData:"player-churned"},{name:n.GameCommon.gameHabit,permisstion:"Behavior",urlData:"player-behavior"},{name:n.GameCommon.equipments,permisstion:"Device",urlData:"player-device"}]},{name:n.GameCommon.onlineAnalysis,className:"concurrentUser",urlData:"concurrent",permisstion:"Online",subItems:[]},{name:n.GameCommon.levelAnalytics,className:"LevelAnalysis more_icon",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.levelDetail,permisstion:"LevelInfo",urlData:"level-detail"},{name:n.GameCommon.levelDistribute,permisstion:"LevelAnalysis",urlData:"level-distribute"},{name:n.GameCommon.newPlayerProgress,permisstion:"PlayerProgress",urlData:"level-schedule"}]},{name:n.GameCommon.taskAnalysis,className:"TasksCheckpoints more_icon",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.taskAndMission,permisstion:"TasksAndLevels",urlData:"tasks"},{name:n.GameCommon.taskAndMissionManage,permisstion:"TaskAndLevelsManage",urlData:"TasksManagement"}]},{name:n.GameCommon.incomeAnalysis,className:"more_icon revenue",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.incomeData,permisstion:"IncomeData",urlData:"revenue-incomeData"},{name:n.GameCommon.payPermeate,permisstion:"PayPermeate",urlData:"revenue-payPermeate"},{name:n.Revenue.NewPlayerValue.newPlayerValue,permisstion:"NewPlayerValue",urlData:"revenue-newPlayerValue"},{name:n.GameCommon.payHabit,permisstion:"PayHabit",urlData:"revenue-payHabit"}]},{name:n.GameCommon.dummyConsume,className:"more_icon virtualEconomy",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.dummyCoin,permisstion:"VirtualCoin",urlData:"virtualEconomy-virtualCoin"},{name:n.GameCommon.consumeHobby,permisstion:"ConsumeAnalysis",urlData:"virtualEconomy-consumeAnalysis"},{name:n.GameCommon.consumePoint,permisstion:"ConsumePoint",urlData:"virtualEconomy-consumePoint"},{name:n.GameCommon.consumePointManage,permisstion:"ConsumeManagement",urlData:"virtualEconomy-Management"}]},{name:n.GameCommon.whaleUser,className:"WhalesUser",urlData:"whale-whaleUser",permisstion:"WhaleUser",subItems:[]},{name:n.GameCommon.expandChannel,className:"more_icon partnerExtention",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.channelData,permisstion:"PartnerData",urlData:"partnerExtention-partnerData"},{name:n.GameCommon.channelManage,permisstion:"ManagePartner",urlData:"partnerExtention-partnerManagement"}]},{name:n.GameCommon.custionEvent,className:"more_icon CustomEvent",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.eventData,permisstion:"CustomEventData",urlData:"customEvent-data"},{name:n.CustomEvent.EventManagement.eventManage,permisstion:"ManageCustomEvent",urlData:"customEvent-eventManagement"}]},{name:n.GameCommon.analyticsTools,className:"AnalysisTools more_icon",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.warningNotify,permisstion:"Notification",urlData:"analysisTools-warning"},{name:n.AnalysisTools.ChartRemark.menu,permisstion:"ChartRemark",urlData:"chartRemark-data"}]},{name:n.GameCommon.pushcampaigns+"<em>new图标</em>",className:"Operations-Push more_icon",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.pushcampaigns,permisstion:"Campaigns",urlData:"pushlist"},{name:n.GameCommon.pushBindconfigure,permisstion:"pushBindconfigure",urlData:"pushconfigure"}]}],getMenusByPermisstions:function(t,n){if(n)return this.menuItems;var r=t;return e.filter(this.menuItems,function(t){if(!t.subItems.length)return e.indexOf(r,t.permisstion)!=-1;var n=e.filter(t.subItems,function(t){return e.indexOf(r,t.permisstion)!=-1});if(n.length)return t.subItems=n,t})},canVisit:function(){var t=this.getMenusByPermisstions(),n=e.pluck(t,"urlData"),r=e.pluck(t,"subItems");return e.each(r,function(t){t.length&&(n=e.union(n,e.pluck(t,"urlData")))}),n=e.without(n,""),n},renderMenus:function(n,r,i){var s={list:this.getMenusByPermisstions(n,r),pid:i},o=e.template(t,s);return o}}});var CryptoJS=CryptoJS||function(e,t){var n={},r=n.lib={},i=function(){},s=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;e=e.sigBytes,this.clamp();if(r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),u=n.enc={},a=u.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((i&15).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new o.init(n,t/2)}},f=u.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-8*(r%4);return new o.init(n,t)}},l=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},c=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,u=i/(4*s),u=t?e.ceil(u):e.max((u|0)-this._minBufferSize,0);t=u*s,i=e.min(4*t,i);if(t){for(var a=0;a<t;a+=s)this._doProcessBlock(r,a);a=r.splice(0,t),n.sigBytes-=i}return new o.init(a,i)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=c.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return(new e.init(n)).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return(new h.HMAC.init(e,n)).finalize(t)}}});var h=n.algo={};return n}(Math);(function(){var e=CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],s=0,o=0;o<n;o++)if(o%4){var u=r.indexOf(e.charAt(o-1))<<2*(o%4),a=r.indexOf(e.charAt(o))>>>6-2*(o%4);i[s>>>2]|=(u|a)<<24-8*(s%4),s++}return t.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(e){function t(e,t,n,r,i,s,o){return e=e+(t&n|~t&r)+i+o,(e<<s|e>>>32-s)+t}function n(e,t,n,r,i,s,o){return e=e+(t&r|n&~r)+i+o,(e<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return e=e+(t^n^r)+i+o,(e<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return e=e+(n^(t|~r))+i+o,(e<<s|e>>>32-s)+t}for(var s=CryptoJS,o=s.lib,u=o.WordArray,a=o.Hasher,o=s.algo,f=[],l=0;64>l;l++)f[l]=4294967296*e.abs(e.sin(l+1))|0;o=o.MD5=a.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var o=0;16>o;o++){var u=s+o,a=e[u];e[u]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360}var o=this._hash.words,u=e[s+0],a=e[s+1],l=e[s+2],c=e[s+3],h=e[s+4],v=e[s+5],m=e[s+6],g=e[s+7],y=e[s+8],w=e[s+9],E=e[s+10],S=e[s+11],x=e[s+12],T=e[s+13],N=e[s+14],C=e[s+15],k=o[0],L=o[1],A=o[2],O=o[3],k=t(k,L,A,O,u,7,f[0]),O=t(O,k,L,A,a,12,f[1]),A=t(A,O,k,L,l,17,f[2]),L=t(L,A,O,k,c,22,f[3]),k=t(k,L,A,O,h,7,f[4]),O=t(O,k,L,A,v,12,f[5]),A=t(A,O,k,L,m,17,f[6]),L=t(L,A,O,k,g,22,f[7]),k=t(k,L,A,O,y,7,f[8]),O=t(O,k,L,A,w,12,f[9]),A=t(A,O,k,L,E,17,f[10]),L=t(L,A,O,k,S,22,f[11]),k=t(k,L,A,O,x,7,f[12]),O=t(O,k,L,A,T,12,f[13]),A=t(A,O,k,L,N,17,f[14]),L=t(L,A,O,k,C,22,f[15]),k=n(k,L,A,O,a,5,f[16]),O=n(O,k,L,A,m,9,f[17]),A=n(A,O,k,L,S,14,f[18]),L=n(L,A,O,k,u,20,f[19]),k=n(k,L,A,O,v,5,f[20]),O=n(O,k,L,A,E,9,f[21]),A=n(A,O,k,L,C,14,f[22]),L=n(L,A,O,k,h,20,f[23]),k=n(k,L,A,O,w,5,f[24]),O=n(O,k,L,A,N,9,f[25]),A=n(A,O,k,L,c,14,f[26]),L=n(L,A,O,k,y,20,f[27]),k=n(k,L,A,O,T,5,f[28]),O=n(O,k,L,A,l,9,f[29]),A=n(A,O,k,L,g,14,f[30]),L=n(L,A,O,k,x,20,f[31]),k=r(k,L,A,O,v,4,f[32]),O=r(O,k,L,A,y,11,f[33]),A=r(A,O,k,L,S,16,f[34]),L=r(L,A,O,k,N,23,f[35]),k=r(k,L,A,O,a,4,f[36]),O=r(O,k,L,A,h,11,f[37]),A=r(A,O,k,L,g,16,f[38]),L=r(L,A,O,k,E,23,f[39]),k=r(k,L,A,O,T,4,f[40]),O=r(O,k,L,A,u,11,f[41]),A=r(A,O,k,L,c,16,f[42]),L=r(L,A,O,k,m,23,f[43]),k=r(k,L,A,O,w,4,f[44]),O=r(O,k,L,A,x,11,f[45]),A=r(A,O,k,L,C,16,f[46]),L=r(L,A,O,k,l,23,f[47]),k=i(k,L,A,O,u,6,f[48]),O=i(O,k,L,A,g,10,f[49]),A=i(A,O,k,L,N,15,f[50]),L=i(L,A,O,k,v,21,f[51]),k=i(k,L,A,O,x,6,f[52]),O=i(O,k,L,A,c,10,f[53]),A=i(A,O,k,L,E,15,f[54]),L=i(L,A,O,k,a,21,f[55]),k=i(k,L,A,O,y,6,f[56]),O=i(O,k,L,A,C,10,f[57]),A=i(A,O,k,L,m,15,f[58]),L=i(L,A,O,k,T,21,f[59]),k=i(k,L,A,O,h,6,f[60]),O=i(O,k,L,A,S,10,f[61]),A=i(A,O,k,L,l,15,f[62]),L=i(L,A,O,k,w,21,f[63]);o[0]=o[0]+k|0,o[1]=o[1]+L|0,o[2]=o[2]+A|0,o[3]=o[3]+O|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296);n[(i+64>>>9<<4)+15]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,n[(i+64>>>9<<4)+14]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words;for(r=0;4>r;r++)i=n[r],n[r]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360;return t},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=a._createHelper(o),s.HmacMD5=a._createHmacHelper(o)}(Math),function(){var e=CryptoJS,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,i=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),s=r.create(),o=s.words,u=n.keySize,n=n.iterations;o.length<u;){a&&i.update(a);var a=i.update(e).finalize(t);i.reset();for(var f=1;f<n;f++)a=i.finalize(a),i.reset();s.concat(a)}return s.sigBytes=4*u,s}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),CryptoJS.lib.Cipher||function(e){var t=CryptoJS,n=t.lib,r=n.Base,i=n.WordArray,s=n.BufferedBlockAlgorithm,o=t.enc.Base64,u=t.algo.EvpKDF,a=n.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?d:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?d:p).decrypt(e,t,n,r)}}}});n.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=t.mode={},l=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var s=0;s<r;s++)t[n+s]^=i[s]},c=(n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;l.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),l.call(this,e,t,r),this._prevBlock=i}}),f=f.CBC=c,c=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(r);n=i.create(s,n),e.concat(n)},unpad:function(e){e.sigBytes-=e.words[e.sigBytes-1>>>2]&255}},n.BlockCipher=a.extend({cfg:a.cfg.extend({mode:f,padding:c}),reset:function(){a.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(o)},parse:function(e){e=o.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},p=n.SerializableCipher=r.extend({cfg:r.extend({format:f}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=i.random(8)),e=u.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:r})}},d=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=CryptoJS,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],s=[],o=[],u=[],a=[],f=[],l=[],c=[],h=[],p=[],d=0;256>d;d++)p[d]=128>d?d<<1:d<<1^283;for(var v=0,m=0,d=0;256>d;d++){var g=m^m<<1^m<<2^m<<3^m<<4,g=g>>>8^g&255^99;r[v]=g,i[g]=v;var y=p[v],b=p[y],w=p[b],E=257*p[g]^16843008*g;s[v]=E<<24|E>>>8,o[v]=E<<16|E>>>16,u[v]=E<<8|E>>>24,a[v]=E,E=16843009*w^65537*b^257*y^16843008*v,f[g]=E<<24|E>>>8,l[g]=E<<16|E>>>16,c[g]=E<<8|E>>>24,h[g]=E,v?(v=y^p[p[p[w^y]]],m^=p[p[m]]):v=m=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],s=0;s<e;s++)if(s<n)i[s]=t[s];else{var o=i[s-1];s%n?6<n&&4==s%n&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[o&255]):(o=o<<8|o>>>24,o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[o&255],o^=S[s/n|0]<<24),i[s]=i[s-n]^o}t=this._invKeySchedule=[];for(n=0;n<e;n++)s=e-n,o=n%4?i[s]:i[s-4],t[n]=4>n||4>=s?o:f[r[o>>>24]]^l[r[o>>>16&255]]^c[r[o>>>8&255]]^h[r[o&255]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,u,a,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,f,l,c,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,u){for(var a=this._nRounds,f=e[t]^n[0],l=e[t+1]^n[1],c=e[t+2]^n[2],h=e[t+3]^n[3],p=4,d=1;d<a;d++)var v=r[f>>>24]^i[l>>>16&255]^s[c>>>8&255]^o[h&255]^n[p++],m=r[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^o[f&255]^n[p++],g=r[c>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[l&255]^n[p++],h=r[h>>>24]^i[f>>>16&255]^s[l>>>8&255]^o[c&255]^n[p++],f=v,l=m,c=g;v=(u[f>>>24]<<24|u[l>>>16&255]<<16|u[c>>>8&255]<<8|u[h&255])^n[p++],m=(u[l>>>24]<<24|u[c>>>16&255]<<16|u[h>>>8&255]<<8|u[f&255])^n[p++],g=(u[c>>>24]<<24|u[h>>>16&255]<<16|u[f>>>8&255]<<8|u[l&255])^n[p++],h=(u[h>>>24]<<24|u[f>>>16&255]<<16|u[l>>>8&255]<<8|u[c&255])^n[p++],e[t]=v,e[t+1]=m,e[t+2]=g,e[t+3]=h},keySize:8});e.AES=t._createHelper(n)}(),define("CryptoJS",function(e){return function(){var t,n;return t||e.CryptoJS}}(this)),CryptoJS.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-8*(n%4)&255);)n--;e.sigBytes=n+1}},define("pad",["CryptoJS"],function(){}),define("views/public/MenuView",["backbone","utils/urlUtil","models/MenuConfig","pad","CryptoJS"],function(e,t,n,r,i){var s=i.enc.Latin1.parse("talkingdata12345"),o=i.enc.Latin1.parse("talkingdata12345"),u=function(e){var t=i.AES.encrypt(e,s,{iv:o,mode:i.mode.CBC,padding:i.pad.ZeroPadding}).toString();return t},a=function(e){var t=[];for(attr in e)t.push(attr+"="+e[attr]);var n=t.join("&");return u(n)},f=e.View.extend({el:"#menu-banner",events:{"mouseover ul>li,ol>li":"addClass","mouseout ul>li,ol>li":"removeClass","click a":"navigate"},initialize:function(){$("#menu-banner").undelegate();var e=this.options.menuInfo,t=this.options.pid,r=this.options.isCreator;$("#menu-banner").attr("data",t).html(n.renderMenus(e,r,t))},changeMenu:function(e){var t=$(e.currentTarget),n=t.has("ol");n.length==0&&$("#menuItems ol").slideUp()},addClass:function(e){var t=$(e.currentTarget);t.addClass("hover")},removeClass:function(e){var t=location.hash.replace(/#page\/([^\/]*).*/,"$1"),n=$("#menu-banner"),r=$(e.currentTarget);r.removeClass("hover");var i=n.find("a[url-data="+t+"]");if(!i.html()){var s=t.split("_")[1],o=t.split("-")[0];i=n.find("a[url-data="+o+"-"+s+"]")}var u=i.parent(),a=u.parent("ol");window.localStorage.hash="PushList",i.addClass("hover"),u.addClass("hover"),a.length&&a.parent().addClass("hover")},navigate:function(e){var n=$(e.currentTarget),r=n.attr("url-data");if(r=="partnerExtention-partnerManagement"){window.open("/game/v3/main.jsp#/app-setting/partner-setting?"+a({productID:Params.productID}));return}if(r=="customEvent-eventManagement"){window.open("/game/v3/main.jsp#/app-setting/event-setting?"+a({productID:Params.productID}));return}n.parent("li").addClass("hover");if(n.hasClass("more_icon")){var i=n.next("ol"),s=i.css("display");s!="block"?i.slideDown():i.slideUp()}if(r){_currentIntervalObj!=null&&(clearInterval(_currentIntervalObj),_currentIntervalObj=null),_currentDebugStatusObj!=null&&(clearInterval(_currentDebugStatusObj),_currentDebugStatusObj=null),this.filterParams(r);var o=t.parse2Str(Params);location.hash="#page/"+r+"/"+o}},filterParams:function(e){e!="whale-whaleUserDetail"&&delete Params.uid}});return f}),define("text!templates/public/top.html",[],function(){return'<div class="l">\n	<strong><a href="/game/v3/main.jsp#/data-center/app-list"><%=GameCommon.dataCenter%></a> </strong>\n    <span></span>\n	<select	name="../images/input_list_top.gif" id="productList"  style="z-index: 999;">\n		<%_.each(productList,function(p){%>\n			<option value="<%=p.productid%>"><%=p.productName%></option>\n		<%});%>\n	</select> \n	<span></span> \n    <div class="boxSlect" id="platformList">\n        <div class="SelectPlatform">\n	        <font role="tip">\n	        <% \n	        	for(var i=0;i<selected.length;i++){\n					var platform = selected[i],iconName=\'\';\n					if(platform == \'1\'){\n						iconName = \'Android\';\n					}else if(platform == \'2\'){\n						iconName = \'IOS\';\n					}else if(platform == \'3\'){\n						iconName = \'win7\';\n					}else if(platform == \'4\'){\n						iconName = \'web\';\n					}\n			%>\n				<img src="images/<%=iconName%>_icon.png" />\n		    <%}%>\n	        </font>\n	        <em></em>\n        </div>\n        <div class="PlatformList">\n            <ul role="selector">\n            	<%for(var i=0; i<platformList.length; i++){\n            		var p = platformList[i],\n            			checked = selected.indexOf(p.platformId) != -1 ? \'checked\' : \'\';\n            	%>		\n            	<li><input name="" type="checkbox" value="<%=p.platformId%>" <%=checked%> /> <font><%=p.platformName%></font></li>\n            	<%}%>\n            </ul>\n            <div class="operateSelect"><%=GameCommon.confirm%></div>\n            <div id="platformListTip"></div>\n        </div>\n        \n    </div>\n\n	<!--<select name="../images/input_list_top.gif"	id="platformList" style="z-index: 999">\n		<%_.each(platformList,function(p){%>\n			<option value="<%=p.platformId%>"><%=p.platformName%></option>\n		<%});%>\n	</select>-->\n<% if(installNum < 50000 && canClear && comefrom == 0){%>\n	<div id="clearTestData" class="clear-test-data"><img src="images/icon-clear-data.png" align="absmiddle"/><%=GameCommon.clearData%></div>\n<%}%>\n</div>\n<div class="r user_dropselect ">\n	<a href="http://doc.talkingdata.com/posts/47" target="_blank"><h4><font class="document"><%=GameCommon.docCenter%></font></h4></a>\n</div>\n<% if(!viewDemoNoLogin){%>\n<div class="r user_dropselect">\n	<a href="#accountCenter"><h4><font><%=GameCommon.accountAndAuthority%></font></h4></a>\n</div>\n<%}%>'}),define("text!templates/public/clearTestData.html",[],function(){return'<!--清除测试数据开始-->\r\n	<div class="InformationPop-clearData">\r\n		<div class="InformationTitle">\r\n			<div class="title-cleardata-box"><img src="images/icon-cleardata-red.png"/>\r\n                <font><%=Public.ClearTestData.clearData%></font>\r\n            </div>\r\n			<a href="javascript:void(0)" id="closeButton" class="close r">\r\n				<small class=""></small>\r\n			</a>\r\n    	</div>\r\n		<div class="InformationTxt-clearData">\r\n			<h3><%=Public.ClearTestData.clearDataRemark%></h3>\r\n			<div class="content-clearTestData">\r\n			    <div class="content-left">\r\n			        <h5><%=Public.ClearTestData.notes%></h5>\r\n			        <ul>\r\n			            <li><strong>•</strong> <%=Public.ClearTestData.notes1%></li>\r\n			            <li><strong>•</strong> <%=Public.ClearTestData.notes2%></li>\r\n			            <li><strong>•</strong> <%=Public.ClearTestData.notes3%></li>\r\n			            <li><strong>•</strong> <%=Public.ClearTestData.notes4%></li>\r\n			            <li><strong>•</strong> <%=Public.ClearTestData.notes5%></li>\r\n			        </ul>\r\n			        </h5>\r\n			    </div>\r\n			    <div class="content-right">\r\n			        <h5><%=Public.ClearTestData.gameCleared%>：</h5>\r\n			        <div  style="margin:5px;padding: 5px;font-size:16px;width: 200px;">\r\n                        <%=canBeClearedProduct%>\r\n  					</div>\r\n                    <div class="button-clearData" id="clearDataBtn"><font><%=Public.ClearTestData.nowClear%></font></div>\r\n			    </div>\r\n                <div class="clear"></div>\r\n			</div>\r\n            <h2><%=Public.ClearTestData.clearingData%></h2>\r\n            <div class="clearData-list">\r\n                <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table-clearData-list">\r\n                  <tr>\r\n                    <th scope="col"><%=Public.ClearTestData.date%></th>\r\n                    <th scope="col"><%=Public.ClearTestData.gameName%></th>\r\n                    <th scope="col"><%=Public.ClearTestData.devicesClearing%></th>\r\n                  </tr>\r\n                  <%\r\n                    if(cleanHistory.length == 0){\r\n                  %>\r\n                    <tr><td colspan=\'3\'>no data...</td></tr>\r\n                  <%    \r\n                    }\r\n                  %>\r\n                  <%\r\n                    _.each(cleanHistory,function(data){\r\n                  %>\r\n                    <tr>\r\n                      <td><%=new Date(data.cleanTime).toFormat(\'YYYY-MM-DD HH24:MI:SS\')%></td>\r\n                      <td><%=data.productName%></td>\r\n                      <td><%=data.installNum%></td>\r\n                    </tr>\r\n                  <%  \r\n                    });\r\n                  %>\r\n                </table>\r\n            </div>\r\n		</div>\r\n	</div>\r\n<!--清除测试数据结束-->'}),define("views/public/TopBannerView",["backbone","mustache","models/product/Product","models/MenuConfig","models/analysisTools/ChartRemark","utils/urlUtil","utils/ModelBox","text!templates/public/top.html","text!templates/public/clearTestData.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#topBanner",initialize:function(){this.$el.undelegate(),this.datas=null,this.render()},events:{"change #productList":"productListChange","click #platformList .SelectPlatform":"togglePlatformList","click #platformList .operateSelect":"platformListChange","click #clearTestData":"clearTestData"},render:function(){var e=this;return this.datas?this.handleData(this.datas):n.fetchProductAndPlatforms({type:"get",data:{isDataCenter:!0},success:function(t){e.handleData(t)}}),this},handleData:function(e){if(Params.productID==18243){var t=new Array,n=new Array;n.push("1"),n.push("2");var r={platformList:n,productName:"New Demo",productid:18243,registerTime:1401408e6};t.push(r),e=t}this.datas=e,this.setSelector(e),this.setSelectorStyles()},setSelector:function(e){var t=this,r={productList:e,platformList:t.getPlatformsByProductId(Params.productID),selected:t.getSelectedPlatforms(Params.productID),role:DeveloperBean.userRole,Public:f.Public,GameCommon:f.GameCommon,currentLocale:currentLocale,comefrom:DeveloperBean.comefrom,viewDemoNoLogin:DeveloperBean.viewDemoNoLogin};n.installNum({type:"get",data:{productId:Params.productID},success:function(e){r.installNum=e.installNum,r.canClear=e.canClear;var n=_.template(u,r);t.$el.find(".toptitle").html(n),t.setSelectorStyles()}})},setSelectorStyles:function(){this.$el.find("#productList option[value='"+Params.productID+"']").attr("selected",!0),this.$el.find("#productList").sSelect()},getProductById:function(e){return _.find(this.datas,function(t){return t.productid==e})},getPlatformsByProductId:function(e){var t=this.getProductById(e),n=[];if(t&&t.platformList.length){var r="";_.each(t.platformList,function(e){e==1?r="Android":e==2?r="IOS":e==3?r="Windows Phone":e==4&&(r="HTML5"),n.push({platformId:e,platformName:r})})}return n},getSelectedPlatforms:function(e){var t=this.getProductById(e),n=[];return Params.platformID==""?t.platformList:Params.platformID.split(",")},productListChange:function(e){this.removePartner(),this.removeGameServer(),CurrentRemarkDates=null;var t=$(e.currentTarget).val(),o=this.getProductById(t);Params.productRegistTime=(new Date(o.registerTime)).toFormat("YYYY-MM-DD"),Params.productID=t,Params.platformID="";var u=this;i.fetchRemarkList({type:"get",data:{productid:Params.productID},success:function(e){CurrentRemarkDates=_.pluck(e,"remarkDate"),u.render()}});var a=location.hash.match(/#page\/([^\/]*)\//)[1];n.fetchMenuInfoByPId({type:"get",data:{productID:Params.productID},success:function(e){var t=r.getMenusByPermisstions(e.menuInfo,e.isCreator),n=[];t.length&&(_.each(t,function(e){e.subItems.length?n.push(_.pluck(e.subItems,"urlData")):n.push(e.urlData)}),n=_.flatten(n),n.indexOf(a)!=-1?s.changeHashByParams():s.changeHash("#page/"+n[0]+"/",s.parse2Str(Params)))}})},platformListChange:function(){var e=$("#platformList input:checked");if(e.length===0){$("#platformListTip").html(f.Operations.commons.selectPlatform);return}$("#platformListTip").html("");var t=[],n;_.each(e,function(e){t.push($(e).val())}),n=t.join(",");if(Params.platformID==n)return;Params.platformID=n,this.removePartner(),this.removeGameServer(),$("#platformList font[role='tip']").html(this.getPlatformStr(t)),this.platformListSlideUp(),s.changeHashByParams()},logout:function(){var e=DeveloperBean.comefrom;$.ajax({url:"/game/v1/gamecenter/logout?_t="+Math.random(),type:"get",success:function(t){e==9?window.location.href="/game/index.jsp":window.location.href="https://account.talkingdata.com/api/v1/logout?backurl=https://www.talkingdata.com/product-game.jsp"}})},removePartner:function(){Params.partnerID=""},removeGameServer:function(){Params.gameserverID=""},clearTestData:function(){var e=this,t=$("#dropdown_productList .dropselect h4").html();n.cleanHistory({type:"get",success:function(n){var r=_.template(a,{cleanHistory:n,canBeClearedProduct:t,Public:f.Public});e.popClearDailog(r)}})},popClearDailog:function(e){o.confirm({message:e,buttons:[{"#closeButton":function(){o.unblock()},"#clearDataBtn":function(){var e=Params.productID,t=confirm(f.Public.ClearTestData.tips);t&&n.cleanData({type:"get",data:{productId:e},success:function(e){e!=null&&e.productId>0&&($("#talkinggameProductList").removeAttr("state"),alert(f.Public.ClearTestData.clearedSuccessful),o.unblock(),Params.productID=e.productId,s.changeHashByParams())}})}}]})},getPlatformStr:function(e){var t='<% 		        	for(var i=0;i<selected.length;i++){						var platform = selected[i],iconName="";						if(platform == "1"){							iconName = "Android";						}else if(platform == "2"){							iconName = "IOS";						}else if(platform == "3"){							iconName = "win7";						}else if(platform == "4"){							iconName = "web";						}				%>					<img src="images/<%=iconName%>_icon.png" />			    <%}%>';return _.template(t,{selected:e})},platformListSlideUp:function(){$("#platformList .PlatformList").hide()},togglePlatformList:function(){var e=$("#platformList .PlatformList"),t=e.css("display");if(t=="none"){var n=Params.platformID;if(!n)$("#platformList input[type='checkbox']").attr("checked","checked");else{var r=n.split(",");_.each(r,function(e){$("#platformList input[value='"+e+"']").attr("checked","checked")})}e.show()}else e.hide()}});return l}),define("models/product/ProductModel",["backbone"],function(e){var t=e.Model.extend({idAttribute:"productId",urlRoot:"/game/v1/gamecenter/product"});return t}),define("models/debug/ProductDebug",["models/BaseModel"],function(e){var t=[{name:"fetchProductByProductId",url:"/v1/debug/fetchProductByProductId",type:"get"},{name:"fetchDebugLogInfo",url:"/v1/debug/fetchDebugLogInfo"},{name:"fetchDeviceList",url:"/v1/debug/fetchDeviceList"},{name:"fetchEventStatus",url:"/v1/debug/fetchEventStatus"},{name:"addNewDebugVersion",url:"/v1/debug/addNewDebugVersion"},{name:"fetchProductDebugList",url:"/v1/debug/fetchProductDebugList",type:"get"},{name:"closeDebug",url:"/v1/debug/closeDebug"},{name:"fetchProductDebug",url:"/v1/debug/fetchProductDebug"},{name:"fetchOriginalDebugStatus",url:"/v1/debug/fetchOriginalDebugStatus"}];return e.init(t)}),define("text!templates/product/createProduct.html",[],function(){return'<div class="addApp mauto">\r\n	<div class="max_title">\r\n		<div class="add_step l add_step1">\r\n			<span class="l Conduct" id="step01"><small></small></span>\r\n			<p class="l">\r\n				<strong><%=Product.CreateProduct.creatingGame%></strong>\r\n			</p>\r\n		</div>\r\n		<i class="add_app_arrow l" id="arrow01"></i>\r\n		<div class="add_step l add_step2">\r\n			<span class="l" id="step02"><small></small></span>\r\n			<p class="l">\r\n				<strong><%=Product.CreateProduct.selectPlatform%></strong>\r\n			</p>\r\n		</div>\r\n		<i class="add_app_arrow l" id="arrow02"></i>\r\n		<div class="add_step l add_step3">\r\n			<span class="l" id="step03"><small></small></span>\r\n			<p class="l">\r\n				<strong><%=Product.CreateProduct.toIntegrate%></strong>\r\n			</p>\r\n		</div>\r\n	</div>\r\n\r\n	<div id="stepPanels">\r\n        <div class="createProduct-prompt">调试过程中产生的数据不再会计入数据报表，只有当调试完毕完成创建后，您才能看到有数据的报表。</div>\r\n		<dl id="stepPanel01" class="Edit_box after add_step_con step_con1">\r\n			<dt class="l">\r\n                <h3><%=Product.CreateProduct.firstStep%></h3>\r\n				<input type="text" id="productNameInput" class="txtinput" value="<%=Product.CreateProduct.writeGameName%>">\r\n				<div class="add_step_con_select">\r\n					<select id="selectGameType">\r\n						<option value="-1"><%=Product.CreateProduct.gameType%></option>\r\n						<option value="18"><%=Product.CreateProduct.cardGame%></option>\r\n						<option value="1"><%=Product.CreateProduct.relaxationGame%></option>\r\n		    	  		<option value="2"><%=Product.CreateProduct.intelligenceGame%></option>\r\n		    	  		<option value="3"><%=Product.CreateProduct.rolePlayGame%></option>\r\n		    	  		<option value="4"><%=Product.CreateProduct.sportsGame%></option>\r\n		    	  		<option value="5"><%=Product.CreateProduct.desktopGame%></option>\r\n		    	  		<option value="6"><%=Product.CreateProduct.movementGame%></option>\r\n		    	  		<option value="7"><%=Product.CreateProduct.strategyGame%></option>\r\n		    	  		<option value="8"><%=Product.CreateProduct.simulationGame%></option>\r\n		    	  		<option value="9"><%=Product.CreateProduct.explorationGame%></option>\r\n		    	  		<option value="10"><%=Product.CreateProduct.pokerGame%></option>\r\n		    	  		<option value="11"><%=Product.CreateProduct.diceGame%></option>\r\n		    	  		<option value="12"><%=Product.CreateProduct.educationGame%></option>\r\n		    	  		<option value="13"><%=Product.CreateProduct.familyGame%></option>\r\n		    	  		<option value="14"><%=Product.CreateProduct.musicGame%></option>\r\n		    	  		<option value="15"><%=Product.CreateProduct.racingCarGame%></option>\r\n						<option value="16"><%=Product.CreateProduct.samllGame%></option>\r\n						<option value="17"><%=Product.CreateProduct.textGame%></option>\r\n						\r\n					</select>\r\n				</div>\r\n				<a id="createProductBtn" class="maxConfirm"><%=Product.CreateProduct.saveAndNext%></a>\r\n			</dt>\r\n			<dd class="l">\r\n				<div class="tips" id="step1Tips">\r\n				</div>\r\n			</dd>\r\n		</dl>\r\n\r\n		<dl id="stepPanel02" class="Edit_box after add_step_con step_con2 hide" style="display:none;">\r\n            \r\n			<dt class="l">\r\n                <h3><%=Product.CreateProduct.secondStep%></h3>\r\n                \r\n				<ol id="chooseDownLoadSDK">\r\n                    <li class="bg-grey"><span class="iOS-logo" data="iOS"  releaseDate="2014-8-6" releaseVersion="3.0.45">iOS logo</span><font>iOS</font></li>\r\n                    <li class="bg-grey"><span class="android-logo" data="Android" releaseDate="2014-7-10" releaseVersion="3.0.0">Android logo</span><font>Android</font></li>\r\n                    <li class="bg-grey"><span class="WP-logo" data="WPhone" releaseDate="2014-2-13" releaseVersion="1.0.0">WindowsPhone logo</span><font>WindowsPhone</font></li>\r\n                    <li class="bg-grey"><span class="PhoneGap-logo" data="PhoneGap" releaseDate="2014-2-13" releaseVersion="2.1.0">PhoneGap logo</span><font>PhoneGap</font></li>\r\n                    <li class="bg-grey"><span class="unity-logo" data="Unity3D" releaseDate="2014-8-6" releaseVersion="3.0.47">Unity3D logo</span><font>Unity3D</font></li>\r\n                    <li class="bg-grey"><span class="cocos-logo" data="Cocos2D-x" releaseDate="2014-8-6" releaseVersion="3.0.29">Cocos2D-x logo</span><font>Cocos2D-x </font></li>\r\n                    <li class="bg-grey"><span class="air-logo" data="Flash Air" releaseDate="2014-2-13" releaseVersion="2.1.0">Flash Air logo</span><font>Flash Air</font></li>\r\n                </ol>\r\n				<a class="maxConfirm" id="step2finishBtn"><%=Product.CreateProduct.saveAndNext%></a>\r\n			</dt>\r\n			<dd class="l" id="step2Tips">\r\n			</dd>\r\n		</dl>\r\n\r\n		<dl id="stepPanel03" class="Edit_box after add_step_con step_con3 hide">\r\n			<dt class="l">\r\n                <h3><%=Product.CreateProduct.thirdStep%></h3>\r\n                <div class="guide-prompt"><span>1</span><font>下载SDK并集成到您的游戏中</font></div>\r\n                <div class="download-sdk">\r\n                	\r\n                    <div class="logo"><span class="android-logo">logo</span><font>iOS</font></div>\r\n                    <div class="operate-download">\r\n                        <div class="sdk-download">\r\n                        	<%=Product.CreateProduct.sdkVersion%>:<sdk_version>3.0.45</sdk_version><br /><%=Product.CreateProduct.releaseTime%>：<sdk_date>2014-8-6</sdk_date>\r\n                        </div>\r\n                        <div class="word-online"><a href="/game/document/<%=currentLocale%>/index.jsp#DownloadSDK" class="bg-grey" target="_blank"><img src="images/icon-download-sdk.png" /><%=Product.CreateProduct.downloadSDK%></a></div>\r\n                    </div>\r\n                </div>\r\n                <div class="guide-prompt"><span>2</span><font>将AppID配置到SDK参数中</font></div>\r\n                <div class="content-step03">\r\n					<div class="game-title-type"><font data="productName">石头大战</font><span data="productType">动作游戏</span></div>\r\n                    <div class="id-link bg-grey">\r\n                    	<font>App ID：<label data="appId" ></label></font>\r\n<!--                     	<span>点击复制</span> -->\r\n                    </div>\r\n                </div>\r\n                <div class="guide-prompt"><span>3</span><font>完成SDK集成后请将游戏包安装到调试设备上，启动游戏并验证统计点。<br />您也可以点击“查看实时调试信息”进入到调试页面查看更详细的信息：</font></div>\r\n                <div class="result">\r\n                    <span id="debugFlag" class="wait" title=\'调试服务器正在等待您的游戏启动上传统计数据，一旦获得数据并通过验证，将提示“调试通过”;如数据有误需要修正，会提示“调试出错”.\'>\r\n                    	<strong class="_wait"><img src="images/loading.gif" width="20" /></strong><strong class="_wait">等待调试数据...</strong>\r\n                    	<font class="_wrong">调试出错</font>\r\n                    	<font class="_right">调试通过</font>\r\n                    	<em>调试正确与错误的图标</em>\r\n                    </span>\r\n                    <a href="" target="_blank" id="checkDebugInfo"><img src="images/icon-check.png" /><font>查看实时<br />调试信息</font></a>\r\n                </div>\r\n				<a class="maxConfirm" id="step3finishBtn" isFinish="false">请先通过调试再完成游戏创建</a>\r\n			</dt>\r\n			<dd class="l" id="step3Tips">\r\n			</dd>\r\n		</dl>\r\n	</div>\r\n</div>\r\n'}),define("text!templates/product/quickIntegrate.html",[],function(){return'<strong><%=Product.CreateProduct.quickIntegrate%></strong>\r\n<ul>\r\n    <h5><a href="/game/document/<%=currentLocale%>/index.jsp#QuickStart"  target="_blank">- <%=Product.CreateProduct.quickstart%></a></h5>\r\n    <li><a href="/game/document/<%=currentLocale%>/index.jsp#IosIntegrated"  target="_blank">- iOS</a></li>\r\n    <li><a href="/game/document/<%=currentLocale%>/index.jsp#UnityIntegrated"  target="_blank">- Unity 3D</a></li>\r\n    <li><a href="/game/document/<%=currentLocale%>/index.jsp#AndroidIntegrated"  target="_blank">- Android</a></li>\r\n    <li><a href="/game/document/<%=currentLocale%>/index.jsp#CocosIntegrated"  target="_blank">- Cocos2D-x</a></li>\r\n    <li><a href="/game/document/<%=currentLocale%>/index.jsp#WPIntegrated"  target="_blank">- WindowsPhone</a></li>\r\n    <li><a href="/game/document/<%=currentLocale%>/index.jsp#FlashIntegrated"  target="_blank">- Flash Air</a></li>\r\n    <li><a href="/game/document/<%=currentLocale%>/index.jsp#PhoneGapIntegrated"  target="_blank">- PhoneGap</a></li>\r\n</ul>'}),define("text!templates/product/quickIntegrateAndViewChart.html",[],function(){return'<div class="invite-title">\r\n	<img src="images/icon-mail.png" />邀请团队成员帮助完成SDK集成调试：\r\n</div>\r\n<div class="content-mail">\r\n	<textarea name="sendEmail" cols="" rows="" class="sendEmail">输入团队成员的邮箱，多个邮箱间以分号隔开</textarea>\r\n	<a href="javascript:void(0)" class="sendDebugMail bg-grey"><%=Product.CreateProduct.send%></a>\r\n</div>\r\n<div class="tips">\r\n	<strong><%=Product.CreateProduct.quickIntegrate%></strong>\r\n	<ul>\r\n		<h5><a href="/game/document/<%=currentLocale%>/index.jsp#QuickStart" target="_blank">- <%=Product.CreateProduct.quickstart%></a></h5>\r\n		<li><a href="/game/document/<%=currentLocale%>/index.jsp#IosIntegrated" target="_blank">- iOS</a></li>\r\n		<li><a href="/game/document/<%=currentLocale%>/index.jsp#UnityIntegrated" target="_blank">- Unity 3D</a></li>\r\n		<li><a href="/game/document/<%=currentLocale%>/index.jsp#AndroidIntegrated" target="_blank">- Android</a></li>\r\n		<li><a href="/game/document/<%=currentLocale%>/index.jsp#CocosIntegrated" target="_blank">- Cocos2D-x</a></li>\r\n		<li><a href="/game/document/<%=currentLocale%>/index.jsp#WPIntegrated" target="_blank">- WindowsPhone</a></li>\r\n		<li><a href="/game/document/<%=currentLocale%>/index.jsp#FlashIntegrated" target="_blank">- Flash Air</a></li>\r\n		<li><a href="/game/document/<%=currentLocale%>/index.jsp#PhoneGapIntegrated" target="_blank">- PhoneGap</a></li>\r\n	</ul>\r\n	<div class="preview">\r\n		<span><img src="images/icon-preview.png" />浏览报表</span>\r\n		<em><a class="stepToViewChart" href="" target="_blank">去浏览报表</a></em>\r\n	</div>\r\n</div>'}),define("views/product/CreateProductView",["backbone","models/player/NewPlayer","models/product/ProductModel","models/product/Product","models/analysisTools/ChartRemark","models/debug/ProductDebug","utils/ModelBox","utils/urlUtil","views/public/MenuView","text!templates/product/createProduct.html","text!templates/product/quickIntegrate.html","text!templates/product/quickIntegrateAndViewChart.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#talkinggameCreateProduct",events:{"focus #productNameInput":"clearInput","blur #productNameInput":"initializeInput","click #createProductBtn":"createProduct","click #step2finishBtn":"toIntegrate","click #stepPanel03 #refreshBtn":"refresh","click #chooseDownLoadSDK>.bg-grey":"chooseDownLoadSDK","focus .sendEmail":"clearText","blur .sendEmail":"initializeText","click #step3finishBtn":"finishIntegrate","click .sendDebugMail":"sendDebugMail"},initialize:function(){this.$el.undelegate(),this.productId=this.options.productId||-1,this.versionId=this.options.versionId||-1,this.version=this.options.version||"original",h.currentLocale=currentLocale,this.$el.html(_.template(f,h)),$("#step1Tips").html(_.template(l,h)),$("#step2Tips").html(_.template(c,h)),$("#step3Tips").html(_.template(c,h)),this.$el.find("#selectGameType").sSelect(),this.productId!=-1&&this.versionId&&this.toIntegrate(this.productId,this.version,this.versionId),this.render()},render:function(){return this},clearInput:function(e){var t=$(e.currentTarget).val();t==h.Product.CreateProduct.writeGameName?$(e.currentTarget).val(""):t==""&&$(e.currentTarget).val(h.Product.CreateProduct.writeGameName)},initializeInput:function(e){var t=$(e.currentTarget).val();t==""?$(e.currentTarget).val(h.Product.CreateProduct.writeGameName):r.isProductNameExist({data:"developerId="+Params.developerID+"&productName="+t,success:function(e){if(e){o.alert({message:h.Product.CreateProduct.productNameIsExist});return}}})},clearText:function(e){var t=$(e.currentTarget).val();t==h.Product.CreateProduct.enterEmailTips?$(e.currentTarget).val(""):t==""&&$(e.currentTarget).val(h.Product.CreateProduct.enterEmailTips)},initializeText:function(e){var t=$(e.currentTarget).val();t==""&&$(e.currentTarget).val(h.Product.CreateProduct.enterEmailTips)},createProduct:function(){var e=this,t=this.$el.find("#productNameInput"),r=t.val(),i=this.$el.find("#selectGameType").val();if(!r||r==h.Product.CreateProduct.writeGameName){o.alert({message:h.Product.CreateProduct.writeGameName});return}if(r.length>50){o.alert({message:h.Product.CreateProduct.productNameMore50char}),t.val("").focus();return}if(i==-1){o.alert({message:h.Product.CreateProduct.pleaseSelectGameType});return}var s=new n({productName:r,developerId:DeveloperBean.developerID,productype:i});o.block({message:h.Product.CreateProduct.nowCreating}),s.save({},{success:function(t){if(!t.get("sequencenumber")){o.alert({message:h.Product.CreateProduct.createProductFail});return}e.model=t,e.finishStep(1,e.generateParams),o.unblock(),$("#talkinggameProductList").removeAttr("state")}})},generateParams:function(e){Params.productID=e.model.get("productId"),Params.productRegistTime=e.model.get("registerTimeStr"),Params.platformID="",Params.startTime=e.setStartTime(e.model.get("registerTimeStr")),Params.endTime=e.setEndTime(),Params.displayDateTip="-7",Params.partnerID="",Params.gameserverID="",$(".stepToViewChart").attr("href","/game/pages/main.jsp#page/summary-index/"+u.parse2Str(Params))},generateParamsByDebug:function(e){Params.productID=e.debugModel.productId,Params.productRegistTime=e.debugModel.registerTimeStr,Params.platformID="",Params.startTime=e.setStartTime(e.debugModel.registerTimeStr),Params.endTime=e.setEndTime(),Params.displayDateTip="-7",Params.partnerID="",Params.gameserverID="",$(".stepToViewChart").attr("href","/game/pages/main.jsp#page/summary-index/"+u.parse2Str(Params))},setStartTime:function(e){var t=(new Date).add({days:-7}).toFormat("YYYY-MM-DD");Date.compare(e,t)==1&&(t=e);var n=parseInt(t.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"));return n},setEndTime:function(){var e=(new Date).toFormat("YYYY-MM-DD"),t=parseInt(e.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"));return t},finishStep:function(e,t){this.$el.find("#step0"+e).removeClass("Conduct").addClass("Complete"),this.$el.find("#arrow0"+e).addClass("Complete"),this.$el.find("#step0"+(e+1)).addClass("Conduct"),this.$el.find("#stepPanels>dl").hide(),this.$el.find("#stepPanel0"+(e+1)).show(),t&&t(this)},finishIntegrate:function(e){var t=$(e.currentTarget).attr("isFinish")||"false";t=="false"?o.alert({message:"请先通过调试再完成游戏创建!"}):s.closeDebug({data:{productId:this.productId,versionId:this.versionId,version:this.version,sequenceNumber:this.$el.find('label[data="appId"]').html()},success:function(e){e?location.hash="#productList":o.alert({message:"服务器忙，请稍后再试！"})}})},fetchDebugStatus:function(e){_currentDebugStatusObj&&clearInterval(_currentDebugStatusObj);var t=this;_currentDebugStatusObj=setInterval(function(){s.fetchProductDebug({data:{productId:t.productId,versionId:t.versionId,sequenceNumber:e},success:function(e){t.renderIntegratePage(e)}})},3e4)},renderIntegratePage:function(e){e&&e.debugStatus==0?($("#debugFlag").attr("class","wrong"),$("#debugFlag").attr("title","调试服务器已经收到您的游戏上传的数据，但存在调用错误，请点击'查看实时调试信息'了解详细错误并修正错误调用后重新提交数据，直到状态改变为'调试通过'。"),$("#debugFlag ._wait").hide(),$("#debugFlag ._right").hide(),$("#debugFlag ._wrong").show()):e&&e.debugStatus==1&&($("#debugFlag").attr("class","right"),$("#debugFlag").attr("title","调试服务器已收到调试数据并验证无误，您可以继续尝试未触发的事件以验证集成，或者点击'完成创建'结束游戏新建。"),$("#step3finishBtn").html("SDK集成完毕，点击完成游戏创建"),$("#step3finishBtn").attr("isFinish","true"),$("#debugFlag ._wait").hide(),$("#debugFlag ._right").show(),$("#debugFlag ._wrong").hide())},toIntegrate:function(e,t,n){var i=$("#chooseDownLoadSDK>li.on-choose").length;if(e&&n){var a=this;r.fetchOneProduct({data:{productId:e},success:function(r){a.debugModel=r,a.finishStep(1,a.generateParamsByDebug),s.fetchProductDebug({data:{productId:e,versionId:n},success:function(r){a.renderIntegratePage(r),a.$el.find('font[data="productName"]').html(a.debugModel.productName),a.$el.find('span[data="productType"]').html(a.debugModel.productypeName),a.$el.find('label[data="appId"]').html(a.debugModel.sequencenumber),$("#checkDebugInfo").attr("href","#debugProduct/"+u.encode(a.debugModel.productId.toString())+"/"+u.encode(t)),a.finishStep(2),a.productId=e||-1,a.versionId=n||-1,a.fetchDebugStatus(a.debugModel.sequencenumber)}})}})}else i>0?($(".download-sdk .logo>span").removeClass(),$(".download-sdk .logo>span").addClass(this.chooseSDKLogo),$(".download-sdk .logo>font").html(this.chooseSDKData),$(".sdk-download sdk_version").html(this.chooseSDKReleateVersion),$(".sdk-download sdk_date").html(this.chooseSDKReleateDate),this.$el.find('font[data="productName"]').html(this.model.get("productName")),this.$el.find('span[data="productType"]').html(this.model.get("productypeName")),this.$el.find('label[data="appId"]').html(this.model.get("sequencenumber")),$("#_debugVersionID").attr("data",this.model.get("debugVersionId")),$("#checkDebugInfo").attr("href","#debugProduct/"+u.encode(this.model.get("productId").toString())+"/"+u.encode("original")),this.finishStep(2),this.productId=this.model.get("productId")||-1,this.versionId=this.model.get("debugVersionId")||-1,this.fetchDebugStatus(this.model.get("sequencenumber"))):o.alert({message:h.Product.CreateProduct.pleaseSelectGamePlatform})},chooseDownLoadSDK:function(e){var t=$(e.currentTarget);t.siblings().removeClass("on-choose"),t.addClass("on-choose"),this.chooseSDKLogo=t.find("span").attr("class"),this.chooseSDKData=t.find("span").attr("data"),this.chooseSDKReleateDate=t.find("span").attr("releaseDate"),this.chooseSDKReleateVersion=t.find("span").attr("releaseVersion")},sendDebugMail:function(e){var t=$(e.currentTarget).siblings(".sendEmail").val()||"",n=this.checkEmails(t),i=this;if(n){var s=null;this.versionId!=-1&&i.debugModel?s=i.debugModel.sequencenumber:s=this.model.get("sequencenumber"),r.sendDebugEmail({data:{recipients:t,appkey:s,version:i.version,sender:User.username},success:function(e){e?o.alert({message:h.Product.CreateProduct.senderEmailSuccess}):o.alert({message:h.Product.CreateProduct.senderEmailFail})}})}},checkEmails:function(e){if(e==h.Product.CreateProduct.enterEmailTips||e=="")return o.alert({message:"请输入邮箱！"}),!1;if(this.getStringLen(e)>100)return alert("邮箱长度不能超过100个字符！"),!1;var t=e.split(/[;；]/);for(var n=0;n<t.length;n++){var r=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!r.test(t[n]))return o.alert({message:"邮箱格式不正确！"}),!1}return!0},getStringLen:function(e){var t,n;n=0;for(t=0;t<e.length;t++)e.charCodeAt(t)>=0&&e.charCodeAt(t)<=255?n+=1:n+=2;return n},refresh:function(){var e=this,n=(new Date).toFormat("YYMMDD"),r={productID:e.model.get("productId"),startTime:n,endTime:n,developerID:Params.developerID};t.fetchNewPlayerList({data:r,success:function(e){$("#stepPanel03 #newPlayerNum").html(_.sum(e))}}),t.fetchInstallList({data:r,success:function(e){$("#stepPanel03 #deviceInstallNum").html(_.sum(e))}})}});return p}),define("models/product/ProductType",[],function(){return[{id:"18",name:"卡牌游戏"},{id:"1",name:"休闲游戏"},{id:"2",name:"智力游戏"},{id:"3",name:"角色扮演"},{id:"4",name:"体育游戏"},{id:"5",name:"桌面游戏"},{id:"6",name:"动作游戏"},{id:"7",name:"策略游戏"},{id:"8",name:"模拟类"},{id:"9",name:"探险游戏"},{id:"10",name:"棋牌游戏"},{id:"11",name:"股子游戏"},{id:"12",name:"教育游戏"},{id:"13",name:"家庭游戏"},{id:"14",name:"音乐游戏"},{id:"15",name:"赛车游戏"},{id:"16",name:"小游戏"},{id:"17",name:"文字游戏"}]}),define("text!templates/product/edit.html",[],function(){return'<script type="text/javascript"> \r\n$(document).ready(function(){\r\n$(".game_title").click(function(){\r\n    $(".gameNameList").toggle();\r\n  });\r\n});\r\n</script>\r\n<div class="Pop_line">\r\n    <div id="con">\r\n        <ul id="tags">\r\n            <h4>\r\n             <em class="game_title" title="<%=Product.productName%>">游戏设定</em> \r\n             <!-- <img src="images/icon_triangle_down.png" /> -->\r\n<!--                     <ol class="gameNameList" style="display:none"> -->\r\n<!--                         <strong><img src="images/icon_triangle_up.png" /></strong> -->\r\n<!--                         <font>石头大战</font> -->\r\n<!--                         <font>石头大战</font> -->\r\n<!--                         <font>石头大战</font> -->\r\n<!--                         <font>游戏名游戏名</font> -->\r\n<!--                         <font>石头大战</font> -->\r\n<!--                         <font>石头大战</font> -->\r\n<!--                         <font>石头大战</font> -->\r\n<!--                     </ol> -->\r\n            </h4>\r\n            <li class=selectTag id="basicInfo"><A  href="javascript:void(0)">基础信息</A> </li>\r\n            <li id="currencyRate"><A href="javascript:void(0)">币种设定</A> </li>\r\n            <li id="otherSetting"><A  href="javascript:void(0)">其它设定</A> </li>\r\n             <% if(Product.isDelDisplay){%>\r\n	            <li id="gameDebug"><A  href="javascript:void(0)">游戏调试</A> </li>\r\n            <%}%>\r\n            <span><a href="javascript:void(0);" id="closeGameSetting">关闭</a></span>\r\n        </UL>\r\n    \r\n        <div id="tagContent">\r\n\r\n            <!-- 基本信息 -->\r\n            <div class="tagContent tagContent-box  selectTag" id="basicInfoDiv">\r\n                <ul class="EditPop-tag">\r\n		            <li>\r\n		                <label>App ID：</label><font><%=Product.sequencenumber%></font>\r\n		            </li>\r\n		            <li><label><%=i18n.Product.ProductItem.changeName%>：</label><input type="text" value="<%=Product.productName%>" class="textinput" /></b>\r\n		            </li>\r\n		            <li>\r\n		                <label><%=i18n.Product.ProductItem.gameType%>：</label>\r\n		                <select id="productTypeSelect" style="left:290px">\r\n		                    <% _.each(Product.typeList,function(obj){\r\n		                        var id = obj.id,selected=\'\';\r\n		                        if(Product.productype == id) selected=\'selected\';\r\n		                    %>\r\n		                        <option <%=selected%> value="<%=obj.id%>"><%=obj.name%></option>\r\n		                    <%});%>\r\n		                </select>\r\n		            </li>\r\n		            <li>\r\n		                <label><%=i18n.Product.ProductItem.gamePlatform%>：</label>\r\n		                <% for(var i=0;i<Product.platformList.length;i++){\r\n		                    var platform = Product.platformList[i],platformName;\r\n		                    if(platform == \'1\'){\r\n		                        platformName = \'Android\';\r\n		                    }else if(platform == \'2\'){\r\n		                        platformName = \'IOS\';\r\n		                    }else if(platform == \'3\'){\r\n		                        platformName = \'win7\';\r\n		                    }\r\n		                %>\r\n		                    <img src="images/<%=platformName%>.png">\r\n		                <%}%>\r\n		            </li>\r\n		            <li>\r\n		                <label><%=i18n.Product.ProductItem.gameStatus%>：</label><span>\r\n		                <% if(Product.platformList.length){%>\r\n		                    <%=i18n.Product.ProductItem.nomal%>\r\n		                <%}else{%>\r\n		                     <%=i18n.Product.ProductItem.notFinished%>\r\n		                <%}%>\r\n		                </span>\r\n		            </li>\r\n		            <li>\r\n		                <label><%=i18n.Product.ProductItem.createTime%>：</label><font><%=Product.registerTimeStr%></font>\r\n		            </li>\r\n		        </ul>\r\n            </div>\r\n\r\n            <!-- 币种汇率设置 -->\r\n             <div class="tagContent tagContent-box " id="currencyRateDiv"> \r\n                 <div class="currency-set-left">\r\n                     <h5>展示货币单位</h5>\r\n                     <div class="currency-select">\r\n                        <select id="currencyTypeSelect">\r\n                            <option value="CNY" selected>CNY(人民币)</option>\r\n                            <option value="USD">USD(美元)</option>\r\n                         </select>\r\n                         \r\n                    </div>\r\n                     <font>备注：<br />多币种收入数据将被转换成统一的展示货币单位来呈现数据。</font>\r\n                </div>\r\n                 <div class="currency-set-right">\r\n                     <h5>汇率设定</h5>\r\n                     <ul class="currency-ul">\r\n                     	<%if(currencyTypes.length == 0){%>\r\n                            此产品没有货币相关的数据....\r\n                        <%}else{\r\n                         _.each(currencyTypes,function(obj){\r\n                        %>\r\n                        <li><font>1 <%=obj.name%> = </font><input name=\'\' type="text" class="input-currency currency-rate-class" value=\'<%=obj.rate%>\' data=\'<%=obj.currencyId%>\'/><font class="rateSetting"></font> </li>\r\n                        <%});\r\n                         }%>\r\n                     </ul>\r\n                 </div>\r\n                 <div style="clear:both"></div>\r\n             </div>\r\n\r\n            <!-- 其他设置 -->\r\n            <div class="tagContent-level tagContent-box " id="otherSettingDiv">\r\n                <div class="grey-line">\r\n                	<div class="game-level">\r\n                        <strong>游戏最大等级</strong>\r\n                        <input id="maxLevelInput" value="<%=maxLevel%>" type="text" class="input-currency" /><strong>级</strong>\r\n                        <span>等级类图表将只显示此等级以内的等级数据</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <!-- 游戏调试 -->\r\n          <div class="tagContent tagContent-debug" id="gameDebugDiv">\r\n              <div style="display:block" id="gameDebugRecord">\r\n              	<div class="tagContent-box">\r\n					<div class="debug-explain">给要调试的游戏包提供全新的游戏版本，这样有助于我们帮您找到正在调试中的游戏，添加成功后别忘了让你的小伙伴帮你重新定制一个与新建版本一样版本的游戏包：</div>\r\n					<div class="choose-game">\r\n						<ul>\r\n							<li><span>游戏名称：</span><label><%=Product.productName%></label></li>\r\n							<li><span>游戏版本：</span><strong><input id="gameVersion" type="text" class="input-versions" /></strong></li>\r\n						</ul>\r\n						<div class="operate-add">\r\n							<a id="addNewDebugVersion" class="bg-grey-color">添加</a>\r\n						</div>\r\n						<div style="clear: both"></div>\r\n					</div>\r\n				<!-- 	<div class="debug-explain">以下是仍旧处于调试状态下的游戏包，您可以继续调试或者发送邮件，也可以关闭调试状态：</div> -->\r\n				<div class="debug-explain">以下是仍旧处于调试状态下的游戏包，您可以继续调试，也可以关闭调试状态：</div>\r\n				</div>\r\n				<div class="content-table">\r\n					<table width="100%" id="debugRecordsTable" border="0" cellspacing="0" cellpadding="0" class="table-debug">\r\n						<thead>\r\n							<tr>\r\n								<th scope="col" class="left-padding">游戏名称</th>\r\n								<th scope="col" width="100">游戏版本</th>\r\n								<th scope="col" width="80">调试状态</th>\r\n								<th scope="col" width="220">操作</th>\r\n							</tr>\r\n						</thead>\r\n						<tbody id="debugTalbeBody">\r\n							<%if(debugRecords.length == 0){%>\r\n								<tr>\r\n									<td colspan="4">\r\n										暂无数据...\r\n									</td>\r\n					           </tr>\r\n					        <%}else{_.each(debugRecords,function(o){%>\r\n								<tr>\r\n									<td class="left-padding"><%=Product.productName%></td>\r\n									<td class=\'_version\' data="<%=o.version%>" debugStatus="<%=o.debugStatus%>"><%=o.version=="original" ? "初始版本" : o.version%></td>\r\n									<td class="debugStatus"><%=o.debugStatusFlag%></td>\r\n									<td class="operate">\r\n										<%if(o.debugStatus==2){%>\r\n											<a data="<%=o.versionId%>" versionData="<%=o.version%>" target="_blank" class="_debugPage">调试页面</a>\r\n										<%}else{%>\r\n										<%if(o.version=="original"){%>\r\n											<a data="<%=o.versionId%>" versionData="<%=o.version%>" class=\'continueDebug\' target="_blank">继续集成</a>\r\n										<%}%>\r\n<!-- 										<a data="<%=o.versionId%>" versionData="<%=o.version%>" class=\'continueDebug\' target="_blank">继续集成</a> -->\r\n										<a data="<%=o.versionId%>" versionData="<%=o.version%>" target="_blank" class="_debugPage">调试页面</a>\r\n										<%if(o.version!="original"){%>\r\n											<a data="<%=o.versionId%>" versionData="<%=o.version%>" class="sendEmailAgain">重发邮件</a>\r\n										<%}%>\r\n										<a data="<%=o.versionId%>" versionData="<%=o.version%>" class="_closeDebug">关闭调试</a>\r\n										<%}%>\r\n									</td>\r\n								</tr>\r\n					         <%});}%>\r\n						</tbody>\r\n					</table>\r\n				</div>\r\n              </div>  \r\n              <div style="display:none;" id="onceAgainSendEmail">\r\n                  <div class="mail-address">\r\n                      <span>输入邮箱地址：</span>\r\n                      <input id="emailsString" type="text" class="input-versions">\r\n                      <div class="operate">\r\n                      	<a id="sendEmailAgainBtn" class="send">发送求助邮件</a>\r\n                      	<a id="cancelSendEmail" class="cancel bg-grey-color">取消</a>\r\n                      </div>\r\n                  </div>\r\n               </div>\r\n              <div style="clear:both"></div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <div class="opeDiv operate-edit-box">\r\n            <% if(Product.isDelDisplay){%>\r\n                <a class="l Cancel delete" id="deleteProduct"><%=i18n.Product.ProductItem.deleteGame%></a>\r\n	            <a class="timecolse r Confirm"><%=i18n.Product.ProductItem.saveAndClose%></a>\r\n            <%}%>\r\n        </div>\r\n</div>'}),define("text!templates/product/delete.html",[],function(){return'<div class="Pop_line">\r\n	<div class="timetop">\r\n    	<b class="l"><%=Product.ProductItem.editGame%></b>\r\n    </div>\r\n	<div class="Poptxt">\r\n    	<p class="Prompt"><%=Product.ProductItem.warningAboutDeleteGame%></p>\r\n        <div class="opeDiv after">\r\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/product/productItem.html",[],function(){return'<td class="border_r_none game-title">\r\n    <strong style="float:left; font-weight:normal;">\r\n	    <% if(!curProCreator){%>\r\n		    <img src="images/Authorize-a.png" align="absmiddle"/>\r\n		<%}else{%>\r\n			&nbsp;\r\n		<%}%>\r\n	</strong>\r\n    <a class="toViewChart left" title="<%=productName%>"><%=productName%></a>\r\n    \r\n    <a class="edit"></a>\r\n</td>\r\n<td class="border_l_none border_r_none">\r\n	<% for(var i=0;i<platformList.length;i++){\r\n			var platform = platformList[i],platformName=\'\';\r\n			if(platform == \'1\'){\r\n				platformName = \'Android\';\r\n			}else if(platform == \'2\'){\r\n				platformName = \'IOS\';\r\n			}else if(platform == \'3\'){\r\n				platformName = \'win7\';\r\n			}\r\n	%>\r\n		<a class="platform" data="<%=platform%>"><img src="images/<%=platformName%>.png"></a>\r\n	<%}%>\r\n	&nbsp;\r\n</td>\r\n<td class="border_l_none border_r_none"><b><%=showTotalInstall%></b><small><font><%=GameCommon.today%></font><%=showTodayInstall%></small></td>\r\n<td class="border_l_none border_r_none"><b><%=showTotalRegisterNum%></b><small><font><%=GameCommon.today%></font><%=showTodayRegisterNum%></small></td>\r\n<td class="border_l_none border_r_none"><b><%=showTotalStartupNum%></b><small><font><%=GameCommon.today%></font><%=showTodayStartupNum%></small></td>\r\n<td class="border_l_none border_r_none"><b><font><%=showIncomeCurrency%></font><%=showTotalChargeSum%></b><small><font><%=GameCommon.today%></font><%=showTodayChargeSum%></small></td>\r\n<td class="border_l_none"><a class="toViewChart" data=""><img src="images/state.png" width="34" height="34"></a></td>\r\n<!-- <td><a class="edit">编辑</a><a class="delete">删除</a></td> -->\r\n'}),define("text!templates/product/currencyList.html",[],function(){return"<%if(currencyTypes.length == 0){%>\r\n	此产品没有货币相关的数据....\r\n<%}else{\r\n _.each(currencyTypes,function(obj){\r\n%>\r\n<li><font>1 <%=obj.name%> = </font><input name='' type=\"text\" class=\"input-currency currency-rate-class\" value='<%=obj.rate%>' data='<%=obj.currencyId%>'/><font class=\"rateSetting\"></font> </li>\r\n<%});\r\n }%>"}),define("text!templates/product/gameDebugDiv.html",[],function(){return'<%if(debugRecords.length == 0){%>\r\n	<tr>\r\n		<td colspan="4">\r\n			暂无数据...\r\n		</td>\r\n	        </tr>\r\n	     <%}else{_.each(debugRecords,function(o){%>\r\n	<tr>\r\n		<td class="left-padding"><%=Product.productName%></td>\r\n		<td class=\'_version\' data="<%=o.version%>" debugStatus="<%=o.debugStatus%>"><%=o.version=="original" ? "初始版本" : o.version%></td>\r\n		<td class="debugStatus"><%=o.debugStatusFlag%></td>\r\n		<td class="operate">\r\n			<%if(o.debugStatus==2){%>\r\n				<a data="<%=o.versionId%>" versionData="<%=o.version%>" target="_blank" class="_debugPage">调试页面</a>\r\n			<%}else{%>\r\n			<%if(o.version=="original"){%>\r\n				<a data="<%=o.versionId%>" versionData="<%=o.version%>" class=\'continueDebug\' target="_blank">继续集成</a>\r\n			<%}%>\r\n			<a data="<%=o.versionId%>" versionData="<%=o.version%>" target="_blank" class="_debugPage">调试页面</a>\r\n			<%if(o.version!="original"){%>\r\n				<a data="<%=o.versionId%>" versionData="<%=o.version%>" class="sendEmailAgain">重发邮件</a>\r\n			<%}%>\r\n			<a data="<%=o.versionId%>" versionData="<%=o.version%>" class="_closeDebug">关闭调试</a>\r\n			<%}%>\r\n		</td>\r\n	</tr>\r\n<%});}%>'}),define("text!templates/product/originalDebugTip.html",[],function(){return'<div class="EditPop_top timetop">\r\n    <b class="l">调试信息</b>\r\n</div>\r\n<div class="Poptxt">\r\n    <ul class="EditPop ChartNotes_Pop">\r\n		<li style="font-size:16px;">\r\n			游戏尚未完成完成创建，报表不会有数据\r\n		</li>\r\n			<h5>游戏未完成创建，我们需要您通过游戏SDK集成的调试验证后，游戏才可以正常统计数据。您可以关闭窗口预览报表，也可以继续游戏的创建流程。</h5>\r\n	</ul>\r\n     <div class="opeDiv after product_opeDiv">\r\n         <a id="closeAndViewChart" class="r Cancel">关闭窗口预览报表</a>\r\n         <a id="continueDebug" class="timecolse r Confirm">继续完成游戏创建</a>\r\n     </div>\r\n </div>'}),function(){function f(e,t){e=String(e);while(e.length<t)e="0"+e;return e}function d(e,t){Date.prototype[e]===undefined&&(Date.prototype[e]=t)}var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i={su:0,sun:0,sunday:0,mo:1,mon:1,monday:1,tu:2,tue:2,tuesday:2,we:3,wed:3,wednesday:3,th:4,thu:4,thursday:4,fr:5,fri:5,friday:5,sa:6,sat:6,saturday:6},s=t.concat(e),o=["su","sun","sunday","mo","mon","monday","tu","tue","tuesday","we","wed","wednesday","th","thu","thursday","fr","fri","friday","sa","sat","saturday"],u={jan:0,january:0,feb:1,february:1,mar:2,march:2,apr:3,april:3,may:4,jun:5,june:5,jul:6,july:6,aug:7,august:7,sep:8,september:8,oct:9,october:9,nov:10,november:10,dec:11,december:11},a=[31,28,31,30,31,30,31,31,30,31,30,31],l=function(e){return e.match(/^(\d+)$/)?!0:!1},c=function(e,t,n,r){for(var i=r;i>=n;i--){var s=e.substring(t,t+i);if(s.length<n)return null;if(l(s))return s}return null},h=Date.parse,p=function(e,t){e+="",t+="";var n=0,r=0,i="",u="",a="",f,l,h=new Date,p=h.getYear(),d=h.getMonth()+1,v=1,m=0,g=0,y=0,b="";while(r<t.length){i=t.charAt(r),u="";while(t.charAt(r)===i&&r<t.length)u+=t.charAt(r++);if(u==="yyyy"||u==="yy"||u==="y"){u==="yyyy"&&(f=4,l=4),u==="yy"&&(f=2,l=2),u==="y"&&(f=2,l=4),p=c(e,n,f,l);if(p===null)return NaN;n+=p.length,p.length===2&&(p>70?p=1900+(p-0):p=2e3+(p-0))}else if(u==="MMM"||u==="NNN"){d=0;for(var w=0;w<s.length;w++){var E=s[w];if(e.substring(n,n+E.length).toLowerCase()===E.toLowerCase())if(u==="MMM"||u==="NNN"&&w>11){d=w+1,d>12&&(d-=12),n+=E.length;break}}if(d<1||d>12)return NaN}else if(u==="EE"||u==="E")for(var S=0;S<o.length;S++){var x=o[S];if(e.substring(n,n+x.length).toLowerCase()===x.toLowerCase()){n+=x.length;break}}else if(u==="MM"||u==="M"){d=c(e,n,u.length,2);if(d===null||d<1||d>12)return NaN;n+=d.length}else if(u==="dd"||u==="d"){v=c(e,n,u.length,2);if(v===null||v<1||v>31)return NaN;n+=v.length}else if(u==="hh"||u==="h"){m=c(e,n,u.length,2);if(m===null||m<1||m>12)return NaN;n+=m.length}else if(u==="HH"||u==="H"){m=c(e,n,u.length,2);if(m===null||m<0||m>23)return NaN;n+=m.length}else if(u==="KK"||u==="K"){m=c(e,n,u.length,2);if(m===null||m<0||m>11)return NaN;n+=m.length}else if(u==="kk"||u==="k"){m=c(e,n,u.length,2);if(m===null||m<1||m>24)return NaN;n+=m.length,m--}else if(u==="mm"||u==="m"){g=c(e,n,u.length,2);if(g===null||g<0||g>59)return NaN;n+=g.length}else if(u==="ss"||u==="s"){y=c(e,n,u.length,2);if(y===null||y<0||y>59)return NaN;n+=y.length}else if(u==="a"){if(e.substring(n,n+2).toLowerCase()==="am")b="AM";else{if(e.substring(n,n+2).toLowerCase()!=="pm")return NaN;b="PM"}n+=2}else{if(e.substring(n,n+u.length)!==u)return NaN;n+=u.length}}if(n!==e.length)return NaN;if(d===2)if(p%4===0&&p%100!==0||p%400===0){if(v>29)return NaN}else if(v>28)return NaN;if(d===4||d===6||d===9||d===11)if(v>30)return NaN;m<12&&b==="PM"?m=m-0+12:m>11&&b==="AM"&&(m-=12);var T=new Date(p,d-1,v,m,g,y);return T.getTime()};Date.parse=function(e,t){if(t)return p(e,t);var n=h(e),r=0,i;return isNaN(n)&&(i=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(e))&&(i[8]!=="Z"&&(r=+i[10]*60+ +i[11],i[9]==="+"&&(r=0-r)),i[7]=i[7]||"000",n=Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5]+r,+i[6],+i[7].substr(0,3))),n},Date.today=function(){return(new Date).clearTime()},Date.UTCtoday=function(){return(new Date).clearUTCTime()},Date.tomorrow=function(){return Date.today().add({days:1})},Date.UTCtomorrow=function(){return Date.UTCtoday().add({days:1})},Date.yesterday=function(){return Date.today().add({days:-1})},Date.UTCyesterday=function(){return Date.UTCtoday().add({days:-1})},Date.validateDay=function(e,t,n){var r=new Date(t,n,e);return r.getFullYear()===t&&r.getMonth()===n&&r.getDate()===e},Date.validateYear=function(e){return e>=0&&e<=9999},Date.validateSecond=function(e){return e>=0&&e<60},Date.validateMonth=function(e){return e>=0&&e<12},Date.validateMinute=function(e){return e>=0&&e<60},Date.validateMillisecond=function(e){return e>=0&&e<1e3},Date.validateHour=function(e){return e>=0&&e<24},Date.compare=function(e,t){return e.valueOf()<t.valueOf()?-1:e.valueOf()>t.valueOf()?1:0},Date.equals=function(e,t){return e.valueOf()===t.valueOf()},Date.getDayNumberFromName=function(e){return i[e.toLowerCase()]},Date.getMonthNumberFromName=function(e){return u[e.toLowerCase()]},Date.isLeapYear=function(e){return(new Date(e,1,29)).getDate()===29},Date.getDaysInMonth=function(e,t){return t===1?Date.isLeapYear(e)?29:28:a[t]},d("getMonthAbbr",function(){return e[this.getMonth()]}),d("getMonthName",function(){return t[this.getMonth()]}),d("getUTCOffset",function(){var e=f(Math.abs(this.getTimezoneOffset()/.6),4);return this.getTimezoneOffset()>0&&(e="-"+e),e}),d("toCLFString",function(){return f(this.getDate(),2)+"/"+this.getMonthAbbr()+"/"+this.getFullYear()+":"+f(this.getHours(),2)+":"+f(this.getMinutes(),2)+":"+f(this.getSeconds(),2)+" "+this.getUTCOffset()}),d("toYMD",function(e){return e=typeof e=="undefined"?"-":e,this.getFullYear()+e+f(this.getMonth()+1,2)+e+f(this.getDate(),2)}),d("toDBString",function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1,2)+"-"+f(this.getUTCDate(),2)+" "+f(this.getUTCHours(),2)+":"+f(this.getUTCMinutes(),2)+":"+f(this.getUTCSeconds(),2)}),d("clearTime",function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this}),d("clearUTCTime",function(){return this.setUTCHours(0),this.setUTCMinutes(0),this.setUTCSeconds(0),this.setUTCMilliseconds(0),this}),d("add",function(e){return e.milliseconds!==undefined&&this.setMilliseconds(this.getMilliseconds()+e.milliseconds),e.seconds!==undefined&&this.setSeconds(this.getSeconds()+e.seconds),e.minutes!==undefined&&this.setMinutes(this.getMinutes()+e.minutes),e.hours!==undefined&&this.setHours(this.getHours()+e.hours),e.days!==undefined&&this.setDate(this.getDate()+e.days),e.weeks!==undefined&&this.setDate(this.getDate()+e.weeks*7),e.months!==undefined&&this.setMonth(this.getMonth()+e.months),e.years!==undefined&&this.setFullYear(this.getFullYear()+e.years),this}),d("addMilliseconds",function(e){return this.add({milliseconds:e})}),d("addSeconds",function(e){return this.add({seconds:e})}),d("addMinutes",function(e){return this.add({minutes:e})}),d("addHours",function(e){return this.add({hours:e})}),d("addDays",function(e){return this.add({days:e})}),d("addWeeks",function(e){return this.add({days:e*7})}),d("addMonths",function(e){return this.add({months:e})}),d("addYears",function(e){return this.add({years:e})}),d("setTimeToNow",function(){var e=new Date;this.setMilliseconds(e.getMilliseconds()),this.setSeconds(e.getSeconds()),this.setMinutes(e.getMinutes()),this.setHours(e.getHours())}),d("clone",function(){return new Date(this.valueOf())}),d("between",function(e,t){return this.valueOf()>=e.valueOf()&&this.valueOf()<=t.valueOf()}),d("compareTo",function(e){return Date.compare(this,e)}),d("equals",function(e){return Date.equals(this,e)}),d("isAfter",function(e){return e=e?e:new Date,this.compareTo(e)>0}),d("isBefore",function(e){return e=e?e:new Date,this.compareTo(e)<0}),d("getDaysBetween",function(e){return(e.clone().valueOf()-this.valueOf())/864e5|0}),d("getHoursBetween",function(e){return(e.clone().valueOf()-this.valueOf())/36e5|0}),d("getMinutesBetween",function(e){return(e.clone().valueOf()-this.valueOf())/6e4|0}),d("getSecondsBetween",function(e){return(e.clone().valueOf()-this.valueOf())/1e3|0}),d("getMillisecondsBetween",function(e){return e.clone().valueOf()-this.valueOf()|0}),d("getOrdinalNumber",function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1}),d("toFormat",function(e){return v(e,m(this))}),d("toUTCFormat",function(e){return v(e,g(this))});var v=function(e,t){var n=[e],r,i,s,o=function(e,t){var r=0,i=n.length,s,o,u,a=[];for(;r<i;r++)if(typeof n[r]=="string"){u=n[r].split(e);for(s=0,o=u.length-1;s<o;s++)a.push(u[s]),a.push([t]);a.push(u[o])}else a.push(n[r]);n=a};for(r in t)o(r,t[r]);s="";for(r=0,i=n.length;r<i;r++)s+=typeof n[r]=="string"?n[r]:n[r][0];return n.join("")},m=function(i){var s=i.getHours()%12?i.getHours()%12:12;return{YYYY:i.getFullYear(),YY:String(i.getFullYear()).slice(-2),MMMM:t[i.getMonth()],MMM:e[i.getMonth()],MM:f(i.getMonth()+1,2),MI:f(i.getMinutes(),2),M:i.getMonth()+1,DDDD:r[i.getDay()],DDD:n[i.getDay()],DD:f(i.getDate(),2),D:i.getDate(),HH24:f(i.getHours(),2),HH:f(s,2),H:s,SS:f(i.getSeconds(),2),PP:i.getHours()>=12?"PM":"AM",P:i.getHours()>=12?"pm":"am",LL:f(i.getMilliseconds(),3)}},g=function(i){var s=i.getUTCHours()%12?i.getUTCHours()%12:12;return{YYYY:i.getUTCFullYear(),YY:String(i.getUTCFullYear()).slice(-2),MMMM:t[i.getUTCMonth()],MMM:e[i.getUTCMonth()],MM:f(i.getUTCMonth()+1,2),MI:f(i.getUTCMinutes(),2),M:i.getUTCMonth()+1,DDDD:r[i.getUTCDay()],DDD:n[i.getUTCDay()],DD:f(i.getUTCDate(),2),D:i.getUTCDate(),HH24:f(i.getUTCHours(),2),HH:f(s,2),H:s,SS:f(i.getUTCSeconds(),2),PP:i.getUTCHours()>=12?"PM":"AM",P:i.getUTCHours()>=12?"pm":"am",LL:f(i.getUTCMilliseconds(),3)}}}(),define("utils/date-utils",function(){}),define("views/product/ProductItemView",["backbone","models/product/ProductType","models/product/Product","models/analysisTools/ChartRemark","models/debug/ProductDebug","views/public/MenuView","utils/ModelBox","utils/urlUtil","utils/RegexUtil","utils/CurrencyUtil","utils/dataTableUtil","text!templates/product/edit.html","text!templates/product/delete.html","text!templates/product/productItem.html","text!templates/product/currencyList.html","text!templates/product/gameDebugDiv.html","text!templates/product/originalDebugTip.html","i18n!nls/gameI18N","jquery.select","utils/date-utils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=e.View.extend({tagName:"tr",events:{"click .toViewChart":"toViewChart","click .delete":"deleteProduct","click .edit":"showProduct","click a.platform":"toViewChart"},initialize:function(){this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this),this.$preProdcutName=""},render:function(){var e=this.model.toJSON();return e.Product=g.Product,e.GameCommon=g.GameCommon,e.showTotalInstall=a.formatDigit(e.totalInstallNum),e.showTodayInstall=a.formatDigit(e.todayInstallNum),e.showTotalRegisterNum=a.formatDigit(e.totalRegisterNum),e.showTodayRegisterNum=a.formatDigit(e.todayRegisterNum),e.showTotalStartupNum=a.formatDigit(e.totalStartupNum),e.showTodayStartupNum=a.formatDigit(e.todayStartupNum),e.showTotalChargeSum=a.formatMoneyDigit(e.totalChargeSum),e.showTodayChargeSum=a.formatMoneyDigit(e.todayChargeSum),e.showIncomeCurrency="<small class='"+e.currencyDisplay+"'></small>",this.$el.html(_.template(p,e)),this},toViewChart:function(e){var t=$(e.currentTarget),i=t.attr("data");$("#topBanner .toptitle").html(""),Params.productID=this.model.get("productId"),Params.productName=this.model.get("productName"),Params.productRegistTime=this.model.get("registerTimeStr"),Params.platformID=i||"",Params.startTime=this.setStartTime(this.model.get("registerTimeStr")),Params.endTime=this.setEndTime(),Params.displayDateTip="-7",Params.partnerID="",Params.gameserverID="",CurrentRemarkDates=null;var o=this;r.fetchRemarkList({type:"get",data:{productid:Params.productID},success:function(e){CurrentRemarkDates=_.pluck(e,"remarkDate"),n.fetchMenuInfoByPId({type:"get",data:{productID:Params.productID},success:function(e){Params.displayCurrency=e.displayCurrency,new s({menuInfo:e.menuInfo,isCreator:e.isCreator,pid:Params.productID}),o.redirect()}})}})},originalVersionTip:function(){i.fetchOriginalDebugStatus({data:{productId:Params.productID},success:function(e){e&&e.debugStatus!=2&&o.confirm({message:m,buttons:[{"#continueDebug":function(){location.hash="#continueIntegrateDebug/"+u.encode(Params.productID)+"/"+u.encode("original")+"/"+u.encode(e.versionId.toString()),o.unblock()},"#closeAndViewChart":function(){o.unblock()}}]})}})},extendParams:function(e){var t=this;Params.productID=this.model.get("productId"),Params.productRegistTime=this.model.get("registerTimeStr"),e&&(Params.platformID=e),Params.startTime==undefined&&(Params.startTime=this.setStartTime(this.model.get("registerTimeStr"))),Params.endTime==undefined&&(Params.endTime=this.setEndTime()),n.getPrivilegeInfoForSelectProduct({data:{productId:Params.productID,developerId:Params.developerID,platformId:Params.platformID,loginUserDeveloperID:Params.loginUserDeveloperID},success:function(e){e&&(Params.gameserverID=e.gameserverids,Params.partnerID=e.partnerids),t.redirect()}})},redirect:function(e){var t=$('#menu-banner a[url-data != ""]:first').attr("url-data"),n="#page/"+t+"/";t&&(u.changeHashByParams(n,Params),e&&e())},setStartTime:function(e){var t=(new Date).add({days:-7}).toFormat("YYYY-MM-DD");Date.compare(e,t)==1&&(t=e);var n=parseInt(t.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"));return n},setEndTime:function(){var e=(new Date).toFormat("YYYY-MM-DD"),t=parseInt(e.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"));return t},deleteProduct:function(){var e=this;o.confirm({message:h,buttons:[{".Confirm":function(){e.model.destroy(),o.unblock()},".Cancel":function(){o.unblock()}}]})},showProduct:function(){var e=this,r=e.model.toJSON();r.typeList=t,n.gameSetting({type:"get",data:{productId:r.productId},success:function(t){r.isDelDisplay=t.isDelDisplay,_.each(t.productDebugs,function(e){e.debugStatus==-1?e.debugStatusFlag="等待数据":e.debugStatus==0?e.debugStatusFlag="调试出错":e.debugStatus==1?e.debugStatusFlag="调试完成":e.debugStatus==2&&(e.debugStatusFlag="正常统计")});var n={Product:r,maxLevel:t.maxLevel,i18n:g,currencyTypes:t.currencyTypeList,debugRecords:t.productDebugs};e.$preProdcutName=r.productName,e.popDailog(_.template(c,n),t.maxLevel,r.productId,t.selectedCurrencyType),$("#currencyTypeSelect").find("option[value='"+t.selectedCurrencyType+"']").attr("selected",!0),l.dataTable({$el:$("#debugRecordsTable"),iLength:10,sort:!1}),$("#debugRecordsTable_length").hide(),e.changeRateSettingDisplay(),$("#productTypeSelect").sSelect(),$("#currencyTypeSelect").sSelect()}})},changeRateSettingDisplay:function(){var e=$("#currencyTypeSelect").val();$(".rateSetting").each(function(){$(this).html(e)})},popDailog:function(e,t,r,i){var s=this;o.confirm({message:e,buttons:[{".Confirm":function(){var e=$(this).parentsUntil(".EditPop").find('input[type="text"]').val(),t=$(this).parentsUntil(".EditPop").find("select").val();if(!e){alert("请填写产品名称");return}if(e.length>50){alert("产品名称最多50个字符");return}s.$preProdcutName!=e?n.isProductNameExist({data:"developerId="+Params.developerID+"&productName="+e,success:function(n){if(n){alert(g.Product.CreateProduct.productNameIsExist);return}s.model.set({productName:e,productype:t}),s.model.save()}}):(s.model.set({productName:e,productype:t}),s.model.save());var i=$("#maxLevelInput").val();if(!a.isNum(i)){alert("等级只能为数字!");return}if(i>1e3){alert("等级不能超过1000级!");return}var o=$("#currencyTypeSelect").val(),u=[];$(".currency-ul li input").each(function(e){var t={};t.productId=r,t.sourceCurrencyId=$(this).attr("data"),t.targetCurrencyName=o,t.rate=$(this).val(),u.push(t)}),n.updateCurrencyRate({type:"post",data:u,success:function(e){n.insertOrUpdateCustomMaxLevel({type:"get",data:{productId:r,maxLevel:i},success:function(e){location.reload()}})}})},".Cancel":function(){o.unblock()},".delete":function(){confirm(g.Product.ProductItem.deleteProductConfirm)&&s.model.destroy()},"#closeGameSetting":function(){o.unblock()},"#tags li":function(e){$("#tags li").each(function(){$(this).removeClass("selectTag")}),$(e.currentTarget).addClass("selectTag");var t=$(e.currentTarget).attr("id");$("#tagContent>div").each(function(){$(this).hide()}),$("#"+t+"Div").show(),t=="basicInfo"?$("#deleteProduct").show():$("#deleteProduct").hide()},"#currencyTypeSelect":{event:"change",callback:function(e){var t=$(e.currentTarget).val();n.fetchCurrencyRate({type:"get",data:{productId:r,currencyType:t},success:function(e){$(".currency-ul").html(_.template(d,{currencyTypes:e})),s.changeRateSettingDisplay()}})}},"#addNewDebugVersion":function(){s.addNewDebugVersion()},"._closeDebug":function(e){var t=$(e.currentTarget).attr("data")||-1,n=$(e.currentTarget).attr("versionData")||"original";s.goToCloseDebug(t,n,e)},"._debugPage":function(e){var t=$(e.currentTarget).attr("data")||-1,n=$(e.currentTarget).attr("versionData")||"original";s.goToDebugPage(t,n,e)},".continueDebug":function(e){var t=$(e.currentTarget).attr("data")||-1,n=$(e.currentTarget).attr("versionData")||"original";s.goToContinueDebug(t,n,e)},".sendEmailAgain":function(e){$("#gameDebugRecord").hide(),$("#onceAgainSendEmail").show(),$("#sendEmailAgainBtn").attr("versionData",$(e.currentTarget).attr("versionData")||"original")},"#cancelSendEmail":function(){$("#emailsString").val(""),$("#gameDebugRecord").show(),$("#onceAgainSendEmail").hide()},"#sendEmailAgainBtn":function(e){s.sendDebugMail($(e.currentTarget).attr("versionData")||"original")}}]})},sendDebugMail:function(e){var t=$("#emailsString").val()||"",r=this.checkEmails(t),i=this;r&&n.sendDebugEmail({data:{recipients:t,appkey:i.model.get("sequencenumber"),version:e,sender:User.username},success:function(e){e?alert(g.Product.CreateProduct.senderEmailSuccess):alert(g.Product.CreateProduct.senderEmailFail)}})},checkEmails:function(e){if(e==g.Product.CreateProduct.enterEmailTips||e=="")return o.alert({message:"请输入邮箱！"}),!1;if(this.getStringLen(e)>100)return alert("邮箱长度不能超过100个字符！"),!1;var t=e.split(/[;；]/);for(var n=0;n<t.length;n++){var r=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!r.test(t[n]))return alert("邮箱格式不正确！"),!1}return!0},goToContinueDebug:function(e,t,n){var r=this.model.get("productId").toString();$(n.currentTarget).attr("href","#continueIntegrateDebug/"+u.encode(r)+"/"+u.encode(t)+"/"+u.encode(e))},goToDebugPage:function(e,t,n){var r=this.model.get("productId").toString();$(n.currentTarget).attr("href","#debugProduct/"+u.encode(r)+"/"+u.encode(t))},addNewDebugVersion:function(){var e=$("#gameVersion").val()||"";if(e==""){alert("游戏版本不能为空！");return}if(!/^\d+(\.*\d*)*$/.test(e)){alert("游戏版本格式不准确，只能是数字和'.'号！");return}if(this.getStringLen(e)>20){alert("游戏版本长度不能超过20个字符！");return}var t=!1;$("#debugTalbeBody>tr").find("td._version").each(function(n){var r=$(this).attr("data");r==e&&(t=!0)});var n=$("#debugTalbeBody>tr").find("td._version[data='original']");if(n&&n.length>0){var r=n.attr("debugStatus");if(r!=2){alert("初始版本尚未关闭调试，不能添加新的调试版本！");return}}if(t){alert("该版本已存在！");return}var s=this.model.get("productId"),o=this.model.get("sequencenumber"),u=this;i.addNewDebugVersion({data:{productId:s,version:e,sequenceNumber:o},success:function(e){e?(u.fetchProductDebugList(s),alert("添加成功！")):alert("服务器忙，请稍后再试！")}})},getStringLen:function(e){var t,n;n=0;for(t=0;t<e.length;t++)e.charCodeAt(t)>=0&&e.charCodeAt(t)<=255?n+=1:n+=2;return n},fetchProductDebugList:function(e){var t=this,n=t.model.toJSON();i.fetchProductDebugList({data:{productId:e},success:function(e){_.each(e,function(e){e.debugStatus==-1?e.debugStatusFlag="等待数据":e.debugStatus==0?e.debugStatusFlag="调试出错":e.debugStatus==1?e.debugStatusFlag="调试通过":e.debugStatus==2&&(e.debugStatusFlag="正常统计")});var t={debugRecords:e,Product:n};$("#debugTalbeBody").html(_.template(v,t)),e&&(l.dataTable({$el:$("#debugRecordsTable"),iLength:10,sort:!1}),$("#debugRecordsTable_length").hide())}})},goToCloseDebug:function(e,t,n){var r=this.model.get("productId"),s=this.model.get("sequencenumber"),o=this;i.fetchProductDebug({data:{productId:r,versionId:e},success:function(i){i&&i.debugStatus==-1?alert("等待调试数据，不能关闭！"):i&&i.debugStatus==0?alert("调试出错，不能关闭！"):i&&i.debugStatus==1?o.closeDebug(r,e,t,s,n):i&&i.debugStatus==2&&alert("调试已关闭！")}})},closeDebug:function(e,t,n,r,s){i.closeDebug({data:{productId:e,versionId:t,version:n,sequenceNumber:r},success:function(e){e?($(s.currentTarget).parent().siblings(".debugStatus").html("正常统计"),$(s.currentTarget).siblings(".continueDebug").hide(),$(s.currentTarget).siblings(".sendEmailAgain").hide(),$(s.currentTarget).hide(),alert("关闭成功！")):alert("服务器忙，请稍后再试！")}})}});return y}),define("collections/ProductList",["backbone","models/product/ProductModel"],function(e,t){var n=e.Collection.extend({model:t,url:"/game/v1/gamecenter/productList"});return n}),define("text!templates/product/productTable.html",[],function(){return'<div class="product_title">\r\n	<table id="producttitle-table" border="0" cellspacing="0" cellpadding="0" class="table_product_title" width="100%">\r\n		<tbody>\r\n			<tr>\r\n				<td width="16%" style="text-align:right"><strong><%=GameCommon.total%></strong></td>\r\n				<td width="10%">&nbsp;</td>\r\n				<td width="16%">\r\n					<b id="totalInstallNum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayInstallNum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="16%">\r\n					<b id="totalRegisterNum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayRegisterNum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="16%">\r\n					<b id="totalStartupNum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayStartupNum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="16%">\r\n					<b id="totalChargeSum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayChargeSum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="10%" style="overflow:visible">\r\n					<a id="productCenterIndicator" class="Cancel relative minCancel" style="z-index:9;width:13px; margin:0 auto;\'">\r\n						<font class="indicator">?</font>\r\n					</a>\r\n				</td>\r\n			</tr>\r\n		</tbody>\r\n	</table>\r\n</div>\r\n<div class="table_style_product" >\r\n	<table id="productlist-table" border="0" cellspacing="0" cellpadding="0" width="100%">\r\n		<thead>\r\n			<tr>\r\n				<th width="16%" class="border_r_none game-title-th"><%= Product.ProductList.appName%></th>\r\n				<th width="10%" class="border_l_none border_r_none"></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%= Product.ProductList.equipmentinstallation%></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%=GameCommon.player%></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%= Product.ProductList.gameTimes%></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%= GameCommon.income%></th>\r\n				<th width="10%" class="border_l_none"><%= Product.ProductList.report%></th>\r\n				<!-- <th width="10%">操作</th> -->\r\n			</tr>\r\n		</thead>\r\n		<tbody>\r\n			<tr class="login_tr">\r\n				<td colspan="8" class="borno">\r\n					<div class="login">\r\n						<img src="images/loading.gif" height="25px"></img> <br>\r\n					<%= GameCommon.loadingData%>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n		</tbody>\r\n	</table>\r\n</div>'}),define("views/product/ProductListView",["backbone","views/product/ProductItemView","collections/ProductList","utils/RegexUtil","utils/CurrencyUtil","text!templates/product/productTable.html","text!templates/public/indicator.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({el:"#product-table",events:{"click #productCenterIndicator":"toggleIndicator"},initialize:function(){this.$el.html(_.template(s,u)),this.$productList=$("#productlist-table > tbody"),this.ProductList=new n,this.ProductList.bind("reset",this.addAll,this),this.ProductList.fetch(),this.render()},render:function(){return this},addAll:function(){this.renderTotalTable(this.ProductList.toJSON()),this.$productList.html(""),this.ProductList.each(this.addOne,this)},addOne:function(e){var n=new t({model:e,collection:this.ProductList});this.$productList.append(n.render().el)},toggleIndicator:function(){var e=$("#productCenterIndicator").children("div"),t=!!e.length;if(t)e.toggle();else{var n=u.Indicator.productCenterIndicator,r=_.template(o,{list:n,title:u.Indicator.DataIndicatorExplain.explain});$("#productCenterIndicator").append(r)}},renderTotalTable:function(e){var t=_.sum(_.pluck(e,"totalInstallNum")),n=_.sum(_.pluck(e,"todayInstallNum")),i=_.sum(_.pluck(e,"totalChargeSum")),s=_.sum(_.pluck(e,"todayChargeSum")),o=_.sum(_.pluck(e,"totalRegisterNum")),u=_.sum(_.pluck(e,"todayRegisterNum")),a=_.sum(_.pluck(e,"totalStartupNum")),f=_.sum(_.pluck(e,"todayStartupNum")),l="CNY";e!=null&&e.length>0&&(l=e[0].currencyDisplay),$("#totalInstallNum").html(r.formatDigit(t)),$("#todayInstallNum").html(r.formatDigit(n)),$("#totalChargeSum").html("<font><small class='"+l+"'></small></font>"+r.formatMoneyDigit(i)),$("#todayChargeSum").html(r.formatMoneyDigit(s)),$("#totalRegisterNum").html(r.formatDigit(o)),$("#todayRegisterNum").html(r.formatDigit(u)),$("#totalStartupNum").html(r.formatDigit(a)),$("#todayStartupNum").html(r.formatDigit(f))}});return a}),define("models/developer/Developer",["models/BaseModel"],function(e){var t=[{name:"fetchDeveloperById",url:"/v1/gamecenter/developer",type:"get"},{name:"updateDeveloper",url:"/v1/gamecenter/developer"},{name:"updatePwdOfDeveloper",url:"/v1/gamecenter/devPwd",type:"get"},{name:"sendRecommendEmail",url:"/v1/gamecenter/sendRecommendEmail",type:"get"},{name:"checkEmail",url:"/v1/permission/checkEmail",type:"get"},{name:"checkAuthorizeByEmail",url:"/v1/permission/checkAuthorizeByEmail",type:"get"},{name:"createAccount",url:"/v1/permission/createAccount"},{name:"updateAccount",url:"/v1/permission/updateAccount"},{name:"fetchAccountList",url:"/v1/permission/fetchAccountList",type:"get"},{name:"fetchAccountByDeveloperId",url:"/v1/permission/getAccount",type:"get"},{name:"deleteAccount",url:"/v1/permission/deleteAccount",type:"get"},{name:"create",url:"/v1/developer/create",type:"post"}];return e.init(t)}),define("text!templates/permission/list.html",[],function(){return'<%if(demoViewFlag!=null){%>\r\n	<div class="product-demo mauto">\r\n<%}else{%>\r\n	<div class="product mauto">\r\n<%}%>\r\n	<div class="textbox">\r\n		<div class="after table_product_top">\r\n			<a href="#createAccount" class="maxConfirmbut l"><font class="add"><%=i18n.Permission.AccountList.addNewAccount%></font></a>\r\n			<div class="search"><input type="text" placeholder="<%=i18n.Permission.AccountList.filterAccount%>" class="filter-account"/></div>\r\n		</div>\r\n		<div class="sub-account_box">  \r\n			<table border="0" cellspacing="0" cellpadding="0" class="table_style_channel" width="100%">\r\n				<thead>\r\n					<tr>\r\n						<th width="25%" class="left"><%=i18n.GameCommon.account%></th>\r\n						<th width="10%"><%=i18n.Permission.AccountList.role%></th>\r\n						<th width="15%"><%=i18n.Permission.AccountList.createDate%></th>\r\n						<th width="25%"><%=i18n.Permission.AccountList.operator%></th>\r\n						<th width="15%"><%=i18n.Permission.AccountList.operatorIp%></th>\r\n						<th width="10%"><%=i18n.GameCommon.operate%></th>\r\n					</tr>\r\n				</thead>\r\n				<tbody id="accountList">\r\n					<tr class="login_tr">\r\n						<td colspan="6">\r\n							<div class="login">\r\n								<img src="images/loading.gif" height="25px"></img> <br>\r\n							<%=i18n.GameCommon.loadingData%>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>'}),define("text!templates/permission/item.html",[],function(){return'<%\r\n	_.each(list,function(o){\r\n%>		\r\n		<tr>\r\n			<td class="left"><%=o.email%></td>\r\n			<td>\r\n				<%= o.devId == curLoginUserId ? Permission.AccountList.creator : Permission.AccountList.user %>\r\n			</td>\r\n			<td><%= o.createTime%></td>\r\n			<td><%= operatorEmail%></td>\r\n			<td><%= o.operatorIp%></td>\r\n			<td>\r\n				<% if(o.devId == curLoginUserId ){%>\r\n				-- --\r\n				<%}else{%>\r\n					<a class="edit" data="<%= o.devId%>"><%=Permission.AccountList.edit%></a><a class="delete" data="<%= o.devId%>"><%=GameCommon.delete%></a>\r\n				<%}%>\r\n			</td>\r\n		</tr>\r\n<%\r\n	});\r\n%>'}),define("views/permission/AccountListView",["backbone","models/developer/Developer","utils/ModelBox","text!templates/permission/list.html","text!templates/permission/item.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s){var o=e.View.extend({el:"#talkinggameAccountCenter",events:{"click .add":"addAccount","click .edit":"toEdit","click .delete":"deleteFn","keyup .filter-account":"filterAccount"},initialize:function(){this.$el.undelegate(),this.$el.html(_.template(r,{i18n:s,demoViewFlag:demoViewFlag})),this.$table=this.$el.find("#accountList"),this.render()},render:function(){return this.fetchAccountList(),this},addAccount:function(){},fetchAccountList:function(){var e=this;t.fetchAccountList({data:"developerId="+Params.developerID,success:function(t){t&&t.length?e.$table.html(_.template(i,{list:t,Permission:s.Permission,GameCommon:s.GameCommon,curLoginUserId:Params.developerID,operatorEmail:User.username})):e.$table.html('<td class="noData" colspan="6">'+s.GameCommon.noData+"</td>")}})},deleteFn:function(e){var n=$(e.currentTarget),r=n.attr("data");confirm(s.GameCommon.confirmDelete)&&t.deleteAccount({data:{oId:Params.developerID,tId:r},success:function(e){e&&n.parent().parent("tr").remove()}})},toEdit:function(e){var t=$(e.currentTarget),n=t.attr("data");location.hash="#updateAccount/"+n},filterAccount:function(e){var t=$(e.currentTarget).val();$("#accountList tr td:first-child").each(function(){$(this).text().search(new RegExp(t,"i"))<0?$(this).parent().fadeOut():$(this).parent().show()})}});return o}),define("text!templates/permission/edit.html",[],function(){return'<%if(demoViewFlag!=null){%>\r\n	<div class="product-demo mauto">\r\n<%}else{%>\r\n	<div class="product mauto">\r\n<%}%>\r\n	<div class="textbox">\r\n        <div class="after table_product_top Competence_top" id="accountTitle">\r\n           <%=update?i18n.Permission.CreateAccount.editAccount:i18n.Permission.CreateAccount.addAccount%>\r\n        </div>\r\n		<div class="Editor Competence">\r\n        	<div class="Editor_li">\r\n            	<div class="Editor_li_con" style="display:<%=update? \'none\' : \'block\'%>">\r\n                	<b><%=i18n.Permission.CreateAccount.loginInfo%></b>\r\n                    <div class="Editor_input l">\r\n                    	<input type="text" id="email" placeholder="<%=update? \'\' : i18n.Permission.CreateAccount.emailAddress%>"/>\r\n<!--                     	2013.11.21  产品中心  决定   创建子账户 时  不用输入密码，子账户创建成功后  发送激活邮件 -->\r\n<!--                     	<input type="<%=update? \'hidden\' : \'password\'%>" id="password" placeholder="<%=i18n.Permission.CreateAccount.password4to16%>"/> -->\r\n                        <label id="tip"></label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div id="operatePanel">\r\n            	<div class="Editor_li after">\r\n                	<div class="Editor_li_con">\r\n                    	<b class="l"><%=i18n.Permission.CreateAccount.appAuthorization%></b>\r\n                    	<div class="appaut l">\r\n                         	 <dl>\r\n                            	<dt><%=i18n.Permission.CreateAccount.allGames%></dt>\r\n                                <dd>\r\n                                	<div id="leftAppList"></div>\r\n                                </dd>\r\n                            </dl>\r\n                            <span>\r\n                            	<a id="addProductBtn">&nbsp;&nbsp;&nbsp;</a>\r\n                                <a id="rmProductBtn">&nbsp;&nbsp;&nbsp;</a>\r\n                            </span>\r\n                            <dl>\r\n                            	<dt><%=i18n.Permission.CreateAccount.authorizedGame%></dt>\r\n                                <dd>\r\n                                	<div id="rightAppList">\r\n                                	</div>\r\n                                </dd>\r\n                            </dl>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="Editor_li"  id="dataFilter" style="display:none;">\r\n                    <div class="Editor_li_con">\r\n                        <b class="l"><%=i18n.Permission.CreateAccount.dataFilter%></b>\r\n                        <div class="Editor_li_con_txt" style="width:88%;">\r\n                            <small><%=i18n.Permission.CreateAccount.dataFilterIntroduction%></small>\r\n                            <ul class="Editor_Channel"  id="dataFilterList">\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div id="permisstion">\r\n                	<div class="Editor_li" id="manageDiv">\r\n                    	<div class="Editor_li_con">\r\n                        	<b><%=i18n.Permission.CreateAccount.administrationAuthority%></b>\r\n                        	<span>\r\n                        		<input type="checkbox" id="manageAllBtn" value="-1"><label><%=i18n.GameCommon.checkAll%></label>\r\n                        	</span>\r\n                        </div>\r\n                		<ul class="Accoun after" id="manageFnDiv">\r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="ProductSetting">\r\n                                <label><%=i18n.Permission.CreateAccount.general%></label>\r\n                            </li>\r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="AnalysisSetting">\r\n                                <label><%=i18n.Permission.CreateAccount.analysisSetting%></label>\r\n                            </li>\r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="ManagePartner">\r\n                                <label><%=i18n.GameCommon.channelManage%></label>\r\n                            </li>\r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="ManageCustomEvent">\r\n                                <label><%=i18n.CustomEvent.EventManagement.eventManage%></label>\r\n                            </li> \r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="DataDebug">\r\n                                <label><%=i18n.Permission.CreateAccount.dataDebug%></label>\r\n                            </li>\r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="createDataDebug">\r\n                                <label><%=i18n.Permission.CreateAccount.createDataDebug%></label>\r\n                            </li>\r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="TaskAndLevelsManage">\r\n                                <label><%=i18n.GameCommon.taskAndMissionManage%></label>\r\n                            </li>\r\n                            <li>\r\n                                <input type="checkbox" class="checkbox" value="ConsumeManagement">\r\n                                <label><%=i18n.GameCommon.consumePointManage%></label>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class="Editor_li" id="pageDiv">\r\n                    	<div class="Editor_li_con">\r\n                        	<b><%=i18n.Permission.CreateAccount.pagesFunction%></b>\r\n                        	<span>\r\n                        		<input type="checkbox" id="pageAllBtn" value="-1"><label><%=i18n.GameCommon.checkAll%></label>\r\n                        	</span>\r\n                        </div>\r\n                        <div class="Editor_left_con after" id="pageFnDiv">\r\n                    		<ul class="webFunction">\r\n                                <li>\r\n                                	<input type="checkbox" class="checkbox" value="-1" name="firstClass">\r\n                                	<label><%=i18n.GameCommon.overview%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="Summarize">\r\n                                        <label><%=i18n.GameCommon.gameOverview%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" value="SummarizePay" class="checkbox">\r\n                                        <label><%=i18n.GameCommon.dailyReport%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                	<input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                	<label><%=i18n.GameCommon.gamePlayer%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="NewPlayer">\r\n                                        <label><%=i18n.GameCommon.newIncreased%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="ActivePlayer">\r\n                                        <label><%=i18n.GameCommon.activing%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="KeepPlayer">\r\n                                        <label><%=i18n.GameCommon.retain%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="NewPlayConversion">\r\n                                        <label><%=i18n.GameCommon.transform%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="Loss">\r\n                                        <label><%=i18n.GameCommon.loss%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="Behavior">\r\n                                        <label><%=i18n.GameCommon.gameHabit%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="Device">\r\n                                        <label><%=i18n.GameCommon.equipments%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" class="checkbox" value="Online">\r\n                                    <label><%=i18n.GameCommon.onlineAnalysis%></label>\r\n                                </li>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.levelAnalytics%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="LevelInfo">\r\n                                        <label><%=i18n.GameCommon.levelDetail%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="LevelAnalysis">\r\n                                        <label><%=i18n.GameCommon.levelDistribute%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="PlayerProgress">\r\n                                        <label><%=i18n.GameCommon.newPlayerProgress%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.taskAnalysis%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="TasksAndLevels">\r\n                                        <label><%=i18n.GameCommon.taskAndMission%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.incomeAnalysis%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="IncomeData">\r\n                                        <label><%=i18n.GameCommon.incomeData%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="PayPermeate">\r\n                                        <label><%=i18n.GameCommon.payPermeate%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="NewPlayerValue">\r\n                                        <label><%=i18n.Revenue.NewPlayerValue.newPlayerValue%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="PayHabit">\r\n                                        <label><%=i18n.GameCommon.payHabit%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.dummyConsume%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="VirtualCoin">\r\n                                        <label><%=i18n.GameCommon.dummyCoin%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="ConsumeAnalysis">\r\n                                        <label><%=i18n.GameCommon.consumeHobby%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="ConsumePoint">\r\n                                        <label><%=i18n.GameCommon.consumePoint%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" class="checkbox" value="WhaleUser">\r\n                                    <label><%=i18n.GameCommon.whaleUser%></label>\r\n                                </li>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.expandChannel%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="PartnerData">\r\n                                        <label><%=i18n.GameCommon.channelData%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.custionEvent%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="CustomEventData">\r\n                                        <label><%=i18n.GameCommon.eventData%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.analyticsTools%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="Notification">\r\n                                        <label><%=i18n.GameCommon.warningNotify%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="ChartRemark">\r\n                                        <label><%=i18n.AnalysisTools.ChartRemark.menu%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                            <ul class="webFunction">\r\n                                <li>\r\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\r\n                                    <label><%=i18n.GameCommon.pushcampaigns%></label>\r\n                                </li>\r\n                                <ol>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="Campaigns">\r\n                                        <label><%=i18n.GameCommon.pushcampaigns%></label>\r\n                                    </li>\r\n                                    <li>\r\n                                        <input type="checkbox" class="checkbox" value="pushBindconfigure">\r\n                                        <label><%=i18n.GameCommon.pushBindconfigure%></label>\r\n                                    </li>\r\n                                </ol>\r\n                            </ul>\r\n                    	</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        	<div class="Editor_li after Editor_li_left_con">\r\n                <a class="Confirm l" id="commitBtn"><%=i18n.Permission.CreateAccount.commit%></a><a class="Cancel l" id="cancelBtn"><%=i18n.GameCommon.cancel%></a>\r\n            </div>\r\n        </div>\r\n	</div>\r\n</div>\r\n'}),define("text!templates/permission/partnerAndGameServerDataPannel.html",[],function(){return'<div class="Channel_App after" style="display:block;" id="div_{{curId}}">\r\n	<p>\r\n		<b>\r\n			{{Permission.CreateAccount.enabledPartner}}\r\n			<input type="text" class="filter-search" placeholder="搜索渠道"/>\r\n			<a class="hover" id="partnerList_{{curId}}_noFilter">{{Permission.CreateAccount.noFilterPartner}}</a>\r\n		</b>\r\n		<span id="partnerList_{{curId}}">\r\n			{{#partnerList}}\r\n				<a title=\'{{value}}\' id=\'a_{{item}}\' data=\'{{item}}\' class="{{isPartnerChoosed}}">{{value}}</a>\r\n			{{/partnerList}}\r\n		</span>\r\n	</p>\r\n	<p>\r\n		<b>\r\n			{{Permission.CreateAccount.enabledGameServer}}\r\n			<input type="text" class="filter-search" placeholder="搜索区服"/>\r\n			<a class="hover"  id="gameserverList_{{curId}}_noFilter">{{Permission.CreateAccount.noFilterGameServer}}</a>\r\n		</b>\r\n		<span id="gameserverList_{{curId}}">\r\n			{{#gameserverList}}\r\n				<a title=\'{{value}}\' id=\'a_{{item}}\' data=\'{{item}}\' class="{{isGameServerChoosed}}">{{value}}</a>\r\n			{{/gameserverList}}\r\n		</span>\r\n	</p>\r\n</div>'}),function(e){var t=0;e.fn.placeholder=function(){return this.bind({focus:function(){e(this).parent().addClass("placeholder-focus")},blur:function(){e(this).parent().removeClass("placeholder-focus")},"keyup input":function(){e(this).parent().toggleClass("placeholder-changed",this.value!=="")}}).each(function(){var n=e(this);this.id||(this.id="ph_"+t++),e('<span class="placeholderWrap"><label for="'+this.id+'">'+n.attr("placeholder")+"</label></span>").insertAfter(n).append(n),n.attr("placeholder","").keyup()})},e(function(){e("input[placeholder]").placeholder()})}(jQuery),define("placeholder",function(){}),define("views/permission/CreateAccountView",["backbone","mustache","utils/RegexUtil","utils/ModelBox","models/product/Product","models/developer/Developer","models/select/Select","text!templates/permission/edit.html","text!templates/permission/partnerAndGameServerDataPannel.html","i18n!nls/gameI18N","placeholder"],function(Backbone,Mustache,RegexUtil,ModelBox,Product,Developer,Select,editTempl,PartnerAndGameServerDataPannelTmpl,i18n){var view=Backbone.View.extend({el:"#talkinggameCreateAccount",events:{"blur #email":"checkEmail","click #commitBtn":"commit","click #cancelBtn":"cancel","click #addProductBtn":"addProduct","click #rmProductBtn":"removeProduct","click #leftAppList>a":"chooseLeftApp","dblclick #leftAppList>a":"dbClickLeftApp","click #rightAppList>a":"chooseRightApp","dblclick #rightAppList>a":"dbClickRightApp","click #pageAllBtn":"toggleSelectAllPages","click #manageAllBtn":"toggleSelectAllManagePages",'click input[name="firstClass"]':"toggleSelectFirstClassPage","click ul.webFunction>ol>li>input":"selectSubPage","click #pageDiv input":"selectPageInput","click #manageDiv input":"selectManageInput","click #dataFilterList input":"switchVisibleScope",'click span[id^="partnerList"] > a':"choosePartner",'click span[id^="gameserverList"] > a':"chooseGameserver","keyup .filter-search":"filterPartnerOrGameServer"},initialize:function(){this.$el.undelegate(),this.developerId=this.options.developerId,this.$el.html(_.template(editTempl,{update:!!this.developerId,i18n:i18n,demoViewFlag:demoViewFlag})),this.developerId&&this.fetchAccountByDeveloperId(this.developerId),this.requestProductList(this.handleData),$("input[placeholder]").placeholder(),this.$manageFnDiv=this.$el.find("#manageFnDiv"),this.$pageFnDiv=this.$el.find("#pageFnDiv"),this.$pageAllBtn=this.$el.find("#pageAllBtn"),this.$manageAllBtn=this.$el.find("#manageAllBtn"),this.$manageInputs=this.$el.find("#manageDiv input"),this.$pageInputs=this.$el.find("#pageDiv input"),this.$leftAppList=this.$el.find("#leftAppList"),this.$rightAppList=this.$el.find("#rightAppList"),this.$email=this.$el.find("#email"),this.$password=this.$el.find("#password"),this.$tip=this.$el.find("#tip"),this.render()},render:function(){return this},cancel:function(){location.hash="#accountCenter"},fetchAccountByDeveloperId:function(e){var t=this;Developer.fetchAccountByDeveloperId({data:"developerId="+e,success:function(e){t.renderPage(e)}})},requestProductList:function(e){var t=this;Product.fetchProductAndPlatforms({type:"get",data:{isDataCenter:!1},success:function(n){n&&n.length&&(t.productList=n,e.apply(t,arguments))}})},renderPage:function(e){var t=this;if(e){this.$el.find("#accountTitle").append("-- "+e.email);var n=e.privilegeBeans;n&&this.requestProductList(function(e){var r=_.filter(e,function(e){return _.indexOf(_.map(n,"productid"),e.productid)!=-1}),i=t.getProductListStr(r);t.$rightAppList.html(i);var s=t.getProductListDataFilter(r,n);t.showProductDataFilter(s)});var r=e.permisstionList;r&&r.length&&_.each(r,function(e){var n=t.$el.find('#permisstion input[value="'+e+'"]');n.attr("checked","checked"),t.checkSelect(n),t.selectPageInput(),t.selectManageInput()})}},getProductListDataFilter:function(list,productList){var filterProList=_.each(list,function(p){_.each(productList,function(o){p.productid==o.productid&&(p.privilegeConfig=eval("("+o.privilegeInfo+")"),p.visibleScope=eval("("+o.visibleScope+")"))})});return filterProList},showProductDataFilter:function(e){var t=this;e!=null&&e.length>0&&($("#dataFilter").show(),_.each(e,function(e){if(e.productid){var n=$('<li id="li_'+e.productid+'"><strong>'+e.productName+"</strong></li>"),r=$("<p/>"),i=$('<input value="all" radiodata="'+e.productid+'" name="radio_'+e.productid+'" class="radio" type="radio"><label>'+i18n.Permission.CreateAccount.viewAll+"</label></input>"),s=$('<input value="part" radiodata="'+e.productid+'" name="radio_'+e.productid+'" class="radio" type="radio"><label>'+i18n.Permission.CreateAccount.viewPart+"</label></input>");e.visibleScope==1?i.attr("checked",!0):(s.attr("checked",!0),t.showPartnerAndGameServer(e.productid,e.privilegeConfig)),n.append(r.append(i).append(s)),$("#dataFilterList").append(n)}}))},getProductListStr:function(e){return _.template('<%_.each(list,function(o){%>						<a data="<%=o.productid%>"><%=o.productName%></a>					<%});%>',{list:e})},handleData:function(e){var t=this.getProductListStr(e);this.$leftAppList.html(t)},checkEmail:function(e){var t=$(e.currentTarget),n=t.val();if(!n){this.tip(i18n.GameCommon.emailNotEmpty);return}if(!RegexUtil.isEmail(n)){this.tip(i18n.GameCommon.emailTypeWrong);return}var r=this;Developer.checkAuthorizeByEmail({data:"email="+n,success:function(e){parseInt(e)>0?confirm(i18n.Permission.CreateAccount.tips)?location.hash="#updateAccount/"+parseInt(e):$("#email").val(""):parseInt(e)<0&&(ModelBox.alert({message:i18n.Permission.CreateAccount.tips1}),$("#email").val(""))}}),Developer.checkEmail({data:"email="+n,success:function(e){e?r.isEmailExist=!0:r.isEmailExist=!1}})},tip:function(e){this.$tip.hide().show().html(e).fadeOut(3e3)},commit:function(){var e=this._getRequestData(),t,n;if(this.developerId)t="updateAccount",n=i18n.GameCommon.update;else{t="createAccount",n=i18n.PartnerExtention.PartnerItem.create,console.log("developer.privilegeConfig[0].productid:"+e.privilegeConfig[0].productid);if(!e.email){console.log("developer.email:"+e.email),ModelBox.alert({message:i18n.GameCommon.emailHasWrong});return}if(!RegexUtil.isEmail(e.email)){ModelBox.alert({message:i18n.GameCommon.emailTypeWrong});return}if(e.privilegeConfig[0].productid==0){ModelBox.alert({message:i18n.GameCommon.productListEmpty});return}}if(e.menuInfo==""||e.menuInfo==null){ModelBox.alert({message:i18n.GameCommon.selectAuthPage});return}ModelBox.block({message:i18n.GameCommon.inProcessOf+n});var r=this;Developer[t]({data:e,success:function(e){if(e){var i=n+i18n.GameCommon.updatePermission;t=="createAccount"&&!r.isEmailExist&&(i=i18n.Permission.CreateAccount.createSubAccountMsg),ModelBox.alert({message:i},function(){$("#talkinggameAccountCenter").removeAttr("state"),location.hash="#accountCenter"})}else ModelBox.alert({message:n+i18n.GameCommon.fail})}})},_getRequestData:function(){var e=$("#permisstion input:checked"),t=_.without(_.map(e,function(e){return $(e).val()}),"-1"),n={developerid:this.developerId||Params.developerID,userrole:"SubDeveloper",email:this.$email.val(),password:this.$password.val(),privilegeConfig:null,menuInfo:null};return n.privilegeConfig=this._getPrivilegeConfig(),n.menuInfo=t.join("^"),n},_getPrivilegeConfig:function(){var e=this._getChoosedProduct(),t=this;if(e.length!=undefined&&e.length>0){var n=new Array;for(var r=0;r<e.length;r++){var i=null,s=e[r].productid,o=$("input:checked[name='radio_"+s+"']").val();e[r].platformList.length>0?i=$.map(e[r].platformList,function(e){var n={productid:s,platformid:e,privilege_info:{partnerids:"",gameserverids:""},visible_scope:1};return o=="part"&&(n.visible_scope=0,n.privilege_info.partnerids=t.getChoosedValue("partnerList_",s),n.privilege_info.gameserverids=t.getChoosedValue("gameserverList_",s)),n}):o=="part"?i=[{productid:s,platformid:0,privilege_info:{partnerids:"",gameserverids:""},visible_scope:0}]:i=[{productid:s,platformid:0,privilege_info:{partnerids:"",gameserverids:""},visible_scope:1}],$.each(i,function(e,t){n.push(t)})}return n}var i=[{productid:0,platformid:0,privilege_info:{partnerids:"",gameserverids:""},visible_scope:1}];return i},getChoosedValue:function(e,t){var n=$("#"+e+t+">a.hover");if(n.length===0)return"";var r=_.map(n,function(e){return $(e).attr("data")});return r.join(",")},_getChoosedProduct:function(){var e=this.$rightAppList.find("a");if(e.length===0)return{};var t=_.map(e,function(e){return $(e).attr("data")}),n=_.filter(this.productList,function(e){return _.indexOf(t,e.productid+"")!=-1});return n},addProduct:function(){var e=this.$leftAppList.find("a.choosed");if(e.length){e.removeClass("choosed");var t,n=this.$rightAppList.find("a");if(n.length===0)t=e;else{var r=_.map(n,function(e){return $(e).attr("data")});t=_.filter(e,function(e){return _.indexOf(r,$(e).attr("data"))==-1})}var i=_.map(t,function(e){return"<a data="+$(e).attr("data")+">"+$(e).text()+"</a>"});this.$rightAppList.append(i.join("\n")),this.addProductToDataFilter(t)}},removeProduct:function(){var e=this.$rightAppList.find("a.choosed"),t=_.map(e,function(e){return $(e).attr("data")});e.remove(),this.removeProductFromDataFilter(t)},displayOrHideDataFilter:function(e){if(e)$("#dataFilter").show();else{var t=this.$rightAppList.find("a").length;t<=0&&($("#dataFilter").hide(),$("#dataFilterList").empty())}},addProductToDataFilter:function(e){var t=_.map(e,function(e){if($(e).attr("data"))return'<li id="li_'+$(e).attr("data")+'">'+"<strong>"+$(e).text()+"</strong>"+"<p>"+'<input value="all" radiodata='+$(e).attr("data")+' name="radio_'+$(e).attr("data")+'" class="radio" checked type="radio"><label>'+i18n.Permission.CreateAccount.viewAll+"</label></input>"+'<input value="part" radiodata='+$(e).attr("data")+' name="radio_'+$(e).attr("data")+'" class="radio" type="radio"><label>'+i18n.Permission.CreateAccount.viewPart+"</label></input>"+"</p>"+"</li>"});$("#dataFilterList").append(t.join("\n")),this.displayOrHideDataFilter(!0)},removeProductFromDataFilter:function(e){$.each(e,function(e,t){$("li").remove("#li_"+t)}),this.displayOrHideDataFilter(!1)},switchVisibleScope:function(e){var t=$(e.currentTarget),n=t.val(),r=t.attr("radiodata");n=="part"?this.showPartnerAndGameServer(r):this.hidePartnerAndGameServer(r)},showPartnerAndGameServer:function(e,t){var n=$("#li_"+e).find("div").length;if(n<=0){var r={productID:e,platformID:"",partnerID:"",gameserverID:""};Select.fetchSelect({data:r,success:function(n){var r={curId:e};r.partnerList=n.partnerList,r.gameserverList=n.gameserverList,t&&(r.isPartnerChoosed=function(){return _.indexOf(t.partnerids.split(","),this.item+"")!=-1?"hover":""},r.isGameServerChoosed=function(){return _.indexOf(t.gameserverids.split(","),this.item+"")!=-1?"hover":""}),r.Permission=i18n.Permission,$("#li_"+e).append(Mustache.render(PartnerAndGameServerDataPannelTmpl,r));if(t){var i=t.partnerids.split(",");i!=""&&$("#partnerList_"+e+"_noFilter").removeClass("hover");var s=t.gameserverids.split(",");s!=""&&$("#gameserverList_"+e+"_noFilter").removeClass("hover")}}})}$("#li_"+e).find("div").show()},hidePartnerAndGameServer:function(e){$("#li_"+e).find("div").hide()},choosePartner:function(e){this.chooseTarget(e)},chooseGameserver:function(e){this.chooseTarget(e)},chooseTarget:function(e){var t=$(e.currentTarget);t.toggleClass("hover");var n=t.parent().find(".hover").length;n>0?t.parent().prev().find("a").removeClass("hover"):t.parent().prev().find("a").addClass("hover")},chooseLeftApp:function(e){var t=$(e.currentTarget);t.toggleClass("choosed")},dbClickLeftApp:function(e){var t=$(e.currentTarget),n=t.attr("data"),r=t.text();t.removeClass("choosed"),this.$rightAppList.find('a[data="'+n+'"]').length==0&&(this.$rightAppList.append('<a data="'+n+'">'+r+"</a>"),this.addProductToDataFilter(t))},chooseRightApp:function(e){var t=$(e.currentTarget);t.toggleClass("choosed")},dbClickRightApp:function(e){var t=$(e.currentTarget),n=_.map(e,function(e){return $(e).attr("data")});t.remove(),this.removeProductFromDataFilter(n)},toggleSelectAllPages:function(e){var t=$(e.currentTarget),n=t.attr("checked")=="checked"?!0:!1;n?this.$pageInputs.attr("checked","checked"):this.$pageInputs.removeAttr("checked")},toggleSelectAllManagePages:function(e){var t=$(e.currentTarget),n=t.attr("checked")=="checked"?!0:!1;n?this.$manageInputs.attr("checked","checked"):this.$manageInputs.removeAttr("checked")},toggleSelectFirstClassPage:function(e){var t=$(e.currentTarget),n=t.attr("checked")=="checked"?!0:!1,r=t.parent().parent("ul"),i=r.find("ol>li>input");n?i.attr("checked","checked"):i.removeAttr("checked")},selectSubPage:function(e){var t=$(e.currentTarget);this.checkSelect(t)},checkSelect:function(e){var t=e.parent().parent("ol"),n=e.parent().parent("ol").siblings("li").find('input[name="firstClass"]');this._findUnChecked(t).length?this._setUnChecked(n):this._setChecked(n)},selectPageInput:function(){this._findUnChecked(this.$pageFnDiv).length?this._setUnChecked(this.$pageAllBtn):this._setChecked(this.$pageAllBtn)},selectManageInput:function(){this._findUnChecked(this.$manageFnDiv).length?this._setUnChecked(this.$manageAllBtn):this._setChecked(this.$manageAllBtn)},_findUnChecked:function(e){return e.find("input:not(:checked)")},_setChecked:function(e){return e.attr("checked","checked")},_setUnChecked:function(e){return e.removeAttr("checked")},filterPartnerOrGameServer:function(e){var t=$(e.currentTarget).val();$(e.currentTarget).parent().next("span").find("a").each(function(){$(this).text().search(new RegExp(t,"i"))<0?$(this).fadeOut():$(this).show()})}});return view}),define("text!templates/developer/info.html",[],function(){return'<%if(demoViewFlag!=null){%>\r	<div class="product-demo mauto">\r<%}else{%>\r	<div class="product mauto">\r<%}%>\r	<div class="infoDIV mauto">\r		<dl class="infodl after add_step_con">\r			<dt class="l">\r				<label><%=Developer.DeveloperInfo.signUPEmail%></label>\r				<input type="text" class="disabled" disabled="disabled" value="<%=developerData.email%>"/>\r				<% if(!(developerData.comefrom==1 || developerData.comefrom==9 || (developerData.comefrom==3 && developerData.source==-1))){%>\r					<label><%=GameCommon.password%></label>\r					<a id="updatePassword" class="maxbut"><%=Developer.DeveloperInfo.changePWD%></a>\r				<%}%>\r			</dt>\r			<dd class="l">\r            	<label><%=Developer.DeveloperInfo.name%></label>\r				<input type="text" id="name" class="txtinput" value="<%=developerData.realName%>" />\r                <label><%=Developer.DeveloperInfo.company%></label>\r				<input type="text" id="company" class="txtinput" value="<%=developerData.companyname%>" />\r                <label>Q Q</label>\r				<input type="text" id="qq" class="txtinput" value="<%=developerData.qq%>" />\r                <label><%=Developer.DeveloperInfo.phone%></label>\r				<input type="text" id="tel" class="txtinput" value="<%=developerData.telephone%>" />\r				\r			</dd>\r		</dl>\r		<div class="max_title">\r			<a id="confirmUpdate" class="maxConfirm r"><%=GameCommon.finished%></a>\r		</div>\r	</div>\r</div>'}),define("text!templates/developer/updatepwd.html",[],function(){return'<div class="Pop_line">\r\n	<div class="timetop">\r\n    	<b class="l"><%=Developer.DeveloperInfo.changePWD%></b>\r\n    </div>\r\n	<div class="Poptxt">\r\n		<ul class="EditPop">\r\n			<li><label><%=Developer.DeveloperInfo.oldPWD%>：</label><input id="oldPassword" type="password" class="textinput"></li>\r\n			<li><label><%=Developer.DeveloperInfo.newPWD%>：</label><input id="newPassword" type="password" class="textinput"></li>\r\n			<li><label><%=Developer.DeveloperInfo.confirmNewPWD%>：</label><input id="confirmPassword" type="password" class="textinput"></li>\r\n		</ul>\r\n        <div class="opeDiv after">\r\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'});var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64padchar="=";define("rsa/base64",function(){});var dbits,canary=0xdeadbeefcafe,j_lm=(canary&16777215)==15715070;j_lm&&navigator.appName=="Microsoft Internet Explorer"?(BigInteger.prototype.am=am2,dbits=30):j_lm&&navigator.appName!="Netscape"?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),define("rsa/jsbn",function(){}),Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256;define("rsa/prng4",function(){});var rng_state,rng_pool,rng_pptr;if(rng_pool==null){rng_pool=new Array,rng_pptr=0;var t;if(window.crypto&&window.crypto.getRandomValues){var ua=new Uint8Array(32);window.crypto.getRandomValues(ua);for(t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=z.charCodeAt(t)&255}while(rng_pptr<rng_psize)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=t&255;rng_pptr=0,rng_seed_time()}SecureRandom.prototype.nextBytes=rng_get_bytes,define("rsa/rng",function(){}),RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,define("rsa/rsa",function(){}),define("views/developer/DeveloperInfo",["backbone","mustache","models/developer/Developer","utils/ModelBox","text!templates/developer/info.html","text!templates/developer/updatepwd.html","i18n!nls/gameI18N","rsa/base64","rsa/jsbn","rsa/prng4","rsa/rng","rsa/rsa"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#talkinggameDeveloperInfo",events:{"click #updatePassword":"showUpdataPwd","click #confirmUpdate":"update"},initialize:function(){this.getDeveloper(),this.render()},render:function(){return this},getDeveloper:function(){var e=this;n.fetchDeveloperById({success:function(t){o.developerData=t,o.demoViewFlag=demoViewFlag,e.$el.html(_.template(i,o))}})},showUpdataPwd:function(){var e=this;r.confirm({message:_.template(s,o),buttons:[{".Confirm":e.updatePassword}]})},updatePassword:function(){var e=$("#oldPassword").val(),t=$("#newPassword").val(),i=$("#confirmPassword").val();if(/^\s*$/.test(e)){alert(o.Developer.DeveloperInfo.enterOldPWD);return}if(/^\s*$/.test(t)){alert(o.Developer.DeveloperInfo.enterNewPWD);return}if(t.length<6||t.length>32){alert(o.Developer.DeveloperInfo.enter6To32Character);return}if(/^\s*$/.test(i)){alert(o.Developer.DeveloperInfo.enterPWDAgain);return}if(t!=i){alert(o.Developer.DeveloperInfo.TwoTimesPWDIsDifferent);return}var s=new RSAKey;s.setPublic("8b6c944808b245a98794e77739f8de7135f59f7d3879d9bedca396f6428265434dc62549d1dd1aad87a94d9de80619979d3460f806501887307d15914184a9913e90e6a816b120027b9008bbec09a95fcd9cf38da535a7ece68d25a3884c4a0da3c02d22e4de8ad44f8a6b5d6c63b91c682925e1846ae043d0a848890f078a67","10001");var u=hex2b64(s.encrypt(e)),a=hex2b64(s.encrypt(t));n.updatePwdOfDeveloper({data:{oldPassword:u,newPassword:a},success:function(e){e?r.alert({message:o.Developer.DeveloperInfo.changeSuccess}):r.alert({message:o.Developer.DeveloperInfo.changeFail})}})},update:function(){var e=$("#name").val(),t=$("#company").val(),i=$("#qq").val(),s=$("#tel").val();if(!e||!t||!i||!s){r.alert({message:o.Developer.DeveloperInfo.InfoMustBeNoEmpty});return}if(e.length>30){r.alert({message:o.Developer.DeveloperInfo.NameMost30Character});return}if(!/^[1-9]\d{4,14}$/.test(i)){r.alert({message:o.Developer.DeveloperInfo.QQTypeIsWrong});return}if(!/^[\+\-\(\)0-9]{1,17}$/.test(s)){r.alert({message:o.Developer.DeveloperInfo.PhoneTypeIsWrong});return}n.updateDeveloper({data:{name:e,realName:e,companyname:t,qq:i,telephone:s},success:function(e){e?r.alert({message:o.Developer.DeveloperInfo.updateSuccess}):r.alert({message:o.Developer.DeveloperInfo.updateFail})}})}});return u}),define("models/debug/ProductDebugFromEmail",["models/BaseModel"],function(e){var t=[{name:"fetchProductByProductId",url:"/public/debug/fetchProductByProductId",type:"get"},{name:"fetchDebugLogInfo",url:"/public/debug/fetchDebugLogInfo"},{name:"fetchDeviceList",url:"/public/debug/fetchDeviceList"},{name:"fetchEventStatus",url:"/public/debug/fetchEventStatus"},{name:"addNewDebugVersion",url:"/public/debug/addNewDebugVersion"},{name:"fetchProductDebugList",url:"/public/debug/fetchProductDebugList",type:"get"},{name:"closeDebug",url:"/public/debug/closeDebug"},{name:"fetchProductDebug",url:"/public/debug/fetchProductDebug"}];return e.init(t)}),define("text!templates/debug/debug.html",[],function(){return'<div class="debug-content">\r\n	<div class="content-debug-left"  id="debug-left">\r\n		<div class="debug-left">\r\n			<div class="debug-game-title">\r\n			</div>\r\n			<div class="debug-list">\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="debug-right">\r\n		<div class="choose-device">\r\n		</div>\r\n		<div class="message-type">\r\n			<h3>调试日志窗口</h3>\r\n			<ul id="messageFilter">\r\n				<li data="all" class="all on-choose"><font>图标</font><span>所有信息</span></li>\r\n				<li data="right" class="right"><font>图标</font><span>正常信息</span></li>\r\n				<li data="wrong" class="wrong"><font>图标</font><span>错误信息</span></li>\r\n			</ul>\r\n<!-- 			<div class="search"> -->\r\n<!-- 				<span><input name="" type="text" value="查找关键字" /></span> <strong><img -->\r\n<!-- 					src="images/icon-download-debug.png" /></strong> -->\r\n<!-- 			</div> -->\r\n		</div>\r\n		<div class="content-debug-message" id="debug-message-right">\r\n		</div>\r\n	</div>\r\n		\r\n	<div style="clear:both;"></div>\r\n</div>\r\n<script>\r\n	function setDebugHeight(){\r\n		var winHeight = getWindowHeight();\r\n		var debugContainer = document.getElementById("debug-left");\r\n		var debugMessageContainer = document.getElementById("debug-message-right");\r\n		debugContainer.style.minHeight = (winHeight-168)+\'px\';\r\n		debugMessageContainer.style.maxHeight = (winHeight-313)+\'px\';	\r\n		debugMessageContainer.style.overflow="auto";\r\n	}\r\n	setDebugHeight();\r\n	window.onresize = function() {\r\n	  setDebugHeight();\r\n	}\r\n</script>\r\n'}),define("text!templates/debug/debugProductTitleInfo.html",[],function(){return'<h3>\r\n	<font><%=data.productName%></font><span id="_curDebugVersion" data="<%=data.version%>" appkeydata="<%=data.sequencenumber%>"><%=data.version=="original" ? "初始版本" : data.version%></span>\r\n</h3>\r\n<h5>AppID：<%=data.sequencenumber%></h5>'}),define("text!templates/debug/debugDevicesInfo.html",[],function(){return'<%if(list.length == 0){%>\r\n<div class="select-device">\r\n	<h4 class="menu2" onMouseOver="this.className=\'menu1\'" onMouseOut="this.className=\'menu2\'" data="" id="selectDevice">\r\n		<span id="selectDeviceSpan" tile="">暂无设备</span><em><img src="images/icon-select-device.png" /></em>\r\n	</h4>\r\n	<ul style="display: none;" id="deviceList">\r\n		<li data="" title="暂无设备">暂无设备</li>\r\n	</ul>\r\n</div>\r\n<font>0 台设备调试中</font>\r\n<div class="operate">\r\n    <a id="fetchDebugInfos" class="refresh">刷新</a><a id="closeDebug" class="close">关闭调试</a>\r\n</div>	\r\n<%}else{%>\r\n<div class="select-device">\r\n	<%if(selectDevice!=null){%>\r\n		<h4 class="menu2" onMouseOver="this.className=\'menu1\'" onMouseOut="this.className=\'menu2\'" data="<%=selectDevice.deviceId%>" id="selectDevice">\r\n			<span id="selectDeviceSpan" versionStatus="<%=selectDevice.versionId%>" tile="<%=selectDevice.mobileName%>"><%=selectDevice.mobileName%></span><em><img src="images/icon-select-device.png" /></em>\r\n		</h4>\r\n	<%}else{%>\r\n		<h4 class="menu2" onMouseOver="this.className=\'menu1\'" onMouseOut="this.className=\'menu2\'" data="<%=list[0].deviceId%>" id="selectDevice">\r\n			<span id="selectDeviceSpan" versionStatus="<%=list[0].versionId%>" tile="<%=list[0].mobileName%>"><%=list[0].mobileName%></span><em><img src="images/icon-select-device.png" /></em>\r\n		</h4>\r\n	<%}%>\r\n	<ul style="display: none;" id="deviceList">\r\n		<% _.each(list,function(data){ %>\r\n			<li data="<%=data.deviceId%>" title="<%=data.mobileName%>"><%=data.mobileName%></li>\r\n		<% }); %>\r\n	</ul>\r\n</div>\r\n<font><%=list.length%> 台设备调试中</font>	\r\n<div class="operate">\r\n    <a id="fetchDebugInfos" class="refresh">刷新</a><a id="closeDebug" class="close">关闭调试</a>\r\n</div>				       \r\n<%}%>'}),define("text!templates/debug/debugListInfo.html",[],function(){return'<%if(data == null){%>\r\n	<ul id="eventList">\r\n		<!-- class:right,warn,wrong -->\r\n		<li class="warn" id="gameStart"  data="G2">\r\n			<span>状态图标</span><font>游戏启动</font> \r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">\r\n					验证游戏启动初始化时所需函数是否调用及参数配置是否正确，必须调用且通过验证。\r\n				</div>\r\n			</em>\r\n		</li>\r\n		<li class="warn" id="accountSet"  data="G3">\r\n			<span>状态图标</span><font>账户设置</font> \r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">验证玩家账号登陆游戏所需函数是否调用及参数配置是否正确，必须调用且通过验证。</div>\r\n			</em>\r\n		</li>\r\n		<li class="warn" id="charge"  data="G9">\r\n			<span>状态图标</span><font>充值事件</font>\r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">验证玩家充值时调用函数及参数是否正确。</div>\r\n			</em>\r\n		</li>\r\n		<li class="warn" id="purchase"  data="G10,G12">\r\n			<span>状态图标</span><font>消费事件</font>\r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">验证玩家购买及使用道具时调用函数及参数是否正确。</div>\r\n			</em>\r\n		</li>\r\n		<li class="warn" id="virtualCoin"  data="G15">\r\n			<span>状态图标</span><font>虚拟币</font>\r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">验证玩家获赠虚拟币时调用函数及参数是否正确。</div>\r\n			</em>\r\n		</li>\r\n		<li class="warn" id="task"  data="G6">\r\n			<span>状态图标</span><font>任务关卡副本</font>\r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">验证玩家在任务中调用函数及参数是否正确。</div>\r\n			</em>\r\n		</li>\r\n		<li class="warn" id="customEvent"  data="G8">\r\n			<span>状态图标</span><font>自定义事件</font>\r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">验证游戏自定义事件调用函数及参数是否正确。</div>\r\n			</em>\r\n		</li>\r\n	</ul>\r\n<%}else{%>\r\n	<ul id="eventList">\r\n		<!-- class:right,warn,wrong -->\r\n		<li class="<%=data.gameStart%>" id="gameStart"  data="G2">\r\n			<span>状态图标</span><font>游戏启动</font> \r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">\r\n					a、用于准确跟踪玩家的游戏次数，游戏时长等信息。<br />b、在需要调用SDK方法的文件中导入TalkingDataGA.h。并在application:didFinishlaunchingwithoptions<br />a、用于准确跟踪玩家的游戏次数，游戏时长等信息。<br />b、在需要调用SDK方法的文件中导入TalkingDataGA.h。并在application:didFinishlaunchingwithoptions\r\n				</div>\r\n			</em>\r\n		</li>\r\n		<li class="<%=data.accountSet%>" id="accountSet"  data="G3">\r\n			<span>状态图标</span><font>账户设置</font> \r\n			<em> \r\n				<img src="images/icon-explain.png" /><strong>\r\n				<img src="images/icon-explainbox.png" /></strong>\r\n				<div class="content-explain">a、用于准确跟踪玩家的游戏次数，游戏时长等信息。</div>\r\n			</em>\r\n		</li>\r\n		<li class="<%=data.charge%>" id="charge"  data="G9">\r\n			<span>状态图标</span><font>充值事件</font><em><img src="images/icon-explain.png" /></em>\r\n		</li>\r\n		<li class="<%=data.purchase%>" id="purchase"  data="G10">\r\n			<span>状态图标</span><font>消费事件</font><em><img src="images/icon-explain.png" /></em>\r\n		</li>\r\n		<li class="<%=data.virtualCoin%>" id="virtualCoin"  data="G15">\r\n			<span>状态图标</span><font>虚拟币</font><em><img src="images/icon-explain.png" /></em>\r\n		</li>\r\n		<li class="<%=data.task%>" id="task"  data="G6">\r\n			<span>状态图标</span><font>任务关卡副本</font><em><img src="images/icon-explain.png" /></em>\r\n		</li>\r\n		<li class="<%=data.customEvent%>" id="customEvent"  data="G8">\r\n			<span>状态图标</span><font>自定义事件</font><em><img src="images/icon-explain.png" /></em>\r\n		</li>\r\n	</ul>\r\n<%}%>'}),define("text!templates/debug/debugLogInfo.html",[],function(){return'<ul id="debugInfoDetail">\r\n	<% _.each(list,function(data){ %>\r\n	<li class="<%=data.eventStatudClass%> <%=data.eventStatus%>" status="<%=data.eventStatus%>" data="<%=data.eventId%>"><span><%=new Date(data.intsertTime).toFormat(\'YYYY-MM-DD HH24:MI:SS\')%></span><font><%=data.log%></font></li>\r\n	<% }); %> \r\n</ul>'}),define("views/debug/ProductDebugView",["backbone","mustache","models/debug/ProductDebug","models/debug/ProductDebugFromEmail","text!templates/debug/debug.html","text!templates/debug/debugProductTitleInfo.html","text!templates/debug/debugDevicesInfo.html","text!templates/debug/debugListInfo.html","text!templates/debug/debugLogInfo.html","utils/ModelBox","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e.View.extend({el:"#talkinggameDebugProduct",events:{"click #selectDevice":"clickSelectDevice","click #deviceList>li":"clickDeviceList","click #fetchDebugInfos":"fetchDebugInfos","click #messageFilter>li":"debugMessageFilter","click #eventList>li":"eventListFilter","click #closeDebug":"goToCloseDebug"},initialize:function(){this.$el.undelegate(),this.productId=this.options.productId||-1,this.version=this.options.version||"original",this.deviceId=this.options.deviceId||-1,this.comefrom=this.options.comefrom||-1,this.$el.html(_.template(i,l)),this.comefrom!=-1&&(n=r),this.render()},render:function(){return this.renderProductTitleInfo(),this.renderDebugInfos(),this},renderProductTitleInfo:function(){var e=this;n.fetchProductByProductId({data:{productId:e.productId},success:function(t){t&&(t.version=e.version,e.sequencenumber=t.sequencenumber,$(".debug-game-title").html(_.template(s,{data:t})))}})},renderDebugInfos:function(e){var t=this;n.fetchDeviceList({data:{productId:this.productId,version:this.version},success:function(n){var r=null;e&&n.length!=0&&_.each(n,function(t){e==t.deviceId&&(r=t)}),$(".choose-device").html(_.template(o,{list:n,selectDevice:r}));if(n.length==0)$(".debug-list").html(_.template(u,{data:null}));else{var i=n[0].deviceId;r!=null&&(i=r.deviceId),t.renderDebugListInfo(i),t.renderDebugLogInfo(i)}}})},renderDebugListInfo:function(e){n.fetchEventStatus({data:{productId:this.productId,version:this.version,deviceId:e},success:function(e){$(".debug-list").html(_.template(u,{data:e}))}})},renderDebugLogInfo:function(e){n.fetchDebugLogInfo({data:{productId:this.productId,version:this.version,deviceId:e},success:function(e){e&&(_.each(e,function(e){e.eventStatus==0?e.eventStatudClass="right":e.eventStatudClass="wrong"}),$().removeClass(),$("#messageFilter>li").removeClass("on-choose"),$("#messageFilter>li[data='all']").addClass("on-choose"),$(".content-debug-message").html(_.template(a,{list:e})))}})},fetchDebugInfos:function(){var e=$("#selectDevice").attr("data");e?this.renderDebugInfos(e):this.renderDebugInfos()},debugMessageFilter:function(e){var t=$(e.currentTarget),n=t.attr("data");t.siblings().removeClass("on-choose"),t.siblings().removeAttr("chooseFlag"),t.addClass("on-choose"),t.attr("chooseFlag","true");var r=$("#eventList>li[chooseFlag='true']").length==0;if(r)n=="right"?($("#debugInfoDetail>li[status='1']").hide(),$("#debugInfoDetail>li[status='0']").show()):n=="wrong"?($("#debugInfoDetail>li[status='0']").hide(),$("#debugInfoDetail>li[status='1']").show()):($("#debugInfoDetail>li[status='1']").show(),$("#debugInfoDetail>li[status='0']").show());else{var i=$("#eventList>li[chooseFlag='true']").attr("data");i=="G10"?n=="right"?($("#debugInfoDetail>li[status='1'][data='G10']").hide(),$("#debugInfoDetail>li[status='0'][data='G10']").show(),$("#debugInfoDetail>li[status='1'][data='G12']").hide(),$("#debugInfoDetail>li[status='0'][data='G12']").show()):n=="wrong"?($("#debugInfoDetail>li[status='0'][data='G10']").hide(),$("#debugInfoDetail>li[status='1'][data='G10']").show(),$("#debugInfoDetail>li[status='0'][data='G12']").hide(),$("#debugInfoDetail>li[status='1'][data='G13']").show()):($("#debugInfoDetail>li[status='1'][data='G10']").show(),$("#debugInfoDetail>li[status='0'][data='G10']").show(),$("#debugInfoDetail>li[status='1'][data='G12']").show(),$("#debugInfoDetail>li[status='0'][data='G12']").show()):n=="right"?($("#debugInfoDetail>li[status='1'][data='"+i+"']").hide(),$("#debugInfoDetail>li[status='0'][data='"+i+"']").show()):n=="wrong"?($("#debugInfoDetail>li[status='0'][data='"+i+"']").hide(),$("#debugInfoDetail>li[status='1'][data='"+i+"']").show()):($("#debugInfoDetail>li[status='1'][data='"+i+"']").show(),$("#debugInfoDetail>li[status='0'][data='"+i+"']").show())}},eventListFilter:function(e){var t=$(e.currentTarget),n=t.attr("data");t.siblings().removeClass("on-choose"),t.siblings().removeAttr("chooseFlag"),t.addClass("on-choose"),t.attr("chooseFlag","true");var r=$("#messageFilter>li[chooseFlag='true']").attr("data");n=="G10"?r=="right"?($("#debugInfoDetail>li").hide(),$("#debugInfoDetail>li[data='G10'][status='0']").show(),$("#debugInfoDetail>li[data='G12'][status='0']").show()):r=="wrong"?($("#debugInfoDetail>li").hide(),$("#debugInfoDetail>li[data='G10'][status='1']").show(),$("#debugInfoDetail>li[data='G12'][status='1']").show()):($("#debugInfoDetail>li").hide(),$("#debugInfoDetail>li[data='G10']").show(),$("#debugInfoDetail>li[data='G12']").show()):r=="right"?($("#debugInfoDetail>li[data!='"+n+"']").hide(),$("#debugInfoDetail>li[data='"+n+"'][status='0']").show()):r=="wrong"?($("#debugInfoDetail>li[data!='"+n+"']").hide(),$("#debugInfoDetail>li[data='"+n+"'][status='1']").show()):($("#debugInfoDetail>li[data!='"+n+"']").hide(),$("#debugInfoDetail>li[data='"+n+"']").show())},clickSelectDevice:function(){$("#deviceList").toggle()},clickDeviceList:function(e){var t=$(e.currentTarget),n=t.attr("data"),r=t.attr("title"),i=$("#selectDevice").attr("data");$("#selectDevice").attr("data",n),$("#selectDeviceSpan").attr("title",r),$("#selectDeviceSpan").html(r),$("#deviceList").toggle(),i!=n&&(this.renderDebugListInfo(n),this.renderDebugLogInfo(n))},goToCloseDebug:function(){var e=$("#selectDevice").attr("data"),t=this;if(e){var r=this.productId,i=$("#selectDeviceSpan").attr("versionStatus");n.fetchProductDebug({data:{productId:r,versionId:i,sequenceNumber:t.sequenceNumber},success:function(e){e&&e.debugStatus==-1?f.alert({message:"等待调试数据，不能关闭！"}):e&&e.debugStatus==0?f.alert({message:"调试出错，不能关闭！"}):e&&e.debugStatus==1?t.closeDebug(r,i):e&&e.debugStatus==2&&f.alert({message:"调试已关闭！"})}})}else f.alert({message:"该版本正在调试，不能关闭！"})},closeDebug:function(e,t){var r=$("#_curDebugVersion").attr("data")||"original",i=$("#_curDebugVersion").attr("appkeydata")||"";n.closeDebug({data:{productId:e,versionId:t,version:r,sequenceNumber:i},success:function(e){e?f.alert({message:"关闭成功！"}):f.alert({message:"服务器忙，请稍后再试！"})}})}});return c}),define("text!templates/public/basic-top.html",[],function(){return'<div class="l">\r\n	<strong><a href="/game/v3/main.jsp#/data-center/app-list"><%=GameCommon.dataCenter%></a> </strong>\r\n    <span></span>\r\n	<strong><%= name%></strong>\r\n</div>\r\n<div class="r user_dropselect">\r\n	<a href="http://doc.talkingdata.com/posts/47" target="_blank"><h4><font class="document"><%=GameCommon.docCenter%></font></h4></a>\r\n</div>\r\n<% if(!viewDemoNoLogin){%>\r\n<div class="r user_dropselect">\r\n	<a href="#accountCenter"><h4><font><%=GameCommon.accountAndAuthority%></font></h4></a>\r\n</div>\r\n<%}%>'}),define("text!templates/debug/debugInvalid.html",[],function(){return"<div class=\"debug-content\" id=\"debug-content\">\r\n	<div class=\"invalid-content\">\r\n		<img src=\"images/icon-invalid.png\" />\r\n		<h3>抱歉，此链接指向的调试窗口无效</h3>\r\n		<font>可能调试已经关闭，也可能输入了错误的链接，请 <a href=\"javascript:void(0)\"\r\n			onclick=\"window.open('', '_self', '');window.close();\">关闭</a> 本页面。\r\n		</font>\r\n	</div>\r\n\r\n	<script type=\"text/javascript\">\r\n		function autoHeight() {\r\n			if (window.innerHeight) {//FF\r\n				nowHeight = window.innerHeight;\r\n			} else {\r\n				nowHeight = document.documentElement.clientHeight;\r\n			}\r\n			var jianHeight = 170;\r\n			if (nowHeight > jianHeight) {\r\n				document.getElementById('debug-content').style.height = nowHeight\r\n						- jianHeight + 'px';\r\n			} else {\r\n				document.getElementById('debug-content').style.height = jianHeight\r\n						+ 'px';\r\n			}\r\n		}\r\n		autoHeight();\r\n		window.onresize = autoHeight;\r\n	</script>\r\n\r\n</div>"}),define("router",["backbone","utils/AppUtil","utils/urlUtil","utils/ModelBox","models/product/Product","views/public/MenuView","views/public/TopBannerView","views/product/CreateProductView","views/product/ProductListView","views/permission/AccountListView","views/permission/CreateAccountView","views/developer/DeveloperInfo","views/debug/ProductDebugView","text!templates/public/basic-top.html","text!templates/debug/debugInvalid.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m={"":"toProductList","page/:module/:params":"queryPage",productList:"productList",developerInfo:"showDeveloperInfo","integrateDebug/:id/:version":"integrateDebugProduct","continueIntegrateDebug/:id/:version/:versionId":"continueIntegrateDebug","debugProduct/:id/:version":"toDebugProduct",createProduct:"createProduct",accountCenter:"toAccountCenter",createAccount:"createOrUpdateAccount","updateAccount/:id":"createOrUpdateAccount"};m[":whatever"]="toProductList";var g=e.Router.extend({routes:m,toProductList:function(){location.hash="#productList",_hmt.push(["_trackPageview","/game#productList"])},queryPage:function(e,r){$("#talkinggameData>div").hide(),$("#talkinggamePages").show(),$("#topBanner").removeClass("mainMinwidth"),$("#bottom").removeClass("mainMinwidth"),$("#topBanner .toptitle").html()==""&&new o;var i=n.parse2Obj(r);_.extend(Params,i),this.renderMenu(e),setTimeout(function(){t.renderPage(e)},100),$("html").scrollTop(0)},renderMenu:function(e){var t=$("#menu-banner").attr("data");if(t!=Params.productID){var n=this;i.fetchMenuInfoByPId({type:"get",data:{productID:Params.productID},success:function(t){Params.displayCurrency=t.displayCurrency,new s({menuInfo:t.menuInfo,isCreator:t.isCreator,pid:Params.productID}),n.changeStyle(e)}})}else this.changeStyle(e)},integrateDebugProduct:function(e,t){this.createProduct(e,t)},continueIntegrateDebug:function(e,t,n){this.createProduct(e,t,n)},createProduct:function(e,t,s){_hmt.push(["_trackPageview","/game#createProduct"]);var o=this;e?($("#talkinggameData>div").hide(),$("#talkinggameCreateProduct").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),o.setBanner(v.GameCommon.createProduct),new u({productId:n.decode(e),version:n.decode(t),versionId:n.decode(s)})):i.checkProductCountLimit({data:"developerId="+Params.developerID,success:function(e){e.reachLimit?(location.hash="#productList",r.alert({message:"您的账户只能创建"+e.productLimit+"款产品，如需要更多，请联系TalkingGame客服。"})):($("#talkinggameData>div").hide(),$("#talkinggameCreateProduct").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),o.setBanner(v.GameCommon.createProduct),new u)}})},productList:function(){$("#talkinggameData>div").hide(),$("#talkinggameProductList").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(v.GameCommon.allProducts),this._createOrShow($("#talkinggameProductList"),function(){new a}),this.stopFetchDebugStatus()},toAccountCenter:function(){_hmt.push(["_trackPageview","/game#accountCenter"]),$("#talkinggameData>div").hide(),$("#talkinggameAccountCenter").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(v.GameCommon.accountAndAuthority),this._createOrShow($("#talkinggameAccountCenter"),function(){new f}),this.stopFetchDebugStatus()},stopFetchDebugStatus:function(){_currentDebugStatusObj!=null&&(clearInterval(_currentDebugStatusObj),_currentDebugStatusObj=null)},toDebugProduct:function(e,t){_hmt.push(["_trackPageview","/game#debug"]),$("#talkinggameData>div").hide(),$("#talkinggameDebugProduct").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(v.GameCommon.debugPage),i.isProductCreator({data:{productId:n.decode(e)},success:function(r){r?new h({productId:n.decode(e),version:n.decode(t)}):$("#talkinggameDebugProduct").html(_.template(d))}})},createOrUpdateAccount:function(e){_hmt.push(["_trackPageview","/game#createAccount"]),$("#talkinggameData>div").hide(),$("#talkinggameCreateAccount").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(e?v.Permission.CreateAccount.editAccount:v.Permission.CreateAccount.addAccount),new l({developerId:e})},showDeveloperInfo:function(){_hmt.push(["_trackPageview","/game#developerInfo"]),$("#talkinggameData>div").hide(),$("#talkinggameDeveloperInfo").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(v.GameCommon.personalInfomation),this._createOrShow($("#talkinggameDeveloperInfo"),function(){new c}),this.stopFetchDebugStatus()},_createOrShow:function(e,t){var n=e.attr("state");n!="complete"&&(t(),e.attr("state","complete"))},setBanner:function(e){$("#topBanner .toptitle").html(_.template(p,{name:e,role:DeveloperBean.userRole,GameCommon:v.GameCommon,currentLocale:currentLocale,comefrom:DeveloperBean.comefrom,viewDemoNoLogin:DeveloperBean.viewDemoNoLogin}))},changeStyle:function(e){var t=$("#menu-banner"),n=t.find("a[url-data="+e+"]");if(!n.html()){var r=e.split("_")[1],i=e.split("-")[0];n=t.find("a[url-data="+i+"-"+r+"]")}var s=n.parent(),o=s.parent("ol");t.find("a").removeClass("hover"),t.find("li").removeClass("hover"),n.addClass("hover"),s.addClass("hover");if(o.length){o.parent().addClass("hover");var u=o.css("display");u!="block"&&o.slideDown()}}});return g}),define("models/notice/Notice",["models/BaseModel"],function(e){var t=[{name:"fetchNotice",url:"/v1/notice/fetchNotice",type:"get"},{name:"fetchUnreadNum",url:"/v1/notice/fetchUnreadNum",type:"get"},{name:"deleteNotice",url:"/v1/notice/deleteNotice",type:"get"},{name:"updateNotice",url:"/v1/notice/updateNotice",type:"get"}];return e.init(t)}),define("text!templates/public/inviteTip.html",[],function(){return'<div class="invite_friend">\r\n    <span><a id="inviteButton"></a></span><font><a id="inviteText"><%=Public.Invite.inviteFriendGetMoreTimeForFree%></a><small style="font-size:12px; margin:0 10px 0 50px">更多推荐方式：</small></font>\r\n		            <!-- JiaThis Button BEGIN -->\r\n<div class="jiathis_style_24x24" style="padding-top:6px;  float:left">\r\n<a class="jiathis_button_tsina"></a>\r\n<a class="jiathis_button_weixin"></a>\r\n</div>\r\n<script type="text/javascript" >\r\nvar jiathis_config={\r\nurl:"<%=urlInfo%>",\r\nsummary:"",\r\ntitle:"<%=Public.Invite.inviteContext%>",\r\npic:"http://www.talkinggame.com/game/index/images/fn_logo.png",\r\nhideMore:false\r\n}\r\n</script>\r\n<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" \r\ncharset="utf-8"></script>\r\n<!-- JiaThis Button END -->\r\n    <strong><a id="removeInviteBtn"></a></strong>\r\n</div>'}),define("text!templates/public/invite.html",[],function(){return'<!--邀请朋友弹出框开始-->\r\n<div class="invite-box">\r\n    <div class="box_title">\r\n        <span><a id="closeInviteBox"><img src="../index/img_invite/icon_close_box.png"/></a></span>\r\n        <h3><img src="../index/img_invite/icon_box_title.png" align="absmiddle" /><font style="font-size:20px;"><%=Public.Invite.inviteMoreFriendUseTGA%></font></h3>\r\n    </div>\r\n    <div class="content_box">\r\n        <div class="content_box_left">\r\n            <div class="write_invite">\r\n                <span><%=Public.Invite.emailInvite%></span><input id="inviteEmail" onclick="javascript:if($(this).val()==\'<%=Public.Invite.enterInvitedEmail%>\'){$(this).val(\'\')}" name="" type="text" class="input_invite" value="<%=Public.Invite.enterInvitedEmail%>" />\r\n            	<a id="sendInviteBtn"><img src="../index/img_invite/button_send_invite.png" /> </a>\r\n            </div>\r\n            <h4/>\r\n            <!-- JiaThis Button BEGIN -->\r\n<div class="jiathis_style">\r\n<a class="jiathis_button_tsina">推荐给微博好友</a><br/><br/>\r\n<a class="jiathis_button_weixin">推荐到微信圈子</a>\r\n</div>\r\n<script type="text/javascript" >\r\nvar jiathis_config={\r\nurl:"<%=urlInfo%>",\r\nsummary:"",\r\ntitle:"<%=Public.Invite.inviteContext%>",\r\npic:"http://www.talkinggame.com/game/index/images/fn_logo.png",\r\nhideMore:false\r\n}\r\n</script>\r\n<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" \r\ncharset="utf-8"></script>\r\n            </h4>\r\n            <div class="your_url"> \r\n                <span><%=Public.Invite.yourExclusiveLink%></span>\r\n                <div class="copy_url" style="text-align:center"><%=urlInfo%></div>\r\n            </div>\r\n        </div>\r\n        <div class="content_box_right">\r\n            <h4><%=Public.Invite.activityValidityPeriod%>：</h4>\r\n			<em><%=Public.Invite.endTo20130831%></em>\r\n            <h4><%=Public.Invite.activityContext%>：</h4>\r\n			<span><%=Public.Invite.activityContext1%></span>\r\n<!--             <h5><%=Public.Invite.activityContext2%>：</h5> -->\r\n<!--             <ul> -->\r\n<!-- 				<li><%=Public.Invite.activityContext3%></li> -->\r\n<!-- 				<li><%=Public.Invite.activityContext4%></li> -->\r\n<!--             </ul> -->\r\n        </div>\r\n    </div>\r\n</div>\r\n<!--邀请朋友弹出框结束-->\r\n\r\n'}),define("views/public/InviteView",["backbone","utils/ModelBox","models/developer/Developer","utils/RegexUtil","text!templates/public/inviteTip.html","text!templates/public/invite.html","text!templates/public/loading.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({el:"#inviteTip",events:{"click #removeInviteBtn":"removeInvite","click #inviteButton":"showInviteBox","click #inviteText":"showInviteBox"},initialize:function(){var e=basePath+"invite?rid="+Params.developerID,t=_.template(i,{urlInfo:e,Public:u.Public});this.$el.html(t),this.render()},render:function(){return this},removeInvite:function(){this.$el.hide()},showInviteBox:function(){var e=basePath+"invite?rid="+Params.developerID,i=_.template(s,{urlInfo:e,Public:u.Public});t.confirm({message:i,buttons:[{"#sendInviteBtn":function(){var e=$("#inviteEmail").val();if(!r.isEmail(e)){alert(u.GameCommon.enterCorrectEmail);return}n.sendRecommendEmail({data:{developerid:Params.developerID,toaddress:e},success:function(e){t.alert({message:u.GameCommon.emailHasSend})}})},"#closeInviteBox":function(){t.unblock()}}]})}});return a}),define("text!templates/notice/notice.html",[],function(){return'<!--站内信开始-->\r<div >\r	<div class="InformationPop">\r		<div class="InformationTitle">\r			<a href="javascript:void(0)" class="relative l">\r				<small class="Announcement"></small>\r				<font><%=systemNotice%></font>\r				<b class="tip" id="informationTip"><%=unreadNum%></b>\r			</a>\r			<a href="javascript:void(0)" id="closeButton" class="close r">\r				<small class=""></small>\r			</a>\r			<a href="javascript:void(0)" id="refreshButton" class="Refresh r">\r				<small class=""></small>\r			</a>\r		</div>\r		<ul class="InformationTxt" id="InformationTxt">\r			<% if (notices && notices.noticeInfo){\r				 _.each(notices.noticeInfo,function(obj){\r					var cls=\'\';\r					if (obj.status==0) \r						cls=\'class="tip"\';\r			%>\r				<li data=<%=obj.sysnoticeid%>>\r					<a <%=cls%> >\r						<font class="l"><%=obj.title%></font>\r						<small class="r"></small>\r						<span class="r"><%=obj.sendtime.substring(0,16)%></span>\r					</a>\r					<div class="InformationCons hide"><%=obj.content%>\r					</div>\r				</li>\r			<%});}%>\r		</ul>\r	</div>\r</div>\r<!--站内信结束-->'}),define("text!templates/public/userAgreement.html",[],function(){return'<div class="Pop_line">\r\n    <div class="timetop">\r\n        <b class="l"><%=Public.Main.userAgreement%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n        <div class="userAg">\r\n        	<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm1%></p>\r\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm2%></p>\r\n			<p><strong>&#8226; </strong><%=Public.Main.serviceTerm3%></p>\r\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm4%></p>\r\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm5%></p>\r\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm6%></p>\r\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm7%></p>\r\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm8%></p>\r\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm9%></p>\r\n		</div>\r\n        <div class="opeDiv after">\r\n            <a class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/public/newVersionGuide.html",[],function(){return'<div class="versions-explain">\r\n	<p>\r\n		<img src="images/pic-explain-top.png" />\r\n	</p>\r\n	<div class="explain-words">\r\n		<div class="close-explain">关闭</div>\r\n\r\n		<h3>请仔细阅读体验说明</h3>\r\n		<span>\r\n			<h4>亲爱的用户，您好！</h4> 全新的游戏3.0版本就要来了，我们正在为此奋战！为了让您更早了解新版报表，我们特意<font>提前开放3.0体验，期待您提出宝贵意见，</font>我们会努力满足。\r\n		</span> <span>\r\n			<h5>率先体验注意事项：</h5> <font>•</font>\r\n			目前只开放全套数据报表的查阅，您还无法在体验版中进行管理操作。如创建、删除产品，编辑产品，渠道、事件、任务管理<br /> <font>•\r\n		</font> 新增的营销组件功能还未添加至体验版。<br /> <font>•</font> 体验版中还未增加指标说明，请在文档中心查阅。 </span> <b><img\r\n			src="images/pic-thanks.png" />\r\n		</b>\r\n		<div class="to-newVersions">\r\n			<a >立即体验</a>\r\n		</div>\r\n	</div>'}),window.require.config({paths:{underscore:"libs/lodash.compat",backbone:"libs/backbone",mustache:"libs/mustache",templates:"../templates",text:"libs/text",i18n:"libs/i18n",highcharts:"libs/highcharts.src","jquery.tabs":"libs/jquery.tabs","jquery.select":"libs/jquery.select-1.3.6","jquery.table":"libs/jquery.table","jquery.cookie":"libs/jquery.cookie","jquery.actual":"libs/jquery.actual",placeholder:"libs/jquery.placeholder",blockUI:"libs/jquery.blockUI",gauge:"libs/gauge.min",dataTable:"libs/jquery.dataTables","jquery.datepicker":"libs/datepicker-1.9.0.custom",CryptoJS:"libs/aes",pad:"libs/pad-zeropadding-min"},shim:{highcharts:{exports:"Highcharts"},underscore:{exports:"_"},backbone:{deps:["underscore"],exports:"Backbone"},gauge:{exports:"Gauge"},CryptoJS:{exports:"CryptoJS"},pad:{deps:["CryptoJS"]}},urlArgs:"bud="+(new Date).getTime(),waitSeconds:90,locale:window.currentLocale||"zh_cn"}),$.ajaxSetup({cache:!1}),require(["router","models/notice/Notice","views/public/InviteView","utils/ModelBox","text!templates/notice/notice.html","text!templates/public/userAgreement.html","text!templates/public/newVersionGuide.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u){function f(){t.fetchUnreadNum({data:null,success:function(e){e!=null&&(a=e.count),a>0&&($("#noticeTips").text(a),$("#noticeTips").addClass("tip"))}})}function l(){a--,a<=0?($("#informationTip").text(""),$("#noticeTips").text(""),$("#noticeTips").removeClass("tip")):($("#noticeTips").addClass("tip"),$("#informationTip").text(a),$("#noticeTips").text(a))}function c(e){var n=e;if(n.parent().next().is(":hidden")){n.parent().addClass("hover"),n.parent().next().slideDown("fast");if(n.parent().attr("class").indexOf("tip")!=-1){var r=n.parent().parent().attr("data");t.updateNotice({data:{noticeId:r},success:function(e){n.parent().removeClass("tip"),l()}})}}else n.parent().next().slideUp("fast"),n.parent().removeClass("hover")}function h(e){var n=e,r=n.parent().parent().attr("data");t.deleteNotice({data:{noticeId:r},success:function(e){n.parent().parent().remove(),n.parent().attr("class").indexOf("tip")!=-1&&l()}})}function p(){f(),t.fetchNotice({data:null,success:function(e){e&&e.noticeInfo&&"content"in e.noticeInfo&&(e.noticeInfo=[e.noticeInfo]);var t=e,n={unreadNum:a,notices:t,systemNotice:u.GameCommon.systemNotice},s=_.template(i,n);r.confirm({message:s,buttons:[{"li a :not(small.r)":function(){c($(this))},"li a small.r":function(){h($(this))},"#closeButton":function(){r.unblock()},"#refreshButton":function(){p()}}]})}})}var a=0;f(),$("#noticeTips").bind("click",p),$("#productList").bind("change",function(){window.localStorage.hash="PushList"}),$("#logout").bind("click",function(){var e=DeveloperBean.comefrom;$.ajax({url:"/game/v1/gamecenter/logout?_t="+Math.random(),type:"get",success:function(t){e==9?window.location.href="/game/index.jsp":window.location.href=SysConfig.thirdParty.website||"https://account.talkingdata.com/api/v1/logout?backurl=https://www.talkingdata.com/product-game.jsp"}})}),$("#userAgreementBtn").bind("click",function(){r.confirm({message:_.template(s,u),buttons:[{".Confirm":function(){r.unblock()}}]})}),$("#goToNewBtn").bind("click",function(){r.confirm({message:o,buttons:[{".to-newVersions":function(){window.open("/game/v3/main.jsp?new=t")},".close-explain":function(){r.unblock()}}]})}),$("#createProductFromViewDemo").bind("click",function(){$.ajax({url:"/game/v1/gamecenter/addGamePermitToCenter?_t="+Math.random(),type:"get",success:function(e){window.location.href="/game/v3/main.jsp#/data-center/create-product"}})}),$("#bottom .Language a").bind("click",function(e){var t=$(e.currentTarget),n=t.attr("data")||"zh_cn";n!=currentLocale&&$.ajax({url:"/game/v1/language/change?locale="+n,type:"get",success:function(e){window.location.reload()}})}),currentLocale=="zh_cn"&&new n;var d=new e;Backbone.history.start()}),define("app",function(){}),define("nls/zh_cn/gameCommon",{campaigns:"营销活动",operations:"营销",pushcampaigns:"推送营销",pushoperations:"推送营销",pushBindconfigure:"推送配置",debugPage:"调试页面",deviceUnit:"台",accountUnit:"账户",moneyUnit:"元",timeUnit:"分",senTimeUnit:"秒",timesUnit:"次",percentUnit:"%",accountnumUnit:"账户数",monday:"周一",tuesday:"周二",wednesday:"周三",thursday:"周四",friday:"周五",saturday:"周六",sunday:"周日",analyticsTools:"分析工具",warningNotify:"预警通知",dailyReport:"日报",overview:"概览",globalArea:"全球地区",chinaArea:"中国地区",docCenter:"文档中心",androidPlatformId:"1",iosPlatformId:"2",equipmentAcount:"设备 | 账户",newInstallAndPlayer:"新增激活和账户",rechargeableType:"充值方式",total:"总计",timeMinute:"时长",timeTimes:"次数",zhMonryUnit:"￥",personalInfomation:"个人信息",allProducts:"全部游戏",createProduct:"创建产品",enterCorrectEmail:"请输入正确的邮箱！",emailHasSend:"邮件已发送！",number:"数",rate:"率",percentage:"百分比",expense:"消费",purchase:"购入",perPageDisplay:"每页显示",last:" 最后一页 ",next:" 下一页 ",pre:" 上一页 ",first:"第一页",seek:"搜索",clear:"清空",loading:"正在加载中...",records:"条记录",sorryForNoData:"对不起，查询不到任何相关数据","cannotFindData	":"找不到相关数据",currentDisplay:"当前显示 ",totalNumber:"数据表中共为",barTotal:"条，共",update:"更新",other:"其他",hide:"隐藏",display:"显示",packUp:"收起",emailNotEmpty:"邮箱不能为空！",emailTypeWrong:"邮箱格式不正确！",emailAreadyUse:"邮箱已经被占用了！",productListEmpty:"授权产品为空!",PWDNotEmpty:"密码不能为空！",PWDLongth4To16:"密码长度为4～16位！",success:"成功！",updatePermission:"成功！子账号需要重新登陆才能访问新授权产品！",fail:"失败！",inProcessOf:"正在",selectAuthPage:"请选择要授权的页面！",PWDHasWrong:"密码输入有误！",emailHasWrong:"邮箱输入有误！",point:"分",timeNum:"时长",timesNum:"次数",date:"日期",unknown:"未知",male:"男",female:"女",confirmDelete:"确定要删除吗？",expand:"推广",chart:"图表",grid:"表格",to:"到",all:"全部",today:"今日",alias:"别名",setAlias:"设置别名",designation:"名称",goodsName:"物品名称",finished:"完 成",dummyCoin:"虚拟币",consumePointManage:"消费点管理",channelManage:"渠道管理",channelData:"渠道数据",incomeData:"收入数据",gamePlayer:"游戏玩家",newIncreased:"新增玩家",activing:"活跃玩家",retain:"玩家留存",transform:"付费转化",loss:"玩家流失",gameHabit:"游戏习惯",equipments:"设备相关",onlineAnalysis:"在线分析",incomeAnalysis:"收入分析",taskAnalysis:"任务分析",taskAndMissionManage:"任务和关卡管理",taskAndMission:"任务和关卡",payHabit:"付费习惯",dummyConsume:"虚拟消费",consumeHobby:"消费喜好",whaleUser:"鲸鱼用户",expandChannel:"推广渠道",custionEvent:"自定义事件",eventData:"事件数据",gameOverview:"游戏概况",accountAndAuthority:"账户和权限",dataCenter:"数据中心",avgGamingTimeCount:"平均游戏时长与次数",dailyPayRate:"日付费率",payPermeate:"付费渗透",activePlayer:"活跃玩家",avg:"平均",payPlayer:"付费玩家",playerCount:"玩家数",equipmentActive:"设备激活",consumeDummyCoin:"消耗虚拟币",consumeCount:"损耗数量",consumePoint:"消费点",purchaseDummyCoin:"购入虚拟币",times:"次",login:"登录",time:"时间",dummyCoinTotalValue:"虚拟币总值",level:"级",dailyTrend:"按日趋势",payCount:"付费次数",paySum:"付费金额",recordDate:"登记日期",player:"玩家",newIncreasedPlayer:"新增玩家",operate:"操作",region:"地区",channel:"渠道",sex:"性别",age:"年龄",grade:"等级",loadingData:"正在加载统计数据…",noData:"未查询到数据",account:"帐户",of:"的",day:"日",_day:"天",hour:"小时",week:"周",month:"月","delete":"删除",tollgate:"关卡",confirm:"确定",cancel:"取消",password:"密码",detail:"详情",avgDailyPayRate:"日均付费率",avgDaily:"日均",income:"收入",checkAll:"全选",invertCheck:"反选",dailyActive:"日活跃",propsConsume:"道具消耗",accountName:"账户名",accountType:"帐户类型",newPlayerAccountType:"玩家账户类型",clear:"清除",levelAnalytics:"等级分析",levelDetail:"等级详解",newPlayerProgress:"新玩家进度",levelDistribute:"等级分布",confirmTitle:"提示",reward:"赠予",vcStatus:"虚拟币产出和消耗",systemNotice:"系统通知",firstDay:"首日",subAccount:"单设备账户数量分析（小号分析）",accountNum:"小号数量",newDevice:"新增设备",clearData:"清除测试数据",pushBind:"推送绑定",tdToolsRemark:"Talkingdata多渠道打包工具，助你快速生成不同渠道包，精准细分用户来源，评估推广效果",viewTdTools:"查看多渠道打包指南",recent:"近期",last3Days:"近3日",last7Days:"近7日",last14Days:"近14日",last30Days:"近30日",last60Days:"近60日",last90Days:"近90日",day1:"某日",week1:"某周",month1:"某月",retention:"玩家留存"}),define("nls/zh_cn/concurrent",{todayAndYes:"今日 & 昨日",ConcurrentUser:{onlineUsers:"在线玩家",onlineAnalysis:"在线分析 - 实时",final5Minutes:"最后5分钟",recentlyPlayers:"最近玩家",useDevice:"机型",useOS:"操作系统",usePixel:"分辨率",yestoday:"昨日",useLanguage:"使用语言",dailyOnlineUsers:"每日在线用户"}}),define("nls/zh_cn/customEvent",{EventData:{playerComplete:"玩家完成",playerEnter:"玩家进入",totalRate:"总转化率：",player:" 玩家",eventOverview:"事件概况",eventDisplayName:"事件显示名",eventCounts:"事件数",eventUsers:"达成事件用户",initiateHappenCounts:"每启动发生次数",conversionFunnel:"转化漏斗",addFunnel:"增加转化漏斗",setting:"转化漏斗设置",tip:"以用户逐步执行的事件为依据，构造最多200个步骤的转化漏斗，平台将逐步过滤，计算出用户在整个过程中的转化比例。",name:"名称",criteria:"追踪依据",stepName:"步骤别名",tip1:"不能继续添加了！",tip2:"请再增加一个步骤！",tip3:"请填写完整信息！",tip4:"请填写不同的步骤别名！",tip5:"请选择不同的事件！",tip6:"创建漏斗失败！",tip7:"不能再删除啦！",tip8:"最多只能创建10个漏斗！",g:"键入搜索事件别名或事件ID",h:"搜索",i:"清空"},EventDetail:{eventId:"事件ID",eventTendency:"事件趋势",everyActiveUserHappen:"每活跃用户发生",everyInitiateHappen:"每启动发生",parameters:"参数",messageCounts:"消息数",proportion:"比例"},EventManagement:{eventName:"事件名",eventManage:"事件管理",displayName:"显示名",hidingEvent:"隐藏事件",eliminate:"清除",stopUsing:"停用",eliminateEvent:"已停用事件",clearTip:"清除事件后，此事件目前为止的计数将被清除，无法恢复，确认清除吗？",tip:"提示",clearDataWrong:"程序出错啦！",dataCleared:"此事件数据已清零!",recoverUse:"恢复使用",recoverUsed:"已恢复使用",stopUsed:"已停用",clearSuccess:"清除成功",eventId:"事件",nameIsExsit:"名称已存在",stopUsingDate:"停用日期"}}),define("nls/zh_cn/developer",{DeveloperInfo:{InfoMustBeNoEmpty:"信息不能为空！",NameMost30Character:"姓名最多可输入30个字符！",QQTypeIsWrong:"QQ格式不正确！",PhoneTypeIsWrong:"手机或固话格式不正确！",changeSuccess:"修改成功",changeFail:"修改失败",updateSuccess:"更新成功",updateFail:"更新失败",TwoTimesPWDIsDifferent:"两次密码输入不一致",enter6To32Character:"请输入6~32位任意字符",enterOldPWD:"请输入旧密码",enterNewPWD:"请输入新密码",enterPWDAgain:"请再次输入密码",signUPEmail:"账号",changePWD:"修改密码",name:"姓名",company:"公司",phone:"电话",oldPWD:"旧密码",newPWD:"新密码",pwdMustNumChaUnderline:"密码只能由数字、字母、下划线组成",confirmNewPWD:"确认新密码"}}),define("nls/zh_cn/level",{LevelDetailed:{importantGrade:"关键等级",gradeDetail:"等级详情",averageUpgradeTime:"平均升级时长",gradeStagnateRate:"等级停滞率",upgradeTime:"升级时长",levelSettingTitle:"等级设置",levelSettingTip:"设置游戏中的一些关键等级，报表中将按照这个等级段呈现一些概况数据。关键等级通常是玩家达到时，能代表他们进入一个新的阶段的等级。",addStep:"增加阶段",saveAndClose:"保存并关闭",canel:"取消",levelUpTime:"升级时长",chooseLevel:"选择等级",stageName:"阶段名称",choose:"请选择"},LevelDistributed:{playerLevelDistribution:"玩家等级分布",gameTimesLevelDistribution:"游戏次数等级分布",lossPlayerLevel:"流失玩家停留等级",servenDaysNotLoginInPlayers:"7日未登录玩家",fourteenDaysNotLoginInPlayers:"14日未登录玩家",thirtyDaysNotLoginInPlayers:"30日未登录玩家",playTimes:"游戏次数",levelupTimeDistribution:"升级时长分布"},Schedule:{newPlayerLevel:"新玩家等级",firstDayLevel:"首日等级",firstWeekLevel:"首周等级",fourteenDayLevel:"14日等级",levelChangeOfNewPlayerServenDays:"新玩家7日内等级变迁"},Tips:{tip1:"请至少选择一个阶段。",tip2:"最多只能添加5个阶段",tip3:"请填写完整的步骤信息。",tip4:"不能选择相同的等级。",tip5:"阶段名称不能重复。",tip6:"<font style='line-height:24px;margin-top: 70px;display:block;'>您还没有设置关键等级点，</fon><a id='clickToSet' style='  color: #5BAC54; display: block;  font-size: 16px; margin: 0 auto; width: 100px;'>点击设置</a>"}}),define("nls/zh_cn/partnerExtention",{PartnerAccountItem:{confirmDeleteAccount:"确定要删除该账户吗？",enterBackground:"进入后台",enabled:"启用",forbidden:"禁用"},PartnerData:{installingActivation:"安装激活",quantityIndicator:"数量指标",qualityIndicator:"质量指标",incomeIndicator:"收入指标",retentionIndicator:"玩家留存",channelName:"渠道名称",trackWay:"跟踪方式",registerConversionRate:"注册转化率",channelProportion:"渠道比重",avgDayActive:"平均日活跃(%)",oneDayPlayersProportion:"一日玩家比例",avgMorrowRetention:"平均次日留存率",firstWeekPayRatio:"首周付费比例",avgDailyPayPeopleCount:"付费账户（每日加和）",avgDayRentionRate1:"次日留存率均值",avgDayRentionRate3:"3日留存率均值",avgDayRentionRate7:"7日留存率均值",avgDayRentionRate14:"14日留存率均值",avgDayRentionRate30:"30日留存率均值"},PartnerItem:{noNeedMergeChannel:"没有可以要合并的渠道！",split:"拆分",merge:"合并",create:"创建",startUsing:"启用中"},PartnerManagement:{trackWay:"跟踪方式",channelName:"渠道名称",selectNeedMergeChannel:"请选择要合并的渠道！",dailyPayPeopleCount:"日付费人数",trend:"趋势",downChannelZipTool:"下载渠道打包工具",subpackageChannel:"分包渠道",linkChannel:"链接渠道",introduction:"说明",introductionExplain:"为渠道制作单独的推广安装包，根据安装包中填写的channel字段的不同来跟踪特定渠道的数据。以分包方式追踪渠道无需在平台中提前定义，不同的渠道ID包需单独编译打包，测试无误后提供给推广方即可。",integration:"集成",integrationIntroductionAndroid1:" 请在AndroidManifest.xml文件里配置meta-data来传入TDGA_CHANNEL_ID来追踪不同渠道的推广数据，不同的渠道包需要重新编译打包并提供给推广方。",integrationIntroductionAndroid2:"meta-data android:name='TDGA_CHANNEL_ID' android:value='Your_channel_id'",integrationIntroductionIOS1:"请在application:didFinishLaunchingWithOptions:方法里面调用onStart方法，在onStart方法的channelID字段处使用您定义的渠道名称进行替换，即可成功添加一个新的分包渠道。渠道包需单独编译打包提供给推广方。",integrationIntroductionIOS2:"#import 'TalkingDataGA.h'</br>-	(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{ </br>[TalkingDataGA onStart:@'APP_ID' withChannelId:@'CHANNEL_ID'];</br>//other code</br>}",integrationIntroduction3:"渠道名可自行定义，请使用20位以内的英文和数字；不同的渠道ID包请重新编译打包。",save:"保存",tool:"工具",toolExplain:"为了让制作大量渠道包的工作更加简单，我们提供以下打包工具来批量生成渠道包，可选择性下载使用。",channelList:"渠道列表",mergeChannel:"合并渠道",hideChannel:"隐藏渠道",channelQueryAccount:"渠道查询账户",loginName:"登录名",loginPWD:"登录密码",lastLoginTime:"最后登录时间",selectMergeChannel:"选择您要合并的渠道",newIncreasedPlayerRegister:"新增玩家（注册）",createChannelQueryAccount:"创建渠道查询帐户",setPartnerName:"设定渠道名称",setGameDownloadUrl:"设定游戏下载地址",pleaseEnterPartnerName:"请输入渠道名称！",pleaseEnterGameDownloadUrl:"请输入游戏下载地址！",partnerNameHasExisted:"该渠道名称已经存在！",addShortUrlFail:"添加短链渠道失败！",usePatternPre:"填写",IOSStore:"App Store",googlePlayStore:"Play Store",usePatternEnd:"中游戏的下载链接，设定推广渠道名称，来生成渠道推广链接。将生成的链接发送给推广方进行推广。",shortLinkPartnerIntroductionPre:"为每个渠道生成不同的推广链接来追踪由各个链接的点击而最终带来的激活量。尤其适合",shortLinkPartnerIntroductionEnd:"中只可提交一个游戏安装包，而您同时使用多个广告网络、分发渠道向其中导入流量，期望区分推广方跟踪数据的情况。",editDownloadUrl:"修改游戏下载地址对以前生成的推广链接同时起效。全部推广链接均会转至新的下载地址中引导玩家下载游戏。",createChannel:"生成渠道",platform:"平台",editUrl:"编辑地址",downloadUrl:"下载地址",addNewChannel:"增加新渠道",usePattern:"使用方式",channelType:"渠道类型",spreadLink:"推广链接",linkChannel:"链接渠道",updateFail:"更新失败",updateSuccess:"更新成功",changeGameDownloadUrl:"更换游戏下载地址",changeGameDownloadUrlTip:"修改游戏下载地址对所有推广链接同时起效，全部生成的推广链接会转向至新修改的地址中引导玩家下载游戏。",confirm:"确定",close:"关闭",update:"修改",channelId:"渠道ID"}}),define("nls/zh_cn/permission",{AccountList:{role:"角色",createDate:"创建日期",addNewAccount:"添加新账户",edit:"编辑",creator:"创建者",admin:"管理员",user:"用户",operator:"操作者",operatorIp:"操作IP",filterAccount:"搜索账户"},CreateAccount:{addAccount:"添加账户",editAccount:"修改账户",loginInfo:"登录信息",emailAddress:"邮箱地址",password4to16:"密码(4~16位)",adminExplain:"拥有对全部应用的所有权限",appAuthorization:"应用授权",allGames:"全部游戏",authorizedGame:"授权的游戏",administrationAuthority:"管理权限",gameManage:"游戏管理",addOrDelGame:"添加/删除游戏",pagesFunction:"页面功能",dataFilter:"数据过滤",dataFilterIntroduction:"通过设定 渠道 或 区服 的数据过滤条件，使子账户可阅览的报表中只展示出部分符合过滤条件的数据。",enabledPartner:"可阅览渠道：",enabledGameServer:"可阅览区服：",viewAll:"全部数据可见",viewPart:"部分渠道、区服数据可见",noFilterPartner:"不限渠道",noFilterGameServer:"不限区服",commit:"提交",createSubAccountMsg:"账户创建成功，在该账户激活后您会收到邮件通知。",dataDebug:"数据调试",createDataDebug:"新建数据调试",general:"基本信息",analysisSetting:"分析设置",tips:"您已授权给该账户了，是否进入编辑权限模式？",tips1:"您不能给自己授权！"}}),define("nls/zh_cn/play",{TasksSetUp:{failReason:"失败原因",playerLevel:"玩家等级",taskType:"任务类型",taskTollgateDetail:"任务或关卡详情",subline:"支线",other:"其它",newHand:"新手"},Tasks:{newHandConversionRate:"新手引导转化率",filterType:"筛选类型",mainline:"主线",type:"类型",enterCount:"进入次数",avgAccomplishTime:"平均完成时间",failTime:"失败次数",successTime:"成功次数",failRate:"失败率",taskTollgateSet:"任务和关卡设置",lifeCycle:"生命周期",install:"安装",tip1:"请填写完整的步骤信息",tip2:"不能选择重复的任务",tip3:"步骤名称不能重复",tip4:"最多可添加100个步骤"},TaskManage:{missionID:"任务ID",missionAlias:"任务别名",missionType:"任务类型",missionOperate:"操作",missionTypeSetting:"设置任务类型",missionManage:"任务和关卡管理",clearTip:"谨慎操作！清除后此任务数据将从报表中消失！",tip:"提示",dataCleared:"此任务数据已清零!"},MissionFunnel:{missionFunnelSetting:"设置新手引导漏斗",chooseMission:"选择任务",stepAlias:"步骤别名",addStep:"增加阶段",canel:"取消",missionSelect:"--请选择--",saveAndClose:"保存并关闭",funelTip:"至少选择2个步骤",funelTip2:"您还没有设置任务转化步骤，",funelTip3:"点击设置",missionFunnelSettingTip:"选择新手引导阶段每一关键步骤的任务名称来设定新手引导转化漏斗。报表中将给出每一步间的转化率和新手引导总体转化率。"}}),define("nls/zh_cn/player",{ActivePlayer:{newDau:"新玩家",oldDau:"老玩家",region:"活跃玩家地区",playedDays:"已玩天数"},Behavior:{avgPlayerDailyGaming:"平均每玩家每日游戏",avgPlayerWeeklyGaming:"平均每玩家每周游戏",avgPlayerMonthlyGaming:"平均每玩家每月游戏",minute:"分钟",second:"秒",timesTotal:"次，共",durationUnitMinute:"时长(单位:分)",everyDayGame:"每日游戏",everyWeekGame:"每周游戏",everyMonthGame:"每月游戏",gameGap:"游戏间隔",avgGamingTime:"平均游戏时长",avgGamingCount:"平均游戏次数",daily:"每日",weekly:"每周",monthly:"每月",gameFrequency:"游戏频次",monthGamingDays:"月游戏天数",weekGamingDays:"周游戏天数",weekGamingTimes:"周游戏次数",dayGamingTimes:"日游戏次数",gamingTime:"游戏时长",weekGamingTime:"周游戏时长",dayGamingTime:"单日游戏时长",singleGamingTime:"单次游戏时长",gamingTimeInterval:"游戏时段"},Churned:{payCount:"付费次数",paySum:"付费金额",dailyLoss:"每日流失",dailyLossNum:"每日流失数",dailyLossRate:"每日流失率",lossFunnel:"流失漏斗",lossCondition:"流失条件",servenDaysNotLoginIn:"连续7日不登陆",fourteenDaysNotLoginIn:"连续14日不登陆",thirtynDaysNotLoginIn:"连续30日不登陆",allPlayers:"全部玩家",dailyBackflow:"每日回流",lossUserAnalysis:"流失用户分析",analysisType:"分析方式",lossLevel:"流失前等级",userLifeCycle:"用户生命期"},Convertion:{payConversion:"付费转化",newIncreasedPayPlayer:"新增付费玩家",accumulativePayPlayer:"累计付费玩家",totalPayRate:"总体付费率",newPalyerPay:"新玩家付费",firstDayPayRate:"首日付费率",firstWeekPayRate:"首周付费率",firstMonthPayRate:"首月付费率",firstDayPay:"首日付费",firstWeekPay:"首周付费",firstMonthPay:"首月付费",playerFirstPayPeriod:"玩家首付周期",playerFirstBuyMoney:"玩家首付金额",playerFirstBuyChargePackage:"首付充值包类型",gamingDays:"游戏天数",accumulativeGamingTime:"累计游戏时长",playerFirstPayLevel:"玩家首付等级"},CustomRetention:{dateNotEmpty:"日期不能为空！",dateIsWrong:"日期选择有误！",userCount:"用户/设备数",date:"日期",nRetentionUser1:"第N",nRetentionUser2:"后 保留用户%",query:"查询",asRetainUser:"计为留存玩家",atLeast:"至少",startApp:"进入游戏",retainAction:"留存行为：在之后的",during:"期间,",newIncreasedUser:"新增玩家",activeUser:"活跃玩家",newInstall:"激活设备",activeInstall:"活跃设备",customRetain:"自定义留存",playerSample:"玩家样本",retentionMatrix:"留存矩阵",daily:"每日",weekly:"每周",monthly:"每月",of:"的","in":"内"},Device:{model:"机型",operateSystem:"操作系统",DPI:"分辨率",serviceProvider:"运营商",networkingModeDistribution:"联网方式分布",linkNetType:"联网方式"},LostFunnel:{line:"线",funnel:"漏斗",visittimes:"访问次数",_rateUser:"%用户",activePayUser:"活跃付费用户",lossCourse:"在之后的逐步流失过程。",updateData:"更新数据",analysisSomeDay:"分析某日",analysisSomeWeek:"分析某周",duringInspectAnalysis:"考察期间：分析",beforeWeek:"周前",one:"一",two:"二",three:"三",four:"四",five:"五",six:"六",seven:"七",during:"期间的",newIncreasedUser:"新增用户",activeUser:"活跃用户",dailyLoss:"每日流失",lossFunnel:"流失漏斗"},NewPlayer:{regionService:"区服",playerConversion:"玩家转化",newPlayer:"新增玩家",conversionRate:"转化率"},Retention:{newIncreasedDayLevel:"新增日等级",newIncreasedDayGameTimes:"新增日游戏次数",newIncreasedDayGamingTime:"新增日游戏时长",newIncreasedDayWhetherPay:"新增日是否付费",morrowRetain:"次日留存",dayRetain:"日留存",retainUserAnalysis:"留存用户分析",userGroup:"用户群",retainUser:"留存用户",retainRate:"留存率",installRetention:"激活设备留存",newplayerRetention:"新增账户留存",customRetain:"自定义留存"}}),define("nls/zh_cn/product",{CreateProduct:{integrateSDKReference:"参阅<a class='txta' target='_blank' style='display:inline;line-height:20px; margin:0 5px;font-size:12px;'  href='/game/document/zh_cn/index.jsp#QuickStart'>在线集成指南</a>或SDK压缩包中随附的集成指南来完成集成：<br>",sdkVersionAndPubDate:"SDK版本：3.0.0		发布日期：2014-07-10",nowCreating:"正在创建...",createProductFail:"创建产品失败！",pleaseSelectGameType:"请选择游戏类型",pleaseSelectGamePlatform:"请选择游戏平台",productNameMore50char:"产品名称最多50个字符",pleaseWriteProductName:"请填写产品名称",yourAcount10ContactService:"您的账户只能创建10款产品，如需要更多，请联系TalkingGame客服",creatingGame:"建立游戏",cteateGameIntroduction:"创建需要分析的游戏",toIntegrate:"集成调试",toIntegrateIntroduction1:"下载SDK包和集成指南",toIntegrateIntroduction2:"使用获取的App ID进行集成",toDebug:"进行调试",toDebugIntroduction1:"检查调用正确性",toDebugIntroduction2:"成功向平台发送数据",writeGameName:"请填写游戏名称",relaxationGame:"休闲游戏",intelligenceGame:"智力游戏",rolePlayGame:"角色扮演",sportsGame:"体育游戏",desktopGame:"桌面游戏",movementGame:"动作游戏",strategyGame:"策略游戏",simulationGame:"模拟类",explorationGame:"探险游戏",pokerGame:"棋牌游戏",diceGame:"骰子游戏",educationGame:"教育游戏",familyGame:"家庭游戏",musicGame:"音乐游戏",racingCarGame:"赛车游戏",samllGame:"小游戏",textGame:"文字游戏",cardGame:"卡牌游戏",createGame:"创建游戏",tips:"贴士",creatingTipsIntroduction1:"认真选择游戏的类型，有利于后续查看数据报表时行业基准的准确性。",creatingTipsIntroduction2:"跨手机平台的游戏只需建立一次，我们同时支持查看单一平台和聚合全平台的数据。",downloadSDKAndDevGuide:"下载通用SDK和开发指南",finishedTipsIntroduction1:"妥善保管App ID，这是追踪游戏数据的唯一标识，避免多款游戏使用相同App ID。",finishedTipsIntroduction2:"同款游戏的多个平台可使用同个App ID。",finishedTipsIntroduction3:"下载需要的SDK：使用Unity 3D制作的游戏请使用专版；其他使用通用版。",debugSDKGame:"调试集成了SDK的游戏：",debugSDKGameIntroduction1:"尝试在终端中开启游戏，等待一会，观察设备安装是否已被成功计量。",debugSDKGameIntroduction2:"如调用了setUserID可验证玩家数是否已可成功记录。",debugInReport:"详尽调试可在数据报表中进行",noDataWhenDebug:"调试中无法在左侧查看到数据？",noDataWhenDebugSolution1:"确保终端可以连接网络。",noDataWhenDebugSolution2:"检查App ID是否输入正确，避免多打了空格等特殊字符",noDataWhenDebugSolution3:"Android系统需确保添加了INTERNET权限，并在每个页面中调用了onStart和onEnd方法。",noDataWhenDebugSolution4:"联络我们寻求帮助？",noDataWhenDebugSolution5:"客服QQ群：287369275",noDataWhenDebugSolution6:"Mail：support@TalkingGame.net",enter:"进入",gameType:"游戏类型",enterEmailTips:"输入团队成员的邮箱，多个邮箱间以分号隔开",senderEmailSuccess:"邮件发送成功！",senderEmailFail:"服务器忙，请p稍后再试！",selectPlatform:"选择平台",firstStep:"第一步：创建游戏",secondStep:"第二步：选择游戏的系统平台",secondStepTip:"点击选择你想要集成SDK的第一个游戏平台，点击下一步，我们会为你提供SDK的下载地址；稍后您也找到其他平台的SDK。",thirdStep:"第三步：下载SDK并集成调试",saveAndNext:"保存并下一步",quickstart:"快速开始",quickIntegrate:"快速集成",send:"发送",onlineDoc:"在线文档",sdkVersion:"SDK版本",releaseTime:"更新时间",downloadSDK:"下载SDK",productNameIsExist:"产品名称已存在!"},ProductItem:{deleteProductConfirm:"确定要删除该产品吗？",warningAboutDeleteGame:"删除游戏将遗失游戏全部数据，不可恢复！",editGame:"编辑游戏",changeName:"变更名称",gameType:"游戏类型",gamePlatform:"游戏平台",gameStatus:"游戏状态",nomal:"正常",notFinished:"暂无数据",createTime:"创建时间",deleteGame:"删除游戏",saveAndClose:"保存并关闭",cancel:"取消"},ProductList:{equipmentinstallation:"设备激活",appName:"游戏名称",player:"玩家",gameTimes:"游戏次数",report:"报表"}}),define("nls/zh_cn/public",{DatePicker:{pleaseSelectDate:"请选择日期",dateChooser:"日期选择",yesterday:"昨日",nearly7Days:"近7日",nearly30Days:"近30日",customDate:"自定义时期",custom:"自定"},Invite:{inviteMoreFriendUseTGA:"邀请更多朋友来使用TalkingData Game Analytics！",emailInvite:"邮件邀请",enterInvitedEmail:"键入受邀请者邮箱",inviteContext:"我正在使用超给力的跨平台游戏分析工具——TalkingGame！在线时长、等级分布、消费习惯……各种指标维度一应俱全！还有详尽的用户群细分、追踪功能！现在注册即可获得TalkingGame入门版永久免费使用特权，赶快点击链接注册吧！",yourExclusiveLink:"您的专属推荐链接",copyLink:"复制链接",activityValidityPeriod:"活动有效期",endTo20130831:"<b style='color:#333'>截止至2013年08月31日</b>",activityContext:"活动说明",activityContext1:"现在就邀请更多朋友一起免费使用TalkingData Game Analytics！受到您邀请的朋友即可获得TalkingData Game Analytics<b style='color:#F39800'>入门版的永久免费使用权！</b>好东西需要分享，还等什么？赶快让更多朋友一起来使用最棒的游戏统计分析系统吧！",inviteFriendGetMoreTimeForFree:"邀请朋友使用游戏版，获得永久免费使用权！"},Main:{tendcloudCopyright:"2011-2017 © TalkingData.com &nbsp; 京ICP备12005794号 | 京ICP证130311号 | 京公网安备11010102001221号",userAgreement:"用户协议",termsOfService:"服务条款",serviceTerm1:"使用TalkingData数据统计分析服务的个人和公司应保证提供真实的注册信息，确保正确性和完整性，并在信息变更时及时更新相关内容。TlakingData不对因信息不属实而造成的任何损失承担责任。",serviceTerm2:"请妥善保管好您的账户信息，TalkingData不对因账户信息遗失或泄露而造成的损失承担责任。",serviceTerm3:"TalkingData数据统计和分析平台保留随时变更平台所提供服务的权利，不保证提供的免费统计分析服务不会中断，对所提供服务的实时性、安全性、准确性不作绝对保证。",serviceTerm4:" TalkingData保留系统维护、硬件更新、系统升级的权利，并可能因以上原因造成服务的短时间暂停，不对因服务中断、停止而造成的任何损失承担任何责任。",serviceTerm5:"TalkingData会在服务变更和异常时尽量通知到您，但保留在未进行通知的情况下中断服务的权利。",serviceTerm6:" TalkingData与您共同所有您的账户中的全部信息。",serviceTerm7:"因您违反了有关法律、法规或本协议规定中的任何条款而对TalkingData或任何第三方造成的损失，您同意承担由此造成的一切损害赔偿责任。",serviceTerm8:"TalkingData保留随时变更以上协议的权利，您同意接受任何合法的变更条款。",serviceTerm9:" 您确认使用TalkingData服务，即表示同意以上内容，并同意对使用TalkingData服务可能存在的其他潜在风险自行承担后果。",price:"价格",contactUs:"联络我们",indexPage:"首页"},Menu:{},Select:{filter:"筛选",noFilter:"不筛选",checkAll:"全选",checkInverse:"不选",hasCheck:"已选择",item:"项",partner:"渠道：",gameserver:"区服："},TopBanner:{},ClearTestData:{clearData:"清除测试数据",clearDataRemark:"TalkingGame允许您清除掉游戏测试时的数据，以避免上线后对阅览报表造成干扰。",notes:"操作前请仔细阅读以下事项：",notes1:"操作后将清除当前全部数据，无法找回，慎重操作！",notes2:"允许多次清除测试数据。",notes3:" 无需多余集成，无需更换AppID，清过数据后游戏仍可正常上线发布。",notes4:" 清除针对于产品，不区分平台，操作后全部平台数据都会清除，请一定注意！",notes5:"为安全起见，累计激活设备超过50000后将不提供测试清除功能。",gameCleared:"欲清除数据的游戏",gameName:"游戏名称",nowClear:"立即清除",date:"操作时间",devicesClearing:"清除时激活设备量",tips:"谨慎操作！确认删除吗？",clearingData:"清除操作历史记录",clearedSuccessful:"清除成功",choose:"请选择一个您要清除的产品!"}}),define("nls/zh_cn/revenue",{IncomeData:{incomeMoney:"收入金额",rechargeableTimes:"充值次数",incomeNumYuan:"收入金额(元)",incomeNum:"收入金额",rechargeablePeopleNumber:"充值人数",payLevel:"付费等级",payPeopleCount:"付费人数",rechargeablePersonTime:"充值人次",regionIncome:"各地区收入",channelIncome:"各渠道收入",sexIncome:"各性别收入",ageIncome:"各年龄段收入"},PayHabit:{rechargeableType:"充值方式",consumerPackingTypes:"消费包类型",rechargeableFrequencyLimit:"充值频次和额度",weeklyRechargeableTimes:"每周充值次数",monthlyRechargeableTimes:"每月充值次数",weeklyRechargeableLimit:"每周充值额度",monthlyRechargeableLimit:"每月充值额度",weekRechargeableTimes:"周充值次数",monthRechargeableTimes:"月充值次数",weekRechargeableLimit:"周充值额度",monthRechargeableLimit:"月充值额度",rechargeableInterval:"充值间隔"},NewPlayerValue:{newPlayerValue:"新玩家价值",newPlayerRevenueContribution:"新玩家收入贡献",days7AvgContribution:"7日内平均贡献",days14AvgContribution:"14日内平均贡献",days30AvgContribution:"30日内平均贡献",days60AvgContribution:"60日内平均贡献",days90AvgContribution:"90日内平均贡献",locationNewPlayerValue:"各地区新玩家价值",partnerNewPlayerValue:"分渠道新玩家价值",sexNewPlayerValue:"分性别新玩家价值",ageNewPlayerValue:"各年龄段新玩家价值",days7Contribution:"7日贡献",days14Contribution:"14日贡献",days30Contribution:"30日贡献",days60Contribution:"60日贡献",days90Contribution:"90日贡献"},PayPermeate:{payRate:"付费率",dayPayRate:"日付费率",weeklyPayRate:"周付费率",monthlyPayRate:"月付费率",regionPayPermeate:"各地区付费渗透",channelPayPermeate:"各渠道付费渗透",sexPayPermeate:"各性别付费渗透",agePayPermeate:"各年龄付费渗透"}}),define("nls/zh_cn/summary",{Summary:{thirtyDays:"30日 ",servenDays:"7日 ",morrow:"次日 ",thiryDaysRetainTate:"30日留存率",sevenDaysRetainRate:"7日留存率",fourteenDaysRetainRate:"14日留存率",threeDaysRetainRate:"3日留存率",morrowRetainRate:"次日留存率",playerRetain:"玩家留存",newPlayer:"新玩家",keyIndicator:"关键指标",onlineTrend:"在线趋势",avgEveryPlayerGaming:"平均每玩家每日游戏",minute:"分钟",second:"秒",newChargePlayer:"新增付费玩家",oldChargePlayer:"老付费玩家"}}),define("nls/zh_cn/virtualEconomy",{ConsumeAnalysis:{noDataToCompare:"没有可比较的数据",cannotAdd:"不可以再继续添加了～",pleaseSelect:"请选择",pleaseSelectAgain:"该值已存在，请重新选择～",cannotDelete:"不能再删除了～",consumptionNumber:"消费次数",Purchases:"消费额度",categorySalesQuantityFSTS:"各品类销售数量与收入比重",classifyType:"分类方式",oneleveClassify:"消费点类别",allitems:"所有消费点",levelConsumerPreferences:"各类等级消费物喜好",propsPurchase:"购买道具",quantity:"数量"},ConsumePoint:{groupbyLevel:"按等级分组",groupbyTollgate:"按关卡分组",byCategory:"按类别",byConsumePoint:"按消费点",topItems:"热门物品",quantityPurchase:"购买数量",quantityConsume:"消耗数量",levelTollgate:"等级和关卡"},Management:{enterTypeName:"请输入类别名称！",thisNameExisted:"这个名字已被占用啦～",programWrong:"程序出错啦！错误代码：",consumePointCategory:"消费点类型",category:"类别",view:"查看",setConsumePointCategory:"设置消费点类别",addNewCategory:"增加新类别",affirm:"确认"},VirtualCoin:{devideTollgateCosume:"分关卡虚拟币消耗",dummyCoinPurchaseConsume:"虚拟币购入和消耗",dummyCoinPurchase:"虚拟币购入",dummyCoinConsume:"虚拟币消耗",accumulativeRetainDummyCoin:"累计留存虚拟币",accumulativeRetain:"累计留存",levelDummyCoinConsume:"各等级虚拟币消耗",tollgateDummyCoinConsume:"分关卡虚拟消耗",propsDummyConsume:"分道具虚拟消耗",consumeTimes:"消耗次数",consumeNumOfPeople:"消耗人数",purchaseItemUserNums:"购买人数"}}),define("nls/zh_cn/whale",{WhaleDetail:{userDoing:"用户进行",rechargeableInfo:"充值信息",consumeOverview:"消耗概览",rechargeable:"充值",dummyCoinExpense:"虚拟币消费",quantityExpense:"消费数量",actionRecord:"行为记录",loginInTime:"登录时间",loginOutTime:"退出时间",action:"行为",stay:"停留",accountNumberInfo:"帐号信息",year:"岁",accountNumberName:"帐号名称",sourceChannel:"来源渠道",language:"语言",rechargeDummyCoin:"充入虚拟币",thatTimeLevel:"当时等级",consumePointAlias:"消费点别名",lastLogin:"最后登录",firstRechargeable:"首次充值",rechargeableLimit:"充值金额",retainDummyCoin:"留存虚拟币"},WhaleUser:{currentLevel:"当前等级",cosumeSum:"消耗总额",accountNumber:"帐号",ranking:"排名",rechargeableUser:"充值玩家",rechargeableLimit:"充值金额",newIncreasedDate:"新增日期",userIDToSearch:"键入搜索userId",searchEmptyAlert:"请输入有效userID"}}),define("nls/zh_cn/analysisTools",{ChartRemark:{edit:"编辑","delete":"删除",menu:"报表备注",addRemark:"增加备注项目",remarkDate:"日期",remarkTitle:"备注标题",remarkContent:"备注内容",remarkOperate:"操作",milestone:"里程碑",editRemark:"编辑备注",saveAndClose:"保存并关闭",cancel:"取消",dateNotBlank:"日期不能为空！",titleNotBlank:"备注标题不能为空！",titleMore50:"备注标题不能超过50个字！",contentNotBlank:"备注内容不能为空！",contentMore100:"备注内容不能超过200个字！",saveFail:"保存失败！"}}),define("nls/zh_cn/indicator",{DataIndicatorExplain:{explain:"数据指标说明"},newPlayerCode:[{key:"设备激活",value:"当日新增加的激活设备量。"},{key:"新增玩家",value:"当日新增加的玩家帐户数。"},{key:"玩家转化",value:"安装游戏的玩家中（即激活设备）有注册账户的玩家比例，1人多次注册，只记1次有效转化。例如：共5台激活设备，其中3台每人1次注册，1台没有注册，1台注册了3次账户，共注册了6个不同账户；注册转化率=(3+1)/5=80%，而不是用6次注册/5台设备。"}],newPlayerLocationCode:[{key:"新增玩家地区",value:"新增玩家帐号的地区分布情况。"}],newPlayerPartnerCode:[{key:"新增玩家渠道",value:"新增玩家帐号的渠道分布情况，每个玩家始终归入首次设备激活时的渠道。"}],newPlayerSexCode:[{key:"新增玩家性别",value:"新增玩家帐号的玩家性别情况，根据您的游戏中传入的性别确定玩家的性别。"}],newPlayerAgeCode:[{key:"新增玩家年龄",value:"新增玩家帐号的年龄分布情况，根据您传入的年龄确定玩家的年龄段。"}],newPlayerAccountCode:[{key:"新增玩家帐户类型",value:"新增玩家帐号的帐户类型分布情况。"}],dauCode:[{key:"DAU",value:"当日有开启过游戏的玩家数，其中当日新增玩家带来的活跃以区别的颜色显示。"},{key:"WAU",value:"当日的最近一周（含当日的倒推7日）活跃玩家，将进行过游戏的玩家按照帐户进行排重。"},{key:"MAU",value:"当日的最近一月（含当日的倒退30日）活跃玩家，将进行过游戏的玩家按照帐户进行排重。"},{key:"DAU/MAU",value:"DAU/MAU可体现玩家的总体粘度，衡量这30天内每日活跃玩家的交叉重合情况。此比例越趋近于1，代表月活跃中有更多玩家多日活跃；比例越趋近0，则代表大量玩家只在一日中活跃。当比例小于0.1时，游戏的自传播性将很差。DAU/MAU×30也用于大致衡量玩家平均每月活跃天数。"}],activePlayerPlayedDaysCode:[{key:"活跃玩家已玩天数",value:"所选时期的活跃玩家的活跃日期减新增日期的日数差（即其已进行游戏的天数）的分布情况。"}],activePlayerLevelCode:[{key:"活跃玩家等级",value:"所选时期每日活跃玩家的等级分布情况，由每日数据组成的时期趋势可观测等级的总体走势。"}],activePlayerLocationCode:[{key:"活跃玩家地区",value:"所选时期排重活跃玩家的地区分布情况。"}],activePlayerPartnerCode:[{key:"活跃玩家渠道",value:"所选时期排重活跃玩家的渠道分布情况，渠道按照其最初新增时的渠道确定。"}],activePlayerSexCode:[{key:"活跃玩家性别",value:"所选时期排重活跃玩家的性别情况。"}],activePlayerAgeCode:[{key:"活跃玩家年龄",value:"所选时期排重活跃玩家的年龄分布情况。"}],playerCustomRetentionCustomRetain:[{key:"自定义留存",value:"选择好一个时期的玩家/设备样本群，并定义好玩家/设备使用中被计为留存的条件，将以样本群来计算之后的一段时期内的自定留存数据。留存行为可支持选择不同的游戏次数来抽取数据，这代表不同粘度玩家/设备的留存情况，通过变换条件抽取数据来进行对比分析。"}],retainedUserAnallyticCode:[{key:"留存用户分析",value:"圈定时期内符合次日/7日/30日留存条件的新玩家，根据其新增日的使用行为（等级、游戏次数、是否付费等）来进行分布，可有效的分析新增日行为与留存的相关性。"}],chargeConvertionCode:[{key:"新增付费玩家",value:"当日新增加的充值玩家。"},{key:"累计付费玩家",value:"截至当日，累计的充过值的玩家数。"},{key:"总体付费率",value:"截至当日，累计付费玩家占累计总玩家的比例（累计付费玩家/累计玩家帐户）。"}],newPlayerChargeCode:[{key:"首日付费率",value:"所选时期的新增玩家中，在新增当日即进行充值的玩家数和其占比。"},{key:"首周付费率",value:"所选时期的新增玩家中，在新增后的7日内进行了充值的玩家数和其占比。"},{key:"首月付费率",value:"所选时期的新增玩家中，在新增后的30日内进行了充值的玩家数和其占比。"}],playerFirstBuyPeriodCode:[{key:"游戏天数",value:"所选时期内的新增付费玩家，按照其已经玩游戏的天数（首付日期-新增日期）进行分布。"},{key:"累计游戏时长",value:"所选时期内，玩家首次付费时在游戏中累计的游戏时长分布情况。"}],playerFirstBuyLevelCode:[{key:"玩家首付等级",value:"所选时期内，玩家首次付费时的等级分布情况。"}],playerFirstBuyMoneyCode:[{key:"玩家首付金额",value:"玩家在游戏中首次充值时，支付的单比金额的分布情况。"}],playerFirstBuyChargePackageCode:[{key:"首付充值包类型",value:"玩家在游戏中首次充值时，所选择的充值包的类型分布情况。"}],churnedPerDayCode:[{key:"每日流失数",value:"到某日为止，玩家连续7/14/30天没有再玩过游戏，将被视为一个流失。例如：1月2日某玩家还有玩过游戏，但在3～9日的连续7日中都没有再玩过游戏，则记为1月9日的一个7日流失用户。如果玩家继续到10日还没有玩游戏，在1月10日不会再计算一次7日流失，这样保证一段时期的流失用户不会重复计算。"},{key:"每日流失率",value:"每日的7日（14日/30日）不登陆流失玩家数占该日7日（14日/30日）前活跃玩家数的比例。"},{key:"每日回流",value:"流失玩家在某日再次进行游戏，将视为当日的一个回流。回流玩家可用于沉默玩家唤醒活动后的效果评估。"}],churnedPlayerAnalysisCode:[{key:"流失用户分析",value:"圈定时期内符合7/14/30日流失条件的玩家，按照其流失前等级、已游戏天数、付费情况等条件来进行分布，可有效分析流失群体的特征，找出原因优化游戏。"}],playerLostFunnelLossFunnel:[{key:"流失漏斗",value:"选择某时期的新增或活跃玩家形成样本群，分析他们在之后的一段期间后是否已经流失。图表中给出的数字为每个期间还暂存的玩家数量，其余部分即为流失。本图表中计算流失的条件是自某日起至当前时间，玩家再未有过任何游戏行为。"}],playFrequencyCode:[{key:"游戏频次",value:"指玩家在一定期间中进行游戏的频繁度，将按照频度的不同将玩家分入不同的分布区间。报表中按照您所选日期自动扩充完整自然周/月来计算周和月的频次，跨多个周/月的数据查询会先计算单个周/月的分布数据，再组合各个区间的数据后集中进行展示。"},{key:"月游戏天数",value:"玩家在一个自然月中活跃日数的分布情况。"},{key:"周游戏天数",value:"玩家在一个自然周中活跃日数的分布情况。"},{key:"周游戏次数",value:"玩家在一个自然周中游戏次数的分布情况。"},{key:"日游戏次数",value:"玩家在一日中游戏次数的分布情况。"}],avgTimeAndTimeCode:[{key:"每日",value:"当日活跃玩家平均进行游戏的时长（当日总时长/日活跃）和平均每玩家的游戏次数（游戏次数/日玩家数）。"},{key:"每周",value:"某自然周内活跃玩家在该周中平均进行游戏的时长（周总时长/周排重活跃）和平均每玩家一周内的游戏次数（游戏次数/周排重玩家数）。"},{key:"每月",value:"某自然月内活跃玩家在该月中平均进行游戏的时长（月总时长/月排重活跃）和平均每玩家一月内的游戏次数（游戏次数/月排重玩家数）。"}],playTimeCode:[{key:"游戏时长",value:"指玩家在游戏内的游戏时长，按照不同时长将玩家分入不同的分布区间。对周使用时长将按照您所选日期自动扩充完整自然周来计算单用户时长，跨多周的查询会先计算单周的分布数据，再组合各个区间的数据后集中进行展示。"},{key:"周游戏时长",value:"玩家在一个自然周中玩游戏总时长的分布情况。"},{key:"单日游戏时长",value:"玩家在一日中玩游戏总时长的分布情况。"},{key:"单次游戏时长",value:"玩家在一日中每次玩游戏的时长分布情况。"}],playTimesDistributeCode:[{key:"游戏时段",value:"所选时间段，各小时段中全部玩家的分布情况。"}],deviceModelCode:[{key:"机型",value:"所选玩家的机型分布情况。"}],deviceOSCode:[{key:"操作系统",value:"所选玩家的设备操作系统分布情况。"}],deviceResolutionCode:[{key:"分辨率",value:"所选玩家的分辨率分布情况。"}],deviceCarrierCode:[{key:"运营商",value:"所选玩家所用运营商的分布情况。"}],deviceNetworkCode:[{key:"联网方式分布",value:"玩家每次进行游戏时的联网方式分布情况。其中离线代表玩家在终端打开游戏，但未能联网进行游戏的情况。"}],onlineUsersCode:[{key:"在线玩家",value:"在线玩家中会实时刷新最近5分钟在游戏中的在线玩家数据，每秒钟都会计算最实时的在线数据以保证准确性。在左侧仪表中显示的即为当前时刻在线数据，而右侧图表展示了今日和昨日的在线走势，通过曲线的对比可以明显观测到今日较之前的变化幅度。"}],recentGamePlayers:[{key:"近期游戏者",value:"近期游戏者是从最近10分钟内的玩家中随机抽取的游戏者，还原其游戏时的全貌，分析人员可以通过这种随机取样来从微观层面观察每个玩家的详细行为，来了解玩家、挖掘特征并优化游戏。"}],concurrentDailyPlayers:[{key:"ACU",value:"（Average Concurrent Users）平均同时在线玩家人数。我们每5分钟采集一次瞬时的在线玩家数，一日中全部采集点的平均值即ACU。"},{key:"PCU",value:"（Peak concurrent users ）最高同时在线玩家人数。我们每5分钟采集一次瞬时的在线玩家数，一日中最高的一个值即PCU。"},{key:"ACU/PCU",value:"通常称为在线平高比，比值越大则每日在线越平稳，玩家活跃时间更长，游戏服务器也更有效率；而极低的平高比则意味着玩家集中上线，但总体活跃性并不强。某些限时活动可能会拉低平高比，但属正常情况。"}],incomeTrendCode:[{key:"收入金额",value:"所选时期每日玩家充值的货币总额。"},{key:"充值次数",value:"所选时期每日玩家进行充值的总次数。"},{key:"充值人数",value:"当日进行充值的玩家帐户数。充值人数SUM是所选时期充值玩家的排重数目，不是简单加和。"}],chargeLevelCode:[{key:"收入金额",value:"所选时期的充值总金额根据玩家充值时的等级进行分布。"},{key:"充值人次",value:"所选时期每次充值根据玩家充值时的等级进行分布。"}],incomeLocationCode:[{key:"各地区收入",value:"所选期间，各个地区的玩家充值金额的分布情况。"}],incomePartnerCode:[{key:"各渠道收入",value:"所选期间，各个渠道来源的玩家充值金额的分布情况。"}],incomeSexCode:[{key:"各性别收入",value:"不同性别玩家的充值总金额情况。"}],incomeAgeCode:[{key:"各年龄段收入",value:"不同年龄段玩家的充值总金额情况。"}],payRateCode:[{key:"日付费率",value:"当日进行付费的玩家占当日活跃玩家的比例。"},{key:"周付费率",value:"某自然周中进行付费的玩家（排重）占该自然周活跃玩家的比例。"},{key:"月付费率",value:"某自然月中进行付费的玩家（排重）占该自然月活跃玩家的比例。"}],ARPUCode:[{key:"ARPU(日)",value:"当日每活跃玩家平均收入（收入/活跃玩家）。"},{key:"ARPU(月)",value:"某自然月每活跃玩家平均收入（收入/月排重活跃玩家）。"},{key:"ARPPU(日)",value:"当日每付费玩家平均收入（收入/付费玩家数）。"},{key:"ARPPU(月)",value:"某自然月每付费玩家平均收入（收入/月排重付费玩家数）。"}],locationCode:[{key:"日均付费率",value:"所选时期，各地区玩家的每日付费率的平均值。"},{key:"日均ARPU",value:"所选时期，各地区玩家的每日ARPU的平均值。"},{key:"日均ARPPU",value:"所选时期，各地区玩家的每日ARPPU的平均值。"}],partnerCode:[{key:"日均付费率",value:"所选时期，各渠道来源玩家的每日付费率的平均值。"},{key:"日均ARPU",value:"所选时期，各渠道来源玩家的每日ARPU的平均值。"},{key:"日均ARPPU",value:"所选时期，各渠道来源玩家的每日ARPPU的平均值。"}],sexGroupCode:[{key:"日均付费率",value:"不同性别玩家的平均日付费率情况。"},{key:"日均ARPU",value:"不同性别玩家的平均日ARPPU。"},{key:"日均ARPPU",value:"不同性别玩家的平均日ARPPPU。"}],ageGroupCode:[{key:"日均付费率",value:"不同年龄段玩家的平均日付费率情况。"},{key:"日均ARPU",value:"不同年龄段玩家的平均日ARPPU。"},{key:"日均ARPPU",value:"不同年龄段玩家的平均日ARPPPU。"}],chargeWayCode:[{key:"收入金额",value:"时期中各类付费方式（支付宝、神州付等）所带来的收入。"},{key:"充值人次",value:"采用各类付费方式的玩家充值次数。"}],consumePackageCode:[{key:"收入金额",value:"时期中各种虚拟消费包所带来的收入。消费包类型由您的客户端传入，如：6元30钻石礼包。"},{key:"充值人次",value:"玩家购买各类消费包的次数。"}],revenuePlayFrequencyCode:[{key:"充值频次和额度",value:"指玩家在一定期间中充值的频繁度或总消费额度，将按照频度或额度将玩家分入不同的分布区间，其中未付费也会作为一种频度给出。报表中按照您所选日期自动扩充完整自然周/月来计算周和月的频次，跨多个周/月的数据查询会先计算单个周/月的分布数据，再组合各个区间的数据后集中进行展示。"},{key:"每周充值次数",value:"玩家在一个自然周中充值次数的分布情况。"},{key:"每月充值次数",value:"玩家在一个自然月中充值次数的分布情况。"},{key:"每周充值额度",value:"玩家在一个自然周中总充值金额的分布情况。"},{key:"每月充值额度",value:"玩家在一个自然月中总充值金额的分布情况。"}],chargeIntervalCode:[{key:"充值间隔",value:"所选时期玩家每次的充值，距其上次充值的间隔期间分布。"}],purchaseConsumeCode:[{key:"虚拟币购入",value:"时期内每日玩家充值所购入的虚拟币数量。"},{key:"虚拟币赠予",value:"时期内每日玩家所获得赠予的虚拟币数量。"},{key:"虚拟币消耗",value:"时期内每日玩家在全部消费点中所消耗掉的虚拟币数量。"},{key:"消耗次数",value:"指所选时期玩家花费虚拟币购买任何道具的总次数。"},{key:"消耗人数",value:"全部消耗道具的行为按照玩家账号ID的排重人数。"},{key:"累计留存虚拟币",value:"截至某日，游戏中全部玩家积累的未消耗掉的虚拟币数量（累计购入-累计消耗）。"}],consumeLevelCode:[{key:"各等级虚拟币消耗",value:"所选期间，玩家在各个等级时所消耗掉的虚拟币数量。"},{key:"消耗次数",value:"指所选时期玩家花费虚拟币购买任何道具的总次数。"},{key:"消耗人数",value:"全部消耗道具的行为按照玩家账号ID的排重人数。"}],consumeMissionCode:[{key:"分关卡虚拟消耗",value:"所选期间，玩家在各任务或关卡中消耗的虚拟币数量。如玩家在消费时同时进行多个任务，消费会计入玩家最后开始进行的任务。"}],consumeItemCode:[{key:"分道具虚拟消耗",value:"所选期间，各个消费点所带来的虚拟币消耗量。"}],saleNumsAndIncomesCode:[{key:"各品类销售数量与收入比重",value:"图表用于对比各个消费点（或各个消费点类型）占全部消费点的销量比重和虚拟币消耗比重，可观察到哪些消费点（或道具类别）是收入的主力贡献者，而哪些则是带动销量的物品。那些销量比重大，但收入贡献少的商品可用于活动促销，刺激玩家更早的养成付费习惯；而那些收入贡献较高的物品类型则是持续挖掘更多付费点的最佳类别。"}],consumeHabbitAnalasisCode:[{key:"各等级消费物品喜好",value:"用于直观对比玩家在不同等级时对几种不同消费点（或几种不同道具类型）的消费情况，最多同时对比5种消费点。此图表可帮助快速找出哪些消费点是玩家前期主要需要的，而哪些是其成长期之后需要的，帮助分析道具需求原因，了解消费点差异。"}],virtualEconomyConsumePointtopItems:[{key:"物品名称",value:"游戏中某个消费点的ID，根据客户端传入的消费点ID来确定，可以在消费点管理中修改其显示名。"},{key:"购买数量",value:"所选时期某消费点的购买总次数。"},{key:"虚拟币总值",value:"所选时期玩家在某消费点上花费的总虚拟币数值。"},{key:"消耗数量",value:"所选时期各个消费道具被用掉（如装备损毁、药瓶被喝掉）的总次数。"},{key:"按日趋势",value:"以每日数据的形式展示所选时期对应指标的走势情况。"},{key:"等级",value:"所选时期各消费点的购买、消耗的等级分布情况。"},{key:"关卡",value:"所选时期各消费点的购买、消耗的任务关卡分布情况，如玩家同一时间进行多个任务，将以其最后接受的任务记录购买和消耗。"}],virtualEconomyConsumePointManage:[{key:"名称",value:"游戏中某个消费点的ID，根据客户端传入的消费点ID来确定。"},{key:"设置别名",value:"为每个消费点设置更易识别的显示名。"},{key:"消费点类型",value:"为每个消费点分配类型，在一些报表中可以按类型来查询数据。允许您自定义的类型。"},{key:"操作",value:"因游戏的不断改版中可能会有一些消费点被去掉，隐藏可使其不显示在数据报表中，使查询更高效。此操作不会造成数据清除，随时可以再将其显示于报表。"}],whaleWhaleUserRechargeableUser:[{key:"充值玩家",value:"调节不同的选定时期，可依照所选时期中玩家充值的货币额度来筛查。"},{key:"排名",value:"根据玩家充值的货币额度来确定的付费排名。"},{key:"帐号",value:"鲸鱼玩家的游戏帐户。"},{key:"充值金额",value:"所选时期中玩家充值的现金额度。"},{key:"充入虚拟币",value:"所选时期中玩家充值获得的总虚拟币数额。"},{key:"消耗总额",value:"所选时期中玩家在消费点中的全部虚拟币消耗。"},{key:"新增日期",value:"玩家首次进行游戏的日期。"},{key:"当前等级",value:"玩家现在的最终等级。"}],whaleWhaleDetailAccountNumberInfo:[{key:"ID",value:"游戏客户端中传入的玩家唯一识别ID。"},{key:"帐户名称",value:"游戏客户端中传入的玩家的显性帐户名。"},{key:"来源渠道",value:"玩家的来源渠道，由其首次游戏时的渠道而定，终生不变。"},{key:"地区",value:"玩家的所属地区。"},{key:"设备",value:"玩家所用的机型和操作系统版本。"},{key:"语言",value:"玩家设备所选择的语言。"},{key:"年龄|性别",value:"游戏客户端中传入的玩家年龄及性别。"}],whaleWhaleDetailRechargeableInfo:[{key:"新增日期",value:"玩家首次游戏的日期。"},{key:"最后登录",value:"玩家最后一次进行游戏的日期。"},{key:"首次充值",value:"玩家在游戏中首次进行充值的日期。"},{key:"充值次数",value:"目前，玩家总的充值次数。"},{key:"充值金额",value:"目前，玩家总的充值额度。"},{key:"虚拟币总值",value:"目前，玩家在游戏中充值获得的总虚拟币数量。"},{key:"留存虚拟币",value:"当前玩家帐户中充值后还没消费的虚拟币数量。"}],whaleWhaleDetailConsumeOverview:[{key:"充值",value:"所选时期中该玩家所有的充值记录。"},{key:"虚拟币消耗",value:"所选时期中该玩家所有的虚拟币花费记录。"},{key:"道具消耗",value:"所选时期中该玩家所有的物品消耗（如喝掉了力量药剂）记录。"}],whaleWhaleDetailActionRecord:[{key:"行为记录",value:"所选时期中玩家每天的游戏详细行为情况，以天的方式组织游戏行为，每次游戏行为均可展开查看全部游戏内发生事件，这将对您从微观角度来了解玩家有很大帮助。"}],partnerExtentionChannelDataamount:[{key:"渠道名称",value:"创建链接渠道时填写的渠道名称。"},{key:"安装激活",value:"所选时期新增加的激活设备量。"},{key:"新增玩家",value:"所选时期新增加的玩家帐户数。"},{key:"注册转化率",value:"所选日期内首次安装游戏的设备中，截止查看报表时完成账户注册或登录过已有账户的玩家比例。1人多次注册，只记1次有效转化。例如：共5台激活设备，其中3台每人1次注册，1台没有注册，1台注册了3次账户，共注册了6个不同账户；注册转化率=(3+1)/5=80%，而不是用6次注册/5台设备。"},{key:"渠道比重",value:"所选时期，某渠道新增玩家占游戏总体新增玩家的比例。"},{key:"日活跃",value:"所选时期每日活跃玩家数（率）的平均值。"},{key:"收入",value:"所选时期玩家充值的货币总额。"},{key:"付费人数（每日加和）",value:"所选时期渠道每天付费玩家数的加和值。"},{key:"ARPU(日)",value:"所选时期每日的平均每玩家收入（收入/活跃人数）平均值。"}],partnerExtentionChannelDataquality:[{key:"渠道名称",value:"创建链接渠道时填写的渠道名称。"},{key:"平均日活跃(%)",value:"所选时期每日活跃玩家数（率）的平均值。"},{key:"一日玩家比例",value:"所选时期新增的玩家中，只在新增当天进行游戏，之后至今再未玩过游戏的玩家所占比例。"},{key:"平均次日留存率",value:"所选时期每日的次日留存率的平均值。"},{key:"首周付费比例",value:"所选时期的新增玩家中，在新增后7天内进行了充值的玩家所占比例。"},{key:"安装激活",value:"所选时期新增加的激活设备量。"},{key:"新增玩家",value:"所选时期新增加的玩家帐户数。"},{key:"收入",value:"所选时期玩家充值的货币总额。"},{key:"付费账户",value:"所选时期每天的排重付费账户数的加和量。"},{key:"ARPU(日)",value:"所选时期每日的平均每玩家收入（收入/活跃人数）平均值。"}],partnerExtentionChannelDataincome:[{key:"渠道名称",value:"创建链接渠道时填写的渠道名称。"},{key:"收入",value:"所选时期玩家充值的货币总额。"},{key:"付费人数（每日加和）",value:"所选时期渠道每天付费玩家数的加和值。"},{key:"日均付费率",value:"所选时期每日的付费率（付费人数/活跃人数）平均值。"},{key:"日均ARPU",value:"所选时期每日的平均每玩家收入（收入/活跃人数）平均值。"},{key:"日均ARPPU",value:"所选时期每日的平均每付费玩家收入（收入/付费人数）平均值。"},{key:"安装激活",value:"所选时期新增加的激活设备量。"},{key:"新增玩家",value:"所选时期新增加的玩家帐户数。"},{key:"日活跃",value:"所选时期每日活跃玩家数（率）的平均值。"}],partnerExtentionChannelDataretention:[{key:"渠道名称",value:"创建链接渠道时填写的渠道名称。"},{key:"N日留存率",value:"某日新增的玩家中，在该日后的第N日中，还玩该游戏的玩家比例。例如：5月3日新增玩家为100人，这100人中有24人在5月10日这一天内还玩过游戏，5月3日的7日留存率=24/100=24%。"},{key:"N日留存率均值",value:"所选时期每日新增玩家在该日后的第N日留存率的平均值。"}],partnerExtentionPartnerManagementChannelList:[{key:"渠道(ID)",value:"游戏客户端中渠道字段中传入的ID。"},{key:"别名",value:"为渠道ID定义一个更容易识别的显示名。"},{key:"登记日期",value:"最早发现到这个渠道ID的日期。"},{key:"合并渠道",value:"合并几个渠道的数据，报表中将直接呈现合并后的整体数据。"},{key:"隐藏渠道",value:"隐藏掉那些现在已经不再推广，新增和活跃数据很低的渠道，以使渠道数据表中更容易查阅数据。"},{key:"渠道查询账户",value:"为推广渠道开启一个登录后可查阅设备激活、新增玩家、活跃玩家数三个指标的查量后台。"}],partnerExtentionPartnerManagementShortLinkChannelList:[{key:"渠道(ID)",value:"游戏客户端中渠道字段中传入的ID。"},{key:"推广链接",value:"发给推广渠道进行推广的追踪链接。链接会自动转向到游戏的最终下载地址。"},{key:"登记日期",value:"最早发现到这个渠道ID的日期。"},{key:"合并渠道",value:"合并几个渠道的数据，报表中将直接呈现合并后的整体数据。"},{key:"隐藏渠道",value:"隐藏掉那些现在已经不再推广，新增和活跃数据很低的渠道，以使渠道数据表中更容易查阅数据。"},{key:"渠道查询账户",value:"为推广渠道开启一个登录后可查阅设备激活、新增玩家、活跃玩家数三个指标的查量后台。"}],customEventEventDataEventOverview:[{key:"事件显示名",value:"在事件管理中为EventID设置的便于识别的显示名。"},{key:"事件数",value:"所选时期该自定事件被触发的总次数。"},{key:"每启动发生次数",value:"玩家每次游戏会发生某事件的次数（事件数/游戏次数）。"}],eventManagementTableTitle:[{key:"事件名(Event ID)",value:"游戏客户端中传入的区分每个事件的ID。"},{key:"显示名",value:"为Event ID设定便于识别的显示名。"},{key:"登记日期",value:"最早发现某个Event ID的日期"},{key:"隐藏事件",value:"隐藏掉那些目前已不常用的事件，该事件将不再显示在数据表中，提升查阅数据的效率。"},{key:"清除",value:"清除掉一个EventID，此事件的历史数据都会删除，谨慎操作。以后同名EventID仍可以使用，再次发现后将重新登记并重新计数。"},{key:"停用",value:"停用掉一个EventID，平台将不再接收停用期中该事件的数据，但历史数据依然保留。您可随时再启用这个事件。"}],eventTrendCode:[{key:"事件数",value:"所选时期某事件每日的发生次数。"},{key:"每活跃用户发生",value:"每位活跃玩家会发生该事件的次数（事件数/日活跃）。"},{key:"每启动发生",value:"玩家每次游戏会发生某事件的次数（事件数/游戏次数）。"}],customEventEventDetailParameters:[{key:"参数",value:"沿着事件发生时的一些属性来展开数据。"}],playTasksNewHandConversionRate:[{key:"新手引导转化率",value:"通过设置面板设定游戏中连续的新手任务（任务需已在客户端进行集成），平台可按任务顺序层层过滤玩家数，形成玩家在连续的新手任务中的转化率。"}],playTasksTaskTollgateDetail:[{key:"任务ID",value:"游戏客户端传入的游戏ID。"},{key:"别名",value:"为便于识别，为游戏ID所定义的显示名。"},{key:"类型",value:"任务所属的类别，由您在任务和关卡管理中进行设定。"},{key:"进入次数",value:"所选时期玩家接受（进入）任务或关卡的次数。"},{key:"平均完成时间",value:"平均每次完成某项任务所消耗的游戏内时长。由于计算方法调整，暂不支持查询2017-8-11前的该项指标。如果所选查询时间范围包含这之前的日期，计算结果中也仅包含此日期之后的数据。"},{key:"失败次数",value:"所选时期玩家进行某任务的失败总次数。"},{key:"失败率",value:"所选时期玩家进行某任务会失败的比例（失败次数/进入次数）。"},{key:"失败原因",value:"根据玩家进行某任务时的任务失败原因进行分布。"},{key:"玩家等级",value:"玩家进入某任务时的等级分布情况。"}],playTasksSetUpTaskTollgateDetail:[{key:"任务ID",value:"游戏客户端中所传入的任务ID。"},{key:"任务别名",value:"为每个任务ID添加更容易识别的显性名。"},{key:"任务类型",value:"为每个任务分配类型，在一些报表中可以按类型来查询数据。允许您自定义的类型。"},{key:"操作",value:"注销掉某个任务ID，删除掉这个任务当前的全部数据。在之后发现此任务ID仍可正常接收数据。"}],levelLevelDetailedAboutGrade:[{key:"关键等级",value:"通过设置面板设定游戏中的一些关键性的特征等级（例如20级前是新手期，可定义20是一个关键等级），平台可按这些等级来划分一些等级区段，并计算玩家完成这个区段的平均游戏内耗时和在这个区段投入的总金额。可用于有效分析游戏设计与玩家真实表现是否吻合。"}],levelLevelDetailedGradeDetail:[{key:"等级",value:"指某个具体等级"},{key:"升级时长",value:"从上个等级到这个等级玩家在游戏中所消耗的时间。"},{key:"等级停滞率",value:"当一个活跃玩家在某个等级超过3个自然日没有任何等级提升，会记为这个等级的一次停滞。而停滞数占此等级活跃玩家的比例为停滞率。"},{key:"付费次数",value:"所选时期中玩家在某个等级时进行充值的总次数。"},{key:"付费金额",value:"所选时期中玩家在某个等级时充值的总货币金额。"},{key:"升级时长",value:"升级时长中将以各个时长区间形式给出分布图，升级指从上一等级升至目标等级。"},{key:"按日趋势",value:"按日趋势中以此等级每日的数据表现呈现出数据趋势。"}],levelDistributionOfPlayerCode:[{key:"玩家等级分布",value:"所选期间中排重活跃玩家的等级分布情况，按每玩家在期间中最终等级计算等级。可切换时间来单日查询等级分布，通过连续几日的对比来观测活跃玩家等级变迁情况。"}],levelDistributionOfPlayTimesCode:[{key:"游戏次数等级分布",value:"所选期间中各等级中玩家游戏次数情况。"}],levelOfLossPlayerCode:[{key:"7日未登录玩家",value:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续7日未游戏）的最终停留等级分布。"},{key:"14日未登录玩家",value:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续14日未游戏）的最终停留等级分布。"},{key:"30日未登录玩家",value:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续30日未游戏）的最终停留等级分布。"}],levelOfNewPlayerCode:[{key:"首日等级",value:"所选期间的新增玩家，在其新增当日中最终玩到的等级分布情况。"},{key:"首周等级",value:"所选期间的新增玩家，在其新增7日后玩到的等级分布情况。"},{key:"14日等级",value:"所选期间的新增玩家，在其新增14日后玩到的等级分布情况。"}],levelChangeIn7DaysCode:[{key:"新玩家7日内等级变迁",value:"所选期间的新增玩家在新增后的7日内每日的等级进展情况，可用于分析同一批新增玩家中，浅中重度玩家的不同比例。"}],summaryGameOverview:[{key:"设备激活",value:"所选时期内激活（打开过游戏并可连接网络）的唯一设备量。"},{key:"玩家帐户",value:"所选时期内新增加的玩家帐户数量。"},{key:"付费玩家",value:"所选时期内进行过充值的玩家帐户数，占时期内活跃玩家的比例为付费率。"},{key:"收入",value:"所选时期内玩家为获取虚拟币而支付的货币总额。"}],summarySummaryOnlineTrend:[{key:"设备激活",value:"指安装了游戏客户端并开启游戏传过任意数据的设备，每台设备只计算一次。"},{key:"玩家数",value:"游戏中玩家的唯一识别ID的数量。"},{key:"ACU",value:"每日，游戏的平均在线玩家数。"},{key:"Avg ACU",value:"所选时期的ACU算数平均值。"},{key:"PCU",value:"每日，游戏的峰值在线玩家数。"},{key:"实时在线",value:"此时正在进行游戏的玩家数量。"}],keyCode:[{key:"设备激活",value:"当日新增加的激活设备量。"},{key:"新玩家",value:"当日新增加的玩家帐户数。"},{key:"活跃玩家",value:"当日有开启过游戏的玩家数，其中当日新增玩家带来的活跃以区别的颜色显示。"},{key:"付费玩家",value:"当日中进行过充值的玩家数，其中当日首次充值的新增付费玩家会以区别的颜色显示。"},{key:"收入",value:"当日玩家充值的货币总额。"}],chargeCode:[{key:"日付费率",value:"当日内付费玩家数占当日活跃玩家数的比例。"},{key:"日ARPU",value:"当日每活跃玩家平均收入（收入/活跃玩家）。"},{key:"日ARPPU",value:"当日每付费玩家平均收入（收入/付费玩家数）。"}],retentionCode:[{key:"N日留存率",value:"某日新增的玩家/设备中，在该日后的第N日中，还有进行游戏的玩家/设备比例。例 如：5月3日新增玩家为100人，这100人中有24人在5月10日这一天内还有玩过游戏，5月3日的7日留存 率=24/100=24%"}],playTimeNumsCode:[{key:"平均游戏时长",value:"当日，平均每玩家进行游戏的时长（当日游戏总时长/日活跃）"},{key:"平均游戏次数",value:"当日，平均每位玩家进行游戏的次数（当日游戏总次数/活跃用户）"}],revenueNewPlayerValueCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValueLocationCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValuePartnerCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValueSexCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValueAgeCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],productCenterIndicator:[{key:"设备激活",value:"指安装了游戏客户端并开启游戏可连接网络的设备，每台设备只计算一次。"},{key:"玩家",value:"游戏中玩家的唯一识别ID（游戏帐户）的数量。"},{key:"游戏次数",value:"玩家进行游戏的总次数，单个玩家帐户从打开游戏至退出游戏的全过程记为一次游戏。"},{key:"收入",value:"玩家为获取虚拟币而支付的货币总额。"}],newDeviceSubAccountCode:[{key:"小号分析",value:"您所选时间内激活的设备，到当前为止的注册账号数目分布情况。通过小号分析能帮助了解多少比例的设备会反复注册多个账户，多少比例至今还未进行注册，分析刷小号情况。"}],pushArriveCode:[{key:"消息到达",value:"您所选时间内，消息到达。"}],pushClickCode:[{key:"消息点击",value:"您所选时间内，消息点击。"}]}),define("nls/zh_cn/indicatorTip",{newInstallAndPlayer:"设备激活:当日新增加的激活设备量;<br />新增玩家:当日新增加的玩家帐户数",activePlayer:"当日有开启过游戏的玩家数，其中当日新增玩家带来的活跃以区别的颜色显示",chargePlayer:"当日中进行过充值的玩家数，其中当日首次充值的新增付费玩家会以区别的颜色显示",income:"当日玩家充值的货币总额",paidRate:"当日内付费玩家数占当日活跃玩家数的比例",dayARPU:"当日每活跃玩家平均收入（收入/活跃玩家）",dayARPPU:"当日每付费玩家平均收入（收入/付费玩家数）",newPlayerRetention:"某日新增的玩家/设备中，在该日后的第N日中，还有进行游戏的玩家/设备比例。<br />例如：5月3日新增玩家为100人，这100人中有24人在5月10日这一天内还有玩过游戏，5月3日的7日留存率=24/100=24%",newDeviceRetention:"某日新增的玩家/设备中，在该日后的第N日中，还有进行游戏的玩家/设备比例。<br />例如：5月3日新增玩家为100人，这100人中有24人在5月10日这一天内还有玩过游戏，5月3日的7日留存率=24/100=24%",playTimeNumsCode:"平均游戏时长：当日，平均每玩家进行游戏的时长（当日游戏总时长/日活跃）;<br />平均游戏次数：当日，平均每位玩家进行游戏的次数（当日游戏总次数/活跃用户）",installAndNewPlayer:"设备激活：当日新增加的激活设备量;<br />新增玩家：当日新增加的玩家帐户数",conversion:"安装游戏的玩家中（即激活设备）有注册账户的玩家比例，1人多次注册，只记1次有效转化。<br />例如：共5台激活设备，其中3台每人1次注册，1台没有注册，1台注册了3次账户，共注册了6个不同账户；注册转化率=（3+1）/5=80%，而不是用6次注册/5台设备",newDeviceSubAccountCode:"您所选时间内激活的设备，到当前为止的注册账号数目分布情况。通过小号分析能帮助了解多少比例的设备会反复注册多个账户，多少比例至今还未进行注册，分析刷小号情况",newPlayerAccountCode:"新增玩家帐号的帐户类型分布情况",newPlayerLocationCode:"新增玩家帐号的地区分布情况",newPlayerPartnerCode:"新增玩家帐号的渠道分布情况，每个玩家始终归入首次设备激活时的渠道",newPlayerSexCode:"新增玩家帐号的玩家性别情况，根据您的游戏中传入的性别确定玩家的性别",newPlayerAgeCode:"新增玩家帐号的年龄分布情况，根据您传入的年龄确定玩家的年龄段",dautab:"当日有开启过游戏的玩家数，其中当日新增玩家带来的活跃以区别的颜色显示",wautab:"当日的最近一周（含当日的倒推7日）活跃玩家，将进行过游戏的玩家按照帐户进行排重",mautab:"当日的最近一月（含当日的倒退30日）活跃玩家，将进行过游戏的玩家按照帐户进行排重",daumautab:"DAU/MAU可体现玩家的总体粘度，衡量这30天内每日活跃玩家的交叉重合情况。此比例越趋近于1，代表月活跃中有更多玩家多日活跃；比例越趋近0，则代表大量玩家只在一日中活跃。当比例小于0.1时，游戏的自传播性将很差。DAU/MAU×30也用于大致衡量玩家平均每月活跃天数",activePlayerPlayedDaysCode:"所选时期的活跃玩家的活跃日期减新增日期的日数差（即其已进行游戏的天数）的分布情况",activePlayerLevelCode:"所选时期每日活跃玩家的等级分布情况，由每日数据组成的时期趋势可观测等级的总体走势",activePlayerLocationCode:"所选时期排重活跃玩家的地区分布情况",activePlayerPartnerCode:"所选时期排重活跃玩家的渠道分布情况，渠道按照其最初新增时的渠道确定",activePlayerSexCode:"所选时期排重活跃玩家的性别情况",activePlayerAgeCode:"所选时期排重活跃玩家的年龄分布情况",retainedUserAnallyticCode:"圈定时期内符合次日/7日/30日留存条件的新玩家，根据其新增日的使用行为（等级、游戏次数、是否付费等）来进行分布，可有效的分析新增日行为与留存的相关性",playerCustomRetentionCustomRetain:"选择好一个时期的玩家/设备样本群，并定义好玩家/设备使用中被计为留存的条件，将以样本群来计算之后的一段时期内的自定留存数据。留存行为可支持选择不同的游戏次数来抽取数据，这代表不同粘度玩家/设备的留存情况，通过变换条件抽取数据来进行对比分析",newPayPlayer:"当日新增加的充值玩家",totalPayPlayer:"截至当日，累计的充过值的玩家数",payRate:"截至当日，累计付费玩家占累计总玩家的比例（累计付费玩家/累计玩家帐户）",dailyPayRate:"所选时期的新增玩家中，在新增当日即进行充值的玩家数和其占比",weekPayRate:"所选时期的新增玩家中，在新增后的7日内进行了充值的玩家数和其占比",monthPayRate:"所选时期的新增玩家中，在新增后的30日内进行了充值的玩家数和其占比",gameDays:"所选时期内的新增付费玩家，按照其已经玩游戏的天数（首付日期-新增日期）进行分布",accumulGameTime:"所选时期内，玩家首次付费时在游戏中累计的游戏时长分布情况",playerFirstBuyLevelCode:"所选时期内，玩家首次付费时的等级分布情况",playerFirstBuyMoneyCode:"玩家在游戏中首次充值时，支付的单比金额的分布情况",playerFirstBuyChargePackageCode:"玩家在游戏中首次充值时，所选择的充值包的类型分布情况",lost:"每日流失数：到某日为止，玩家连续7/14/30天没有再玩过游戏，将被视为一个流失。例如：1月2日某玩家还有玩过游戏，但在3～9日的连续7日中都没有再玩过游戏，则记为1月9日的一个7日流失用户。如果玩家继续到10日还没有玩游戏，在1月10日不会再计算一次7日流失，这样保证一段时期的流失用户不会重复计算;<br />每日流失率：每日的7日（14日/30日）不登陆流失玩家数占该日7日（14日/30日）前活跃玩家数的比例","return":"流失玩家在某日再次进行游戏，将视为当日的一个回流。回流玩家可用于沉默玩家唤醒活动后的效果评估",churnedPlayerAnalysisCode:"圈定时期内符合7/14/30日流失条件的玩家，按照其流失前等级、已游戏天数、付费情况等条件来进行分布，可有效分析流失群体的特征，找出原因优化游戏",playerLostFunnelLossFunnel:"选择某时期的新增或活跃玩家形成样本群，分析他们在之后的一段期间后是否已经流失。图表中给出的数字为每个期间还暂存的玩家数量，其余部分即为流失。本图表中计算流失的条件是自某日起至当前时间，玩家再未有过任何游戏行为",day:"当日活跃玩家平均进行游戏的时长（当日总时长/日活跃）和平均每玩家的游戏次数（游戏次数/日玩家数）",week:"某自然周内活跃玩家在该周中平均进行游戏的时长（周总时长/周排重活跃）和平均每玩家一周内的游戏次数（游戏次数/周排重玩家数）",month:"某自然月内活跃玩家在该月中平均进行游戏的时长（月总时长/月排重活跃）和平均每玩家一月内的游戏次数（游戏次数/月排重玩家数）",playFrequencyCode:"指玩家在一定期间中进行游戏的频繁度，将按照频度的不同将玩家分入不同的分布区间。报表中按照您所选日期自动扩充完整自然周/月来计算周和月的频次，跨多个周/月的数据查询会先计算单个周/月的分布数据，再组合各个区间的数据后集中进行展示",monthDays:"玩家在一个自然月中活跃日数的分布情况",weekDays:"玩家在一个自然周中活跃日数的分布情况",weekTimes:"玩家在一个自然周中游戏次数的分布情况",dayTimes:"玩家在一日中游戏次数的分布情况",playTimeCode:"指玩家在游戏内的游戏时长，按照不同时长将玩家分入不同的分布区间。对周使用时长将按照您所选日期自动扩充完整自然周来计算单用户时长，跨多周的查询会先计算单周的分布数据，再组合各个区间的数据后集中进行展示",weekTime:"玩家在一个自然周中玩游戏总时长的分布情况",dayTime:"玩家在一日中玩游戏总时长的分布情况",singleTime:"玩家在一日中每次玩游戏的时长分布情况",playTimesDistributeCode:"所选时间段，各小时段中全部玩家的分布情况",deviceModelCode:"所选玩家的机型分布情况",deviceOSCode:"所选玩家的设备操作系统分布情况",deviceResolutionCode:"所选玩家的分辨率分布情况",deviceCarrierCode:"所选玩家所用运营商的分布情况",deviceNetworkCode:"玩家每次进行游戏时的联网方式分布情况。其中离线代表玩家在终端打开游戏，但未能联网进行游戏的情况",onlineUsersCode:"在线玩家中会实时刷新最近5分钟在游戏中的在线玩家数据，每秒钟都会计算最实时的在线数据以保证准确性。在左侧仪表中显示的即为当前时刻在线数据，而右侧图表展示了今日和昨日的在线走势，通过曲线的对比可以明显观测到今日较之前的变化幅度",dailyAcu:"（Average Concurrent Users）平均同时在线玩家人数。我们每5分钟采集一次瞬时的在线玩家数，一日中全部采集点的平均值即ACU",dailyPcu:"（Peak concurrent users ）最高同时在线玩家人数。我们每5分钟采集一次瞬时的在线玩家数，一日中最高的一个值即PCU",dailyAcuPcu:"通常称为在线平高比，比值越大则每日在线越平稳，玩家活跃时间更长，游戏服务器也更有效率；而极低的平高比则意味着玩家集中上线，但总体活跃性并不强。某些限时活动可能会拉低平高比，但属正常情况",levelLevelDetailedAboutGrade:"通过设置面板设定游戏中的一些关键性的特征等级（例如20级前是新手期，可定义20是一个关键等级），平台可按这些等级来划分一些等级区段，并计算玩家完成这个区段的平均游戏内耗时和在这个区段投入的总金额。可用于有效分析游戏设计与玩家真实表现是否吻合",levelGrade:"指某个具体等级",levelUpgradeTime:"从上个等级到这个等级玩家在游戏中所消耗的时间",levelGradeStagnateRate:"当一个活跃玩家在某个等级超过3个自然日没有任何等级提升，会记为这个等级的一次停滞。而停滞数占此等级活跃玩家的比例为停滞率",levelPaycount:"所选时期中玩家在某个等级时进行充值的总次数",levelPaysum:"所选时期中玩家在某个等级时充值的总货币金额",levelDistributionOfPlayerCode:"所选期间中排重活跃玩家的等级分布情况，按每玩家在期间中最终等级计算等级。可切换时间来单日查询等级分布，通过连续几日的对比来观测活跃玩家等级变迁情况",levelDistributionOfPlayTimesCode:"所选期间中各等级中玩家游戏次数情况",seven:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续7日未游戏）的最终停留等级分布",fourteen:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续14日未游戏）的最终停留等级分布",thirty:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续30日未游戏）的最终停留等级分布",firstDayLevel:"所选期间的新增玩家，在其新增当日中最终玩到的等级分布情况",firstWeekLevel:"所选期间的新增玩家，在其新增7日后玩到的等级分布情况",fourteenDayLevel:"所选期间的新增玩家，在其新增14日后玩到的等级分布情况",levelChangeIn7DaysCode:"所选期间的新增玩家在新增后的7日内每日的等级进展情况，可用于分析同一批新增玩家中，浅中重度玩家的不同比例",playTasksNewHandConversionRate:"通过设置面板设定游戏中连续的新手任务（任务需已在客户端进行集成），平台可按任务顺序层层过滤玩家数，形成玩家在连续的新手任务中的转化率",tasksMissionName:"游戏客户端传入的游戏ID",tasksMissionDisplayName:"为便于识别，为游戏ID所定义的显示名",tasksMissionTypeName:"任务所属的类别，由您在任务和关卡管理中进行设定",tasksStartTimes:"所选时期玩家接受（进入）任务或关卡的次数",tasksAvgFinishTime:"平均每次完成某项任务所消耗的游戏内时长。由于计算方法调整，暂不支持查询2017-8-11前的该项指标。如果所选查询时间范围包含这之前的日期，计算结果中也仅包含此日期之后的数据",tasksFailedTimes:"所选时期玩家进行某任务的失败总次数",tasksFailRate:"所选时期玩家进行某任务会失败的比例（失败次数/进入次数）",tasksMissionID:"游戏客户端中所传入的任务ID",tasksMissionAlias:"为每个任务ID添加更容易识别的显性名",tasksMissionType:"为每个任务分配类型，在一些报表中可以按类型来查询数据。允许您自定义的类型",tasksMissionOperate:"注销掉某个任务ID，删除掉这个任务当前的全部数据。在之后发现此任务ID仍可正常接收数据",chargeValue:"所选时期每日玩家充值的货币总额",chargeTimes:"所选时期每日玩家进行充值的总次数",chargeNums:"当日进行充值的玩家帐户数。充值人数SUM是所选时期充值玩家的排重数目，不是简单加和",chargeLevelValue:"所选时期的充值总金额根据玩家充值时的等级进行分布",chargeLevelNum:"所选时期每次充值根据玩家充值时的等级进行分布",incomeLocationCode:"所选期间，各个地区的玩家充值金额的分布情况",incomePartnerCode:"所选期间，各个渠道来源的玩家充值金额的分布情况",incomeSexCode:"不同性别玩家的充值总金额情况",incomeAgeCode:"不同年龄段玩家的充值总金额情况",dayPayRate:"当日进行付费的玩家占当日活跃玩家的比例",weekPayRate:"某自然周中进行付费的玩家（排重）占该自然周活跃玩家的比例",monthPayRate:"某自然月中进行付费的玩家（排重）占该自然月活跃玩家的比例",monthARPU:"某自然月每活跃玩家平均收入（收入/月排重活跃玩家）",monthARPPU:"某自然月每付费玩家平均收入（收入/月排重付费玩家数）",locationRate:"所选时期，各地区玩家的每日付费率的平均值",locationARPU:"所选时期，各地区玩家的每日ARPU的平均值",locationARPPU:"所选时期，各地区玩家的每日ARPPU的平均值",partnerRate:"所选时期，各渠道来源玩家的每日付费率的平均值",partnerARPU:"所选时期，各渠道来源玩家的每日ARPU的平均值",partnerARPPU:"所选时期，各渠道来源玩家的每日ARPPU的平均值",fetchDailyRateOfPay:"不同性别玩家的平均日付费率情况",fetchDailyARPU:"不同性别玩家的平均日ARPPU",fetchDailyARPPU:"不同性别玩家的平均日ARPPPU",ageGroupRate:"不同年龄段玩家的平均日付费率情况",ageGroupARPU:"不同年龄段玩家的平均日ARPPU",ageGroupARPPU:"不同年龄段玩家的平均日ARPPPU",day07:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入",day14:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入",day30:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入",day60:"某日新增玩家（账户）中，平均每玩家在接下来的60日内（新增日和之后的60日）为游戏内带来的收入",day90:"某日新增玩家（账户）中，平均每玩家在接下来的90日内（新增日和之后的90日）为游戏内带来的收入",incomeNum_charge:"时期中各类付费方式（支付宝、神州付等）所带来的收入",chargePlayerNum_charge:"采用各类付费方式的玩家充值次数",incomeNum_package:"时期中各种虚拟消费包所带来的收入。消费包类型由您的客户端传入，如：6元30钻石礼包",chargePlayerNum_package:"玩家购买各类消费包的次数",revenuePlayFrequencyCode:"指玩家在一定期间中充值的频繁度或总消费额度，将按照频度或额度将玩家分入不同的分布区间，其中未付费也会作为一种频度给出。报表中按照您所选日期自动扩充完整自然周/月来计算周和月的频次，跨多个周/月的数据查询会先计算单个周/月的分布数据，再组合各个区间的数据后集中进行展示",weekChargeTimes:"玩家在一个自然周中充值次数的分布情况",monthChargeTimes:"玩家在一个自然月中充值次数的分布情况",weekChargeNum:"玩家在一个自然周中总充值金额的分布情况",monthChargeNum:"玩家在一个自然月中总充值金额的分布情况",chargeIntervalCode:"所选时期玩家每次的充值，距其上次充值的间隔期间分布","chart-staus-coin":"虚拟币购入：时期内每日玩家充值所购入的虚拟币数量;<br />虚拟币赠予：时期内每日玩家所获得赠予的虚拟币数量;<br />虚拟币消耗：时期内每日玩家在全部消费点中所消耗掉的虚拟币数量",consumeTimes:"指所选时期玩家花费虚拟币购买任何道具的总次数",consumeNumOfPeople:"全部消耗道具的行为按照玩家账号ID的排重人数","chart-total-coin":"截至某日，游戏中全部玩家积累的未消耗掉的虚拟币数量（累计购入-累计消耗）",levelDummyCoinConsume:"所选期间，玩家在各个等级时所消耗掉的虚拟币数量",levelConsumeTimes:"指所选时期玩家花费虚拟币购买任何道具的总次数",levelConsumeNumOfPeople:"全部消耗道具的行为按照玩家账号ID的排重人数",consumeMissionCode:"所选期间，玩家在各任务或关卡中消耗的虚拟币数量。如玩家在消费时同时进行多个任务，消费会计入玩家最后开始进行的任务",consumeItemCode:"所选期间，各个消费点所带来的虚拟币消耗量",saleNumsAndIncomesCode:"图表用于对比各个消费点（或各个消费点类型）占全部消费点的销量比重和虚拟币消耗比重，可观察到哪些消费点（或道具类别）是收入的主力贡献者，而哪些则是带动销量的物品。那些销量比重大，但收入贡献少的商品可用于活动促销，刺激玩家更早的养成付费习惯；而那些收入贡献较高的物品类型则是持续挖掘更多付费点的最佳类别",consumeHabbitAnalasisCode:"用于直观对比玩家在不同等级时对几种不同消费点（或几种不同道具类型）的消费情况，最多同时对比5种消费点。此图表可帮助快速找出哪些消费点是玩家前期主要需要的，而哪些是其成长期之后需要的，帮助分析道具需求原因，了解消费点差异",cpGoodsname:"游戏中某个消费点的ID，根据客户端传入的消费点ID来确定，可以在消费点管理中修改其显示名",cpQuantityPurchase:"所选时期某消费点的购买总次数",cpDummyCoinTotalValue:"所选时期玩家在某消费点上花费的总虚拟币数值",cpQuantityConsume:"所选时期各个消费道具被用掉（如装备损毁、药瓶被喝掉）的总次数",cpDailyTrend:"以每日数据的形式展示所选时期对应指标的走势情况",cpLevelTollgate:"等级：所选时期各消费点的购买、消耗的等级分布情况;<br />关卡：所选时期各消费点的购买、消耗的任务关卡分布情况，如玩家同一时间进行多个任务，将以其最后接受的任务记录购买和消耗",cpmdesignation:"游戏中某个消费点的ID，根据客户端传入的消费点ID来确定",cpmsetAlias:"为每个消费点设置更易识别的显示名",cpmconsumePointCategory:"为每个消费点分配类型，在一些报表中可以按类型来查询数据。允许您自定义的类型",cpmoperate:"因游戏的不断改版中可能会有一些消费点被去掉，隐藏可使其不显示在数据报表中，使查询更高效。此操作不会造成数据清除，随时可以再将其显示于报表",whaleWhaleUserRechargeableUser:"调节不同的选定时期，可依照所选时期中玩家充值的货币额度来筛查",wwranking:"根据玩家充值的货币额度来确定的付费排名",wwaccountNumber:"鲸鱼玩家的游戏帐户",wwrechargeableLimit:"所选时期中玩家充值的现金额度",wwrechargeDummyCoin:"所选时期中玩家充值获得的总虚拟币数额",wwcosumeSum:"所选时期中玩家在消费点中的全部虚拟币消耗",wwnewIncreasedDate:"玩家首次进行游戏的日期",wwcurrentLevel:"玩家现在的最终等级",whaleWhaleDetailAccountNumberInfo:"ID：游戏客户端中传入的玩家唯一识别ID;<br />帐户名称：游戏客户端中传入的玩家的显性帐户名;<br />来源渠道：玩家的来源渠道，由其首次游戏时的渠道而定，终生不变;<br />地区：玩家的所属地区;<br />设备：玩家所用的机型和操作系统版本;<br />语言：玩家设备所选择的语言;<br />年龄|性别：游戏客户端中传入的玩家年龄及性别",whaleWhaleDetailRechargeableInfo:"新增日期：玩家首次游戏的日期;<br />最后登录：玩家最后一次进行游戏的日期;<br />首次充值：玩家在游戏中首次进行充值的日期;<br />充值次数：目前，玩家总的充值次数;<br />充值金额：目前，玩家总的充值额度;<br />虚拟币总值：目前，玩家在游戏中充值获得的总虚拟币数量;<br />留存虚拟币：当前玩家帐户中充值后还没消费的虚拟币数量",chargeInfo:"所选时期中该玩家所有的充值记录",purchaseInfo:"所选时期中该玩家所有的虚拟币花费记录",itemUseInfo:"所选时期中该玩家所有的物品消耗（如喝掉了力量药剂）记录",ppchannelName:"创建链接渠道时填写的渠道名称",ppequipmentActive:"所选时期新增加的激活设备量",ppnewIncreasedPlayerRegister:"所选时期新增加的玩家帐户数",ppregisterConversionRate:"所选日期内首次安装游戏的设备中，截止查看报表时完成账户注册或登录过已有账户的玩家比例。1人多次注册，只记1次有效转化。<br />例如:共5台激活设备，其中3台每人1次注册，1台没有注册，1台注册了3次账户，共注册了6个不同账户；注册转化率=（3+1）/5=80%，而不是用6次注册/5台设备。",ppchannelProportion:"所选时期，某渠道新增玩家占游戏总体新增玩家的比例",ppavgDayActive:"所选时期每日活跃玩家数（率）的平均值",pponeDayPlayersProportion:"所选时期新增的玩家中，只在新增当天进行游戏，之后至今再未玩过游戏的玩家所占比例",ppavgMorrowRetention:"所选时期每日的次日留存率的平均值",ppfirstWeekPayRatio:"所选时期的新增玩家中，在新增后7天内进行了充值的玩家所占比例",ppincome:"所选时期玩家充值的货币总额",ppavgDailyPayPeopleCount:"所选时期渠道每天付费玩家数的加和值",ppavgDailyPayRate:"所选时期每日的付费率（付费人数/活跃人数）平均值",ppavgDailyarpu:"所选时期每日的平均每玩家收入（收入/活跃人数）平均值",ppavgDailyarppu:"所选时期每日的平均每付费玩家收入（收入/付费人数）平均值",avgDayRentionRate1:"所选时期每日新增玩家在该日后的第1日留存率的平均值",avgDayRentionRate3:"所选时期每日新增玩家在该日后的第3日留存率的平均值",avgDayRentionRate7:"所选时期每日新增玩家在该日后的第7日留存率的平均值",avgDayRentionRate14:"所选时期每日新增玩家在该日后的第14日留存率的平均值",avgDayRentionRate30:"所选时期每日新增玩家在该日后的第30日留存率的平均值",ppmchannel:"游戏客户端中渠道字段中传入的ID",ppmspreadLink:"发给推广渠道进行推广的追踪链接。链接会自动转向到游戏的最终下载地址",ppmalias:"为渠道ID定义一个更容易识别的显示名",ppmrecordDate:"最早发现到这个渠道ID的日期",ppmmergeChannel:"合并几个渠道的数据，报表中将直接呈现合并后的整体数据",ppmhideChannel:"隐藏掉那些现在已经不再推广，新增和活跃数据很低的渠道，以使渠道数据表中更容易查阅数据",ppmchannelQueryAccount:"为推广渠道开启一个登录后可查阅设备激活、新增玩家、活跃玩家数三个指标的查量后台",edeventdisplayname:"在事件管理中为EventID设置的便于识别的显示名",edeventnum:"所选时期该自定事件被触发的总次数",edoccuredTimesPerLogin:"玩家每次游戏会发生某事件的次数（事件数/游戏次数）",edmeventName:"游戏客户端中传入的区分每个事件的ID",edmdisplayName:"为Event ID设定便于识别的显示名",edmrecordDate:"最早发现某个Event ID的日期",edmhidingEvent:"隐藏掉那些目前已不常用的事件，该事件将不再显示在数据表中，提升查阅数据的效率",edmoperate:"清除：清除掉一个EventID，此事件的历史数据都会删除，谨慎操作。以后同名EventID仍可以使用，再次发现后将重新登记并重新计数;<br />停用：停用掉一个EventID，平台将不再接收停用期中该事件的数据，但历史数据依然保留。您可随时再启用这个事件",eventNum:"所选时期某事件每日的发生次数",activeUserNum:"每位活跃玩家会发生该事件的次数（事件数/日活跃）",startUpNum:"玩家每次游戏会发生某事件的次数（事件数/游戏次数）",customEventEventDetailParameters:"沿着事件发生时的一些属性来展开数据",pushArriveCode:"您所选时间内，消息到达",pushClickCode:"您所选时间内，消息点击"}),define("nls/zh_cn/warning",{addWarning:"添加新告警",createdWarning:"已建立告警项",warningName:"告警名称",warningStatus:"使用状态",warningStoping:"停用中",warningNormal:"正常",operator:"操作",edit:"编辑","delete":"删除",warningNotify:"通知",warningTime:"日期",warningReason:"原因",sendEmail:"发送邮件",editWarning:"编辑告警",cancel:"取消",save_close:"保存并关闭",value:"数据值",someDay:"某日",choseEvent:"选择事件",choosePartner:"选择渠道",addWarningValue:"请填写数量",partner:"渠道名",event:"事件名",metricsName:{install:"设备激活",newPlayer:"新增玩家",partnerInstall:"渠道新增激活",DAU:"日活跃玩家",registerConvert:"注册转化率",customNum:"自定义事件数",charge:"收入金额",purchase:"虚拟币消耗"},compareType:{prevDay:"较上一日变化幅度",prevWeek:"较上一周变化幅度",dataValue:"数据值"},compareOperator:{overtop:"高于",greatThan:"大于",lessThan:"小于"},unit:{precent:"百分比",dataValue:"数据值"},notice:{innerError:"服务器内部错误!",nameExist:"预警名称已存在!",mailFormatError:"请检查邮件格式!",mailNumOverTop:"最多只能添加5个邮件!",warningNameIsNull:"预警名称不能为空!",mustChoosePartner:"请选择一个渠道!",mustChooseEvent:"请选择一个时间!",warningValueIsNull:"预警值不能为空!",warningValueIsNotNum:"预警值只能为数字!",emailIsNull:"邮件不能为空!",emailRepeat:"邮件不能重复"}}),define("nls/zh_cn/daySummary",{operatorDailyReport:{Install:"设备激活",NewPlayer:"注册账户",RegistConvert:"注册转化率(%)",DAU:"DAU",OldDAU:"DAU(老玩家)",AvgACU:"平均在线",PCU:"峰值在线",PlayTimes:"游戏次数",AvgPlayTimes:"平均游戏次数",AvgPlayTime:"平均游戏时长(分)",DeviceNexDayKeeper:"设备次日留存(%)",DeviceSevenDayKeeper:"设备7日留存(%)",DeviceThirtyDayKeeper:"设备30日留存(%)",AccountNexDayKeeper:"账户次日留存(%)",AccountSevenDayKeeper:"账户7日留存(%)",AccountThirtyDayKeeper:"账户30日留存(%)",DayIncome:"日收入",PayAccountNum:"付费玩家数",NewPayAccountNum:"新增付费玩家",DayPayRate:"日付费率(%)",ARPU:"ARPU",ARPPU:"ARPPU",RewardVC:"赠送虚拟币",BuyVC:"购买虚拟币",ConsumeVC:"消耗虚拟币",TotalRemaineVC:"累计留存虚拟币",TotalInstall:"累计激活",TotalAccount:"累计账户",TotalIncome:"累计收入",TotalPayRate:"总体付费率(%)",TotalPayAccountNum:"总付费用户数",userCategory:"用户类",incomeCategory:"收入类",comsumeCategory:"消耗类",totalCategory:"总量类",valueCategory:"价值类",trend:"缩略趋势",NewValue01:"新玩家1日价值",NewValue02:"新玩家2日价值",NewValue03:"新玩家3日价值",NewValue07:"新玩家7日价值"},partnerReport:{focusPartner:"重点关注渠道",otherPartner:"其他全部渠道",parterName:"渠道名称",install:"设备激活",newPlayer:"新增用户",income:"收入"},noData:"没有数据...",prevDay:"环比上日",prevWeek:"同比上周",operatorReportTitle:"运营日报",partnerReportTitle:"渠道日报",subscribeReport:"订阅报表",title_subscribe:"日报订阅设置",title_sendTime:"发送时间",title_receiveMail:"接收邮箱",title_addMail:"增加邮箱",title_cancel:"取消",title_saveClose:"保存并关闭",tip1:"最多只能添加30个接收邮箱!",tip2:"邮箱格式不正确!",tip3:"邮箱地址不能重复",customMetrics:"自定义日报指标"}),define("nls/zh_cn/operations",{campaignList:{activityOverview:"活动概览",newActivity:"新建活动",activityTitle:"活动标题",startTime:"开始时间",reachingToUsers:"用户抵达",status:"状态",userClick:"用户点击",operate:"操作"},summary:{activities:"个活动",comingSoon:"即将开始",inProgress:"正在执行中",completed:"执行完毕"},welcome:{title:"欢迎使用运营活动",content:"强大的自定义功能让您自由定制向用户展示的文字和图片，您可以发给您想要的用户，您甚至可以设定用户点开消息后是打开一个活动页面还是下载新版本的游戏。无论游戏更新还是服务器紧急维护，还是游戏商城活动或者是节假日活动奖励，或是全新游戏上线求扩散，我们可轻松帮您推送给您的用户。",broadcasting:"广播通知",broadcastingContent:"快速发送通知消息到所有用户",promotion:"商城促销",promotionContent:"道具打折迅速抵达付费用户",offering:"活动奖励",offeringContent:"感谢您对游戏一直以来的支持与鼓励",crossPromotion:"交叉推广",crossPromotionContent:"利用自有应用帮助推广新游戏",startNow:"立即开始"},addPushBind:{bindingService:"绑定服务",serviceName:"服务名称",content:"集成下述任何推送平台SDK，以获得推送能力。将推送参数绑定在TalkingData，在您需要进行推送时，即可一键推送。",chooseService:"选择服务",mPush:"魔推",getuiPush:"个推",tdPush:"td ios内部推送",confirmAndBind:"验证并绑定",pushDescription:"如何绑定推送服务",first:"进入推送平台官网，注册成为开发者；",second:"创建产品，在游戏中集成推送SDK；",third:"将推送平台中获得的参数在左侧进行配置。",mPushNow:"立即访问魔推",getuiPushNow:"立即访问个推"},pushBind:{title:"已绑定的三方推送服务",title1:"开始绑定的三方推送服务",newBinding:"新建绑定",serviceStatus:"服务状态",serviceType:"服务类型",platformSupport:"平台支持",bindingSupport:"绑定支持",bindingTime:"绑定时间",notificationSubtotal:"累计通知",operate:"操作",receiveMessage:"接入信息",remark:"这里可以查看关键参数，上传IOS证书，设置IOS推送环境等",usage:"正常使用",ISOCertificate:"IOS证书",pushEnvironment:"推送环境",developmentEnvironment:"开发环境",developmentCertificate:"开发环境证书",notConfigured:"未配置",configured:"已配置",productionEnvironment:"生产环境",productionCertificate:"生产环境证书",switchEnvironment:"修改环境",apns:"您还没有上传apns推送证书，请先上传!",pem:"上传pem证书格式",switching:"正在切换中...",switchingSuccess:"切换成功",content1:"推送服务支持绑定其他三方推送服务，只需要输入必要的参数，即可绑定使用，",content2:"不需要再登陆三方推送后台，集中管理，简单高效。",gettingStarted:"立刻开始",selectFile:"请选择证书文件",uploading:"上传中",uploadSuccessful:"上传成功"},campaigns:{toWhom:"发给谁",what:"发什么",readyToSend:"准备发",activityName:"活动名称",newPromotion:"新的营销活动",choosePlatform:"选择应用平台",chooseUserSegment:"选择玩家群",allPlayers:"所有玩家",toPushMessage:"向所有的玩家推送消息",precisionSegment:"精准群体",toPushMessageToThe:"向符合条件的精准群体推送消息"},whatToSend:{sendContent:"发送内容",notifiationOnTop:"顶栏通知",popUpNotification:"弹窗通知",remark:"您需要填入需要发送的内容，用户收到通知后点击即可启动游戏。"},prepareToSend:{userSegment:"用户群",deviceIsAndroid:"设备平台是Android",deviceIsIOS:"设备平台是IOS",deviceIs:"设备平台是",notificationFeature:"通知特性",wakeUpTheScreen:"唤醒屏幕",ringOnNotification:"通知响铃",vibrateOnNotification:"通知振动",deleteMessage:"删除消息",sendTime:"发送时间",setTime:"设定时间",specifiedTime:"指定时间",sendImmediately:"立即发送",sendOnShcedule:"定时发送",offlineWaiting:"离线等待",hour:"小时",triangleIcon:"三角图标",remark:"发送时处于离线的玩家，在等待时间内连线后，仍可接收推送信息。",open:"开",close:"关",numerals:"数字标注"},accurateGroup:{groupsTemplates:"群体模版",groupsTemplatesRemark:"预定义好的群体模板，帮助您最快定位目标群体",groupsTemplatesRemark1:"选择按组满足以下所有条件"},segmentConditions:{gameBehavior:"游戏行为",wastage:"流失情况",activeSituation:"活跃情况",gameFrequency:"游戏频度",gameDuration:"游戏时长",accountRegistration:"账号注册",paidSituation:"付费情况",payCredit:"付费额度",payNumber:"付费次数",paidPlacement:"付费排名",gameSchedule:"游戏进度",ratingsRange:"等级范围",levelTask:"关卡任务",sourcesAndProperties:"来源和属性",newTime:"新增时期",channelSource:"渠道来源",sex:"性别",country:"国家",equipment:"设备",platform:"平台",model:"型号",operatingSystem:"操作系统"},campaignDetail:{marketingActivities:"营销活动",statisticalReport:"统计报表",comeBack:"返回",userArrival:"用户到达",userClicks:"用户点击",sendDetails:"发送详情"},msg:{activity:"活动",sendProportion:"发送比例",deleteThisEvent:"删除此活动",activityTitle:"活动标题",activityTitle20:"新的活动标题(20个字符)",activityContent:"活动内容",newActivityContent50:"新的活动内容(50个字符)",newActivityContent100:"新的活动内容(100个字符)",borderOfActivity:"活动边框",noBorder:"无边框",whiteBorder:"白色边框",blackBorder:"黑色边框",customBorder:"自定义边框",borderColor:"边框颜色",patches:"色块",background:"背景图",whiteBackground:"白色背景",blackBackground:"黑色背景",greyBackground:"灰色背景",customGround:"自定义背景",backGroundValue:"背景色值",fontColorValues:"Font color values",wakeUpTheScreen:"屏幕唤醒",wakeUp:"唤醒",notToWakeUp:"不唤醒",messageRingtone:"消息铃声",ringtone:"响铃",noRingtone:"不响铃",vibrateOnMessage:"消息振动",vibrate:"振动",notVibrate:"不振动",deleteMessage:"删除消息",toDelete:"可删除",notToDelete:"不可删除",image:"图片",icon:"图标",slideToUnlock:"滑动来解锁",gameName:"游戏名称",scheme:"方案",total:"总计"},buttons:{add:"添加",edit:"编辑",del:"删除",cancel:"取消",view:"查看",viewReport:"查看报表",confirmAndUpdate:"确认并更新",saveAndNext:"保存并下一步",confirmedSend:"确认无误，立即发送",back:"返回上一步",clickConversionRate:"点击转化率",addIcons:"添加自定义状态图标",custom:"自定义",deleteIcon:"删除图标",predictionIcon:"预测状态图标",playersAre:"玩家是",addConditions:"增加条件"},tips:{tips:"贴士",bindingNow:"立即绑定",bindingNow1:"您尚未绑定三方推送服务，是否立即绑定?",pushingService:"为什么要绑定三方推送服务才能进行营销活动?",content1:"我们并不提供消息推送服务或类似服务，需要您提供您的推送服务授权。点击下面立即绑定按钮，按照提示操作即可。",content2:"您尚未上传苹果通知推送证书，是否立即上传?",content3:"为什么要上传苹果通知推送证书才能进行营销活动?",content4:"证书是苹果公司提供APNS服务必要条件，分开发证书和生产证书两种，您需要提供证书才能正常使用营销活动。",content5:"根据近期行为表现，预测有较高几率会流失的玩家。",content6:"根据近期行为表现，有较高几率会流失的付费玩家。",content7:"依据在各类游戏中的付费表现，很可能会付费的玩家。",content8:"在各类游戏中付费很高，很可能成为大R的玩家。",content9:"对推送有较强骚扰耐性，不易因反感而流失的玩家。",notBlank:"不能为空",checking:"火速验证中",bindingSuccess:"绑定成功",activityNameNot:"请输入活动名称!",checkKey:"Key is invalid, please fill in the valid key."},conditions:{accountRegistration:"账号注册",had:"有",hadNo:"没有",registratedAnAccount:"进行账户注册的玩家",gameVersion:"游戏版本",installedVersion:"当前安装的游戏版本",paymentAmount:"付费额度",theWholeLifetime:"全生命期",last:"近",days:"日",last3Days:"近3日",last7Days:"近7日",last14Days:"近14日",last30Days:"近30日",last90Days:"近90日",thePayAmountOfPlayerIs:"付费金额",rangefrom:"金额为0-100000的整数",during:"在",paymentRanking:"付费排名",revenueOfThePlayersIsOnThe:"付费金额排名",players:"玩家",rechargeTimes:"付费次数",IntegerRangefrom:"0-1000的整数",level:"等级范围",LevelIs:"当前等级",playerFrequency:"游戏频度",duringLast:"在最近的",gamePlayTime:"天平均每天玩游戏",activeStatus:"活跃情况",daysPlay:"天中，共有",days:"天登录游戏的玩家",churnStatus:"流失情况",noLoginInPassed:"至今连续",notLoggedGamers:"天以上未登陆游戏的玩家",stageAndMission:"关卡任务",PlayersWhoseFinishedTheStage:"成功通过关卡任务",conducted:"进行过",notConduct:"未进行过",successfully:"成功通过",notBy:"未通过",device:"机型",usingDevice:"设备机型",is:"是",isNot:"不是",selectDevice:"选择机型",acquisitionTime:"新增时期",acquiredFrom:"玩家新增时期是",to:"到",os:"操作系统",deviceOS:"设备操作系统",selectOperatingSystem:"选择系统",channels:"渠道来源",theNewPlayerAcquired:"玩家的来源渠道",platform:"平台",gender:"性别",genderIs:"性别为",male:"男",female:"女",playerDuration:"游戏时长",minutes:"分钟的玩家",jailbreak:"越狱破解",playersJailbreak:"越狱设备的玩家",playerRegion:"国家",thePlayersRegionIs:"玩家国家是",countryOfPlayers:"新增国家"},country:{China:"中国",Afghanistan:"阿富汗",Anguilla:"安圭拉",Armenia:"亚美尼亚",Argentina:"阿根廷",Aruba:"阿鲁巴",Australia:"澳大利亚",Austria:"奥地利",Azerbaijan:"阿塞拜疆",Bahamas:"巴哈马",Bahrain:"巴林",Bangladesh:"孟加拉",Barbados:"巴巴多斯",Belarus:"白俄罗斯",Belgium:"比利时",Belize:"伯利兹",Benin:"贝宁",Bermuda:"百慕大",Bhutan:"不丹",Bolivia:"玻利维亚",Bouvet:"布维岛",Brazil:"巴西",British:"英属印度洋领地",VirginIslands:"英属维尔京群岛",Brunei:"文莱",Bulgaria:"保加利亚",BurkinaFaso:"布基纳法索",Burundi:"布隆迪",Cambodia:"柬埔寨",Cameroon:"喀麦隆",Canada:"加拿大",CapeVerde:"佛得角",CaymanIslands:"开曼群岛",CentralAfrica:"中非共和国",Chad:"乍得",Chile:"智利",Columbia:"哥伦比亚",Comoros:"科摩罗",Congo:"刚果",CostaRica:"哥斯达黎加",CotedIvoire:"科特迪瓦哈加格",Croatia:"克罗地亚",Cyprus:"塞浦路斯",Czech:"捷克",Denmark:"丹麦",Djibouti:"吉布提",Dominica:"多米尼克",Dominican:"多米尼加",Egypt:"埃及",ElSalvador:"萨尔瓦多",Ecuador:"厄瓜多尔",Equatorial:"赤道几内亚",Eritrea:"厄立特里亚",Estonia:"爱沙尼亚",Ethiopia:"埃塞俄比亚",FalklandIslands:"福克兰群岛",FaroeIslands:"法罗群岛",Micronesia:"密克罗尼西亚联邦",Fiji:"斐济",Finland:"芬兰",France:"法国",Guiana:"法属圭亚那",Polynesia:"法属波利尼西亚",Gabon:"加蓬",Gambia:"冈比亚",Georgia:"格鲁吉亚",Germany:"德国",Ghana:"加纳",Gibraltar:"直布罗陀",Greece:"希腊",Greenland:"格陵兰",Grenada:"格林纳达",Guadeloupe:"瓜德罗普岛",Guam:"关岛",Guatemala:"危地马拉",Guinea:"几内亚",Guineabissau:"几内亚比绍",Guyana:"圭亚那",Haiti:"海地",Honduras:"洪都拉斯",HongKong:"香港",Hungary:"匈牙利",Iceland:"冰岛",India:"印度",Indonesia:"印尼",Ireland:"爱尔兰",Israel:"以色列",Italy:"意大利",Jamaica:"牙买加",Japan:"日本",Jordan:"约旦",Kazakstan:"哈萨克斯坦",Kenya:"肯尼亚",Kiribati:"基里巴斯",Kuwait:"科威特",Kyrgyzstan:"吉尔吉斯斯坦",Lao:"老挝",Latvia:"拉脱维亚",Lebanon:"黎巴嫩",Lesotho:"莱索托",Liberia:"利比里亚",Liechtenstein:"列支敦士登",Lithuania:"立陶宛",Luxembourg:"卢森堡",Macau:"澳门",Madagascar:"马达加斯加",Malawi:"马拉维",Malaysia:"马来西亚",Maldives:"马尔代夫",Mali:"马里",Malta:"马耳他",Marshall:"马绍尔群岛",Martinique:"马提尼克岛",Mauritania:"毛里塔尼亚",Mayotte:"马约特",FrenchPolynesia:"法属美特罗波利坦",Mexico:"墨西哥",Moldova:"摩尔多瓦",Mongolia:"蒙古",Morocco:"摩洛哥",Mozambique:"莫桑比克",Namibia:"纳米比亚",Nauru:"瑙鲁",Nepal:"尼泊尔",NetherlandsAntilles:"荷属安地列斯群岛",Netherlands:"荷兰",NewCaledonia:"新喀里多",NewZealand:"新西兰",Nicaragua:"尼加拉瓜",Niger:"尼日尔",Nigeria:"尼日利亚",NorthernMarianasIslands:"北马里亚纳群岛",Norway:"挪威",Oman:"阿曼",Pakistan:"巴基斯坦",Palau:"帕劳",Panama:"巴拿马",PapuaNewGuinea:"巴布亚新几内亚",Paraguay:"巴拉圭",Peru:"秘鲁",Philippines:"菲律宾",Pitcairn:"皮特凯恩群岛",Poland:"波兰",Portugal:"葡萄牙",PuertoRico:"波多黎各",Qatar:"卡塔尔",KoreaofRepublic:"韩国",Macedonia:"马其顿",Reunion:"留尼旺",Romania:"罗马尼亚",Russia:"俄罗斯",SaoTomeandPrincipe:"圣多美和普林西比",SaudiArabia:"沙特阿拉伯",Senegal:"塞内加尔",Seychelles:"塞舌尔",Singapore:"新加坡",Slovakia:"斯洛伐克",Slovenia:"斯洛文尼亚",SolomonIslands:"所罗门群岛",Somalia:"索马里",SouthAfrica:"南非",Spain:"西班牙",SriLanka:"斯里兰卡",SaintHelena:"圣赫勒拿",SaintKittsandNevis:"圣基茨和尼维斯",SaintLucia:"圣露西亚",SaintVincentandGrenadines:"圣文森特和格林纳丁斯",Sudan:"苏丹",Suriname:"苏里南",SvalbardandJanMayen:"斯瓦尔巴和扬马延岛",Swaziland:"斯威士兰",Sweden:"瑞典",Switzerland:"瑞士",Syria:"叙利亚",Taiwan:"台湾",Tajikistan:"塔吉克斯坦",Tanzania:"坦桑尼亚",Thailand:"泰国",Togo:"多哥",Tonga:"汤加",TrinidadandTobago:"特立尼达和多巴哥",Turkey:"土耳其",Turkmenstan:"土库曼斯坦",TurksandCaicosIslands:"特克斯和凯科斯群岛",Tuvalu:"图瓦卢",Uganda:"乌干达",Ukraine:"乌克兰",UnitedArabEmirates:"阿拉伯联合酋长国",UnitedKingdom:"英国",UnitedStates:"美国",Uruguay:"乌拉圭",Uzbekistan:"乌兹别克斯坦",Vanuatu:"瓦努阿图",Vatican:"梵蒂冈",Venezuela:"委内瑞拉",VietNam:"越南",WesternSahara:"西撒哈拉",Yemen:"也门",Yugoslavia:"南斯拉夫",Zaire:"扎伊尔",Zambia:"赞比亚",Zimbabwe:"津巴布韦",Korea:"朝鲜",Albania:"阿尔巴尼亚",Angola:"安哥拉",Algeria:"阿尔及利亚",Iraq:"伊拉克",Iran:"伊朗",Libya:"利比亚",Myanmar:"缅甸",Mauritius:"毛里求斯",Rwanda:"卢旺达",Tunisia:"突尼斯"},commons:{date:"日期",numberArrival:"到达数",messageClick:"点击数",Retransmitted:"已重发",CanNot100Characters:"不能大于100个字符",CanNot50Characters:"不能大于50个字符",CanNot20Characters:"不能大于20个字符",CanNot10Characters:"不能大于10个字符",alreadyExists:"已经存在",pushConditions:"所选推送人群满足下述全部条件",selectPlatform:"请选择平台",serverIsBusy:"服务器忙，请稍后再试!",deletedSuccessfully:"删除成功",update:"修改成功",information:"当前产品的该filter没有值！"},status:{draft:"草稿",plan:"计划中",waitingInLine:"排队等待",run:"执行中",partiallySuccessful:"部分成功",complete:"完成",failure:"失败","delete":"删除"}}),define("nls/zh_cn/gameI18N",["nls/zh_cn/gameCommon","nls/zh_cn/concurrent","nls/zh_cn/customEvent","nls/zh_cn/developer","nls/zh_cn/level","nls/zh_cn/partnerExtention","nls/zh_cn/permission","nls/zh_cn/play","nls/zh_cn/player","nls/zh_cn/product","nls/zh_cn/public","nls/zh_cn/revenue","nls/zh_cn/summary","nls/zh_cn/virtualEconomy","nls/zh_cn/whale","nls/zh_cn/analysisTools","nls/zh_cn/indicator","nls/zh_cn/indicatorTip","nls/zh_cn/warning","nls/zh_cn/daySummary","nls/zh_cn/operations"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){return{GameCommon:e,Concurrent:t,CustomEvent:n,Developer:r,Level:i,PartnerExtention:s,Permission:o,Play:u,Player:a,Product:f,Public:l,Revenue:c,Summary:h,VirtualEconomy:p,Whale:d,AnalysisTools:v,Indicator:m,IndicatorTip:g,Warning:y,DaySummary:b,Operations:w}});